<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Example Player with Custom Control</title>
    <meta name="description" content=""/>

    <!--Including skin1 of the player's default skins.-->
    <link rel="stylesheet" href="skins/skin1/css/styles.css">

    <!--Styles, no need for these to be inline, just for simplicity in demoing-->
    <style>
        .share-link {
            color: #ffffff;
            order: 9
        }
    </style>

    <!-- Add polyfill.js for IE 10 -->
    <script src="libs/polyfills.js"></script>

    <!--Script include for the primetime tv sdk and associated dependencies-->
    <script src="../../frameworks/player/dash.min.js"></script>
    <script src="../../frameworks/player/primetimemain.min.js"></script>
    <script src="../../frameworks/player/swfobject.js"></script>
    <script src="../../frameworks/player/primetimeei.min.js"></script>
	<script src="../../frameworks/player/primetimeva.min.js"></script>

    <!--Script include for the primetime visual api and associated dependencies-->
    <script src="libs/primetimevisualapi.min.js"></script>

    <script>
        function onload() {
			var swfPath = "../../frameworks/player/",
					authorizationTokenPath = "../../frameworks/player/token/",
					authorizationTokenFilename = "hlsaf_localhost.swf",
					authorizationTokenType = "SWF";

            // See JSDocs for AdobePSDK for API description
            // Set relative or http path to directory containing SWF.
            // Defaults to current directory for the html page.
            AdobePSDK.setSWFPath(swfPath);

            // Set the relative or http path to directory containing token file(s).
            // Defaults to SWFPath + "token/".
            AdobePSDK.setAuthorizationTokenPath(authorizationTokenPath);

            // Set the name of the token file, do not include any path in this string.
            AdobePSDK.setAuthorizationTokenFilename(authorizationTokenFilename);

            //Set the token type, "DAT" or "SWF". Defaults to "DAT"
            AdobePSDK.setAuthorizationTokenType(authorizationTokenType);

            //uses a CSS id selector to select the div with the id of videoHolder, but any CSS selector will work
            //then passes a reference to the video's root element (in this case the videoHolder div) to the videoPlayer function
            //this function returns a reference to the public API of the videoBehavior, which allows programmatic manipulation of the
            //video and playback

            //In this example, default configuration is also being provided by the second argument to the videoPlayer function, the config
            //object. The config object is a tree structure, allowing properties to be configured on multiple levels with a single config
            //file. Here it is shown inline but, as it is a simple JS object, it can be provided by loading an external file, a service call
            //or other mechanism of your choosing
            var player = ptp.videoPlayer('#videoHolder', {
                //well-known key for configuring the player instance itself
                player: {
                    //provide a starting mediaResource. In this case the configuration is a simple string, treated as a URI, to load.
                    mediaResource: 'http://de9b7h88wgj5l.cloudfront.net/static/flashmedia/VideoTeam/Media_Source/adobe-ad/1_adobe_ad1_31_1240.mp4'
                },
                //well-known key for configuring the default controlBar instance
                controlBar: {
                    //user defined key, can be any valid JavaScript variable name
                    //the key itself is only used if one needs to programmaticly access this behavior, else the name itself is irrelevant
                    //however, the names chosen must be unique across the player instance so, you cannot have two named 'controlBar'
                    myShareButton: {
                        //the behavior node at any level defines a behavior, which, in its simplest form is a function
                        //accepting up to three arguments,
                        //          element - an optional HTML element (which is a DOM element that this behavior may optionally manage
                        //          configuration - the configuration node, so by way of example this behavior would receive the entire myShareButton object
                        //          player - a reference to the player (videoBehavior) which is the behavior defined to manage the video element and interact
                        //  the behavior function is expected to return an object
                        behavior: nameForMyBehavior,
                        //the element is is an optional key defining a function which will return the element that the behavior will receive as it's first
                        //argument and may act upon. the element key may be a :
                        //      a string, such as an id selector '#place', in which case the framework will wrap it in a function for the user
                        //      a reference to an element, such as the return from manually resolving an element, in which case the framework will wrap it in a function for the user
                        //      a function, which either retrieves or creates the element. The framework commonly uses this pattern to build elements that are needed
                        //  In this case, the createButton helper function is being used to create a new control, under the control bar, with the name Share Link
                        //  this function is provided as a convenience and creates a button at a given location, but the user is under no obligation to use it
                        //  and may create the element in any way they choose. One advantage of passing a function is that the function is guaranteed to be invoked
                        //  after the parent behavior has been created, so one can use use CSS selectors to locate their place in the DOM tree
                        element: ptp.createButton('Share Link', '.ptp-control-bar', 'ptp-control ptp-btn-control ptp-button-background share-link'),
                        //a default list of class names to apply. This will likely be refactored slightly in future versions so documentation will remain sparse
                        classNames: ''
                    }
                }
            });

            //A sample behavior function as referenced from the above configuration.
            //element - will contain the resolved reference to the element as defined in the configuration above
            //          by way of example, this means that element here will contain a reference to the element created by invoking the createButton() function
            //configuration - will contain the entire configuration node for this behavior. By way of example, the myShareButton key and all of its children in
            //          the example above
            //player -  a reference to the videoBehavior, where the programmatic API for the video player is defined.
            function nameForMyBehavior(element, configuration, player) {

                //A function which will be called when this element is clicked
                function clickHandler(event) {
                    //Call the pause function on the videoBehavior's public API
                    player.pause();

                    alert("Here is some URL to share for this video");

                    //resume playing when the sharings done
                    player.play();
                }

                //This particular behavior will be a composition of the methods we define in this function composed with the
                //the existing functionality contained within the component behavior. The component behavior is a further composition
                //of event dispatching, enable/disable functionality and basic click handling
                //in this way behaviors are composed of tiny little existing or new behaviors to stay light weight but contain needed functionality
                //one does not need to use the component behavior at all. simply returning a function that will be called when it is time to initialize
                //this behavior will suffice if the behaviors defined in component are not needed
                return ptp.component(element, configuration, player, clickHandler);
            }
        }
    </script>
</head>
<body onload="onload();">
    <!--Defines a div to hold the video content. This div will serve as the display root for all video related objects-->
    <div id="videoHolder"></div>
</body>

</html>
