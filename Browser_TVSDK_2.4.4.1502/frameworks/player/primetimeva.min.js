!function(c){if("undefined"==typeof g)var g={};if("undefined"==typeof f)var f={};if("undefined"==typeof p)var p={};if(p.radio||(p.radio={}),p.plugin||(p.plugin={}),"undefined"==typeof a)var a={};a.clock||(a.clock={});(function(a){function b(b,e){var a=(65535&b)+(65535&e);return(b>>16)+(e>>16)+(a>>16)<<16|65535&a}function h(e,a,d,h,f,c){e=b(b(a,e),b(h,c));return b(e<<f|e>>>32-f,d)}function e(b,e,a,d,f,c,p){return h(e&a|~e&d,b,e,f,c,p)}function f(b,e,a,d,c,p,k){return h(e&d|a&~d,b,e,c,p,k)}function c(b,
e,a,d,f,p,k){return h(a^(e|~d),b,e,f,p,k)}function p(a,d){a[d>>5]|=128<<d%32;a[(d+64>>>9<<4)+14]=d;var k,m,t,y,g,n=1732584193,l=-271733879,q=-1732584194,r=271733878;for(k=0;k<a.length;k+=16)m=n,t=l,y=q,g=r,n=e(n,l,q,r,a[k],7,-680876936),r=e(r,n,l,q,a[k+1],12,-389564586),q=e(q,r,n,l,a[k+2],17,606105819),l=e(l,q,r,n,a[k+3],22,-1044525330),n=e(n,l,q,r,a[k+4],7,-176418897),r=e(r,n,l,q,a[k+5],12,1200080426),q=e(q,r,n,l,a[k+6],17,-1473231341),l=e(l,q,r,n,a[k+7],22,-45705983),n=e(n,l,q,r,a[k+8],7,1770035416),
r=e(r,n,l,q,a[k+9],12,-1958414417),q=e(q,r,n,l,a[k+10],17,-42063),l=e(l,q,r,n,a[k+11],22,-1990404162),n=e(n,l,q,r,a[k+12],7,1804603682),r=e(r,n,l,q,a[k+13],12,-40341101),q=e(q,r,n,l,a[k+14],17,-1502002290),l=e(l,q,r,n,a[k+15],22,1236535329),n=f(n,l,q,r,a[k+1],5,-165796510),r=f(r,n,l,q,a[k+6],9,-1069501632),q=f(q,r,n,l,a[k+11],14,643717713),l=f(l,q,r,n,a[k],20,-373897302),n=f(n,l,q,r,a[k+5],5,-701558691),r=f(r,n,l,q,a[k+10],9,38016083),q=f(q,r,n,l,a[k+15],14,-660478335),l=f(l,q,r,n,a[k+4],20,-405537848),
n=f(n,l,q,r,a[k+9],5,568446438),r=f(r,n,l,q,a[k+14],9,-1019803690),q=f(q,r,n,l,a[k+3],14,-187363961),l=f(l,q,r,n,a[k+8],20,1163531501),n=f(n,l,q,r,a[k+13],5,-1444681467),r=f(r,n,l,q,a[k+2],9,-51403784),q=f(q,r,n,l,a[k+7],14,1735328473),l=f(l,q,r,n,a[k+12],20,-1926607734),n=h(l^q^r,n,l,a[k+5],4,-378558),r=h(n^l^q,r,n,a[k+8],11,-2022574463),q=h(r^n^l,q,r,a[k+11],16,1839030562),l=h(q^r^n,l,q,a[k+14],23,-35309556),n=h(l^q^r,n,l,a[k+1],4,-1530992060),r=h(n^l^q,r,n,a[k+4],11,1272893353),q=h(r^n^l,q,r,a[k+
7],16,-155497632),l=h(q^r^n,l,q,a[k+10],23,-1094730640),n=h(l^q^r,n,l,a[k+13],4,681279174),r=h(n^l^q,r,n,a[k],11,-358537222),q=h(r^n^l,q,r,a[k+3],16,-722521979),l=h(q^r^n,l,q,a[k+6],23,76029189),n=h(l^q^r,n,l,a[k+9],4,-640364487),r=h(n^l^q,r,n,a[k+12],11,-421815835),q=h(r^n^l,q,r,a[k+15],16,530742520),l=h(q^r^n,l,q,a[k+2],23,-995338651),n=c(n,l,q,r,a[k],6,-198630844),r=c(r,n,l,q,a[k+7],10,1126891415),q=c(q,r,n,l,a[k+14],15,-1416354905),l=c(l,q,r,n,a[k+5],21,-57434055),n=c(n,l,q,r,a[k+12],6,1700485571),
r=c(r,n,l,q,a[k+3],10,-1894986606),q=c(q,r,n,l,a[k+10],15,-1051523),l=c(l,q,r,n,a[k+1],21,-2054922799),n=c(n,l,q,r,a[k+8],6,1873313359),r=c(r,n,l,q,a[k+15],10,-30611744),q=c(q,r,n,l,a[k+6],15,-1560198380),l=c(l,q,r,n,a[k+13],21,1309151649),n=c(n,l,q,r,a[k+4],6,-145523070),r=c(r,n,l,q,a[k+11],10,-1120210379),q=c(q,r,n,l,a[k+2],15,718787259),l=c(l,q,r,n,a[k+9],21,-343485551),n=b(n,m),l=b(l,t),q=b(q,y),r=b(r,g);return[n,l,q,r]}function k(a){var b,e="";for(b=0;b<32*a.length;b+=8)e+=String.fromCharCode(a[b>>
5]>>>b%32&255);return e}function g(b){var a,e=[];e[(b.length>>2)-1]=void 0;for(a=0;a<e.length;a+=1)e[a]=0;for(a=0;a<8*b.length;a+=8)e[a>>5]|=(255&b.charCodeAt(a/8))<<a%32;return e}function z(a){return k(p(g(a),8*a.length))}function v(a,b){var e,d,h=g(a),f=[],c=[];f[15]=c[15]=void 0;16<h.length&&(h=p(h,8*a.length));for(e=0;16>e;e+=1)f[e]=909522486^h[e],c[e]=1549556828^h[e];return d=p(f.concat(g(b)),512+8*b.length),k(p(c.concat(d),640))}function x(a){var e,b,d="";for(b=0;b<a.length;b+=1)e=a.charCodeAt(b),
d+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return d}a.md5=function(a,e,b){e?b?a=v(unescape(encodeURIComponent(e)),unescape(encodeURIComponent(a))):(a=v(unescape(encodeURIComponent(e)),unescape(encodeURIComponent(a))),a=x(a)):a=b?z(unescape(encodeURIComponent(a))):x(z(unescape(encodeURIComponent(a))));return a}})(g);(function(a){a.StringUtils={startsWith:function(a,d){return 0==a.indexOf(d)}}})(g);(function(a){var b={clone:function(a){var e={},b;for(b in a)a.hasOwnProperty(b)&&
(e[b]=a[b]);return e},merge:function(a,e){var d=b.clone(a),f;for(f in e)e.hasOwnProperty(f)&&(d[f]=e[f]);return d}};a.ObjectUtils=b})(g);(function(a){function b(a,b,d){this.fn=a;this.ctx=b;this.params=d}b.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)};a.radio.Command=b})(p);(function(a){function b(a,b){this._queue=[];this._lastTs=0;this._isSuspended="undefined"!=typeof a&&a;this._delay="undefined"!=typeof b?b:0}b.prototype.addCommand=function(a){this._queue.push(a);
this._drain()};b.prototype.cancelAllCommands=function(){this._queue=[]};b.prototype.isEmpty=function(){return 0===this._queue.length};b.prototype.suspend=function(){this._isSuspended=!0};b.prototype.resume=function(){this._isSuspended=!1;this._drain()};b.prototype.flush=function(){this._isSuspended=!1;for(var a=0;a<this._queue.length;a++)this._queue[a].run();this._queue=[]};b.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var a=this;!function F(){var b=
a._queue.shift();b?a._runCommand(b,function(){a._isSuspended||F()}):a._drainInProgress=!1}()}};b.prototype._runCommand=function(a,b){function d(){a.run();null!=b&&b.call(f)}var f=this;if(0==this._lastTs)d();else{var c=(new Date).getTime(),k=c-this._lastTs;this._lastTs=c;k<this._delay?setTimeout(d,this._delay-k):d()}};a.radio.CommandQueue=b})(p);(function(a){function b(a,b){if(this._name=a,!b)throw Error("Reference to the logger object cannot be NULL");this._logger=b;this._listeners={};this._requests=
{};this._commands={};this._isShutDown=!1}b.WILDCARD="*";b.SEPARATOR=":";b.prototype.toString=function(){return"<channel: "+this._name+">"};b.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(h,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)};b.prototype.on=function(a,b,d){this._isShutDown||(this._listeners[a]||(this._listeners[a]=[]),this._listeners[a].push({fn:b,ctx:d}))};b.prototype.off=function(a,b,d){if(!this._isShutDown){if(b=
"function"==typeof b?b:null,!a&&null==b&&!d)return void(this._listeners={});if(a)this._removeListener(a,b,d);else for(a in this._listeners)this._listeners.hasOwnProperty(a)&&this._removeListener(a,b,d)}};b.prototype.trigger=function(a){if(!this._isShutDown)for(var d in this._listeners){var h;if(h=this._listeners.hasOwnProperty(d)){var f=a.name;if(d===f)h=!0;else{h=(d||"").split(b.SEPARATOR);for(var f=(f||"").split(b.SEPARATOR),k=!0,c=0;c<h.length;c++)k=k&&(h[c]===b.WILDCARD||h[c]===f[c]);h=k}}if(h)for(h=
this._listeners[d].slice(0),f=0;f<h.length;f++)k=h[f],k.fn.call(k.ctx,a)}};b.prototype.comply=function(a,b,d){this._isShutDown||(this._commands[a]={cmd:b,ctx:d})};b.prototype.command=function(a,b){if(!this._isShutDown){var d=this._commands[a];return d?void d.cmd.call(d.ctx,b):void this._logger.warn(h,"#command > No command handler for: "+a)}};b.prototype.reply=function(a,b,d){this._isShutDown||(this._requests[a]={fn:b,ctx:d})};b.prototype.request=function(a){if(!this._isShutDown){var b=this._requests[a];
return b?b.fn.call(b.ctx):(this._logger.warn(h,"#request > No request handler for: "+a),null)}};b.prototype._removeListener=function(a,b,d){b="function"==typeof b?b:null;var h=this._listeners[a];if(h){if(!h.length||null==b&&!d)return void delete this._listeners[a];for(var f=0;f<h.length;f++){var c=h[f];null!==b&&b!==c.fn||d&&d!==c.ctx||this._listeners[a].splice(f,1)}}};var h="radio::Channel";a.radio.Channel=b})(p);(function(a){function b(a){if(!a)throw Error("Reference to the logger object cannot be NULL");
this._logger=a;this._channels={}}var h=a.radio.Channel;b.prototype.channel=function(a){return this._channels[a]||(this._channels[a]=new h(a,this._logger)),this._channels[a]};b.prototype.shutdown=function(){for(var a in this._channels)this._channels.hasOwnProperty(a)&&this._channels[a].shutdown()};a.radio.Radio=b})(p);(function(a){a.extend=function(a,d){function e(){this.constructor=a}for(var f in d)d.hasOwnProperty(f)&&(a[f]=d[f]);return e.prototype=d.prototype,a.prototype=new e,a.__super__=d.prototype,
a}})(p);(function(a){function b(){}b.prototype.write=function(a){throw Error("Implementation error: Method must be overridden.");};a.ILogWriter=b})(p);(function(a){function b(){}b.prototype.write=function(a){window.console&&window.console.log&&window.console.log(a)};a.LogWriter=b})(p);(function(a){function b(){}b.prototype.setLogWriter=function(a){throw Error("Implementation error: Method must be overridden.");};b.prototype.getLogWriter=function(){throw Error("Implementation error: Method must be overridden.");
};b.prototype.getEnabled=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.enable=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.disable=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.debug=function(a,b){throw Error("Implementation error: Method must be overridden.");};b.prototype.info=function(a,b){throw Error("Implementation error: Method must be overridden.");};b.prototype.warn=
function(a,b){throw Error("Implementation error: Method must be overridden.");};b.prototype.error=function(a,b){throw Error("Implementation error: Method must be overridden.");};a.ILogger=b})(p);(function(a){function b(){this._logWriter=new h}var h=a.LogWriter;b.prototype.setLogWriter=function(a){if(!a)throw Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=a;this._enabled=!1};b.prototype.getLogWriter=function(){return this._logWriter};b.prototype.getEnabled=function(){return this._enabled};
b.prototype.enable=function(){this._enabled=!0};b.prototype.disable=function(){this._enabled=!1};b.prototype.debug=function(a,b){this._log(a,f,b)};b.prototype.info=function(a,b){this._log(a,e,b)};b.prototype.warn=function(a,b){this._log(a,c,b)};b.prototype.error=function(a,b){this._log(a,p,b)};b.prototype._log=function(a,b,e){if(b==p||this._enabled){var d=new Date,h="",f="["+d.toTimeString()+".",d=d.getMilliseconds();a=h+(f+(10>d?"00"+d:100>d?"0"+d:""+d)+"] ["+b+"] ")+("["+a+"] "+e);this._logWriter.write(a)}};
var e="INFO",f="DEBUG",c="WARN",p="ERROR";a.Logger=b})(p);(function(a){function b(a,b){this._pluginName=a;this._eventName=b}var h=a.radio.Channel;b.prototype.getPluginName=function(){return this._pluginName};b.prototype.getEventName=function(){return this._eventName};b.prototype.getName=function(){return this._pluginName+h.SEPARATOR+this._eventName};a.Trigger=b})(p);(function(a){function b(a,b){this.name=a;this.data=b}b.SUCCESS="success";b.ERROR="error";b.createFromTrigger=function(a){return new b(a.getName())};
a.Event=b})(p);(function(a){function b(){this._events={}}b.prototype.addEventListener=function(a,b,d){a&&b&&(d=d||window,this._events[a]=this._events[a]||[],this._events[a].push({cb:b,ctx:d}))};b.prototype.removeEventListener=function(a,b,d){if(a&&b){d=d||window;var f,c=!1;for(f in this._events)if(a===f){c=!0;break}if(c){for(a=this._events[f].length-1;0<=a;a--)c=this._events[f][a],b===c.cb&&d===c.ctx&&this._events[f].splice(a,1);this._events[f].length||delete this._events[f]}}};b.prototype.dispatchEvent=
function(a){if(a.name)for(var b in this._events)if(this._events.hasOwnProperty(b)&&a.name===b){var d=this._events[b].slice(0),f=d.length;for(b=0;b<f;b++)d[b].cb.call(d[b].ctx,a);break}};b.prototype.removeAllListeners=function(a){if(a){var b,d;for(d in this._events)if(this._events.hasOwnProperty(d)){for(b=this._events[d].length-1;0<=b;b--)this._events[d][b].ctx===a&&this._events[d].splice(b,1);this._events[d].length||delete this._events[d]}}else this._events={}};a.EventDispatcher=b})(p);(function(a){function b(){}
function h(){h.__super__.constructor.call(this);this._connection=null}var e=a.Event,f=a.EventDispatcher;b.GET="GET";h.RESPONSE="response";h.INSTANCE="instance";a.extend(h,f);h.prototype.close=function(){this.removeAllListeners(null)};h.prototype.load=function(a){a&&a.method&&a.url&&(a._xmlhttp=this._createCORSRequest(a),a._xmlhttp?a._xmlhttp.send():this._loadImage(a))};h.prototype._createCORSRequest=function(a){var b=null;if("undefined"!=typeof window.XMLHttpRequest){var d=new window.XMLHttpRequest;
"withCredentials"in d&&(b=d,b.open(a.method,a.url,!0))}if(null==b&&"undefined"!=typeof window.XDomainRequest&&(b=new window.XDomainRequest,b.open(a.method,a.url)),b){var f={};f[h.INSTANCE]=this;var c=this;b.onload=function(){return b.status&&400<=parseInt(b.status,10)?this.onerror():(f[h.RESPONSE]=b.responseText,void c.dispatchEvent(new e(e.SUCCESS,f)))};b.onerror=function(){c.dispatchEvent(new e(e.ERROR,f))}}return b};h.prototype._loadImage=function(a){this._connection||(this._connection=new Image,
this._connection.alt="");this._connection.src=a.url;a={};a[h.RESPONSE]="";a[h.INSTANCE]=this;this.dispatchEvent(new e(e.SUCCESS,a))};a.URLRequestMethod=b;a.URLRequest=function(a,b){this.url=a||null;this.method=b;this._xmlhttp=null};a.URLLoader=h})(p);(function(a){var b={getVersion:function(){return"js-n-2.0.2.99-f409a8"},getMajor:function(){return b.getNumberAtPosition(0)},getMinor:function(){return b.getNumberAtPosition(1)},getMicro:function(){return b.getNumberAtPosition(2)},getPatch:function(){return b.getNumberAtPosition(3)},
getBuild:function(){return"f409a8"},getApiLevel:function(){return 4},getNumberAtPosition:function(a){return["2","0","2","99"][a]}};a.Version=b})(f);(function(a){function b(a,b){this._message=a;this._details=b}b.prototype.getMessage=function(){return this._message};b.prototype.getDetails=function(){return this._details};a.ErrorInfo=b})(f);(function(a){a.HeartbeatConfig=function(){this.debugLogging=!1}})(f);(function(a){function b(){}b.prototype.onError=function(a){};a.HeartbeatDelegate=b})(f);(function(a){function b(){}
b.prototype.configure=function(a){throw Error("Implementation error: Method must be overridden.");};b.prototype.bootstrap=function(a){throw Error("Implementation error: Method must be overridden.");};b.prototype.setup=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.destroy=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.enable=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.disable=
function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.getName=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.isInitialized=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.resolveData=function(a){throw Error("Implementation error: Method must be overridden.");};a.plugin.IPlugin=b})(p);(function(a){function b(a,b,d,h){this.trigger=a;this.action=d;this.plugin=b;this._paramMappings={};
this.mergeParams(h)}var h=a.plugin.ParamMapping;b.prototype.mergeParams=function(a){if(a)for(var b=0;b<a.length;b++){var d=a[b];this._paramMappings[d.getKeyName()]=d}};b.prototype.getParams=function(){var a=[],b;for(b in this._paramMappings)this._paramMappings.hasOwnProperty(b)&&a.push(this._paramMappings[b]);return a};b.prototype.addParam=function(a){this._paramMappings[a.getKeyName()]=a};b.prototype.removeParam=function(a,b){var d=new h(a,b);this._paramMappings.hasOwnProperty(d.getKeyName())&&delete this._paramMappings[d.getKeyName()]};
a.plugin.Behaviour=b})(p);(function(a){function b(a,b,d){this._pluginName=a;this._key=b;this._paramName=d||a+h.SEPARATOR+b}var h=a.radio.Channel;b.prototype.getPluginName=function(){return this._pluginName};b.prototype.getKey=function(){return this._key};b.prototype.getKeyName=function(){return this._pluginName+h.SEPARATOR+this._key};b.prototype.getParamName=function(){return this._paramName};a.plugin.ParamMapping=b})(p);(function(a){function b(a){if(!a)throw Error("Reference to the logger object cannot be NULL");
this._logger=a;this._plugins={};this._behaviours={};this._radio=new e(this._logger);this._dataChannel=this._radio.channel(p);this._ctrlChannel=this._radio.channel(k)}var h=a.Event,e=a.radio.Radio,f=a.radio.Channel,c=a.plugin.Behaviour;b.ERROR="error";b.prototype.addPlugin=function(a){var b=a.getName();this._plugins[b]&&this._logger.warn(g,"#addPlugin > Replacing plugin: "+b);this._plugins[b]=a;a.bootstrap(this)};b.prototype.setupPlugins=function(){for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&
this._plugins[a].setup()};b.prototype.pluginExists=function(a){return!!this._plugins[a]};b.prototype.isPluginInitialized=function(a){return this._plugins[a]&&this._plugins[a].isInitialized()};b.prototype.on=function(a,b,d,e){this._dataChannel.on(a+f.SEPARATOR+b,d,e)};b.prototype.off=function(a,b,d,e){this._dataChannel.off(a&&b?a+f.SEPARATOR+b:null,d,e)};b.prototype.trigger=function(a){var b=this._behaviours[a.name];if(b){var d,e,f,h,c,k={},p={};for(d=0;d<b.length;d++)if(f=b[d],h=f.getParams())for(e=
0;e<h.length;e++)c=h[e],k[c.getPluginName()]=k[c.getPluginName()]||[],c.key in k[c.getPluginName()]||k[c.getPluginName()].push(c.getKey());for(var g in k)k.hasOwnProperty(g)&&(p[g]=this.request(g,k[g]));for(d=0;d<b.length;d++)if(f=b[d],k={_behaviour:f,_eventData:a.data||{}},h=f.getParams()){for(e=0;e<h.length;e++)c=h[e],k[c.getParamName()]=p[c.getPluginName()]?p[c.getPluginName()][c.getKey()]:null;this.command(f.plugin.getName(),f.action,k)}}this._dataChannel.trigger(a)};b.prototype.request=function(a,
b){var d=this._plugins[a];return d&&b&&0!=b.length?d.resolveData(b):null};b.prototype.raise=function(a){this._errorInfo=a;a=new h(b.ERROR,a);this._ctrlChannel.trigger(a)};b.prototype.getErrorInfo=function(){return this._errorInfo};b.prototype.destroy=function(){this._radio.shutdown();for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].destroy()};b.prototype.comply=function(a,b,d){this._dataChannel.comply(a.getName()+f.SEPARATOR+b,d,a)};b.prototype.command=function(a,b,d){this._dataChannel.command(a+
f.SEPARATOR+b,d)};b.prototype.registerBehaviour=function(a,b,d,e){var f=a.getName();a=new c(a,b,d,e);this._behaviours[f]=this._behaviours[f]||[];this._behaviours[f].push(a)};var p="data_channel",k="ctrl_channel",g="plugin::PluginManager";a.plugin.PluginManager=b})(p);(function(a,b){function f(a){this._name=a;this._isDestroyed=this._isInitialized=!1;this._isEnabled=!0;this._dataResolver={};this._logTag="plugin::"+this.getName();this._logger=new e}var e=a.Logger,c=a.Trigger,p=a.Event,g=b.ErrorInfo;
f.INITIALIZED="initialized";f.prototype.configure=function(a){};f.prototype.bootstrap=function(a){this._pluginManager=a;this._isDestroyed&&this._pluginManager.raise(new g("Invalid state.","Plugin already destroyed."))};f.prototype.setup=function(){this._trigger(f.INITIALIZED);this._isInitialized=!0};f.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())};f.prototype.enable=function(){this._isEnabled=!0;this._enabled()};f.prototype.disable=function(){this._isEnabled=
!1;this._disabled()};f.prototype.getName=function(){return this._name};f.prototype.getLogger=function(){return this._logger};f.prototype.isInitialized=function(){return this._isInitialized};f.prototype.resolveData=function(a){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,
a);var b=null;if(a)for(var d=0;d<a.length;d++){var e=a[d];this._dataResolver.hasOwnProperty(e)&&(b=b||{},"function"==typeof this._dataResolver[e]?b[e]=this._dataResolver[e].call(this):b[e]=this._dataResolver[e])}return b};f.prototype.toString=function(){return"<plugin: "+this._name+">"};f.prototype._enabled=function(){};f.prototype._disabled=function(){};f.prototype._teardown=function(){};f.prototype._canProcess=function(){return this._isEnabled?!this._isDestroyed||(this._logger.error(this._logTag,
"Plugin destroyed."),!1):(this._logger.error(this._logTag,"Plugin disabled."),!1)};f.prototype._trigger=function(a,b){var d=p.createFromTrigger(new c(this.getName(),a));d.data=b;this._pluginManager.trigger(d)};a.plugin.BasePlugin=f})(p,f);(function(a){function b(a,b,d){this.name=a;this.interval=b;this.isActive=!1;this.repeatCount="undefined"!=typeof d?d:c;this._nextTickTimestamp=0;this.reset()}function f(a,b){if(!a)throw Error("Reference to the ClockService object cannot be NULL");if(this._service=
a,!b)throw Error("Reference to the logger object cannot be NULL");this._logger=b;this._isDestroyed=!1;this._timers={};var d=this;this._clock=window.setInterval(function(){d._onTick()},1E3*p)}b.prototype.reset=function(){this.tick=0;this._createdTimestamp=(new Date).getTime();this._updateNextTickTimestamp()};b.prototype.shouldTick=function(){return(new Date).getTime()>this._nextTickTimestamp-p/2&&(this.tick++,this._updateNextTickTimestamp(),!0)};b.prototype._updateNextTickTimestamp=function(){this._nextTickTimestamp=
this._createdTimestamp+1E3*this.interval*(this.tick+1)};f.prototype.createTimer=function(a,d,e){this._timers[a]=new b(a,d,e)};f.prototype.destroyTimer=function(a){delete this._timers[a]};f.prototype.resumeTimer=function(a,b){b="undefined"!=typeof b&&b;this._logger.debug(e,"#resumeTimer(name="+a+", reset="+b+")");var d=this._timers[a];d&&(d.isActive=!0,b&&d.reset())};f.prototype.pauseTimer=function(a,b){b="undefined"!=typeof b&&b;this._logger.debug(e,"#pauseTimer(name="+a+", reset="+b+")");var d=this._timers[a];
d&&(d.isActive=!1,b&&d.reset())};f.prototype.isTimerPaused=function(a){a=this._timers[a];return!!a&&!a.isActive};f.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))};f.prototype._onTick=function(){for(var a in this._timers)if(this._timers.hasOwnProperty(a)){var b=this._timers[a];b.isActive&&b.shouldTick()&&(1<b.interval&&this._logger.debug(e,"#_onTick() > "+b.name+"("+b.tick+" | "+b.repeatCount+")"),0!=b.repeatCount?(this._service.onTick(b.name,
b.interval,b.tick),b.repeatCount!=c&&b.repeatCount--):this.destroyTimer(b.name))}};var e="service.clock::TimerManager",c=-1,p=.25;a.clock.TimerDescriptor=b;a.clock.TimerManager=f})(a);(function(a,b,f){function e(a){if(e.__super__.constructor.call(this,g),!a)throw Error("Reference to the logger object cannot be NULL");this._logger=a;this._timerManager=new c(this,this._logger);this._setupDataResolver()}var c=f.clock.TimerManager,p=b.StringUtils;a.extend(e,a.plugin.BasePlugin);e.prototype.bootstrap=
function(a){e.__super__.bootstrap.call(this,a);this._pluginManager.comply(this,k,this._cmdCreate);this._pluginManager.comply(this,z,this._cmdResume);this._pluginManager.comply(this,H,this._cmdPause);this._pluginManager.comply(this,v,this._cmdDestroy)};e.prototype._teardown=function(){this._timerManager.destroy()};e.prototype._cmdCreate=function(a){this._timerManager.createTimer(a[x],a[C],a[G]||D)};e.prototype._cmdPause=function(a){this._timerManager.pauseTimer(a[x],!!a[m])};e.prototype._cmdResume=
function(a){this._timerManager.resumeTimer(a[x],!!a[m])};e.prototype._cmdDestroy=function(a){this._timerManager.destroyTimer(a[x])};e.prototype.onTick=function(a,b,d){a+=".tick";var e={};e[x]=a;e[C]=b;e[w]=d;this._trigger(a,e)};e.prototype._setupDataResolver=function(){var a={},b=this._timerManager;a[t]=function(a){return b.isTimerPaused(a)};this._dataResolver=function(b){if(!b||0==b.length)return null;for(var d=null,e=0;e<b.length;e++){var f=b[e];if(d=d||{},p.startsWith(f,t)){var h=f.split(t+".");
0<h.length&&(d[f]=a[t].call(this,h[1]))}}return d}};var g="service.clock",k="create",H="pause",z="resume",v="destroy",x="name",C="interval",G="repeat_count",w="tick",m="reset",t="is_paused",D=-1;f.clock.ClockService=e})(p,g,a);(function(a,b,f){function e(a,b){if(this._logger=new c,this._pluginManager=new p(this._logger),this._pluginManager.addPlugin(new g(this._logger)),b)for(var d=0;d<b.length;d++)this._pluginManager.addPlugin(b[d]);this._pluginManager.setupPlugins();this._isDestroyed=!1}var c=a.Logger,
p=a.plugin.PluginManager,g=b.clock.ClockService;e.prototype.configure=function(a){if(!a)throw Error("Configuration object cannot be NULL.");a.debugLogging?this._logger.enable():this._logger.disable();this._isDestroyed&&this._logger.error(k,"Instance is destroyed.")};e.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var k="Heartbeat";f.Heartbeat=e})(p,a,f);c.ADB||(c.ADB={});c.ADB.core||(c.ADB.core=p);c.ADB.va||(c.ADB.va=f);c.ADB.va.utils||(c.ADB.va.utils=
g);c.ADB.va.plugins||(c.ADB.va.plugins={})}(this);
!function(c){if("undefined"==typeof g)var g={};g.AssetType={ASSET_TYPE_VOD:"vod",ASSET_TYPE_LIVE:"live",ASSET_TYPE_LINEAR:"linear"};!0;(function(f){function c(){this.startTime=this.position=this.name=this.playerName=null}c.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime};f.AdBreakInfo=c})(g);(function(f){function c(){this.position=this.length=this.name=this.id=null}c.prototype.toString=function(){return"id="+
this.id+", name="+this.name+", length="+this.length+", position="+this.position};f.AdInfo=c})(g);(function(f){function c(){this.startTime=this.position=this.length=this.name=null}c.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime};f.ChapterInfo=c})(g);(function(f){function c(){this.startupTime=this.droppedFrames=this.fps=this.bitrate=null}c.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+
", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime};f.QoSInfo=c})(g);(function(f){function c(){this.streamType=this.playhead=this.length=this.name=this.id=this.playerName=null;this.resumed=!1}c.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", streamType="+this.streamType+", resumed="+this.resumed};f.VideoInfo=c})(g);(function(f){f.VideoPlayerPluginConfig=function(){this.debugLogging=
!1}})(g);(function(f){function c(){}c.prototype.getVideoInfo=function(){throw Error("Implementation error: Method must be overridden.");};c.prototype.getAdBreakInfo=function(){return null};c.prototype.getAdInfo=function(){return null};c.prototype.getChapterInfo=function(){return null};c.prototype.getQoSInfo=function(){return null};f.VideoPlayerPluginDelegate=c})(g);(function(f,c){function a(b){if(a.__super__.constructor.call(this,e),!b)throw Error("PlayerPlugin delegate cannot be NULL.");this._delegate=
b;this._isTrackingAd=this._isTrackingSessionStarted=this._isTrackingSessionActive=!1;this._playheadTimer=null;this._previousPlayhead=-1;this._stalledPlayheadCount=0;this._videoIdle=this._playheadStalled=!1;this._setupDataResolver()}var d=f.plugin.ParamMapping,b=f.Trigger,h=c.VideoPlayerPluginConfig;f.extend(a,f.plugin.BasePlugin);a.prototype.configure=function(a){if(!a)throw Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof h))throw Error("Expected config data to be instance of VideoPlayerPluginConfig.");
a.debugLogging?this._logger.enable():this._logger.disable();this._logger.debug(this._logTag,"#configure(debugLogging="+a.debugLogging+")")};a.prototype.bootstrap=function(b){a.__super__.bootstrap.call(this,b);this._registerCommands();this._registerBehaviours()};a.prototype._cmdVideoIdleStart=function(a){this._logger.info(this._logTag,"#_cmdVideoIdleStart()");this._videoIdle=!0};a.prototype._cmdVideoIdleResume=function(a){this._logger.info(this._logTag,"#_cmdVideoIdleResume()");this._videoIdle&&(this._trigger(v),
this._trigger(x),a.isInChapter&&this._trigger(r),a.isInAd&&(this._trigger(t),this._isTrackingAd=!0));this._videoIdle=!1};a.prototype.trackSessionStart=function(){if(this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");
this._trigger(v);this._isTrackingSessionStarted=!0;var a=this._dataResolver(["video.resumed"]);a.hasOwnProperty("video.resumed")&&a["video.resumed"]&&this._trigger(x)}};a.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()");this._canProcess()&&(this._trigger(H),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)};a.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,
"#trackVideoUnload() > No active tracking session.");this._stopPlayheadTimer();this._trigger(z);this._videoIdle=this._isTrackingSessionStarted=this._isTrackingSessionActive=!1}};a.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()");this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&(this._trigger(w),this._startPlayheadTimer())};a.prototype.trackPause=function(){if(this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")){this._stopPlayheadTimer();
var a={};a[N]=!1;this._trigger(m,a)}};a.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()");this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&(this._stopPlayheadTimer(),this._trigger(E))};a.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()");this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&(this._trigger(n),this._startPlayheadTimer())};a.prototype.trackSeekStart=function(){this._logger.info(this._logTag,
"#trackSeekStart()");this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&(this._stopPlayheadTimer(),this._trigger(l))};a.prototype.trackSeekComplete=function(){if(this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")){this._trigger(q);this._startPlayheadTimer();var a=this._dataResolver(["ad.isInAd"]);this._isTrackingAd=a.hasOwnProperty("ad.isInAd")&&a["ad.isInAd"]}};a.prototype.trackComplete=function(a){if(this._logger.info(this._logTag,
"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){var b={};b[u]=a;this._stopPlayheadTimer();this._trigger(C,b)}};a.prototype.trackTimedMetadata=function(a){this._logger.info(this._logTag,"#trackComplete()");this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(G,a)};a.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()");this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(r)};
a.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"trackChapterComplete()");this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger(L)};a.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()");this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(t),this._isTrackingAd=!0)};a.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()");this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&
(this._trigger(D),this._isTrackingAd=!1)};a.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()");this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(J)};a.prototype.trackVideoPlayerError=function(a){if(this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+a+")"),this._startSessionIfNeeded("trackVideoPlayerError")){var b={};b[M]=k;b[O]=a;this._trigger(K,b)}};a.prototype.trackApplicationError=function(a){if(this._logger.info(this._logTag,
"#trackApplicationError(errorId="+a+")"),this._startSessionIfNeeded("trackApplicationError")){var b={};b[M]=y;b[O]=a;this._trigger(K,b)}};a.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart);this._pluginManager.comply(this,"handleVideoIdleResume",this._cmdVideoIdleResume)};a.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new b(A,B),this,"handleVideoIdleStart");this._pluginManager.registerBehaviour(new b(A,
I),this,"handleVideoIdleResume",[new d(g,"ad.isInAd","isInAd"),new d(g,"chapter.isInChapter","isInChapter")])};a.prototype._setupDataResolver=function(){function a(){return h.video?h.video:(h.video=l._delegate.getVideoInfo(),l._logger.info(l._logTag,"Data from delegate > VideoInfo: "+h.video),h.video)}function b(){return h.ad?h.ad:(h.ad=l._delegate.getAdInfo(),l._logger.info(l._logTag,"Data from delegate > AdInfo: "+h.ad),h.ad)}function d(){return h.pod?h.pod:(h.pod=l._delegate.getAdBreakInfo(),l._logger.info(l._logTag,
"Data from delegate > AdBreakInfo: "+h.pod),h.pod)}function e(){return h.chapter?h.chapter:(h.chapter=l._delegate.getChapterInfo(),l._logger.info(l._logTag,"Data from delegate > ChapterInfo: "+h.chapter),h.chapter)}function f(){return h.qos?h.qos:(h.qos=l._delegate.getQoSInfo(),l._logger.info(l._logTag,"Data from delegate > QoSInfo: "+h.qos),h.qos)}var c={},h={},l=this;c["video.id"]=function(){var b=a(),b=b?b.id:null;return l._logger.debug(l._logTag,"Resolving video.id: "+b),b};c["video.name"]=function(){var b=
a(),b=b?b.name:null;return l._logger.debug(l._logTag,"Resolving video.name: "+b),b};c["video.length"]=function(){var b=a(),b=b?b.length:NaN;return l._logger.debug(l._logTag,"Resolving video.length: "+b),b};c["video.playerName"]=function(){var b=a(),b=b?b.playerName:null;return l._logger.debug(l._logTag,"Resolving video.playerName: "+b),b};c["video.streamType"]=function(){var b=a(),b=b?b.streamType:null;return l._logger.debug(l._logTag,"Resolving video.streamType: "+b),b};c["video.playhead"]=function(){var b=
a(),b=b?b.playhead:NaN;return l._logger.debug(l._logTag,"Resolving video.playhead: "+b),b};c["video.resumed"]=function(){var b=a(),b=!!b&&b.resumed;return l._logger.debug(l._logTag,"Resolving video.resumed: "+b),b};c["video.playheadStalled"]=function(){return this._playheadStalled};c["pod.name"]=function(){var a=d(),a=a?a.name:null;return l._logger.debug(l._logTag,"Resolving pod.name: "+a),a};c["pod.playerName"]=function(){var a=d(),a=a?a.playerName:null;return l._logger.debug(l._logTag,"Resolving pod.playerName: "+
a),a};c["pod.position"]=function(){var a=d(),a=a?a.position:NaN;return l._logger.debug(l._logTag,"Resolving pod.position: "+a),a};c["pod.startTime"]=function(){var a=d(),a=a?a.startTime:NaN;return l._logger.debug(l._logTag,"Resolving pod.startTime: "+a),a};c["ad.isInAd"]=function(){var a=null!=b();return l._logger.debug(l._logTag,"Resolving ad.isInAd: "+a),a};c["ad.isInAdBreak"]=function(){var a=null!=d();return l._logger.debug(l._logTag,"Resolving ad.isInAdBreak: "+a),a};c["ad.id"]=function(){var a=
b(),a=a?a.id:null;return l._logger.debug(l._logTag,"Resolving ad.id: "+a),a};c["ad.name"]=function(){var a=b(),a=a?a.name:null;return l._logger.debug(l._logTag,"Resolving ad.name: "+a),a};c["ad.length"]=function(){var a=b(),a=a?a.length:NaN;return l._logger.debug(l._logTag,"Resolving ad.length: "+a),a};c["ad.position"]=function(){var a=b(),a=a?a.position:NaN;return l._logger.debug(l._logTag,"Resolving ad.position: "+a),a};c["chapter.isInChapter"]=function(){var a=null!=e();return l._logger.debug(l._logTag,
"Resolving chapter.isInChapter: "+a),a};c["chapter.name"]=function(){var a=e(),a=a?a.name:null;return l._logger.debug(l._logTag,"Resolving chapter.name: "+a),a};c["chapter.length"]=function(){var a=e(),a=a?a.length:NaN;return l._logger.debug(l._logTag,"Resolving chapter.length: "+a),a};c["chapter.position"]=function(){var a=e(),a=a?a.position:NaN;return l._logger.debug(l._logTag,"Resolving chapter.position: "+a),a};c["chapter.startTime"]=function(){var a=e(),a=a?a.startTime:NaN;return l._logger.debug(l._logTag,
"Resolving chapter.startTime: "+a),a};c["qos.bitrate"]=function(){var a=f(),a=a?a.bitrate:NaN;return l._logger.debug(l._logTag,"Resolving qos.bitrate: "+a),a};c["qos.fps"]=function(){var a=f(),a=a?a.fps:NaN;return l._logger.debug(l._logTag,"Resolving qos.fps: "+a),a};c["qos.droppedFrames"]=function(){var a=f(),a=a?a.droppedFrames:NaN;return l._logger.debug(l._logTag,"Resolving qos.droppedFrames: "+a),a};c["qos.startupTime"]=function(){var a=f(),a=a?1E3*a.startupTime:NaN;return l._logger.debug(l._logTag,
"Resolving qos.startupTime: "+a),a};this._dataResolver=function(a){if(!a||0==a.length)return null;h={};for(var b=null,d=0;d<a.length;d++){var e=a[d],b=b||{};b[e]=c.hasOwnProperty(e)?c[e].call(this):null}return b}};a.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(m)))};a.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=
0,this._playheadStalled&&(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this.trackPlay()))};a.prototype._startPlayheadTimer=function(){var a=this;this._playheadTimer||(this._playheadTimer=setInterval(function(){if(a._canProcess()){var b=a._dataResolver(["ad.isInAd","video.playhead"]);a._isTrackingAd?(a._playheadStalled&&a._trackExitStall(),b.hasOwnProperty("ad.isInAd")&&!b["ad.isInAd"]&&(a._isTrackingAd=!1)):(b=b["video.playhead"],b!=a._previousPlayhead?a._trackExitStall():
0<=a._previousPlayhead&&b==a._previousPlayhead&&(a._stalledPlayheadCount++,a._stalledPlayheadCount==P&&a._trackPlayheadStall()),a._previousPlayhead=b)}},Q))};a.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null);this._playheadStalled=!1;this._stalledPlayheadCount=0};a.prototype._startSessionIfNeeded=function(a){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+a+"() > Tracking session auto-start."),
this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+a+"() > No active tracking session."),!1)};var e="player",g=e,A="adobe-heartbeat",y="sourceErrorExternal",k="sourceErrorSDK",H="video_load",z="video_unload",v="video_start",x="video_resume",C="video_complete",G="timed_metadata",w="play",m="pause",t="ad_start",D="ad_complete",E="buffer_start",n="buffer_complete",l="seek_start",q="seek_complete",r="chapter_start",L="chapter_complete",J="bitrate_change",K="track_error",B="video_idle_start",
I="video_idle_resume",u="callback",N="filter_report",M="source",O="error_id",Q=1001,P=2;c.VideoPlayerPlugin=a})(c.ADB.core,g);c.ADB.va.plugins.videoplayer||(c.ADB.va.plugins.videoplayer=g)}(this);
!function(c){if("undefined"==typeof g)var g={};g.clock||(g.clock={});g.context||(g.context={});g.filter||(g.filter={});g.model||(g.model={});g.network||(g.network={});(function(f,c){function a(a,b,d,e,f){if(!b)throw Error("Reference to the channel object cannot be NULL");if(this._channel=b,!a)throw Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=a,!f)throw Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+d;this._logger=f;this._isDestroyed=
!1;this._createTimer(d,e);this._installHandlers()}var d=f.Event;a.KEY_NAME="name";a.KEY_INTERVAL="interval";a.KEY_RESET="reset";a.prototype.resume=function(d){this._logger.debug(this._logTag,"Starting timer: "+this._name);var e={};e[a.KEY_NAME]=b+"."+this._name;e[a.KEY_RESET]=d;this._pluginManager.command(h,A,e)};a.prototype.pause=function(d){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var e={};e[a.KEY_NAME]=b+"."+this._name;e[a.KEY_RESET]=d;this._pluginManager.command(h,g,e)};
a.prototype.destroy=function(){if(!this._isDestroyed){this._isDestroyed=!0;this._uninstallHandlers();var d={};d[a.KEY_NAME]=b+"."+this._name;this._pluginManager.command(h,y,d)}};a.prototype.setInterval=function(a){var d=k+"."+b+"."+this._name,d=this._pluginManager.request(h,[d])[d];this.pause(!0);this._createTimer(this._name,a);d||this.resume(!0)};a.prototype._cmdResume=function(b){var d=!1;null!=b&&b.hasOwnProperty(a.KEY_RESET)&&(d=b[a.KEY_RESET]);this.resume(d)};a.prototype._cmdPause=function(b){var d=
!1;null!=b&&b.hasOwnProperty(a.KEY_RESET)&&(d=b[a.KEY_RESET]);this.pause(d)};a.prototype._onTick=function(a,b){this._channel.trigger(new d("clock:"+this._name+".tick",b))};a.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this);this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this);this._pluginManager.on(h,b+"."+this._name+".tick",this._onTick,this)};a.prototype._uninstallHandlers=function(){this._channel.off(null,null,this);
this._pluginManager.off(null,null,null,this)};a.prototype._createTimer=function(d,f){this._name=d;this._interval=f;var c={};c[a.KEY_NAME]=b+"."+this._name;c[a.KEY_INTERVAL]=this._interval;this._pluginManager.command(h,e,c)};var b="heartbeat",h="service.clock",e="create",g="pause",A="resume",y="destroy",k="is_paused";c.clock.Timer=a})(c.ADB.core,g);(function(f,c){function a(d,f,c){a.__super__.constructor.call(this,d,f,b,e,c)}var d=f.Event;f.extend(a,c.clock.Timer);a.prototype._onCheckStatusComplete=
function(a){a=a.data[k];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+a+")"),a){if(a==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");a>h?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+a),this.setInterval(h)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+a),this.setInterval(a))}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),
this.setInterval(e)};a.prototype._getSettings=function(a){this._logger.debug(this._logTag,"#_getSettings()");this._channel.trigger(new d(g))};a.prototype._installHandlers=function(){a.__super__._installHandlers.call(this);this._channel.on(A,this._getSettings,this);this._channel.on(y,this._onCheckStatusComplete,this);this._channel.reply(k,function(){return this._interval},this)};var b="check_status",h=600,e=60,g="clock:check_status.tick",A="clock:check_status.get_settings",y="net:check_status_complete",
k="check_status_interval";c.clock.CheckStatusTimer=a})(c.ADB.core,g);(function(f,c){function a(e,f,c){a.__super__.constructor.call(this,e,f,d,b,c)}f.extend(a,c.clock.Timer);a.prototype._onCheckStatusComplete=function(a){a=a.data[h];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+a+")"),a){if(a==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+
a);this.setInterval(a)}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(b)};a.prototype._installHandlers=function(){a.__super__._installHandlers.call(this);this._channel.on(e,this._onCheckStatusComplete,this);this._channel.reply(h,function(){return this._interval},this)};var d="reporting",b=10,h="reporting_interval",e="net:check_status_complete";c.clock.ReportingTimer=a})(c.ADB.core,g);(function(f,c){function a(f,e,c){a.__super__.constructor.call(this,
f,e,d,b,c)}f.extend(a,c.clock.Timer);var d="idle",b=1800;c.clock.IdleTimer=a})(c.ADB.core,g);(function(f,c){function a(f,e,c){a.__super__.constructor.call(this,f,e,d,b,c)}f.extend(a,c.clock.Timer);var d="flush_filter",b=.25;c.clock.FlushFilterTimer=a})(c.ADB.core,g);(function(f,c){function a(a,f,c){if(!a)throw Error("Reference to the pluginManager object cannot be NULL");if(!f)throw Error("Reference to the channel object cannot be NULL");if(!c)throw Error("Reference to the logger object cannot be NULL");
this._isDestroyed=!1;this._reportingTimer=new h(a,f,c);this._checkStatusTimer=new d(a,f,c);this._flushFilterTimer=new b(a,f,c);this._idleTimer=new e(a,f,c)}var d=c.clock.CheckStatusTimer,b=c.clock.FlushFilterTimer,h=c.clock.ReportingTimer,e=c.clock.IdleTimer;a.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())};c.clock.Clock=a})(c.ADB.core,g);(function(f,c){function a(a,
d){this.value=a;this.hint=d}function d(a){this.realm=a;this.data={}}a.HINT_SHORT="short";d.prototype.setField=function(b,d,e){this.data[b]=new a(d,e)};d.prototype._createAccessor=function(a,d,e){var f=this;return function(){return arguments.length&&(f[a]=arguments[0],f.setField(d,arguments[0],e)),f[a]}};c.model.Dao=d;c.model.DaoField=a})(c.ADB.core,g);(function(f,c){function a(){if(a.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid",
"ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof
a){var d=arguments[0];this.adId(d.adId());this.sid(d.sid());this.resolver(d.resolver());this.podId(d.podId());this.podPosition(d.podPosition());this.podOffset(d.podOffset());this.podName(d.podName());this.adLength(d.adLength());this.adName(d.adName())}else this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName("")}f.extend(a,c.model.Dao);c.model.AdDao=a})(c.ADB.core,g);(function(f,c){function a(){if(a.__super__.constructor.call(this,
"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",d.HINT_SHORT),arguments.length&&arguments[0]instanceof a){var b=arguments[0];this.reportSuiteId(b.reportSuiteId());this.trackingServer(b.trackingServer());this.ssl(b.ssl())}else this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var d=c.model.DaoField;f.extend(a,c.model.Dao);c.model.AdobeAnalyticsDao=
a})(c.ADB.core,g);(function(f,c){function a(){if(a.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof
a){var d=arguments[0];this.id(d.id());this.sid(d.sid());this.name(d.name());this.position(d.position());this.length(d.length());this.offset(d.offset())}else this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0)}f.extend(a,c.model.Dao);c.model.ChapterDao=a})(c.ADB.core,g);(function(c,g){function a(){if(a.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=
this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof a){var c=arguments[0];this.type(c.type());this.name(c.name());this.videoId(c.videoId());this.publisher(c.publisher());this.length(c.length());var e=c.adData()?new d(c.adData()):
null;this.adData(e);c=c.chapterData()?new b(c.chapterData()):null;this.chapterData(c)}else this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null)}var d=g.model.AdDao,b=g.model.ChapterDao;c.extend(a,g.model.Dao);a.TYPE_AD="ad";a.TYPE_MAIN_CONTENT="main";g.model.AssetDao=a})(c.ADB.core,g);(function(c,g){function a(){if(a.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration",
"duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof a){var d=arguments[0];this.type(d.type());this.duration(d.duration());this.playhead(d.playhead());this.id(d.id());this.source(d.source());this.ts(d.ts());this.prevTs(d.prevTs())}else this.type(""),
this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1)}c.extend(a,g.model.Dao);a.EVENT_TYPE_AA_START="aa_start";a.EVENT_TYPE_AA_AD_START="aa_ad_start";a.EVENT_TYPE_START="start";a.EVENT_TYPE_RESUME="resume";a.EVENT_TYPE_CHAPTER_START="chapter_start";a.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete";a.EVENT_TYPE_PLAY="play";a.EVENT_TYPE_PAUSE="pause";a.EVENT_TYPE_STALL="stall";a.EVENT_TYPE_BUFFER="buffer";a.EVENT_TYPE_BITRATE_CHANGE="bitrate_change";a.EVENT_TYPE_ERROR=
"error";a.EVENT_TYPE_COMPLETE="complete";g.model.EventDao=a})(c.ADB.core,g);(function(c,g){function a(){if(a.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof a){var d=arguments[0];this.bitrate(d.bitrate());
this.fps(d.fps());this.droppedFrames(d.droppedFrames());this.startupTime(d.startupTime());this.isStartupTimeOverridden=d.isStartupTimeOverridden}else this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1}c.extend(a,g.model.Dao);g.model.QoSDao=a})(c.ADB.core,g);(function(c,g){function a(){if(a.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel",
"channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&arguments[0]instanceof a){var b=arguments[0];this.ovp(b.ovp());this.sdk(b.sdk());this.channel(b.channel());this.playerName(b.playerName());this.libVersion(b.libVersion());this.apiLevel(b.apiLevel())}else this.ovp(d),this.sdk(d),this.channel(d),this.playerName(""),
this.libVersion(""),this.apiLevel(0)}c.extend(a,g.model.Dao);var d="unknown";g.model.ServiceProviderDao=a})(c.ADB.core,g);(function(c,g){function a(){(a.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof a)?this.sessionId(arguments[0].sessionId()):this.sessionId(null)}c.extend(a,g.model.Dao);g.model.SessionDao=a})(c.ADB.core,g);(function(c,g){function a(){(a.__super__.constructor.call(this,"stream"),this.type=
this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof a)?this.type(arguments[0].type()):this.type(null)}c.extend(a,g.model.Dao);g.model.StreamDao=a})(c.ADB.core,g);(function(c,g){function a(){if(a.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&
arguments[0]instanceof a){var d=arguments[0];this.analyticsVisitorId(d.analyticsVisitorId());this.marketingCloudVisitorId(d.marketingCloudVisitorId());this.visitorId(d.visitorId())}else this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null)}c.extend(a,g.model.Dao);g.model.UserDao=a})(c.ADB.core,g);(function(c,g){function a(){if(a.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=
this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&arguments[0]instanceof a){var d=arguments[0];this.audienceManagerBlob(d.audienceManagerBlob());this.audienceManagerLocationHint(d.audienceManagerLocationHint())}else this.audienceManagerBlob(null),this.audienceManagerLocationHint(null)}c.extend(a,g.model.Dao);g.model.AudienceManagerDao=a})(c.ADB.core,g);(function(c,g){var a=c.ObjectUtils,d=g.model.EventDao,b=g.model.AssetDao,h=g.model.StreamDao,e=g.model.QoSDao;
g.model.TrackItem=function(c,f,g,k,p){this.eventData=new d;this.eventData.type(f);this.eventData.duration(0);this.eventData.ts((new Date).getTime());this.eventData.playhead(g);this.assetData=new b(c._assetData);this.streamData=new h(c._streamData);this.qosData=new e(c._qosData);this.cuserData=a.clone(c._cuserData);this.meta=k;this.callback=p;this.filterReport=!0}})(c.ADB.va.utils,g);(function(c,g){var a=c.ObjectUtils,d=g.model.EventDao,b=g.model.AssetDao,h=g.model.StreamDao,e=g.model.QoSDao;g.model.CUserDao;
g.model.Report=function(c,f,g,k,p,z){this.adobeAnalyticsData=c;this.userData=f;this.aamData=g;this.serviceProviderData=k;this.sessionData=p;this.eventData=new d(z.eventData);this.assetData=new b(z.assetData);this.streamData=new h(z.streamData);this.qosData=new e(z.qosData);this.cuserData=a.clone(z.cuserData);this.meta=a.clone(z.meta);this.callback=z.callback;this.filterReport=z.filterReport}})(c.ADB.va.utils,g);(function(c){function g(){}g.prototype.serializeReport=function(a){};g.prototype.serializeDao=
function(a){};g.prototype.serializeMap=function(a){};g.prototype.serializeNumber=function(a,d,b,c){};g.prototype.serializeString=function(a,d,b,c){};c.model.ISerializer=g})(g);(function(c,g){function a(a){if(!a)throw Error("Reference to the logger object cannot be NULL");this._logger=a}var d=g.model.Dao,b=g.model.DaoField;c.extend(a,g.model.ISerializer);a.prototype.serializeReport=function(a){var b=[];return b.push(this.serializeDao(a.adobeAnalyticsData)),b.push(this.serializeDao(a.userData)),b.push(this.serializeDao(a.aamData)),
b.push(this.serializeMap(a.cuserData,"cuser")),b.push(this.serializeDao(a.serviceProviderData)),b.push(this.serializeDao(a.sessionData)),b.push(this.serializeDao(a.eventData)),b.push(this.serializeDao(a.assetData)),b.push(this.serializeDao(a.streamData)),b.push(this.serializeDao(a.qosData)),b.push(this.serializeMap(a.meta,"meta")),{serializedOutput:b.filter(function(a){return!!a}).join("&"),callback:a.callback}};a.prototype.serializeDao=function(a){return this._processDao(a).filter(function(a){return!!a}).join("&")};
a.prototype.serializeMap=function(a,b){var d=[],e=b?b:"meta",c;for(c in a)a.hasOwnProperty(c)&&a[c]&&d.push("s:"+e+":"+c+"="+window.encodeURIComponent(a[c]));return d.join("&")};a.prototype.serializeNumber=function(a,d,c,f){var h=e;return null==d||isNaN(d)?null:(f===b.HINT_SHORT&&(h=F),h+":"+c+":"+a+"="+Math.floor(d))};a.prototype.serializeString=function(a,b,d,e){return b?A+":"+d+":"+a+"="+window.encodeURIComponent(b):null};a.prototype._processDao=function(a){var b=[],e;for(e in a.data)if(a.data.hasOwnProperty(e)){var c=
a.data[e],f=c.value,c=c.hint,g=null,p=a.realm;null!=f&&("number"==typeof f?g=this.serializeNumber(e,f,p,c):"string"==typeof f?g=this.serializeString(e,f,p,c):f instanceof d?g=this.serializeDao(f):this._logger.warn(h,"#_processDao() > Unable to serialize DAO. Field: "+e+". Value: "+f+"."),g&&b.push(g))}return b};var h="ah::QuerystringSerializer",e="l",F="h",A="s";g.model.QuerystringSerializer=a})(c.ADB.core,g);(function(c,g){function a(a,b){if(!a)throw Error("Reference to the data object cannot be NULL");
if(this._data=a,!b)throw Error("Reference to the logger object cannot be NULL");this._logger=b}a.prototype.parse=function(){var a,c,f,g,p;window.DOMParser?p=(new window.DOMParser).parseFromString(this._data,"text/xml"):(p=new window.ActiveXObject("Microsoft.XMLDOM"),p.async=!1,p.loadXML(this._data));var v;(v=parseInt(p.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10))&&(a=v);(v=parseInt(p.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10))&&(c=v);(v=parseInt(p.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,
10))&&(f=1==v);p.getElementsByTagName("nielsenEnabled")[0]?(v=parseInt(p.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10),g=1==v):g=!0;p={};return p[b]=a,p[h]=c,p[e]=f,p[F]=g,this._logger.debug(d,"#parse() > Obtained configuration settings."),p};var d="ah::SettingsParser",b="reporting_interval",h="check_status_interval",e="track_external_errors",F="nielsen_enabled";g.network.SettingsParser=a})(c.ADB.core,g);(function(c,g){function a(a,b){if(this._trackingServer=null,this._checkStatusServer=
null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._quietMode=!1,this._visitorOptedOut=!1,this._prevReportSent=null,!a)throw Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw Error("Reference to the logger object cannot be NULL");this._logger=b;this._serializer=new A(b);this._installEventListeners()}var d=c.Event,b=c.URLRequestMethod,h=c.URLRequest,e=c.URLLoader,F=g.network.SettingsParser,A=g.model.QuerystringSerializer;a.prototype.destroy=
function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(y,"#destroy()"),this._uninstallEventListeners())};a.prototype._onApiConfig=function(a){a=a.data;this._logger.debug(y,"#_onApiConfig(sb_server="+a[k]+", check_status_server="+a[H]+", publisher="+a[z]+", quiet_mode="+a[v]+", ssl="+a[x]+")");this._trackingServer=this._updateRequestProtocol(a[k],a[x]);this._checkStatusServer=this._updateRequestProtocol(a[H],a[x]);this._publisher=a[z];this._quietMode=a[v];this._isConfigured=!0};a.prototype._onUpdateVisitorOptOut=
function(a){a=a.data;this._logger.debug(y,"#_onUpdateVisitorOptOut(visitor_opt_out="+a[G]+")");this._visitorOptedOut=a[G]};a.prototype._onFilterReportAvailable=function(a){a=a.data;if(!this._isConfigured)return void this._logger.warn(y,"#_onFilterReportAvailable() > Unable to send request: not configured.");a=a[C];var c=this._serializer.serializeReport(a),f=this._trackingServer+"/?"+c.serializedOutput;if(this._prevReportSent&&this._prevReportSent.eventData&&a.eventData&&this._prevReportSent.eventData.playhead==
a.eventData.playhead&&this._prevReportSent.eventData.ts==a.eventData.ts&&this._prevReportSent.eventData.prevTs==a.eventData.prevTs&&this._prevReportSent.eventData.type==a.eventData.type)return void this._logger.debug(y,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\n"+f);this._prevReportSent=a;a=new h(f,b.GET);this._logger.debug(y,"#_onFilterReportAvailable() > "+a.url);var g=this,f=function(a){t.close();c.callback&&c.callback.call(null)},k=function(a){t.close();g._logger.warn(y,
"#_onFilterReportAvailable() > Failed to send heartbeat report.");c.callback&&c.callback.call(null)};if(!this._quietMode&&!this._visitorOptedOut){var t=new e;t.addEventListener(d.SUCCESS,f,this);t.addEventListener(d.ERROR,k,this);t.load(a)}};a.prototype._onClockCheckStatusTick=function(a){if(!this._isConfigured)return void this._logger.warn(y,"#_onClockCheckStatusTick() > Unable to send request: not configured.");if(!this._publisher)return void this._logger.warn(y,"#_onClockCheckStatusTick() > Publisher is NULL.");
var c=this;a=this._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase();a=this._checkStatusServer+a+".xml?r="+(new Date).getTime();var f=new h(a,b.GET),g=new e;g.addEventListener(d.SUCCESS,function(a){a.data&&((a=(new F(a.data.response,c._logger)).parse())?c._channel.trigger(new d(E,a)):c._logger.warn(y,"#_onClockCheckStatusTick() > Failed to parse the config. settings."));g.close()},this);g.addEventListener(d.ERROR,function(a){c._logger.warn(y,"#_onClockCheckStatusTick() > Failed to obtain the config. settings.");
g.close()},this);this._logger.debug(y,"#_onClockCheckStatusTick() > Get new settings from: "+a);g.load(f)};a.prototype._updateRequestProtocol=function(a,b){var d=a;return 0===d.indexOf("http://")?d=d.slice(7):0===d.indexOf("https://")&&(d=d.slice(8)),b?"https://"+d:"http://"+d};a.prototype._installEventListeners=function(){this._channel.on(w,this._onApiConfig,this);this._channel.on(m,this._onUpdateVisitorOptOut,this);this._channel.on(t,this._onFilterReportAvailable,this);this._channel.on(D,this._onClockCheckStatusTick,
this)};a.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var y="ah::Network",k="tracking_server",H="check_status_server",z="publisher",v="quiet_mode",x="ssl",C="report",G="visitor_opt_out",w="api:config",m="api:update_visitor_optout",t="filter:data_available",D="clock:check_status.tick",E="net:check_status_complete";g.network.Network=a})(c.ADB.core,g);(function(c,g){function a(a,b){if(!a)throw Error("Reference to the channel object cannot be NULL");if(this._channel=
a,!b)throw Error("Reference to the logger object cannot be NULL");this._logger=b;this._isBufferingInProgress=this._isDestroyed=!1;this._reportBuffer={};this._tsHistory={};this._workQueue=new A;this._installEventListeners()}function d(a){var b=[];return a&&a.forEach(function(a){a.eventData.type()==k.EVENT_TYPE_PAUSE||a.eventData.type()==k.EVENT_TYPE_STALL?(!a.filterReport||a.eventData.duration()>D)&&b.push(a):b.push(a)}),b}function b(a){var b=-1,d=-1,e=[];return a.forEach(function(a){a.eventData.type()==
k.EVENT_TYPE_START?a.assetData.type()==H.TYPE_MAIN_CONTENT?-1==b?b=e.push(a)-1:(a.eventData.prevTs(-1),e[b]=a):-1==d?d=e.push(a)-1:(a.eventData.prevTs(-1),e[d]=a):e.push(a)}),e}function h(a){var b=[];return a.forEach(function(d){if(d.eventData.type()==k.EVENT_TYPE_PLAY)if(d.eventData.duration()>t)b.push(d);else{if(0==d.eventData.duration()&&d.assetData.type()==H.TYPE_MAIN_CONTENT){var c=e(a);c.indexOf(d)==c.length-1&&b.push(d)}}else b.push(d)}),b}function e(a){var b=[];return a.forEach(function(a){a.eventData.type()!=
k.EVENT_TYPE_PLAY&&a.eventData.type()!=k.EVENT_TYPE_BUFFER&&a.eventData.type()!=k.EVENT_TYPE_START||b.push(a)}),b}var F=c.radio.Command,A=c.radio.CommandQueue,y=c.Event,k=g.model.EventDao,H=g.model.AssetDao;a.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(n,"#destroy()"),this._uninstallEventListeners(),this.clear())};a.prototype.clear=function(){this._logger.debug(n,"#clear()");this._workQueue.cancelAllCommands();this._reportBuffer={};this._tsHistory={};this._isBufferingInProgress=
!1};a.prototype.flush=function(){this._workQueue.addCommand(new F(this._flushBufferReport,this))};a.prototype._bufferReport=function(a){if(!this._isDestroyed){if(a=a[G]){var b=a.sessionData.sessionId();this._reportBuffer[b]=this._reportBuffer[b]||[];this._reportBuffer[b].push(a)}this._isBufferingInProgress||(this._isBufferingInProgress=!0,a={},a[C]=!0,a[w]=1,this._channel.command(m,a))}};a.prototype._flushBufferReport=function(){if(!this._isDestroyed){for(var a in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(a)){var e=
h(b(d(this._reportBuffer[a]))),c=e;if(c)for(var f=0;f<c.length;f++){var g=c[f],k=g.sessionData.sessionId();this._tsHistory[k]=this._tsHistory[k]||{};var t=g.eventData.type()+"."+(g.assetData.type()==H.TYPE_AD?g.assetData.adData().adId():g.assetData.videoId());this._tsHistory[k].hasOwnProperty(t)&&g.eventData.prevTs(this._tsHistory[k][t]);this._tsHistory[k][t]=g.eventData.ts()}for(c=0;c<e.length;c++)f={},f[G]=e[c],this._channel.trigger(new y(v,f))}this._reportBuffer={};a=this._channel.request(E);e=
this._tsHistory[a]||{};this._tsHistory={};this._tsHistory[a]=e;this._isBufferingInProgress=!1}};a.prototype._onContextReportAvailable=function(a){this._workQueue.addCommand(new F(this._bufferReport,this,[a.data]))};a.prototype._onClockFlushFilterTick=function(a){this.flush()};a.prototype._installEventListeners=function(){this._channel.on(z,this._onContextReportAvailable,this);this._channel.on(x,this._onClockFlushFilterTick,this)};a.prototype._uninstallEventListeners=function(){this._channel.off(null,
null,this)};var z="context:report_available",v="filter:data_available",x="clock:flush_filter.tick",C="reset",G="report",w="repeat_count",m="clock:flush_filter.resume",t=250,D=250,E="session_id",n="ah::ReportFilter";g.filter.ReportFilter=a})(c.ADB.core,g);(function(c,g){function a(a,d){this._onFail={fn:a,ctx:d}}var d=c.ErrorInfo;a.prototype.validateFields=function(a,d){if(!a)return this._fail("Data cannot be null");if(d)for(var e=0;e<d.length;e++){var c=d[e];switch(c){case "videoId":if(!a.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");
if("string"!=typeof a.videoId)return this._fail("The ID for the main video must be a String.");if(""===a.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case "streamType":if(!a.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof a.streamType)return this._fail("The stream type for the main video must be a String.");if(""===a.streamType)return this._fail("The stream type for the main video cannot be an empty string.");
break;case "videoLength":if(!a.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof a.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(a.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case "playhead":if(!a.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof a.playhead)return this._fail("The playhead for the main video must be a Number.");
if(isNaN(a.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case "playerName":if(!a.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof a.playerName)return this._fail("The player name for the main video must be a String.");if(""===a.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case "rsid":if(!a.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");
if("string"!=typeof a.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===a.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case "trackingServer":if(!a.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof a.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");
if(""===a.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case "podPlayerName":if(!a.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof a.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===a.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case "podPosition":if(!a.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");
if("number"!=typeof a.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(a.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case "adId":if(!a.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof a.adId)return this._fail("The ad ID must be a String.");if(""===a.adId)return this._fail("The ad ID cannot be an empty string.");break;case "adPosition":if(!a.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");
if("number"!=typeof a.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(a.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case "chapterPosition":if(!a.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof a.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(a.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");
break;case "chapterOffset":if(!a.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof a.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(a.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case "chapterLength":if(!a.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof a.chapterLength)return this._fail("The length of the chapter must be a Number.");
if(isNaN(a.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+c)}}return!0};a.prototype._fail=function(a){a=new d("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,a),!1};g.context.InputDataValidator=a})(c.ADB.va,g);(function(c,g){function a(a,b){if(!b)throw Error("Reference to the logger object cannot be NULL");if(this._logger=b,!a)throw Error("Reference to the context object cannot be NULL");
this._context=a}var d=g.model.Report;a.prototype.createReportForItem=function(a){return this._logger.debug(b,"Creating report for item: "+a.eventData.type()),new d(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,a)};var b="ah::ReportFactory";g.context.ReportFactory=a})(c.ADB.core,g);(function(c,g,a,d){function b(a,b){if(!a)throw Error("Reference to the channel object cannot be NULL");if(this._channel=a,
!b)throw Error("Reference to the logger object cannot be NULL");this._logger=b;this._lastInBandItem=null;this._autoComputedStartupTime=0;this._reportingInterval=X;this._cuserData=this._sessionData=this._qosData=this._streamData=this._assetData=null;this._adobeAnalyticsData=new y;this._serviceProviderData=new k;this._userData=new H;this._aamData=new z;this._isVideoComplete=this._isTrackingSessionActive=!1;this._activeAssetId=null;this._doNotOverrideEventDuration=this._isDestroyed=!1;this._reportFactory=
new D(this,this._logger);this._inputDataValidator=new E(function(a){this._logger.error(n,a.getMessage()+" | "+a.getDetails());this._channel.trigger(new F(q,a))},this);this._stashedAdData=this._stashedChapterData=null;this._trackExternalErrors=!0;this._installEventListeners()}var h=a.md5,e=a.ObjectUtils,F=c.Event,A=d.model.SessionDao,y=d.model.AdobeAnalyticsDao,k=d.model.ServiceProviderDao,H=d.model.UserDao,z=d.model.AudienceManagerDao,v=d.model.EventDao,x=d.model.AssetDao,C=d.model.StreamDao,G=d.model.QoSDao,
w=d.model.AdDao,m=d.model.ChapterDao,t=d.model.TrackItem,D=d.context.ReportFactory,E=d.context.InputDataValidator;b.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(n,"#destroy()"),this._uninstallEventListeners())};b.prototype._onApiAnalyticsStart=function(a){this._logger.debug(n,"#_onApiAnalyticsStart()");a=a.data;this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(a,["playhead"])&&(this._userData.visitorId(a.vid),this._userData.analyticsVisitorId(a.aid),
this._userData.marketingCloudVisitorId(a.mid),this._aamData.audienceManagerBlob(a.blob),this._aamData.audienceManagerLocationHint(a.loc_hint),a.customerIDs&&(this._cuserData=a.customerIDs),this._updateQoSInfo(a),a=new t(this,v.EVENT_TYPE_AA_START,a.playhead,null,a._eventData[I]),a.assetData.adData(null),a.assetData.type(x.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(a))};b.prototype._onApiAnalyticsAdStart=function(a){this._logger.debug(n,"#_onApiAnalyticsAdStart()");a=a.data;this._checkCall("_onApiAnalyticsAdStart")&&
this._inputDataValidator.validateFields(a,["playhead"])&&(this._updateQoSInfo(a),a=new t(this,v.EVENT_TYPE_AA_AD_START,a.playhead,null,a._eventData[I]),this._sendHit(a))};b.prototype._onApiVideoLoad=function(a){a=a.data;this._logger.debug(n,"#_onApiVideoLoad(rsid="+a.rsid+", aa_trackingServer="+a.trackingServer+")");this._resetInternalState();this._inputDataValidator.validateFields(a,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=
!0)};b.prototype._onApiVideoUnload=function(a){return this._logger.debug(n,"#_onApiVideoUnload()"),this._isTrackingSessionActive?void(this._isTrackingSessionActive=!1):void this._logger.debug(n,"#_onApiVideoUnload() > No active tracking session.")};b.prototype._onApiVideoStart=function(a){a=a.data;if(this._logger.debug(n,"#_onApiVideoStart(id="+a.videoId+", name="+a.videoName+", length="+a.videoLength+", type="+a.streamType+", playerName="+a.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(a,
["videoId","streamType","videoLength","playhead","playerName"])){this._adobeAnalyticsData.reportSuiteId(a.rsid);this._adobeAnalyticsData.trackingServer(a.trackingServer);this._adobeAnalyticsData.ssl(Number(a.useSsl));this._serviceProviderData.ovp(a.ovp);this._serviceProviderData.sdk(a.sdk);this._serviceProviderData.channel(a.channel);this._serviceProviderData.libVersion(a.version);this._serviceProviderData.apiLevel(a.apiLvl);this._activeAssetId=a.videoId;this._serviceProviderData.playerName(a.playerName);
this._assetData.videoId(this._activeAssetId);this._assetData.length(a.videoLength);this._assetData.type(x.TYPE_MAIN_CONTENT);this._assetData.publisher(a.publisher);this._assetData.name(a.videoName);this._streamData.type(a.streamType);this._updateQoSInfo(a);var b=a.metaNielsen?e.merge(a.metaVideo,a.metaNielsen):a.metaVideo;a=new t(this,v.EVENT_TYPE_START,a.playhead,b,a._eventData[I]);this._sendHit(a)}};b.prototype._onApiVideoResume=function(a){a=a.data;if(this._logger.debug(n,"#_onApiVideoResume(id="+
a.videoId+", name="+a.videoName+", length="+a.videoLength+", type="+a.streamType+", playerName="+a.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(a,["videoId","streamType","videoLength","playhead","playerName"]))this._activeAssetId=a.videoId,this._assetData.videoId(this._activeAssetId),this._assetData.length(a.videoLength),this._assetData.type(x.TYPE_MAIN_CONTENT),this._assetData.name(a.videoName),this._streamData.type(a.streamType),a=new t(this,v.EVENT_TYPE_RESUME,
a.playhead,null,a._eventData[I]),this._sendHit(a)};b.prototype._onApiVideoComplete=function(a){this._logger.debug(n,"#_onApiVideoComplete()");a=a.data;this._checkCall("_onApiVideoComplete")&&(a=new t(this,v.EVENT_TYPE_COMPLETE,this._assetData.length(),null,a._eventData[I]),this._sendHit(a),this._isVideoComplete=!0)};b.prototype._onApiPlay=function(a){this._logger.debug(n,"#_onApiPlay()");a=a.data;this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(a,["playhead"])&&(this._updateQoSInfo(a),
a=new t(this,v.EVENT_TYPE_PLAY,a.playhead,null,a._eventData[I]),this._sendHit(a))};b.prototype._onApiPause=function(a){this._logger.debug(n,"#_onApiPause()");a=a.data;if(this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(a,["playhead"])){this._updateQoSInfo(a);var b=new t(this,a.playheadStalled?v.EVENT_TYPE_STALL:v.EVENT_TYPE_PAUSE,a.playhead,null,a._eventData[I]);a._eventData.hasOwnProperty(u)&&(b.filterReport=a._eventData[u]);this._sendHit(b)}};b.prototype._onApiBufferStart=
function(a){this._logger.debug(n,"#_onApiBufferStart()");a=a.data;this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(a,["playhead"])&&(this._updateQoSInfo(a),a=new t(this,v.EVENT_TYPE_BUFFER,a.playhead,null,a._eventData[I]),this._sendHit(a))};b.prototype._onApiSeekStart=function(a){this._logger.debug(n,"#_onApiSeekStart()");this._checkCall("_onApiSeekStart")&&(this._stashedAdData=this._assetData.adData(),this._stashedChapterData=this._assetData.chapterData(),this._assetData.adData(null),
this._assetData.type(x.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId(),this._assetData.chapterData(null))};b.prototype._onApiSeekComplete=function(a){this._logger.debug(n,"#_onApiSeekComplete()");a=a.data;if(this._checkCall("_onApiSeekComplete")&&this._inputDataValidator.validateFields(a,["playhead"])){if(a.isInAd){if(!this._inputDataValidator.validateFields(a,["adId","adPosition","podPosition","podPlayerName"]))return;var b=h(this._assetData.videoId())+"_"+a.podPosition;if(this._stashedAdData&&
this._stashedAdData.podId()==b&&parseInt(this._stashedAdData.podPosition(),10)==a.adPosition)this._assetData.adData(this._stashedAdData),this._activeAssetId=this._stashedAdData.adId();else if(!this._assetData.adData()){this._activeAssetId=a.adId;var d=new w;d.adId(this._activeAssetId);d.adName(a.adName);d.adLength(a.adLength);d.podId(b);d.resolver(a.podPlayerName);d.podPosition(a.podPosition+"");d.podName(a.podName);d.podOffset(a.podSecond);d.sid(this._generateSessionId());this._assetData.adData(d)}this._assetData.type(x.TYPE_AD)}else this._assetData.adData(null),
this._assetData.type(x.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId();if(a.isInChapter){if(!this._inputDataValidator.validateFields(a,["chapterPosition","chapterLength","chapterOffset"]))return;this._stashedChapterData&&a.chapterPosition==this._stashedChapterData.position()?this._assetData.chapterData(this._stashedChapterData):this._assetData.chapterData()||(b=new m,b.id(h(this._assetData.videoId())+"_"+a.chapterPosition),b.name(a.chapterName),b.length(a.chapterLength),b.position(a.chapterPosition),
b.offset(a.chapterOffset),b.sid(this._generateSessionId()),this._assetData.chapterData(b))}else this._assetData.chapterData(null);this._stashedChapterData=this._stashedAdData=null}};b.prototype._onApiAdStart=function(a){a=a.data;if(this._logger.debug(n,"#_onApiAdStart(id="+a.adId+", player_name="+a.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+a.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(a,["playhead","podPosition","podPlayerName",
"adId","adPosition"])){this._activeAssetId=a.adId;var b=new w;b.adId(this._activeAssetId);b.adName(a.adName);b.adLength(a.adLength);b.resolver(a.podPlayerName);b.podId(h(this._assetData.videoId())+"_"+a.podPosition);b.podPosition(a.adPosition+"");b.podName(a.podName);b.podOffset(a.podSecond);b.sid(this._generateSessionId());this._assetData.adData(b);this._assetData.type(x.TYPE_AD);this._updateQoSInfo(a);b=e.merge(a.metaVideo,a.metaAd);b=a.metaNielsen?e.merge(b,a.metaNielsen):b;a=new t(this,v.EVENT_TYPE_START,
a.playhead,b,a._eventData[I]);this._sendHit(a)}};b.prototype._onApiAdComplete=function(a){this._logger.debug(n,"#_onApiAdComplete()");a=a.data;if(this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(a,["playhead"])){if(this._assetData.type()!=x.TYPE_AD)return void this._logger.warn(n,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");this._updateQoSInfo(a);a=new t(this,v.EVENT_TYPE_COMPLETE,a.playhead,null,a._eventData[I]);this._sendHit(a);
this._assetData.adData(null);this._assetData.type(x.TYPE_MAIN_CONTENT);this._activeAssetId=this._assetData.videoId()}};b.prototype._onApiChapterStart=function(a){a=a.data;if(this._logger.debug(n,"#_onApiChapterStart(name="+a.chapterName+", length="+a.chapterLength+", position="+a.chapterPosition+", chapter_offset="+a.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(a,["playhead","chapterPosition","chapterOffset","chapterLength"])){var b=new m;b.id(h(this._assetData.videoId())+
"_"+a.chapterPosition);b.name(a.chapterName);b.length(a.chapterLength);b.position(a.chapterPosition);b.offset(a.chapterOffset);b.sid(this._generateSessionId());this._assetData.chapterData(b);this._updateQoSInfo(a);b=e.merge(a.metaVideo,a.metaChapter);a=new t(this,v.EVENT_TYPE_CHAPTER_START,a.playhead,b,a._eventData[I]);a.assetData.adData(null);a.assetData.type(x.TYPE_MAIN_CONTENT);this._sendHit(a)}};b.prototype._onApiChapterComplete=function(a){this._logger.debug(n,"#_onApiChapterComplete()");a=a.data;
if(this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(a,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(n,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");this._updateQoSInfo(a);a=new t(this,v.EVENT_TYPE_CHAPTER_COMPLETE,a.playhead,null,a._eventData[I]);a.assetData.adData(null);a.assetData.type(x.TYPE_MAIN_CONTENT);this._sendHit(a);this._assetData.chapterData(null)}};b.prototype._onApiBitrateChange=
function(a){this._logger.debug(n,"#_onApiBitrateChange()");a=a.data;this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(a,["playhead"])&&(this._updateQoSInfo(a),a=new t(this,v.EVENT_TYPE_BITRATE_CHANGE,a.playhead,null,a._eventData[I]),this._sendHit(a))};b.prototype._onApiTrackError=function(a){a=a.data;if(this._logger.debug(n,"#_onApiTrackError(source="+a._eventData.source+", err_id="+a._eventData.error_id+")"),!this._isTrackingSessionActive)return void this._logger.warn(n,
"#_onApiTrackError() > No active tracking session.");if(this._trackExternalErrors||a._eventData.source===l){this._updateQoSInfo(a);var b=new t(this,v.EVENT_TYPE_ERROR,0,null,a._eventData[I]);b.eventData.id(a._eventData.error_id);b.eventData.source(a._eventData.source);this._sendHit(b)}};b.prototype._onApiTrackInternalError=function(a){a=a.data;this._logger.debug(n,"#_onApiTrackInternalError(source="+a.source+", err_id="+a.error_id+")");this._updateQoSInfo(a);var b=new t(this,v.EVENT_TYPE_ERROR,0);
b.eventData.id(a.error_id);b.eventData.source(a.source);this._sendHit(b)};b.prototype._onApiQuantumEnd=function(a){this._logger.debug(n,"#_onApiQuantumEnd(interval="+this._channel.request(J)+")");a=a.data;this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(a,["playhead"])&&(this._lastInBandItem&&(this._lastInBandItem.eventData.playhead(a.playhead),this._updateQoSInfo(a),this._lastInBandItem.qosData.bitrate(this._qosData.bitrate()),this._lastInBandItem.qosData.fps(this._qosData.fps()),
this._lastInBandItem.qosData.droppedFrames(this._qosData.droppedFrames()),this._lastInBandItem.qosData.startupTime(this._qosData.startupTime())),this._sendHit(this._lastInBandItem))};b.prototype._onNetworkCheckStatusComplete=function(a){a=a.data;this._trackExternalErrors=a[O];(this._reportingInterval=a[Q])||(this._reportingInterval=X);this._logger.debug(n,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")};b.prototype._onResetSessionId=function(a){a=this._generateSessionId();
this._sessionData=new A;this._sessionData.sessionId(a);this._logger.debug(n,"#_resetSessionId(new sessionId="+a+")")};b.prototype._installEventListeners=function(){this._channel.on(P,this._onApiAnalyticsStart,this);this._channel.on(S,this._onApiAnalyticsAdStart,this);this._channel.on(T,this._onApiVideoLoad,this);this._channel.on(U,this._onApiVideoUnload,this);this._channel.on(R,this._onApiVideoStart,this);this._channel.on(ba,this._onApiVideoComplete,this);this._channel.on(ca,this._onApiVideoResume,
this);this._channel.on(Z,this._onApiAdStart,this);this._channel.on(aa,this._onApiAdComplete,this);this._channel.on(da,this._onApiPlay,this);this._channel.on(V,this._onApiPause,this);this._channel.on(ea,this._onApiBufferStart,this);this._channel.on(fa,this._onApiSeekStart,this);this._channel.on(W,this._onApiSeekComplete,this);this._channel.on(ga,this._onApiChapterStart,this);this._channel.on(ha,this._onApiChapterComplete,this);this._channel.on(ia,this._onApiBitrateChange,this);this._channel.on(ja,
this._onApiTrackError,this);this._channel.on(ka,this._onApiTrackInternalError,this);this._channel.on(la,this._onApiQuantumEnd,this);this._channel.on(ma,this._onNetworkCheckStatusComplete,this);this._channel.on(B,this._onResetSessionId,this);this._channel.reply(K,function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null},this)};b.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};b.prototype._resetInternalState=function(){this._logger.debug(n,
"#_resetInternalState()");this._isVideoComplete=this._isTrackingSessionActive=!1;this._autoComputedStartupTime=0;this._streamData=new C;this._qosData=new G;this._sessionData=new A;this._assetData=new x;this._lastInBandItem=this._stashedChapterData=this._stashedAdData=this._cuserData=null};b.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1E9*Math.random())};b.prototype._updateQoSInfo=function(a){this._qosData.bitrate(a.bitrate||0);this._qosData.fps(a.fps||0);this._qosData.droppedFrames(a.droppedFrames||
0);null==a.startupTime||isNaN(a.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(a.startupTime),this._qosData.isStartupTimeOverridden=!0)};b.prototype._checkCall=function(a){return this._isTrackingSessionActive?!this._isVideoComplete||(this._logger.warn(n,"#"+a+"() > The video content already completed."),!1):(this._logger.warn(n,"#"+a+"() > No active tracking session."),!1)};b.prototype._updateLastInBandItem=
function(a){var b=(new Date).getTime(),d=1E3*Math.abs(a.eventData.playhead()-this._lastInBandItem.eventData.playhead()),c=Math.abs(b-this._lastInBandItem.eventData.ts());this._lastInBandItem.eventData.type()!=v.EVENT_TYPE_PAUSE&&this._lastInBandItem.eventData.type()!=v.EVENT_TYPE_STALL?(d<=c*Y||this._doNotOverrideEventDuration)&&c<=this._reportingInterval*Y*1E3?this._lastInBandItem.eventData.duration(b-this._lastInBandItem.eventData.ts()):(this._logger.warn(n,"[WARNING] Resetting duration in lastInBandItem to 0. playheadDelta:"+
d+" tsDelta:"+c+" event type:"+this._lastInBandItem.eventData.type()),this._lastInBandItem.eventData.duration(0)):this._lastInBandItem.eventData.duration(b-this._lastInBandItem.eventData.ts());this._doNotOverrideEventDuration&&(this._doNotOverrideEventDuration=!1);this._lastInBandItem.eventData.ts(b);this._lastInBandItem.eventData.playhead(a.eventData.playhead());this._lastInBandItem.qosData.startupTime(a.qosData.startupTime());this._lastInBandItem.qosData.isStartupTimeOverridden=a.qosData.isStartupTimeOverridden};
b.prototype._sendHit=function(a){function b(a){a=d._reportFactory.createReportForItem(a);a.qosData.isStartupTimeOverridden||a.qosData.startupTime(d._autoComputedStartupTime);var e={};e[N]=a;d._channel.trigger(new F(na,e));a.eventData.type()!=v.EVENT_TYPE_PLAY&&a.eventData.type()!=v.EVENT_TYPE_BUFFER&&a.eventData.type()!=v.EVENT_TYPE_START||(c={},c[M]=!0,d._channel.command(r,c))}var d=this,c={};switch(a.eventData.type()){case v.EVENT_TYPE_START:case v.EVENT_TYPE_PLAY:case v.EVENT_TYPE_PAUSE:case v.EVENT_TYPE_STALL:case v.EVENT_TYPE_BUFFER:this._lastInBandItem&&
(this._updateLastInBandItem(a),this._lastInBandItem.eventData.type()==v.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==x.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),a!=this._lastInBandItem&&b(this._lastInBandItem));b(a);this._lastInBandItem=a;c={};c[M]=!0;this._channel.command(r,c);break;case v.EVENT_TYPE_COMPLETE:this._lastInBandItem&&(a.assetData.type()==x.TYPE_AD&&(this._doNotOverrideEventDuration=!0),this._updateLastInBandItem(a),b(this._lastInBandItem));
b(a);a.assetData.type()==x.TYPE_MAIN_CONTENT?(this._lastInBandItem=null,c={},c[M]=!0,this._channel.command(L,c)):a.assetData.type()==x.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(x.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case v.EVENT_TYPE_CHAPTER_START:case v.EVENT_TYPE_CHAPTER_COMPLETE:this._lastInBandItem&&(this._updateLastInBandItem(a),b(this._lastInBandItem));b(a);this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(a.eventData.type()==
v.EVENT_TYPE_CHAPTER_START?new m(a.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),b(this._lastInBandItem));break;default:b(a)}};var n="ah::Context",l="sourceErrorSDK",q="error",r="clock:reporting.resume",L="clock:reporting.pause",J="reporting_interval",K="session_id",B="reset_session_id",I="callback",u="filter_report",N="report",M="reset",O="track_external_errors",Q="reporting_interval",P="api:aa_start",S="api:aa_ad_start",T="api:video_load",U="api:video_unload",R="api:video_start",
ba="api:video_complete",ca="api:video_resume",Z="api:ad_start",aa="api:ad_complete",da="api:play",V="api:pause",ea="api:buffer_start",fa="api:seek_start",W="api:seek_complete",ga="api:chapter_start",ha="api:chapter_complete",ja="api:track_error",ka="api:track_internal_error",ia="api:bitrate_change",la="api:quantum_end",na="context:report_available",ma="net:check_status_complete",Y=1.5,X=10;d.context.Context=b})(c.ADB.core,c.ADB.va,c.ADB.va.utils,g);(function(c){c.AdobeHeartbeatPluginConfig=function(c,
a){this.trackingServer=c;this.publisher=a;this.ssl=!1;this.sdk=this.ovp="unknown";this.__isPrimetime=this.debugLogging=this.quietMode=!1;this.__psdkVersion=null}})(g);(function(c){function g(){}g.prototype.onError=function(a){};c.AdobeHeartbeatPluginDelegate=g})(g);(function(c,g,a){function d(a){d.__super__.constructor.call(this,C);this._radio=new F(this._logger);this._channel=this._radio.channel(l);this._delegate=a;this._context=new k(this._channel,this._logger);this._filter=new H(this._channel,
this._logger);this._network=new z(this._channel,this._logger);this._setupDataResolver()}var b=c.Event,h=c.Trigger,e=c.plugin.ParamMapping,F=c.radio.Radio,A=g.ErrorInfo,y=g.Version,k=a.context.Context,H=a.filter.ReportFilter,z=a.network.Network,v=a.clock.Clock,x=a.AdobeHeartbeatPluginConfig;c.extend(d,c.plugin.BasePlugin);d.prototype.configure=function(a){if(!a)throw Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof x))throw Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");
this._config=a;this._config.debugLogging?this._logger.enable():this._logger.disable();this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");a=this._config.trackingServer+"/settings/";var d={};d[ja]=this._config.trackingServer;d[ka]=a;d[ia]=this._config.publisher;d[la]=this._config.quietMode;d[na]=this._config.ssl;this._channel.trigger(new b(qa,d));this._isConfigured=
!0};d.prototype.bootstrap=function(a){d.__super__.bootstrap.call(this,a);this._channel.on(q,this._onError,this);this._clock=new v(this._pluginManager,this._channel,this._logger);this._channel.command(wa);this._channel.trigger(new b(xa));this._registerCommands();this._registerBehaviours()};d.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()");this._radio.shutdown();this._context.destroy();this._clock.destroy();this._filter.destroy();this._network.destroy()};d.prototype._canProcess=
function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):d.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)};d.prototype._cmdAnalyticsError=function(a){this._errorInfo||(this._errorInfo=new A("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(q,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))};d.prototype._cmdAnalyticsStart=
function(a){if(this._canProcess()){var d={};d[ma]=a.visitorOptedOut;this._channel.trigger(new b(ra,d));this._channel.trigger(new b(Y,a))}};d.prototype._cmdAnalyticsAdStart=function(a){this._canProcess()&&this._channel.trigger(new b(X,a))};d.prototype._cmdVideoLoad=function(a){this._errorInfo=null;this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new b(oa,a)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),
this._channel.trigger(new b(sa,a)),this._isTrackingSessionActive=!0)};d.prototype._cmdVideoUnload=function(a){this._errorInfo=null;this._canProcess()&&(this._channel.trigger(new b(oa,a)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)};d.prototype._cmdVideoStart=function(a){this._canProcess()&&this._channel.trigger(new b(ta,a))};d.prototype._cmdVideoComplete=function(a){this._canProcess()&&this._channel.trigger(new b(ua,
a))};d.prototype._cmdVideoResume=function(a){this._canProcess()&&this._channel.trigger(new b(ya,a))};d.prototype._cmdPlay=function(a){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(a))};d.prototype._cmdPause=function(a){this._canProcess()&&(this._channel.trigger(new b(pa,a)),this._isPaused=!0,this._runIdleTimer(!0))};d.prototype._cmdAdStart=function(a){this._canProcess()&&(this._channel.trigger(new b(za,a)),this._resumePlaybackIfPossible(a))};d.prototype._cmdAdComplete=function(a){this._canProcess()&&
(this._channel.trigger(new b(Aa,a)),a.isInAdBreak||this._resumePlaybackIfPossible(a))};d.prototype._cmdBufferStart=function(a){this._canProcess()&&(this._channel.trigger(new b(Ba,a)),this._isBuffering=!0,this._runIdleTimer(!0))};d.prototype._cmdBufferComplete=function(a){this._canProcess()&&(this._isBuffering=!1,this._resumePlaybackIfPossible(a))};d.prototype._cmdSeekStart=function(a){this._canProcess()&&(this._channel.trigger(new b(Ca,a)),this._channel.trigger(new b(pa,a)),this._isSeeking=!0,this._runIdleTimer(!0))};
d.prototype._cmdSeekComplete=function(a){this._canProcess()&&(this._channel.trigger(new b(Da,a)),this._isSeeking=!1,this._resumePlaybackIfPossible(a))};d.prototype._cmdChapterStart=function(a){this._canProcess()&&this._channel.trigger(new b(Ea,a))};d.prototype._cmdChapterComplete=function(a){this._canProcess()&&this._channel.trigger(new b(Fa,a))};d.prototype._cmdBitrateChange=function(a){this._canProcess()&&this._channel.trigger(new b(Ga,a))};d.prototype._cmdTrackError=function(a){this._canProcess()&&
this._channel.trigger(new b(Ha,a))};d.prototype._cmdClockReportingTick=function(a){this._canProcess()&&this._channel.trigger(new b(Ia,a))};d.prototype._cmdIdleTick=function(a){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(V),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(aa))};d.prototype._onError=function(a){this._errorInfo=a.data;a={};a[ga]=Ja;a[ha]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails();this._channel.trigger(new b(Ka,
a));this._runReportingTimer(!1);this._trigger(q,this._errorInfo);this._delegate&&this._delegate.onError(this._errorInfo)};d.prototype._runIdleTimer=function(a){var b={};b[W]=!0;a?this._channel.command(La,b):this._channel.command(Ma,b)};d.prototype._runFlushFilterTimer=function(a){var b={};b[W]=!0;a?this._channel.command(Na,b):this._channel.command(Oa,b)};d.prototype._runReportingTimer=function(a){var b={};b[W]=!0;a?this._channel.command(Pa,b):this._channel.command(Qa,b)};d.prototype._registerCommands=
function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError);this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart);this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart);this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad);this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload);this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart);this._pluginManager.comply(this,
"handleVideoComplete",this._cmdVideoComplete);this._pluginManager.comply(this,"handleVideoResume",this._cmdVideoResume);this._pluginManager.comply(this,"handlePlay",this._cmdPlay);this._pluginManager.comply(this,"handlePause",this._cmdPause);this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart);this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete);this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart);this._pluginManager.comply(this,"handleBufferComplete",
this._cmdBufferComplete);this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart);this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete);this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart);this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete);this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange);this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError);this._pluginManager.comply(this,
"handleClockReportingTick",this._cmdClockReportingTick);this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)};d.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new h(m,J),this,"handleVideoLoad",[new e(w,"rsid","rsid"),new e(w,"tracking_server","trackingServer")]);this._pluginManager.registerBehaviour(new h(m,K),this,"handleVideoUnload");this._pluginManager.registerBehaviour(new h(m,B),this,"handleVideoStart",[new e(m,"video.id","videoId"),new e(m,"video.name",
"videoName"),new e(m,"video.length","videoLength"),new e(m,"video.playhead","playhead"),new e(m,"video.playerName","playerName"),new e(m,"video.streamType","streamType"),new e(m,"qos.fps","fps"),new e(m,"qos.droppedFrames","droppedFrames"),new e(m,"qos.bitrate","bitrate"),new e(m,"qos.startupTime","startupTime"),new e(w,"rsid","rsid"),new e(w,"tracking_server","trackingServer"),new e(w,"channel","channel"),new e(w,"meta.video.*","metaVideo"),new e(w,"ssl","useSsl"),new e(t,"meta","metaNielsen"),new e(G,
"publisher","publisher"),new e(G,"sdk","sdk"),new e(G,"ovp","ovp"),new e(G,"version","version"),new e(G,"api_level","apiLvl")]);this._pluginManager.registerBehaviour(new h(m,u),this,"handleVideoComplete",[new e(m,"qos.fps","fps"),new e(m,"qos.droppedFrames","droppedFrames"),new e(m,"qos.bitrate","bitrate"),new e(m,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new h(m,I),this,"handleVideoResume",[new e(m,"video.id","videoId"),new e(m,"video.name","videoName"),new e(m,"video.length",
"videoLength"),new e(m,"video.playhead","playhead"),new e(m,"video.playerName","playerName"),new e(m,"video.streamType","streamType")]);this._pluginManager.registerBehaviour(new h(m,N),this,"handlePlay",[new e(m,"video.playhead","playhead"),new e(m,"qos.fps","fps"),new e(m,"qos.droppedFrames","droppedFrames"),new e(m,"qos.bitrate","bitrate"),new e(m,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new h(m,M),this,"handlePause",[new e(m,"video.playhead","playhead"),new e(m,
"video.playheadStalled","playheadStalled"),new e(m,"qos.fps","fps"),new e(m,"qos.droppedFrames","droppedFrames"),new e(m,"qos.bitrate","bitrate"),new e(m,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new h(m,O),this,"handleAdStart",[new e(m,"video.playhead","playhead"),new e(m,"ad.id","adId"),new e(m,"ad.name","adName"),new e(m,"ad.length","adLength"),new e(m,"ad.position","adPosition"),new e(m,"pod.name","podName"),new e(m,"pod.playerName","podPlayerName"),new e(m,"pod.position",
"podPosition"),new e(m,"pod.startTime","podSecond"),new e(m,"qos.fps","fps"),new e(m,"qos.droppedFrames","droppedFrames"),new e(m,"qos.bitrate","bitrate"),new e(m,"qos.startupTime","startupTime"),new e(w,"meta.video.*","metaVideo"),new e(w,"meta.ad.*","metaAd"),new e(t,"meta","metaNielsen")]);this._pluginManager.registerBehaviour(new h(m,Q),this,"handleAdComplete",[new e(m,"video.playhead","playhead"),new e(m,"ad.isInAdBreak","isInAdBreak"),new e(m,"qos.fps","fps"),new e(m,"qos.droppedFrames","droppedFrames"),
new e(m,"qos.bitrate","bitrate"),new e(m,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new h(m,P),this,"handleBufferStart",[new e(m,"video.playhead","playhead"),new e(m,"qos.fps","fps"),new e(m,"qos.droppedFrames","droppedFrames"),new e(m,"qos.bitrate","bitrate"),new e(m,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new h(m,S),this,"handleBufferComplete",[new e(m,"video.playhead","playhead"),new e(m,"qos.fps","fps"),new e(m,"qos.droppedFrames",
"droppedFrames"),new e(m,"qos.bitrate","bitrate"),new e(m,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new h(m,T),this,"handleSeekStart",[new e(m,"video.playhead","playhead")]);this._pluginManager.registerBehaviour(new h(m,U),this,"handleSeekComplete",[new e(m,"video.playhead","playhead"),new e(m,"ad.isInAd","isInAd"),new e(m,"ad.id","adId"),new e(m,"ad.position","adPosition"),new e(m,"pod.playerName","podPlayerName"),new e(m,"pod.position","podPosition"),new e(m,"chapter.isInChapter",
"isInChapter"),new e(m,"chapter.position","chapterPosition"),new e(m,"chapter.name","chapterName"),new e(m,"chapter.length","chapterLength"),new e(m,"chapter.startTime","chapterOffset"),new e(m,"qos.fps","fps"),new e(m,"qos.droppedFrames","droppedFrames"),new e(m,"qos.bitrate","bitrate"),new e(m,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new h(m,R),this,"handleChapterStart",[new e(m,"video.playhead","playhead"),new e(m,"chapter.position","chapterPosition"),new e(m,"chapter.name",
"chapterName"),new e(m,"chapter.length","chapterLength"),new e(m,"chapter.startTime","chapterOffset"),new e(m,"qos.fps","fps"),new e(m,"qos.droppedFrames","droppedFrames"),new e(m,"qos.bitrate","bitrate"),new e(m,"qos.startupTime","startupTime"),new e(w,"meta.video.*","metaVideo"),new e(w,"meta.chapter.*","metaChapter"),new e(t,"meta","metaNielsen")]);this._pluginManager.registerBehaviour(new h(m,ba),this,"handleChapterComplete",[new e(m,"video.playhead","playhead"),new e(m,"qos.fps","fps"),new e(m,
"qos.droppedFrames","droppedFrames"),new e(m,"qos.bitrate","bitrate"),new e(m,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new h(m,ca),this,"handleBitrateChange",[new e(m,"video.playhead","playhead"),new e(m,"qos.fps","fps"),new e(m,"qos.droppedFrames","droppedFrames"),new e(m,"qos.bitrate","bitrate"),new e(m,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new h(m,Z),this,"handleTrackError");this._pluginManager.registerBehaviour(new h(D,ea),this,
"handleClockReportingTick",[new e(m,"video.playhead","playhead"),new e(m,"qos.fps","fps"),new e(m,"qos.droppedFrames","droppedFrames"),new e(m,"qos.bitrate","bitrate"),new e(m,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new h(D,fa),this,"handleIdleTick",[]);this._pluginManager.registerBehaviour(new h(G,V),this,"handleClockReportingTick",[new e(m,"video.playhead","playhead"),new e(m,"qos.fps","fps"),new e(m,"qos.droppedFrames","droppedFrames"),new e(m,"qos.bitrate","bitrate"),
new e(m,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new h(w,q),this,"handleAnalyticsError");this._pluginManager.registerBehaviour(new h(w,r),this,"handleAnalyticsStart",[new e(w,"vid","vid"),new e(w,"aid","aid"),new e(w,"mid","mid"),new e(w,"customerIDs","customerIDs"),new e(w,"visitorOptedOut","visitorOptedOut"),new e(w,"blob","blob"),new e(w,"loc_hint","loc_hint"),new e(m,"video.playhead","playhead"),new e(m,"qos.fps","fps"),new e(m,"qos.droppedFrames","droppedFrames"),
new e(m,"qos.bitrate","bitrate"),new e(m,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new h(w,L),this,"handleAnalyticsAdStart",[new e(m,"video.playhead","playhead"),new e(m,"qos.fps","fps"),new e(m,"qos.droppedFrames","droppedFrames"),new e(m,"qos.bitrate","bitrate"),new e(m,"qos.startupTime","startupTime")])};d.prototype._setupDataResolver=function(){var a={},b=this;a.version=function(){return y.getVersion()};a.api_level=function(){return y.getApiLevel()};a.tracking_server=
function(){return b._config?b._config.trackingServer:null};a.publisher=function(){return b._config?b._config.publisher:null};a.quiet_mode=function(){return!!b._config&&b._config.quietMode};a.ovp=function(){return b._config?b._config.ovp:null};a.sdk=function(){return b._config?b._config.sdk:null};a.is_primetime=function(){return!!b._config&&b._config.__isPrimetime};a.psdk_version=function(){return b._config?b._config.__psdkVersion:null};a.session_id=function(){return b._channel.request(E)};this._dataResolver=
function(b){if(!b||0==b.length)return null;for(var d=null,c=0;c<b.length;c++){var e=b[c],d=d||{};d[e]=a.hasOwnProperty(e)?a[e].call(this):null}return d}};d.prototype._resumePlaybackIfPossible=function(a){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle&&(this._isVideoIdle=!1,this._resumePlaybackFromIdle()),this._runIdleTimer(!1),this._channel.trigger(new b(Ra,a)))};d.prototype._resumePlaybackFromIdle=function(){this._trigger(V);this._filter.clear();this._channel.trigger(new b(n));
this._trigger(da);this._runReportingTimer(!0);this._runFlushFilterTimer(!0)};var C="adobe-heartbeat",G=C,w="adobe-analytics",m="player",t="nielsen",D="service.clock",E="session_id",n="reset_session_id",l="heartbeat-channel",q="error",r="aa_start",L="sc_ad_start",J="video_load",K="video_unload",B="video_start",I="video_resume",u="video_complete",N="play",M="pause",O="ad_start",Q="ad_complete",P="buffer_start",S="buffer_complete",T="seek_start",U="seek_complete",R="chapter_start",ba="chapter_complete",
ca="bitrate_change",Z="track_error",aa="video_idle_start",da="video_idle_resume",V="quantum_close",ea="heartbeat.reporting.tick",fa="heartbeat.idle.tick",W="reset",ga="source",ha="error_id",ja="tracking_server",ka="check_status_server",ia="publisher",la="quiet_mode",na="ssl",ma="visitor_opt_out",Y="api:aa_start",X="api:aa_ad_start",qa="api:config",ra="api:update_visitor_optout",sa="api:video_load",oa="api:video_unload",ta="api:video_start",ua="api:video_complete",ya="api:video_resume",za="api:ad_start",
Aa="api:ad_complete",Ra="api:play",pa="api:pause",Ba="api:buffer_start",Ca="api:seek_start",Da="api:seek_complete",Ea="api:chapter_start",Fa="api:chapter_complete",Ha="api:track_error",Ka="api:track_internal_error",Ga="api:bitrate_change",Ia="api:quantum_end",Ja="sourceErrorHeartbeat",wa="clock:check_status.resume",Pa="clock:reporting.resume",Qa="clock:reporting.pause",Na="clock:flush_filter.resume",Oa="clock:flush_filter.pause",La="clock:idle.resume",Ma="clock:idle.pause",xa="clock:check_status.get_settings";
a.AdobeHeartbeatPlugin=d})(c.ADB.core,c.ADB.va,g);c.ADB.va.plugins.ah||(c.ADB.va.plugins.ah=g)}(this);
!function(c){if("undefined"==typeof g)var g={};!function(c,g){function a(a,d){this._onFail={fn:a,ctx:d}}var d=c.ErrorInfo;a.prototype.validateFields=function(a,d){if(!a)return this._fail("Data cannot be null");if(d)for(var c=0;c<d.length;c++){var f=d[c];switch(f){case "videoId":if(!a.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof a.videoId)return this._fail("The ID for the main video must be a String.");if(""===a.videoId)return this._fail("The ID for the main video cannot be an empty string.");
break;case "streamType":if(!a.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof a.streamType)return this._fail("The stream type for the main video must be a String.");if(""===a.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case "playerName":if(!a.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof a.playerName)return this._fail("The player name for the main video must be a String.");
if(""===a.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case "videoLength":if(!a.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof a.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(a.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case "podPlayerName":if(!a.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");
if("string"!=typeof a.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===a.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case "podPosition":if(!a.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof a.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(a.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");
break;case "adId":if(!a.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof a.adId)return this._fail("The ad ID must be a String.");if(""===a.adId)return this._fail("The ad ID cannot be an empty string.");break;case "adPosition":if(!a.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof a.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(a.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");
break;case "adLength":if(!a.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof a.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(a.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+f)}}return!0};a.prototype._fail=function(a){a=new d("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,a),!1};
g.InputDataValidator=a}(c.ADB.va,g);(function(c){c.AdobeAnalyticsPluginConfig=function(){this.channel="";this.debugLogging=!1}})(g);(function(c){function g(){}g.prototype.onError=function(a){};c.AdobeAnalyticsPluginDelegate=g})(g);(function(c,g,a,d){function b(a,d){if(b.__super__.constructor.call(this,G),!a)throw Error("The reference to the AppMeasurement object cannot be NULL.");this._appMeasurement=a;this._delegate=d;this._customMetaKeys=[];this._videoMetadata={};this._adMetadata={};this._chapterMetadata=
{};this._errorInfo=null;this._workQueue=new y(!0,E);this._inputDataValidator=new C(function(a){this._errorInfo=a;this._logger.error(this._logTag,a.getMessage()+" | "+a.getDetails());var b=this;setTimeout(function(){b._trigger(n,a);b._delegate&&b._delegate.onError(b._errorInfo)},0)},this);this._appMeasurement.isReadyToTrack();this._setupDataResolver()}var h=c.Trigger,e=c.plugin.ParamMapping,F=c.radio.Channel,A=c.radio.Command,y=c.radio.CommandQueue,k=g.ErrorInfo,H=a.md5,z=a.StringUtils,v=a.ObjectUtils,
x=d.AdobeAnalyticsPluginConfig,C=d.InputDataValidator;c.extend(b,c.plugin.BasePlugin);b.prototype.configure=function(a){if(!a)throw Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof x))throw Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=a;this._config.debugLogging?this._logger.enable():this._logger.disable();this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+
", ssl="+this._appMeasurement.ssl+"})")};b.prototype.bootstrap=function(a){b.__super__.bootstrap.call(this,a);this._registerCommands();this._registerBehaviours()};b.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[]);b.__super__.setup.call(this)};b.prototype.setVideoMetadata=function(a){this._videoMetadata=v.clone(a)};b.prototype.setAdMetadata=function(a){this._adMetadata=
v.clone(a)};b.prototype.setChapterMetadata=function(a){this._chapterMetadata=v.clone(a)};b.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):b.__super__._canProcess.call(this)};b.prototype._cmdVideoLoad=function(a){this._errorInfo=null};b.prototype._cmdVideoStart=function(a){this._logger.debug(this._logTag,"#_cmdVideoStart()");this._canProcess()&&this._workQueue.addCommand(new A(this._executeOpen,this,[a]))};b.prototype._cmdAdStart=
function(a){this._logger.debug(this._logTag,"#_cmdAdStart()");this._canProcess()&&this._workQueue.addCommand(new A(this._executeOpenAd,this,[a]))};b.prototype._cmdHeartbeatPluginError=function(a){this._errorInfo||(this._errorInfo=new k("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(n,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))};b.prototype._resetAppMeasurementContextData=function(){delete this._appMeasurement.contextData["a.contentType"];delete this._appMeasurement.contextData["a.media.name"];
delete this._appMeasurement.contextData["a.media.friendlyName"];delete this._appMeasurement.contextData["a.media.length"];delete this._appMeasurement.contextData["a.media.playerName"];delete this._appMeasurement.contextData["a.media.channel"];delete this._appMeasurement.contextData["a.media.view"];delete this._appMeasurement.contextData["a.media.ad.name"];delete this._appMeasurement.contextData["a.media.ad.friendlyName"];delete this._appMeasurement.contextData["a.media.ad.podFriendlyName"];delete this._appMeasurement.contextData["a.media.ad.length"];
delete this._appMeasurement.contextData["a.media.ad.playerName"];delete this._appMeasurement.contextData["a.media.ad.pod"];delete this._appMeasurement.contextData["a.media.ad.podPosition"];delete this._appMeasurement.contextData["a.media.ad.podSecond"];delete this._appMeasurement.contextData["a.media.ad.view"];for(var a=0;a<this._customMetaKeys.length;a++)delete this._appMeasurement.contextData[this._customMetaKeys[a]];this._customMetaKeys=[]};b.prototype._executeOpen=function(a){if(this._logger.debug(this._logTag,
"#_executeOpen(id="+a.videoId+", videoName="+a.videoName+", streamType="+a.streamType+", length="+a.videoLength+", playerName="+a.playerName+", channel="+a.channel+", isPrimetime="+a.isPrimetime+", sessionId="+a.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(a,["videoId","streamType","videoLength","playerName"])){this._resetAppMeasurementContextData();for(var b in a.metaVideo)a.metaVideo.hasOwnProperty(b)&&(this._appMeasurement.contextData[b]=a.metaVideo[b],this._customMetaKeys.push(b));
if(a.metaNielsen)for(b in a.metaNielsen)a.metaNielsen.hasOwnProperty(b)&&(this._appMeasurement.contextData[b]=a.metaNielsen[b],this._customMetaKeys.push(b));this._appMeasurement.contextData["a.contentType"]=a.streamType;this._appMeasurement.contextData["a.media.name"]=a.videoId;this._appMeasurement.contextData["a.media.friendlyName"]=a.videoName||"";this._appMeasurement.contextData["a.media.length"]=Math.floor(a.videoLength)||"0.0";this._appMeasurement.contextData["a.media.playerName"]=a.playerName;
this._appMeasurement.contextData["a.media.channel"]=a.channel||"";this._appMeasurement.contextData["a.media.view"]=!0;this._appMeasurement.contextData["a.media.vsid"]=a.sessionId;this._appMeasurement.pev3=l;this._appMeasurement.pe=a.isPrimetime?L:r;this._appMeasurement.track();var d=this;setTimeout(function(){d._trigger(B,a)},0)}};b.prototype._executeOpenAd=function(a){var b=H(a.videoId)+"_"+a.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+a.adId+", streamType="+a.streamType+
", length="+a.adLength+", podPlayerName="+a.podPlayerName+", parentId="+a.videoId+", podId="+b+", parentPodPosition="+a.adPosition+", podSecond="+a.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(a,"videoId streamType playerName adId adLength podPlayerName adPosition".split(" "))){a.podSecond=null==a.podSecond||isNaN(a.podSecond)?a.playhead:a.podSecond;this._resetAppMeasurementContextData();for(var d in a.metaVideo)a.metaVideo.hasOwnProperty(d)&&(this._appMeasurement.contextData[d]=
a.metaVideo[d],this._customMetaKeys.push(d));for(d in a.metaAd)a.metaAd.hasOwnProperty(d)&&(this._appMeasurement.contextData[d]=a.metaAd[d],this._customMetaKeys.push(d));if(a.metaNielsen)for(d in a.metaNielsen)a.metaNielsen.hasOwnProperty(d)&&(this._appMeasurement.contextData[d]=a.metaNielsen[d],this._customMetaKeys.push(d));this._appMeasurement.contextData["a.contentType"]=a.streamType;this._appMeasurement.contextData["a.media.name"]=a.videoId;this._appMeasurement.contextData["a.media.playerName"]=
a.playerName;this._appMeasurement.contextData["a.media.channel"]=a.channel||"";this._appMeasurement.contextData["a.media.vsid"]=a.sessionId;this._appMeasurement.contextData["a.media.friendlyName"]=a.videoName||"";this._appMeasurement.contextData["a.media.length"]=Math.floor(a.videoLength)||"0.0";this._appMeasurement.contextData["a.media.ad.name"]=a.adId;this._appMeasurement.contextData["a.media.ad.friendlyName"]=a.adName||"";this._appMeasurement.contextData["a.media.ad.podFriendlyName"]=a.podName||
"";this._appMeasurement.contextData["a.media.ad.length"]=Math.floor(a.adLength)||"0.0";this._appMeasurement.contextData["a.media.ad.playerName"]=a.podPlayerName;this._appMeasurement.contextData["a.media.ad.pod"]=b;this._appMeasurement.contextData["a.media.ad.podPosition"]=Math.floor(a.adPosition)||"0.0";this._appMeasurement.contextData["a.media.ad.podSecond"]=Math.floor(a.podSecond)||"0.0";this._appMeasurement.contextData["a.media.ad.view"]=!0;this._appMeasurement.pev3=q;this._appMeasurement.pe=a.isPrimetime?
K:J;this._appMeasurement.track();var c=this;setTimeout(function(){c._trigger(I,a)},0)}};b.prototype._setupDataResolver=function(){var a={},b=this;a.rsid=function(){return b._appMeasurement.account};a.tracking_server=function(){return b._appMeasurement.ssl&&b._appMeasurement.trackingServerSecure?b._appMeasurement.trackingServerSecure:b._appMeasurement.trackingServer};a.ssl=function(){return b._appMeasurement.ssl};a.vid=function(){return b._appMeasurement.visitorID};a.aid=function(){return b._appMeasurement.analyticsVisitorID};
a.mid=function(){return b._appMeasurement.marketingCloudVisitorID};a.blob=function(){return b._appMeasurement.audienceManagerBlob};a.loc_hint=function(){return b._appMeasurement.audienceManagerLocationHint?parseInt(b._appMeasurement.audienceManagerLocationHint):""};a.customerIDs=function(){var a=b._appMeasurement.visitor.getCustomerIDs(),d={},c;for(c in a)if(a.hasOwnProperty(c)){var e=a[c];if("object"==typeof e){for(var f in e)e.hasOwnProperty(f)&&("authState"==f?d[c+".as"]=e[f]:d[c+"."+f]=e[f]);
d[c+".as"]||(d[c+".as"]="0")}}return d};a.channel=function(){return b._config?b._config.channel:null};a.meta=function(a){a=a.split(".");if(2>a.length)return null;var d=a.shift();switch(a=a.join("."),d){case "video":return a==F.WILDCARD?b._videoMetadata:b._videoMetadata[a];case "ad":return a==F.WILDCARD?b._adMetadata:b._adMetadata[a];case "chapter":return a==F.WILDCARD?b._chapterMetadata:b._chapterMetadata[a];default:return null}};a.visitorOptedOut=function(){return void 0!=b._appMeasurement.visitorOptedOut&&
b._appMeasurement.visitorOptedOut};this._dataResolver=function(b){if(!b||0==b.length)return null;for(var d=null,c=0;c<b.length;c++){var e=b[c],d=d||{};z.startsWith(e,"meta.")?d[e]=a.meta(e.split("meta.")[1]):d[e]=a.hasOwnProperty(e)?a[e].call(this):null}return d}};b.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad);this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart);this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart);
this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)};b.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new h(t,u),this,"handleVideoLoad");this._pluginManager.registerBehaviour(new h(t,N),this,"handleVideoStart",[new e(t,"video.id","videoId"),new e(t,"video.streamType","streamType"),new e(t,"video.name","videoName"),new e(t,"video.length","videoLength"),new e(t,"video.playerName","playerName"),new e(t,"video.streamType","streamType"),
new e(D,"is_primetime","isPrimetime"),new e(D,"session_id","sessionId"),new e(w,"channel","channel"),new e(w,"meta.video.*","metaVideo"),new e(m,"meta","metaNielsen")]);this._pluginManager.registerBehaviour(new h(t,M),this,"handleAdStart",[new e(t,"video.id","videoId"),new e(t,"video.streamType","streamType"),new e(t,"video.playhead","playhead"),new e(t,"video.playerName","playerName"),new e(t,"video.name","videoName"),new e(t,"video.length","videoLength"),new e(t,"ad.id","adId"),new e(t,"ad.length",
"adLength"),new e(t,"ad.position","adPosition"),new e(t,"ad.name","adName"),new e(t,"pod.name","podName"),new e(t,"pod.position","podPosition"),new e(t,"pod.playerName","podPlayerName"),new e(t,"pod.startTime","podSecond"),new e(D,"is_primetime","isPrimetime"),new e(D,"session_id","sessionId"),new e(w,"channel","channel"),new e(w,"meta.video.*","metaVideo"),new e(w,"meta.ad.*","metaAd"),new e(m,"meta","metaNielsen")]);this._pluginManager.registerBehaviour(new h(D,n),this,"handleHeartbeatPluginError")};
b.prototype._onAppMeasurementReady=function(){this._workQueue.resume()};var G="adobe-analytics",w=G,m="nielsen",t="player",D="adobe-heartbeat",E=2E3,n="error",l="video",q="videoAd",r="ms_s",L="msp_s",J="msa_s",K="mspa_s",B="aa_start",I="sc_ad_start",u="video_load",N="video_start",M="ad_start";d.AdobeAnalyticsPlugin=b})(c.ADB.core,c.ADB.va,c.ADB.va.utils,g);(function(c){c.VideoMetadataKeys={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",
FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"};c.AdMetadataKeys={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",
CREATIVE_URL:"a.media.ad.creativeURL"}})(g);c.ADB.va.plugins.aa||(c.ADB.va.plugins.aa=g)}(this);
!function(c){if("undefined"==typeof g)var g={};!function(c){c.NielsenPluginConfig=function(){this.debugLogging=!1;this.configKey=this.appInfo=null}}(g);(function(c,g){function a(a,b){this.delegate={onConfigLoaded:a,onConfigError:b};this.reset()}function d(a,b){var d=document.getElementsByTagName("head")[0],c=document.createElement("script");c.type="text/javascript";c.src=a;c.onreadystatechange=b;c.onload=b;d.appendChild(c)}a.prototype.reset=function(){this._loader&&(this._loader.close(),this._loader=
null);this.loadScriptDelegate&&(this.loadScriptDelegate.callback=null);this.loadScriptDelegate={callback:null,cancelled:!1};this.configKey=null};a.prototype.loadConfig=function(a){a=a.split("/");if(2!=a.length)return void this.delegate.onConfigError("Nielsen Config: Invalid configKey property");for(var c=b,f=this,g=0;g<a.length;g++)c=c.replace("["+g+"]",a[g]);this.loadScriptDelegate.callback=function(){if(window._adobe_sdk_settings&&window._adobe_sdk_settings.solutions&&window._adobe_sdk_settings.solutions.video){var a=
window._adobe_sdk_settings.solutions.video;f.isMTVREnabled="true"==a.pt1;f.isOCREnabled="true"==a.pt2;f.isNielsenEnabled="true"==a.active;f.delegate.onConfigLoaded()}else f.delegate.onConfigError("Nielsen Config: Load Error - invalid response")};var p=this.loadScriptDelegate;d(c,function(){p.callback&&p.callback()})};var b="https://assets.adobedtm.com/[0]/scripts/satellite-[1].js";g._NielsenPluginDTMSettings=a})(c.ADB.core,g);(function(c){function g(){}g.prototype.getMetadataInfo=function(){throw Error("Implementation error: Method must be overridden.");
};g.prototype.getAdMetadataInfo=function(){throw Error("Implementation error: Method must be overridden.");};g.prototype.getChannelInfo=function(){throw Error("Implementation error: Method must be overridden.");};g.prototype.onError=function(a){};c.NielsenPluginDelegate=g})(g);(function(c,g,a){function d(a){if(d.__super__.constructor.call(this,y),!a)throw Error("NielsenPlugin delegate cannot be NULL.");this._delegate=a;this._nielsen=this._errorInfo=this._config=null;this._interval=void 0;this._playhead=
0;this._nielsenCompleted=!1;this._aaData={};this._contextData={};this._nielsenTimerPaused=!0;this._playbackStarted=this._playbackBuffering=this._playbackSeeking=this._playbackPaused=this._nielsenTrackingStarted=!1;this._adPausedTime=this._adPausedStartTS=this._adStartTS=0;this._setupDataResolver()}var b=c.Trigger,h=c.plugin.ParamMapping,e=g.ErrorInfo,F=a.NielsenPluginConfig,A=a._NielsenPluginDTMSettings;c.extend(d,c.plugin.BasePlugin);d.prototype.configure=function(a){if(!a)throw Error("Reference to the configuration data cannot be NULL.");
if(!(a instanceof F))throw Error("Expected config data to be instance of NielsenPluginConfig.");if(this._config=a,a.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+a.debugLogging+")"),!a.appInfo)throw Error("Nielsen configuration appInfo cannot be NULL.");this._interval=R};d.prototype.loadMetadata=function(a){this._settings.isOCREnabled&&a&&0<a.length&&(a=this._copyMetadata(a),this._ggPM("3",a))};d.prototype._setPlayhead=function(a,
b,d,c){c=c?c:this._getUTCTime();b?this._playhead=c-this._adStartTS-this._adPausedTime:!d||d!=T&&d!=U?this._playhead=a:this._playhead=c};d.prototype._getUTCTime=function(){return Date.now()/1E3};d.prototype._restartNielsenPlugin=function(){this._errorInfo=null;this._interval=R;this._playhead=0;this._aaData={};this._errorInfo=null;this._nielsenPaused=this._nielsenCompleted=!1;this._nielsenTimerPaused=!0;this._playbackStarted=this._playbackPlayingAdBreak=this._playbackBuffering=this._playbackSeeking=
this._playbackPaused=this._nielsenTrackingStarted=!1;this._adPausedTime=this._adPausedStartTS=this._adStartTS=0};d.prototype._cmdVideoLoad=function(){this._canProcess()&&(this._logger.debug(this._logTag,"#_cmdVideoLoad()"),this._restartNielsenPlugin(),this._requestDTMConfig(),this._setupContextData())};d.prototype._cmdVideoUnload=function(a){return this._canProcess()?(this._logger.debug(this._logTag,"#_cmdVideoUnload()"),this._setPlayhead(a.videoHead,a.isInAd,a.streamType),void this._endNielsen()):
(this._errorInfo=null,void(this._settings&&this._settings.reset()))};d.prototype._cmdVideoStart=function(a){this._canProcess()&&(this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._aaData.rsid=a.rsid,this._aaData.mid=a.mid,this._aaData.vsid=a.sessionId,this._aaData.videoId=a.videoId,this._aaData.videoLength=a.videoLength,this._beginTracking(!1,a.videoHead,a.streamType,0,!0),this._nielsenTrackingStarted=!0)};d.prototype._cmdVideoComplete=function(a){this._canProcess()&&(this._logger.debug(this._logTag,
"#_cmdVideoComplete()"),this._setPlayhead(a.videoHead,a.isInAd,a.streamType),this._endNielsen())};d.prototype._cmdVideoIdleStart=function(a){this._logger.debug(this._logTag,"#_cmdVideoIdleStart");this._endNielsen();this._restartNielsenPlugin()};d.prototype._cmdHeartbeatPluginError=function(a){this._errorInfo||(this._nielsen&&this._configLoaded&&this._nielsenTrackingStarted&&this._endNielsen(),this._errorInfo=new e("Internal error","NielsenPlugin is in ERROR state."),this._trigger(v,this._errorInfo),
this._delegate&&this._delegate.onError(this._errorInfo))};d.prototype._cmdPlay=function(a){this._playbackStarted=!0;this._canProcess()&&(this._logger.debug(this._logTag,"#_cmdPlay()"),this._playbackPaused=!1,this._resumeIfNeeded(a.isInAd,a.videoHead,a.streamType,!0))};d.prototype._cmdPause=function(a){this._canProcess()&&(this._logger.debug(this._logTag,"#_cmdPause()"),this._pauseIfNeeded(a.videoHead,a.isInAd,a.streamType,!0),this._playbackPaused=!0)};d.prototype._cmdAdStart=function(a){this._canProcess()&&
(this._logger.debug(this._logTag,"#_cmdAdStart()"),this._aaData.adId=a.adId,this._aaData.adLength=a.adLength,this._playbackStarted&&(this._setPlayhead(a.videoHead,this._playbackPlayingAdBreak,a.streamType),this._playheadPosition(this._playhead)),this._adStartTS=this._getUTCTime(),this._adPausedTime=0,this._adPausedStartTS=0,this._playbackStarted&&this._endTracking(this._playbackPlayingAdBreak,this._playhead),this._beginTracking(!0,a.videoHead,a.streamType,this._adStartTS),this._playbackPlayingAdBreak=
!0)};d.prototype._cmdAdComplete=function(a){this._canProcess()&&(this._logger.debug(this._logTag,"#_cmdAdComplete()"),this._setPlayhead(a.videoHead,!0,a.streamType),this._playheadPosition(this._playhead),this._endTracking(!0,this._playhead),this._playbackPlayingAdBreak&&!a.isInAdBreak&&(this._beginTracking(!1,a.videoHead,a.streamType),this._playbackPlayingAdBreak=!1),this._adPausedTime=0,this._adPausedStartTS=0)};d.prototype._cmdSeekStart=function(a){this._canProcess()&&(this._logger.debug(this._logTag,
"#_cmdSeekStart()"),this._pauseIfNeeded(a.videoHead,a.isInAd,a.streamType,!0),this._playbackSeeking=!0)};d.prototype._cmdSeekComplete=function(a){this._canProcess()&&(this._logger.debug(this._logTag,"#_cmdSeekComplete()"),this._playbackSeeking=!1,this._resumeIfNeeded(a.isInAd,a.videoHead,a.streamType,!0))};d.prototype._cmdBufferStart=function(a){this._canProcess()&&(this._logger.debug(this._logTag,"#_cmdBufferStart()"),this._pauseIfNeeded(a.videoHead,a.isInAd,a.streamType,!1),this._playbackBuffering=
!0)};d.prototype._cmdBufferComplete=function(a){this._canProcess()&&(this._logger.debug(this._logTag,"#_cmdBufferComplete()"),this._playbackBuffering=!1,this._resumeIfNeeded(a.isInAd,a.videoHead,a.streamType,!1))};d.prototype._cmdTimedMetadata=function(a){this._settings.isMTVREnabled&&this._canProcess()&&(this._logger.debug(this._logTag,"#_cmdTimedMetadata()"),a&&a._eventData&&this._sendID3(a._eventData))};d.prototype._onTick=function(a){this._canProcess()&&(this._logger.debug(this._logTag,"#_onTick()"),
a&&(this._playbackPlayingAdBreak&&!a.isInAd?(this._endTracking(!0,this._playhead),this._beginTracking(!1,a.videoHead,a.streamType),this._playbackPlayingAdBreak=!1):(this._setPlayhead(a.videoHead,this._playbackPlayingAdBreak,a.streamType),this._playheadPosition(this._playhead))))};d.prototype._onCheckStatusComplete=function(a){a=a[u][N];0==a&&d.__super__.disable.call(this);this._logger.debug(this._logTag,"#_onCheckStatusComplete(nielsenEnabled="+a+")")};d.prototype.bootstrap=function(a){d.__super__.bootstrap.call(this,
a);this._registerCommands();this._registerBehaviours();this._resetTimer(this._interval)};d.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):this._config?d.__super__._canProcess.call(this):(this._logger.error(this._logTag,"#_canProcess() > Nielsen plugin must be configured with a valid appInfo first."),!1)};d.prototype.disable=function(){this._disableNielsenAPI();d.__super__.disable.call(this)};d.prototype._setupDataResolver=
function(){var a={},b=this;a.meta=function(a){return b._contextData};this._dataResolver=function(b){if(!b||0==b.length)return null;for(var d=null,c=0;c<b.length;c++){var e=b[c],d=d||{};d[e]=a.hasOwnProperty(e)?a[e].call(this):null}return d}};d.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad);this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload);this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart);this._pluginManager.comply(this,
"handleVideoComplete",this._cmdVideoComplete);this._pluginManager.comply(this,"handlePlay",this._cmdPlay);this._pluginManager.comply(this,"handlePause",this._cmdPause);this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart);this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete);this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart);this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete);this._pluginManager.comply(this,"handleBufferStart",
this._cmdBufferStart);this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete);this._pluginManager.comply(this,"handleTimedMetadata",this._cmdTimedMetadata);this._pluginManager.comply(this,"handleNielsenTimerTick",this._onTick);this._pluginManager.comply(this,"handleCheckStatusComplete",this._onCheckStatusComplete);this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart);this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)};
d.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new b(k,x),this,"handleVideoLoad");this._pluginManager.registerBehaviour(new b(k,C),this,"handleVideoUnload",[new h(k,"ad.isInAd","isInAd"),new h(k,"video.streamType","streamType"),new h(k,"video.playhead","videoHead")]);this._pluginManager.registerBehaviour(new b(k,G),this,"handleVideoStart",[new h(H,"rsid","rsid"),new h(H,"mid","mid"),new h(z,"session_id","sessionId"),new h(k,"video.streamType","streamType"),new h(k,
"video.playhead","videoHead"),new h(k,"video.length","videoLength"),new h(k,"video.id","videoId")]);this._pluginManager.registerBehaviour(new b(k,w),this,"handleVideoComplete",[new h(k,"ad.isInAd","isInAd"),new h(k,"video.streamType","streamType"),new h(k,"video.playhead","videoHead")]);this._pluginManager.registerBehaviour(new b(k,m),this,"handlePlay",[new h(k,"ad.isInAd","isInAd"),new h(k,"video.streamType","streamType"),new h(k,"video.playhead","videoHead")]);this._pluginManager.registerBehaviour(new b(k,
t),this,"handlePause",[new h(k,"ad.isInAd","isInAd"),new h(k,"video.streamType","streamType"),new h(k,"video.playhead","videoHead")]);this._pluginManager.registerBehaviour(new b(k,L),this,"handleTimedMetadata");this._pluginManager.registerBehaviour(new b(k,D),this,"handleAdStart",[new h(k,"video.playhead","videoHead"),new h(k,"ad.id","adId"),new h(k,"ad.length","adLength"),new h(k,"video.streamType","streamType")]);this._pluginManager.registerBehaviour(new b(k,E),this,"handleAdComplete",[new h(k,
"ad.isInAdBreak","isInAdBreak"),new h(k,"video.playhead","videoHead"),new h(k,"video.streamType","streamType")]);this._pluginManager.registerBehaviour(new b(k,q),this,"handleSeekStart",[new h(k,"ad.isInAd","isInAd"),new h(k,"video.streamType","streamType"),new h(k,"video.playhead","videoHead")]);this._pluginManager.registerBehaviour(new b(k,r),this,"handleSeekComplete",[new h(k,"ad.isInAd","isInAd"),new h(k,"video.streamType","streamType"),new h(k,"video.playhead","videoHead")]);this._pluginManager.registerBehaviour(new b(k,
n),this,"handleBufferStart",[new h(k,"ad.isInAd","isInAd"),new h(k,"video.streamType","streamType"),new h(k,"video.playhead","videoHead")]);this._pluginManager.registerBehaviour(new b(k,l),this,"handleBufferComplete",[new h(k,"ad.isInAd","isInAd"),new h(k,"video.streamType","streamType"),new h(k,"video.playhead","videoHead")]);this._pluginManager.registerBehaviour(new b(J,K),this,"handleNielsenTimerTick",[new h(k,"video.playhead","videoHead"),new h(k,"video.streamType","streamType"),new h(k,"ad.isInAd",
"isInAd")]);this._pluginManager.registerBehaviour(new b(z,B),this,"handleCheckStatusComplete");this._pluginManager.registerBehaviour(new b(z,I),this,"handleVideoIdleStart");this._pluginManager.registerBehaviour(new b(z,v),this,"handleHeartbeatPluginError")};d.prototype._resetTimer=function(a){var b={};b[M]=y;b[O]=a;this._pluginManager.command(J,P,b)};d.prototype._resumeTimer=function(){var a={};a[M]=y;a[Q]=!0;this._pluginManager.command(J,S,a)};d.prototype._requestDTMConfig=function(){this._logger.debug(this._logTag,
"#_requestDTMConfig()");this._queuedCommands=[];this._configLoaded=!1;var a=this;this._settings||(this._settings=new A(function(){a._onConfigLoaded()},function(){a._onConfigError()}));this._settings.reset();this._settings.loadConfig(this._config.configKey)};d.prototype._flushQueuedCommands=function(){if(this._queuedCommands){for(var a=0;a<this._queuedCommands.length;a++)this._ggPM.apply(this,this._queuedCommands[a]);this._queuedCommands=[]}};d.prototype._onConfigLoaded=function(){this._logger.debug(this._logTag,
"#_onConfigLoaded() > Successfully got dtm settings.");this._configLoaded=!0;this._settings.isNielsenEnabled?(this._setupNielsen(),this._flushQueuedCommands()):this.disable()};d.prototype._onConfigError=function(a){this._logger.error(this._logTag,"Nielsen Config Load Error: "+a)};d.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()");this._pluginManager.off(null,null,null,this)};d.prototype._disableNielsenAPI=function(){this._logger.debug(this._logTag,"#_disableNielsenAPI()")};
d.prototype._setupNielsen=function(){if(this._logger.debug(this._logTag,"#_setupNielsen()"),this._config.debugLogging&&window.console&&window.console.log&&console.log(this._config.appInfo),!this._nielsen){this._isEnabled=!0;var a=this._config.appInfo,b="adobe";if(a)for(var d in a)if(a.hasOwnProperty(d)&&("apid"===d.toLowerCase()||"appid"===d.toLowerCase())){b=a[d];break}b=b+"_"+this._getUTCTime();this._nielsen=NOLSDK.getInstance(b);this._nielsen.ggInitialize(this._copyMetadata(this._config.appInfo));
this._nielsen||(this._errorInfo=new e("Internal error","NielsenPlugin is in ERROR state. Please verify that the Nielsen SDK is added properly."),this._delegate&&this._delegate.onError(this._errorInfo))}};d.prototype._setupContextData=function(){var a={},b=this._config.appInfo,d=this._delegate.getMetadataInfo();if(b)for(var c in b)b.hasOwnProperty(c)&&("clientid"===c.toLowerCase()&&(a["a.nielsen.clientid"]=b[c]),"subbrand"===c.toLowerCase()&&(a["a.nielsen.vcid"]=b[c]),"vcid"===c.toLowerCase()&&(a["a.nielsen.vcid"]=
b[c]),"apid"!==c.toLowerCase()&&"appid"!==c.toLowerCase()||(a["a.nielsen.appid"]=b[c]));if(d)for(c in d)d.hasOwnProperty(c)&&("program"===c.toLowerCase()&&(a["a.nielsen.program"]=d[c]),"title"===c.toLowerCase()&&(a["a.nielsen.sega"]=d[c]),"sega"===c.toLowerCase()&&(a["a.nielsen.sega"]=d[c]),"segb"===c.toLowerCase()&&(a["a.nielsen.segb"]=d[c]),"segc"===c.toLowerCase()&&(a["a.nielsen.segc"]=d[c]),"clientid"===c.toLowerCase()&&(a["a.nielsen.clientid"]=d[c]),"vcid"===c.toLowerCase()&&(a["a.nielsen.vcid"]=
d[c]),"subbrand"===c.toLowerCase()&&(a["a.nielsen.vcid"]=d[c]),"adloadtype"===c.toLowerCase()&&(a["a.nielsen.admodel"]=d[c]));a["a.nielsen.accmethod"]="0";a["a.nielsen.ctype"]="VIDEO";this._contextData=a;this._logger.debug(this._logTag,"#_setupContextData():"+this._contextData)};d.prototype._pauseIfNeeded=function(a,b,d,c){this._nielsenTimerPaused||this._playbackPaused||this._playbackSeeking||this._playbackBuffering||(this._resetTimer(this._interval),this._nielsenTimerPaused=!0,this._setPlayhead(a,
b,d),this._playheadPosition(this._playhead));!b||this._playbackBuffering||this._playbackPaused||this._playbackSeeking||(this._adPausedStartTS=this._getUTCTime())};d.prototype._resumeIfNeeded=function(a,b,d,c){!a||!this._adPausedStartTS||this._playbackBuffering||this._playbackPaused||this._playbackSeeking||(this._adPausedTime+=this._getUTCTime()-this._adPausedStartTS,this._adPausedStartTS=0);!this._nielsenTimerPaused||this._playbackPaused||this._playbackSeeking||this._playbackBuffering||(this._resumeTimer(),
this._nielsenTimerPaused=!1,this._onTick({isInAd:a,videoHead:b,streamType:d}))};d.prototype._beginTracking=function(a,b,d,c,e){this._logger.debug(this._logTag,"#_beginTracking() withAds:"+a);var f,g;if(a?f=this._copyMetadata(this._delegate.getAdMetadataInfo()):(f=this._copyMetadata(this._delegate.getMetadataInfo()),g=this._copyMetadata(this._delegate.getChannelInfo())),f.type||(f.type=a?"ad":"content"),this._aaData&&this._aaData.mid&&(f.adobeId=this._aaData.mid),this._aaData&&this._aaData.rsid&&(f.reportSuite=
this._aaData.rsid),this._aaData&&this._aaData.vsid&&(f.adobeVsid=this._aaData.vsid),a)!f.assetid&&this._aaData&&this._aaData.adId&&(f.assetid=this._aaData.adId),!f.length&&this._aaData&&this._aaData.adLength&&(f.length=this._aaData.adLength);else{!f.assetid&&this._aaData&&this._aaData.videoId&&(f.assetid=this._aaData.videoId);!f.length&&this._aaData&&this._aaData.videoLength&&(f.length=this._aaData.videoLength);for(var h in g)g.hasOwnProperty(h)&&(f[h]=g[h])}this._ggPM("15",f);e||(this._setPlayhead(b,
a,d,c),this._playheadPosition(this._playhead))};d.prototype._endTracking=function(a,b){this._logger.debug(this._logTag,"#_endTracking()");this._ggPM("7",b);this._playhead=b};d.prototype._endNielsen=function(){this._logger.debug(this._logTag,"#_endNielsen()");this._nielsenCompleted||(this._playheadPosition(this._playhead),this._endTracking(!1,this._playhead),this._ggPM("57",this._playhead),this._nielsenCompleted=!0,this._resetTimer(this._interval))};d.prototype._sendID3=function(a){this._logger.debug(this._logTag,
"#_sendID3()");this._ggPM("55",a)};d.prototype._playheadPosition=function(a){this._logger.debug(this._logTag,"#_playheadPosition() -> #"+a);this._ggPM("49",a)};d.prototype._copyMetadata=function(a){var b={},d;for(d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);return b};d.prototype._ggPM=function(){this._canProcess()&&(this._configLoaded&&this._nielsen?(this._logger.debug(this._logTag,"#ggPM() event #"+arguments[0]+" , argument:"+arguments[1]),this._config.debugLogging&&window.console&&window.console.log&&
console.log(arguments[1]),this._nielsen.ggPM.apply(this._nielsen,arguments)):this._queuedCommands.push(arguments))};var y="nielsen",k="player",H="adobe-analytics",z="adobe-heartbeat",v="error",x="video_load",C="video_unload",G="video_start",w="video_complete",m="play",t="pause",D="ad_start",E="ad_complete",n="buffer_start",l="buffer_complete",q="seek_start",r="seek_complete",L="timed_metadata",J="service.clock",K="nielsen.tick",B="check_status_complete",I="video_idle_start",u="_eventData",N="nielsen_enabled",
M="name",O="interval",Q="reset",P="create",S="resume",T="live",U="linear",R=1;a.NielsenPlugin=d})(c.ADB.core,c.ADB.va,g);c.ADB.va.plugins.nielsen||(c.ADB.va.plugins.nielsen=g)}(this);
!function(c,g){function f(){var a,b,d;for(d in H){a=H[d];for(var c in a)if(b=a[c],b&&b.hasAttribute&&b.hasAttribute("src")&&-1!==b.src.indexOf(A)&&b&&-1!==b.src.indexOf(A)&&-1!==b.src.indexOf("ggcmb5"))return b.src.substring(0,b.src.indexOf(A)+A.length)}return"undefined"!=typeof h&&"undefined"!=typeof F&&"undefined"!=typeof A?h+F+"cdn-gl"+A:"https://seccdn-gl.imrworldwide.com/"}function p(a){a&&a.hasOwnProperty("target")&&(t="true"===String(a.target).toLowerCase())}function a(){w=Date.now();Math.ceil((w-
G)/1E3)}function d(a){if(a&&a.hasOwnProperty("target")&&!isNaN(a.target))for(var b in C){var d=C[b];if(void 0===d||!d.hasOwnProperty("staticPage")||!d.staticPage.hasOwnProperty("evtParams"))break;"static"===d.staticPage.evtParams.param1.type&&d.ggPM("48",a.target,"","","")}}function b(b){function f(a,b){if("string"==typeof a&&(a={type:a}),a.target||(a.target=b),!a.type)throw Error("Event object missing 'type' property.");if(C[a.type]instanceof Array)for(var d=C[a.type],c=0,e=d.length;c<e;c++)d[c].call(u,
b)}function n(b){b.registerListener("ggPM",u);b._listeners.addListener("updateCmbStaticPage",u.handleUpdateOfStatic);b._listeners.addListener("removeCmbAssetId",u.removeAsset);b._listeners.addListener("tick",a);b._listeners.addListener("dcrHeartbeat",d);b._listeners.addListener("flushQueue",u.emptyQueue);b._listeners.addListener("handleSessionReset",u.handleSessionReset);b._listeners.addListener("sendOptOutStatus",p);c.GLCFG=b}var m,D,C={},E=[],w=String(Date.now())+Math.round(1E4*Math.random()),u=
{name:b,initialized:!1,staticPage:{},modules:{}};return u.getOptOutStatus=function(){return t},u.getId=function(){return w},u.GetName=function(){return u.name},u.Initialized=function(a){return"undefined"==typeof a?u.initialized:void(u.initialized=a)},u.removeAsset=function(a){"undefined"!=typeof a&&a.target.param1.hasOwnProperty("assetid")&&(u.staticPage={})},u.handleUpdateOfStatic=function(a){var b=a.target.evtInfo;c.GLCFG&&c.GLCFG.PLDCR&&"undefined"!=typeof b&&b.param1.hasOwnProperty("assetid")&&
u.getId()===a.target.plid&&(a=c.GLCFG.PLDCR.latestDcrTick(),0!==Object.keys(u.staticPage).length&&u.staticPage.hasOwnProperty("id")&&u.staticPage.id===b.param1.assetid&&u.staticPage.hasOwnProperty("lastTimeStamp")?u.staticPage.lastTimeStamp=a:u.staticPage={id:b.param1.assetid,evtParams:b,startTimeStamp:a,lastTimeStamp:a})},c.browserSafeAddEventListener({element:g,eventType:"beforeunload",useCapture:!1,func:function(a){u&&u.staticPage&&u.staticPage.hasOwnProperty("evtParams")&&u.ggPM("56",u.staticPage.evtParams.param1,
u.staticPage.evtParams.param2,u.staticPage.evtParams.param3,u.staticPage.evtParams.param4)}}),u.addListener=function(a,b){"undefined"==typeof C[a]&&(C[a]=[]);C[a].push(b)},u.removeListener=function(a,b){if(u._listeners[a]instanceof Array)for(var d=C[a],c=0,e=d.length;c<e;c++)if(d[c]===b){d.splice(c,1);break}},u.handleSessionReset=function(a){if(a&&a.target&&a.target.hasOwnProperty("plid")&&w===a.target.plid&&a.target.hasOwnProperty("passedFdata")&&a.target.passedFdata.hasOwnProperty("_dataArrObj")&&
a.target.passedFdata._dataArrObj){var b={fData:a.target.passedFdata._dataArrObj,content:{},ad:{},static:{},err:0},d;if(b&&b.hasOwnProperty("fData")&&b.hasOwnProperty("ad")&&b.hasOwnProperty("content")&&b.hasOwnProperty("static")){for(d in b.fData)for(var c in b.fData[d][0])-1===String(c).indexOf("nol_")&&(b[d][c]=b.fData[d][0][c]);d=b}else d=b&&b.hasOwnProperty("err")?(b.err="Error in retrieveMeta: Missing passedFdata, Ad, content or static properties",b):{err:"Error in retrieveMeta"};0===d.err&&
a.target.passedFdata.hasOwnProperty("_currVidType")&&(a=a.target.passedFdata._currVidType,d=0<Object.keys(b.static).length,c=0<Object.keys(b.content).length,0<Object.keys(b.ad).length,"content"===a?(u.ggPM("57","1","","",""),d&&(u.ggPM("56","1","","",""),u.ggPM("14",b.static)),u.ggPM("15",b.content)):"static"===a&&d?(c&&(u.ggPM("57","1","","",""),u.ggPM("15",b.content)),u.ggPM("56","1","","",""),u.ggPM("14",b.static)):"ad"===a&&(d&&(u.ggPM("56","1","","",""),u.ggPM("14",b.static)),c&&(u.ggPM("57",
"1","","",""),u.ggPM("15",b.content)),u.ggPM("15",b.ad)))}u._listeners&&u._listeners.fireEvent&&u._listeners.fireEvent("debug",{type:"debug",msg:"Fired handleSessionReset from ggcmb."})},u.ggPM=function(a,b,d,c,e){if(u.initialized){var g={};g.eventType=a;g.param1=b;g.param2=d;g.param3=c;g.param4=e;2==u.modules.PLCMB||2==u.modules.PLDPR?(u.emptyQueue(),f("ggPM",{evtInfo:g,id:w})):E.push(g)}},u.getConfigParams=function(){return m},u.emptyQueue=function(){if(!(0>=E.length)&&(u.modules.PLCMB||u.modules.PLDPR)){for(var a=
0,b=E.length;a<b;a+=1)f("ggPM",{evtInfo:E[a],id:w});E=[]}},u.getContainer=function(){return D},u.ggInitialize=function(a,b,d,f,g,l){b="us";if(D=l,m={ggParams:a,uid:d,oldFlashDetect:f,detectBrowser:g,playerId:w},typeof a==typeof String()){a=c.loadXmlString("<vi>"+a+"</vi>");d=a.firstChild.firstChild;f=0;for(a={};void 0!=d&&20>f;)null!=d.firstChild&&(a[d.nodeName]=d.firstChild.nodeValue),d=d.nextSibling,f++;m.ggParams=a}u.Initialized(!0);k=a.nsdkv||k;b=a.sfcode||b;v=a.coreaddress||h+e+b+A;c.loadLib("GLCFG",
z+"novms/js/nolsdk/configs/"+y+"?rnd="+Math.floor(Date.now()/x),c,n)},u}if(!c.isBuilt||!c.isBuilt()){var h=g.location.protocol||"http:",e="//secure-",F="https:"===g.location.protocol?"//sec":"//",A=".imrworldwide.com/",y="glcfg510.js",k="510",H={head:document.getElementsByTagName("head")[0].getElementsByTagName("script"),body:document.getElementsByTagName("script")},z=f(),v="http://secure-us.imrworldwide.com/",x=864E5,C=c.getInstances?c.getInstances():{},G=0,w=0,m=!1,t=!1;if(Date.now=Date.now||function(){return+new Date},
c.isBuilt=function(){return m},c.getInstance=function(a){a="undefined"!=typeof a&&("string"==typeof a||"object"==typeof a&&a.constructor===String)?a:"default";return C.hasOwnProperty(a)||(C[a]=b(a)),C[a]},c.setTotalNumAssetsAllowed=function(a){isNaN(a)||parseInt(a,10)},c.getAddress=function(){return z},c.getConfigAddress=function(){return v},c.getInstances=function(){return C},c.loadXmlString=function(a){try{var b=new ActiveXObject("Microsoft.XMLDOM");return b.async="false",b.loadXML(a),b}catch(d){try{return(new DOMParser).parseFromString(a,
"text/xml")}catch(c){}}return null},c.isNielsenTag=function(a){var b=!1;if("undefined"!=typeof a){var d=a.indexOf("?");a=a.indexOf("imrworldwide.com");-1<a&&a<d&&(b=!0)}return b},c.getVersion=function(){return k},c.send=function(a){console.log(a.parentNode)},c.browserSafeAddEventListener=function(a){"undefined"!=typeof a.element&&(a.element.addEventListener?a.element.addEventListener(a.eventType,a.func,a.useCapture):a.element.attachEvent&&a.element.attachEvent("on"+a.eventType,a.func))},c.browserSafeRemoveEventListener=
function(a){void 0!=a&&null!=a&&null!=a.element&&void 0!=a.element&&(a.element.removeEventListener?a.element.removeEventListener(a.eventType,a.func,a.useCapture):a.element.detachEvent&&a.element.detachEvent("on"+a.eventType,a.func))},function(){var a={};c.loadLib=function(b,d,c,e){if(a[b]){if(a[b].body)return void e(a[b].body(c));a[b].callbacks.push({func:e,arg:c})}else a[b]={callbacks:[]},a[b].callbacks.push({func:e,arg:c}),b=g.document.createElement("script"),b.src=d,g.document.getElementsByTagName("head")[0].appendChild(b)};
c.registerLib=function(b,d){try{if(a&&a.hasOwnProperty(b)){var c=a[b];c.body=d;for(var e=c.callbacks.shift();e;)e.func(c.body(e.arg)),e=c.callbacks.shift()}}catch(f){}}}(),g.gg_nol_FlashCallBack){for(var D,E=0,n=g.gg_nol_FlashCallBack.length;E<n;E+=1)g.gg_nol_FlashCallBack[E].hasOwnProperty("callBack")&&(D=document.getElementById(g.gg_nol_FlashCallBack[E].swfId),D&&D[g.gg_nol_FlashCallBack[E].callBack]());g.gg_nol_FlashCallBack=void 0}return m||(m=!0,G=w=Date.now(),c.BUILDVERSION="5.1.0.16"),c}}(window.NOLSDK=
window.NOLSDK||{},window);
!function(c){!function(c){function f(){this.playerName=this.appVersion=this.ovp=this.channel=this.trackingServer=void 0;this.debugLogging=this.ssl=!1}c.MediaHeartbeatConfig=f;c.MediaHeartbeatConfig.sharedInstance=new f}(c.ADB.va);(function(c){function f(){this.data={}}var p=c.plugins.videoplayer.VideoInfo,a=c.plugins.videoplayer.AdBreakInfo,d=c.plugins.videoplayer.AdInfo,b=c.plugins.videoplayer.ChapterInfo,h=c.plugins.videoplayer.QoSInfo;f.MEDIAINFO_KEY_NAME="a.name";f.MEDIAINFO_KEY_VIDEOID="a.videoId";
f.MEDIAINFO_KEY_ADID="a.adId";f.MEDIAINFO_KEY_LENGTH="a.length";f.MEDIAINFO_KEY_PLAYHEAD="a.playhead";f.MEDIAINFO_KEY_STREAMTYPE="a.streamType";f.MEDIAINFO_KEY_POSITION="a.position";f.MEDIAINFO_KEY_STARTTIME="a.startTime";f.MEDIAINFO_KEY_BITRATE="a.bitrate";f.MEDIAINFO_KEY_FPS="a.fps";f.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames";f.MEDIAINFO_KEY_STARTUPTIME="a.startupTime";f.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata";f.prototype.setValue=function(a,b){this.data[a]=b};f.prototype.getValue=function(a){return this.data.hasOwnProperty(a)?
this.data[a]:null};f.prototype.createVideoInfo=function(){var a=new p;return a.id=null!=this.getValue(f.MEDIAINFO_KEY_VIDEOID)?this.getValue(f.MEDIAINFO_KEY_VIDEOID):"",a.name=null!=this.getValue(f.MEDIAINFO_KEY_NAME)?this.getValue(f.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(f.MEDIAINFO_KEY_LENGTH)?this.getValue(f.MEDIAINFO_KEY_LENGTH):0,a.playhead=null!=this.getValue(f.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(f.MEDIAINFO_KEY_PLAYHEAD):0,a.streamType=null!=this.getValue(f.MEDIAINFO_KEY_STREAMTYPE)?
this.getValue(f.MEDIAINFO_KEY_STREAMTYPE):"",a};f.prototype.createAdBreakInfo=function(){var b=new a;return b.name=null!=this.getValue(f.MEDIAINFO_KEY_NAME)?this.getValue(f.MEDIAINFO_KEY_NAME):"",b.position=null!=this.getValue(f.MEDIAINFO_KEY_POSITION)?this.getValue(f.MEDIAINFO_KEY_POSITION):0,b.startTime=null!=this.getValue(f.MEDIAINFO_KEY_STARTTIME)?this.getValue(f.MEDIAINFO_KEY_STARTTIME):0,b};f.prototype.createAdInfo=function(){var a=new d;return a.id=null!=this.getValue(f.MEDIAINFO_KEY_ADID)?
this.getValue(f.MEDIAINFO_KEY_ADID):"",a.name=null!=this.getValue(f.MEDIAINFO_KEY_NAME)?this.getValue(f.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(f.MEDIAINFO_KEY_LENGTH)?this.getValue(f.MEDIAINFO_KEY_LENGTH):0,a.position=null!=this.getValue(f.MEDIAINFO_KEY_POSITION)?this.getValue(f.MEDIAINFO_KEY_POSITION):0,a};f.prototype.createChapterInfo=function(){var a=new b;return a.name=null!=this.getValue(f.MEDIAINFO_KEY_NAME)?this.getValue(f.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(f.MEDIAINFO_KEY_LENGTH)?
this.getValue(f.MEDIAINFO_KEY_LENGTH):0,a.startTime=null!=this.getValue(f.MEDIAINFO_KEY_STARTTIME)?this.getValue(f.MEDIAINFO_KEY_STARTTIME):0,a.position=null!=this.getValue(f.MEDIAINFO_KEY_POSITION)?this.getValue(f.MEDIAINFO_KEY_POSITION):0,a};f.prototype.createQoSInfo=function(){var a=new h;return a.bitrate=null!=this.getValue(f.MEDIAINFO_KEY_BITRATE)?this.getValue(f.MEDIAINFO_KEY_BITRATE):0,a.fps=null!=this.getValue(f.MEDIAINFO_KEY_FPS)?this.getValue(f.MEDIAINFO_KEY_FPS):0,a.droppedFrames=null!=
this.getValue(f.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(f.MEDIAINFO_KEY_DROPPEDFRAMES):0,a.startupTime=null!=this.getValue(f.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(f.MEDIAINFO_KEY_STARTUPTIME):0,a};c.MediaObject=f})(c.ADB.va);(function(c,f){function p(a){p.__super__.constructor.call(this);this._heartbeat=a}function a(b){a.__super__.constructor.call(this);this._heartbeat=b}function d(a){d.__super__.constructor.call(this);this._heartbeat=a}function b(a){b.__super__.constructor.call(this);this._heartbeat=
a}c.extend(p,f.plugins.aa.AdobeAnalyticsPluginDelegate);p.prototype.onError=function(a){f.MediaHeartbeat._onDelegateError.call(this._heartbeat,a)};c.extend(a,f.plugins.ah.AdobeHeartbeatPluginDelegate);a.prototype.onError=function(a){f.MediaHeartbeat._onDelegateError.call(this._heartbeat,a)};c.extend(d,f.HeartbeatDelegate);d.prototype.onError=function(a){f.MediaHeartbeat._onDelegateError.call(this._heartbeat,a)};c.extend(b,f.plugins.videoplayer.VideoPlayerPluginDelegate);b.prototype.getVideoInfo=function(){return this._heartbeat&&
this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null};b.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null};b.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null};b.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?
this._heartbeat._chapterInfo:null};b.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var a=this._heartbeat._delegate.getQoSObject();if(a&&"object"==typeof a&&a.setValue)return a.createQoSInfo()}return null};f._MediaAnalyticsPluginDelegate=p;f._MediaHeartbeatPluginDelegate=a;f._ADBMediaHeartbeatDelegate=d;f._MediaHeartbeatVideoPlayerPluginDelegate=b})(c.ADB.core,c.ADB.va);(function(c,f){function p(){}function a(b){a.__super__.constructor.call(this);
this._heartbeat=b}var d=f.MediaHeartbeatConfig;f.plugins.nielsen&&(p.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA="media_nielsen_content_metadata",p.MEDIAHEARTBEAT_NIELSEN_AD_METADATA="media_nielsen_ad_metadata",p.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA="media_nielsen_channel_metadata",d.prototype.nielsenConfigKey=void 0,d.prototype.nielsenAppInfo=void 0,c.extend(a,f.plugins.nielsen.NielsenPluginDelegate),a.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var a=
this._heartbeat._currentContentMediaObject.getValue(p.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA);if("object"==typeof a)return a}return null},a.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdMediaObject){var a=this._heartbeat._currentAdMediaObject.getValue(p.MEDIAHEARTBEAT_NIELSEN_AD_METADATA);if("object"==typeof a)return a}return null},a.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var a=this._heartbeat._currentContentMediaObject.getValue(p.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA);
if("object"==typeof a)return a}return null},a.prototype.onError=function(a){this._heartbeat&&f.MediaHeartbeat._onError.call(this._heartbeat,a)},f._MediaHeartbeatNielsen=p,f._MediaHeartbeatNielsenPluginDelegate=a)})(c.ADB.core,c.ADB.va);(function(g,f){function p(){}function a(a,d,e){if(this._logger=new b,this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._nielsenPlugin=null,this._currentContentMediaObject=void 0,this._currentAdMediaObject=void 0,this._videoInfo=void 0,
this._adBreakInfo=void 0,this._adInfo=void 0,this._chapterInfo=void 0,this._state={},this._delegate=a,e)this.appMeasurement=e;else{if(!c.s)return void this._logger.error(B,"Valid AppMeasurement instance required for initialising MediaHeartbeat");this.appMeasurement=c.s}d&&"object"==typeof d&&void 0!=d.trackingServer?this._config=d:this._logger.error(B,"Valid config required for initialising MediaHeartbeat")}function d(b,d){if(b!=D&&(!this._state[D]||this._state[l]))return!1;b===E&&(this._state[r]&&
this.trackEvent(a.Event.SeekComplete),this._state[q]&&this.trackEvent(a.Event.BufferComplete));if(d?!this._state[b]:this._state[b])return!1;switch(b){case E:this._state[n]=d;break;case n:this._state[E]=d;break;case K:if(!d&&this._state[J])return!1;break;case J:if(!d&&!this._state[K])return!1;case L:d||this._state[E]||this.trackPlay()}return this._state[b]=!d,!0}var b=g.Logger,h=f.plugins.videoplayer.AssetType,e=f.MediaObject,F=f.Heartbeat,A=f.HeartbeatConfig,y=f._ADBMediaHeartbeatDelegate,k=f.plugins.videoplayer.VideoPlayerPlugin,
H=f.plugins.videoplayer.VideoPlayerPluginConfig,z=f._MediaHeartbeatVideoPlayerPluginDelegate,v=f.plugins.aa.AdobeAnalyticsPlugin,x=f.plugins.aa.AdobeAnalyticsPluginConfig,C=f._MediaAnalyticsPluginDelegate,G=f.plugins.ah.AdobeHeartbeatPlugin,w=f.plugins.ah.AdobeHeartbeatPluginConfig,m=f._MediaHeartbeatPluginDelegate;if(p.prototype.getCurrentPlaybackTime=function(){return null},p.prototype.getQoSObject=function(){return null},a.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",
AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},a.StreamType={VOD:"vod",LIVE:"live",LINEAR:"linear"},a.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed"},
a.VideoMetadataKeys=f.plugins.aa.VideoMetadataKeys,a.AdMetadataKeys=f.plugins.aa.AdMetadataKeys,a.version=function(){return f.Version.getVersion()},a.prototype.trackSessionStart=function(b,c){if(!d.call(this,D))return void this._logger.error(B,"API call trackSessionStart is unsupported in the current state.");if(!b||"object"!=typeof b||!b.setValue)return this._state[D]=!1,void this._logger.error(B,"Invalid Media Info object");this._currentContentMediaObject=b;this._videoInfo=b.createVideoInfo();this._videoInfo.playerName=
void 0!=this._config.playerName?this._config.playerName:"";var e=b.getValue(a.MediaObjectKey.StandardVideoMetadata);if(e&&"object"==typeof e)for(var g in e)e.hasOwnProperty(g)&&(c[g]=e[g]);(e=b.getValue(a.MediaObjectKey.VideoResumed))&&"boolean"==typeof e&&(this._videoInfo.resumed=b.getValue(a.MediaObjectKey.VideoResumed));if(!this.appMeasurement||!this.appMeasurement.visitor)throw Error("appMeasurement.visitor object cannot be NULL.");this._aaPlugin=new v(this.appMeasurement,new C);e=new x;e.channel=
this._config.channel?this._config.channel:"";e.debugLogging=f.MediaHeartbeat._debugLogging||this._config.debugLogging;this._aaPlugin.configure(e);this._plugins.push(this._aaPlugin);this._ahPlugin=new G(new m);e=new w(this._config.trackingServer,this.appMeasurement.visitor.marketingCloudOrgID);e.debugLogging=f.MediaHeartbeat._debugLogging||this._config.debugLogging;e.ovp=this._config.ovp?this._config.ovp:"";e.ssl=this._config.ssl;e.sdk=this._config.appVersion?this._config.appVersion:"";(g=this._currentContentMediaObject?
this._currentContentMediaObject.getValue(I):null)&&0<g.length&&(e.__primetime=!0,e.__psdkVersion=g);this._ahPlugin.configure(e);this._plugins.push(this._ahPlugin);this._playerPlugin=new k(new z(this));e=new H;e.debugLogging=f.MediaHeartbeat._debugLogging||this._config.debugLogging;this._playerPlugin.configure(e);this._plugins.push(this._playerPlugin);f.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo&&(this._nielsenPlugin=new f.plugins.nielsen.NielsenPlugin(new f._MediaHeartbeatNielsenPluginDelegate(this)),
e=new f.plugins.nielsen.NielsenPluginConfig,e.nielsenPluginConfig=f.MediaHeartbeat._debugLogging||this._config.debugLogging,e.appInfo=this._config.nielsenAppInfo,e.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(e),this._plugins.push(this._nielsenPlugin));e=new A;e.debugLogging=f.MediaHeartbeat._debugLogging||this._config.debugLogging;this._heartbeat=new F(new y(this),this._plugins);this._heartbeat.configure(e);this._playerPlugin&&(this._aaPlugin&&this._aaPlugin.setVideoMetadata(c),
this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart())},a.prototype.trackPlay=function(){return d.call(this,E)?void this._playerPlugin.trackPlay():void this._logger.error(B,"API call trackPlay is unsupported in the current state.")},a.prototype.trackPause=function(){return d.call(this,n)?void(this._playerPlugin&&this._playerPlugin.trackPause()):void this._logger.error(B,"API call trackPause is unsupported in the current state.")},a.prototype.trackComplete=function(){return d.call(this,
l)?void(this._playerPlugin&&this._playerPlugin.trackComplete(function(){})):void this._logger.error(B,"API call trackComplete is unsupported in the current state.")},a.prototype.trackSessionEnd=function(){var a;d.call(this,D,!0)?(this._playerPlugin&&this._playerPlugin.trackVideoUnload(),this._state={},a=void(this._plugins=[])):(this._state={},a=(this._plugins=[],void this._logger.error(B,"API call trackSessionEnd is unsupported in the current state.")));return a},a.prototype.trackError=function(a){return this._state[D]?
void(this._playerPlugin&&this._playerPlugin.trackVideoPlayerError(a?a:"unknown_error_id")):void this._logger.error(B,"API call trackError is unsupported in the current state.")},a.prototype.trackEvent=function(b,c,f){switch(b){case a.Event.AdBreakStart:case a.Event.AdBreakComplete:b==a.Event.AdBreakStart?d.call(this,K)?c&&"object"==typeof c&&c.setValue?(this._adBreakInfo=c.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName?this._config.playerName:""):this._logger.error(B,"Invalid AdBreak Info for MediaHeartbeatEvent.AdBreakStart event."):
this._logger.error(B,"API call trackEvent:AdBreakStart is unsupported in the current state."):d.call(this,K,!0)?this._adBreakInfo=void 0:this._logger.error(B,"API call trackEvent:AdBreakComplete is unsupported in the current state.");break;case a.Event.AdStart:case a.Event.AdComplete:case a.Event.AdSkip:if(b==a.Event.AdStart)if(d.call(this,J))if(c&&"object"==typeof c&&c.setValue){this._currentAdMediaObject=c;this._adInfo=c.createAdInfo();if((b=c.getValue(a.MediaObjectKey.StandardAdMetadata))&&"object"==
typeof b)for(var g in b)b.hasOwnProperty(g)&&(f[g]=b[g]);this._aaPlugin&&this._aaPlugin.setAdMetadata(f);this._playerPlugin.trackAdStart()}else this._logger.error(B,"Invalid Ad Info for MediaHeartbeatEvent.AdStart event.");else this._logger.error(B,"API call trackEvent:AdStart is unsupported in the current state.");else b==a.Event.AdComplete?d.call(this,J,!0)?(this._playerPlugin.trackAdComplete(),this._adInfo=null):this._logger.error(B,"API call trackEvent:AdComplete is unsupported in the current state."):
d.call(this,J,!0)?this._adInfo=null:this._logger.error(B,"API call trackEvent:AdSkip is unsupported in the current state.");break;case a.Event.SeekStart:case a.Event.SeekComplete:b==a.Event.SeekStart?d.call(this,r)?this._playerPlugin.trackSeekStart():this._logger.error(B,"API call trackEvent:SeekStart is unsupported in the current state."):d.call(this,r,!0)?this._playerPlugin.trackSeekComplete():this._logger.error(B,"API call trackEvent:SeekComplete is unsupported in the current state.");break;case a.Event.ChapterStart:case a.Event.ChapterComplete:case a.Event.ChapterSkip:b==
a.Event.ChapterStart?d.call(this,L)?c&&"object"==typeof c&&c.setValue?(this._chapterInfo=c.createChapterInfo(),this._aaPlugin&&this._aaPlugin.setChapterMetadata(f),this._playerPlugin.trackChapterStart()):this._logger.error(B,"Invalid Chapter Info for MediaHeartbeatEvent.ChapterStart event."):this._logger.error(B,"API call trackEvent:ChapterStart is unsupported in the current state."):b==a.Event.ChapterComplete?d.call(this,L,!0)?(this._chapterInfo=null,this._playerPlugin.trackChapterComplete()):this._logger.error(B,
"API call trackEvent:ChapterComplete is unsupported in the current state."):d.call(this,L,!0)?this._chapterInfo=null:this._logger.error(B,"API call trackEvent:ChapterSkip is unsupported in the current state.");break;case a.Event.BufferStart:case a.Event.BufferComplete:b==a.Event.BufferStart?d.call(this,q)?this._playerPlugin.trackBufferStart():this._logger.error(B,"API call trackEvent:BufferStart is unsupported in the current state."):d.call(this,q,!0)?this._playerPlugin.trackBufferComplete():this._logger.error(B,
"API call trackEvent:BufferComplete is unsupported in the current state.");break;case a.Event.BitrateChange:this._state[D]?this._playerPlugin.trackBitrateChange():this._logger.error(B,"API call trackEvent:BitrateChange is unsupported in the current state.");break;case a.Event.TimedMetadataUpdate:c&&"object"==typeof c&&c.setValue&&(f=c.getValue(e.MEDIAINFO_KEY_TIMEDMETADATA),this._playerPlugin&&f&&"string"==typeof f&&this._playerPlugin.trackTimedMetadata(f))}},f.plugins.nielsen){var t=f._MediaHeartbeatNielsen;
a.MediaObjectKey.NielsenContentMetadata=t.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA;a.MediaObjectKey.NielsenAdMetadata=t.MEDIAHEARTBEAT_NIELSEN_AD_METADATA;a.MediaObjectKey.NielsenChannelMetadata=t.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA;a.prototype.nielsenLoadMetadata=function(a){this._nielsenPlugin&&this._nielsenPlugin.loadMetadata(a)}}var D=1,E=2,n=3,l=4,q=5,r=6,L=7,J=8,K=9;a.createMediaObject=function(b,d,c,f){var g=new e;g.setValue(e.MEDIAINFO_KEY_VIDEOID,d);g.setValue(e.MEDIAINFO_KEY_NAME,b);
g.setValue(e.MEDIAINFO_KEY_LENGTH,c);g.setValue(e.MEDIAINFO_KEY_PLAYHEAD,0);b=h.ASSET_TYPE_VOD;switch(f){case a.StreamType.VOD:b=h.ASSET_TYPE_VOD;break;case a.StreamType.LIVE:b=h.ASSET_TYPE_LIVE;break;case a.StreamType.LINEAR:b=h.ASSET_TYPE_LINEAR}return g.setValue(e.MEDIAINFO_KEY_STREAMTYPE,b),g};a.createAdBreakObject=function(a,b,d){var c=new e;return c.setValue(e.MEDIAINFO_KEY_NAME,a),c.setValue(e.MEDIAINFO_KEY_POSITION,b),c.setValue(e.MEDIAINFO_KEY_STARTUPTIME,d),c};a.createAdObject=function(a,
b,d,c){var f=new e;return f.setValue(e.MEDIAINFO_KEY_NAME,a),f.setValue(e.MEDIAINFO_KEY_ADID,b),f.setValue(e.MEDIAINFO_KEY_POSITION,d),f.setValue(e.MEDIAINFO_KEY_LENGTH,c),f};a.createChapterObject=function(a,b,d,c){var f=new e;return f.setValue(e.MEDIAINFO_KEY_NAME,a),f.setValue(e.MEDIAINFO_KEY_POSITION,b),f.setValue(e.MEDIAINFO_KEY_LENGTH,d),f.setValue(e.MEDIAINFO_KEY_STARTTIME,c),f};a.createQoSObject=function(a,b,d,c){var f=new e;return f.setValue(e.MEDIAINFO_KEY_BITRATE,a),f.setValue(e.MEDIAINFO_KEY_FPS,
d),f.setValue(e.MEDIAINFO_KEY_DROPPEDFRAMES,c),f.setValue(e.MEDIAINFO_KEY_STARTUPTIME,b),f};a.createTimedMetadataObject=function(a){var b=new e;return b.setValue(e.MEDIAINFO_KEY_TIMEDMETADATA,a),b};var B="MediaHeartbeat",I="a.__pttvsdkVersion";f.MediaHeartbeat=a;f.MediaHeartbeatDelegate=p;f.MediaHeartbeat._onDelegateError=function(a){this._logger.error(B,a.getMessage()+" | "+a.getDetails())};f.MediaHeartbeat._debugLogging=!1})(c.ADB.core,c.ADB.va);c.ADB||(c.ADB={});c.ADB.core||(c.ADB.core=core);c.ADB.va||
(c.ADB.va=va);c.ADB.va.plugins||(c.ADB.va.plugins={})}(this);(function(){AdobePSDK.VA=AdobePSDK.VA||{};AdobePSDK.VA.VideoAnalyticsChapterData=function(c,g,f,p){this._name=c;this._startTime=g;this._duration=f;this._index=p;var a=this;Object.defineProperty(this,"name",{get:function(){return a.getName()}});Object.defineProperty(this,"startTime",{get:function(){return a.getStartTime()}});Object.defineProperty(this,"duration",{get:function(){return a.getDuration()}});Object.defineProperty(this,"index",{get:function(){return a.getIndex()}});return this};AdobePSDK.VA.VideoAnalyticsChapterData.prototype=
{constructor:AdobePSDK.VA.VideoAnalyticsChapterData,getName:function(){return this._name},getStartTime:function(){return this._startTime},getDuration:function(){return this._duration},getIndex:function(){return this._index}}})();(function(){AdobePSDK.VA=AdobePSDK.VA||{};AdobePSDK.VA.VideoAnalyticsTrackingMetadata=function(){this._chapters=this._assetDuration=this._videoId=this._videoName=this._channel=this._appVersion=this._playerName=this._publisher=this._trackingServer=this._appMeasurement=null;this._debugLogging=this._useSSL=this._enableChapterTracking=!1;this._currentTimeUpdateBlock=this._chapterMetadataBlock=this._adMetadataBlock=this._videoMetadataBlock=null;AdobePSDK.Metadata.call(this);var c=this;Object.defineProperty(this,
"appMeasurement",{get:function(){return c.getAppMeasurement()},set:function(g){return c.setAppMeasurement(g)}});Object.defineProperty(this,"trackingServer",{get:function(){return c.getTrackingServer()},set:function(g){return c.setTrackingServer(g)}});Object.defineProperty(this,"publisher",{get:function(){return c.getPublisher()},set:function(g){return c.setPublisher(g)}});Object.defineProperty(this,"playerName",{get:function(){return c.getPlayerName()},set:function(g){return c.setPlayerName(g)}});
Object.defineProperty(this,"appVersion",{get:function(){return c.getAppVersion()},set:function(g){return c.setAppVersion(g)}});Object.defineProperty(this,"channel",{get:function(){return c.getChannel()},set:function(g){return c.setChannel(g)}});Object.defineProperty(this,"videoName",{get:function(){return c.getVideoName()},set:function(g){return c.setVideoName(g)}});Object.defineProperty(this,"videoId",{get:function(){return c.getVideoId()},set:function(g){return c.setVideoId(g)}});Object.defineProperty(this,
"assetDuration",{get:function(){return c.getAssetDuration()},set:function(g){return c.setAssetDuration(g)}});Object.defineProperty(this,"chapters",{get:function(){return c.getChapters()},set:function(g){return c.setChapters(g)}});Object.defineProperty(this,"useSSL",{get:function(){return c.getUseSSL()},set:function(g){return c.setUseSSL(g)}});Object.defineProperty(this,"enableChapterTracking",{get:function(){return c.getEnableChapterTracking()},set:function(g){return c.setEnableChapterTracking(g)}});
Object.defineProperty(this,"debugLogging",{get:function(){return c.getDebugLogging()},set:function(g){return c.setDebugLogging(g)}});Object.defineProperty(this,"videoMetadataBlock",{get:function(){return c.getVideoMetadataBlock()},set:function(g){return c.setVideoMetadataBlock(g)}});Object.defineProperty(this,"adMetadataBlock",{get:function(){return c.getAdMetadataBlock()},set:function(g){return c.setAdMetadataBlock(g)}});Object.defineProperty(this,"chapterMetadataBlock",{get:function(){return c.getChapterMetadataBlock()},
set:function(g){return c.setChapterMetadataBlock(g)}});Object.defineProperty(this,"currentTimeUpdateBlock",{get:function(){return c.getCurrentTimeUpdateBlock()},set:function(g){return c.setCurrentTimeUpdateBlock(g)}});return this};AdobePSDK.VA.VideoAnalyticsTrackingMetadata.prototype=Primetime.helper.extend(AdobePSDK.Metadata.prototype,{constructor:AdobePSDK.VA.VideoAnalyticsTrackingMetadata,setupDelegate:function(){if(!this.delegate){var c=Primetime.DelegateFactory.createVideoAnalyticsMetadataDelegate(this);
this.setDelegate(c)}},setAppMeasurement:function(c){this._appMeasurement=c;this.delegate&&this.delegate.setAppMeasurement&&this.delegate.setAppMeasurement(c)},getAppMeasurement:function(){return this._appMeasurement},setTrackingServer:function(c){this._trackingServer=c;this.delegate&&this.delegate.setTrackingServer&&this.delegate.setTrackingServer(c)},getTrackingServer:function(){return this._trackingServer},setPublisher:function(c){this._publisher=c;this.delegate&&this.delegate.setPublisher&&this.delegate.setPublisher(c)},
getPublisher:function(){return this._publisher},setPlayerName:function(c){this._playerName=c;this.delegate&&this.delegate.setPlayerName&&this.delegate.setPlayerName(c)},getPlayerName:function(){return this._playerName},setAppVersion:function(c){this._appVersion=c;this.delegate&&this.delegate.setAppVersion&&this.delegate.setAppVersion(c)},getAppVersion:function(){return this._appVersion},setChannel:function(c){this._channel=c;this.delegate&&this.delegate.setChannel&&this.delegate.setChannel(c)},getChannel:function(){return this._channel},
setVideoName:function(c){this._videoName=c;this.delegate&&this.delegate.setVideoName&&this.delegate.setVideoName(c)},getVideoName:function(){return this._videoName},setVideoId:function(c){this._videoId=c;this.delegate&&this.delegate.setVideoId&&this.delegate.setVideoId(c)},getVideoId:function(){return this._videoId},setAssetDuration:function(c){this._assetDuration=c;this.delegate&&this.delegate.setAssetDuration&&this.delegate.setAssetDuration(c)},getAssetDuration:function(){return this._assetDuration},
setChapters:function(c){this._chapters=c;this.delegate&&this.delegate.setChapters&&this.delegate.setChapters(c)},getChapters:function(){return this._chapters},setEnableChapterTracking:function(c){this._enableChapterTracking=c;this.delegate&&this.delegate.setEnableChapterTracking&&this.delegate.setEnableChapterTracking(c)},getEnableChapterTracking:function(){return this._enableChapterTracking},setUseSSL:function(c){this._useSSL=c;this.delegate&&this.delegate.setUseSSL&&this.delegate.setUseSSL(c)},
getUseSSL:function(){return this._useSSL},setDebugLogging:function(c){this._debugLogging=c;this.delegate&&this.delegate.setDebugLogging&&this.delegate.setDebugLogging(c)},getDebugLogging:function(){return this._debugLogging},setVideoMetadataBlock:function(c){this._videoMetadataBlock=c;this.delegate&&this.delegate.setVideoMetadataBlock&&this.delegate.setVideoMetadataBlock(c)},getVideoMetadataBlock:function(){return this._videoMetadataBlock},setAdMetadataBlock:function(c){this._adMetadataBlock=c;this.delegate&&
this.delegate.setAdMetadataBlock&&this.delegate.setAdMetadataBlock(c)},getAdMetadataBlock:function(){return this._adMetadataBlock},setChapterMetadataBlock:function(c){this._chapterMetadataBlock=c;this.delegate&&this.delegate.setChapterMetadataBlock&&this.delegate.setChapterMetadataBlock(c)},getChapterMetadataBlock:function(){return this._chapterMetadataBlock},setCurrentTimeUpdateBlock:function(c){this._currentTimeUpdateBlock=c;this.delegate&&this.delegate.setCurrentTimeUpdateBlock&&this.delegate.setCurrentTimeUpdateBlock(c)},
getCurrentTimeUpdateBlock:function(){return this._currentTimeUpdateBlock},setDelegate:function(c){AdobePSDK.Metadata.prototype.setDelegate.call(this,c)}})})();(function(){AdobePSDK.VA=AdobePSDK.VA||{};var c=ADB.va.Heartbeat,g=ADB.va.HeartbeatConfig,f=ADB.va.HeartbeatDelegate,p=ADB.va.plugins.videoplayer.VideoPlayerPlugin,a=ADB.va.plugins.videoplayer.VideoPlayerPluginConfig,d=ADB.va.plugins.videoplayer.VideoPlayerPluginDelegate,b=ADB.va.plugins.aa.AdobeAnalyticsPlugin,h=ADB.va.plugins.aa.AdobeAnalyticsPluginConfig,e=ADB.va.plugins.aa.AdobeAnalyticsPluginDelegate,F=ADB.va.plugins.ah.AdobeHeartbeatPlugin,A=ADB.va.plugins.ah.AdobeHeartbeatPluginConfig,y=ADB.va.plugins.ah.AdobeHeartbeatPluginDelegate,
k=ADB.va.plugins.nielsen.NielsenPlugin,H=ADB.va.plugins.nielsen.NielsenPluginConfig,z=ADB.va.plugins.nielsen.NielsenPluginDelegate,v=ADB.va.plugins.videoplayer.AssetType,x=ADB.va.plugins.videoplayer.VideoInfo,C=ADB.va.plugins.videoplayer.AdBreakInfo,G=ADB.va.plugins.videoplayer.ChapterInfo,w=ADB.va.plugins.videoplayer.AdInfo,m=ADB.va.plugins.videoplayer.QoSInfo;AdobePSDK.VA.VideoAnalyticsTrackerExtension=function(){return this};AdobePSDK.VA.VideoAnalyticsTrackerExtension.prototype={constructor:AdobePSDK.VA.VideoAnalyticsTrackerExtension,
getExtension:function(){return null}};AdobePSDK.VA.AdobeAnalyticsPluginDelegate=function(){return this};AdobePSDK.VA.AdobeAnalyticsPluginDelegate.prototype=Primetime.helper.extend(e,{onError:function(){}});AdobePSDK.VA.AdobeHeartbeatPluginDelegate=function(){return this};AdobePSDK.VA.AdobeHeartbeatPluginDelegate.prototype=Primetime.helper.extend(y,{onError:function(){}});AdobePSDK.VA.HeartbeatDelegate=function(){return this};AdobePSDK.VA.HeartbeatDelegate.prototype=Primetime.helper.extend(f,{onError:function(){}});
AdobePSDK.VA.NielsenPluginDelegate=function(a){this._nielsenTrackerExtension=a};AdobePSDK.VA.NielsenPluginDelegate.prototype=Primetime.helper.extend(z,{onError:function(){},getMetadataInfo:function(){return this._nielsenTrackerExtension.getMetadataInfo()},getAdMetadataInfo:function(){return this._nielsenTrackerExtension.getAdMetadataInfo()},getChannelInfo:function(){return this._nielsenTrackerExtension.getChannelInfo()}});AdobePSDK.VA.VideoAnalyticsTracker=function(a,b){this._extensions=a;this._analyticsMetadata=
b;this._onThisItemCreated=this._onItemCreated.bind(this);return this};AdobePSDK.VA.VideoAnalyticsTracker.prototype={constructor:AdobePSDK.VA.VideoAnalyticsTracker,attachMediaPlayer:function(a){this._mediaPlayer=a;this._mediaPlayerItem=null;this._mediaPlayer&&(this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.ItemCreatedEvent,this._onThisItemCreated),this._setup())},detachMediaPlayer:function(){this._playerWrapper&&this._playerWrapper.detachMediaPlayer();this._mediaPlayer&&(this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.ItemCreatedEvent,
this._onThisItemCreated),this._mediaPlayer=null)},trackVideoComplete:function(){null!=this._playerWrapper&&this._playerWrapper.trackVideoComplete()},_onItemCreated:function(){this._setup()},_setup:function(){this._mediaPlayer.currentItem&&this._mediaPlayer.currentItem!=AdobePSDK.PSDKErrorCode.kECIllegalState&&(this._mediaPlayerItem=this._mediaPlayer.currentItem,this._configure())},_configure:function(){if(this._analyticsMetadata){var d=new h;d.channel=this._analyticsMetadata.channel;d.debugLogging=
this._analyticsMetadata.debugLogging;this._aaPlugin=new b(this._analyticsMetadata.appMeasurement,new AdobePSDK.VA.AdobeAnalyticsPluginDelegate);this._aaPlugin.configure(d);var d=new F(new AdobePSDK.VA.AdobeHeartbeatPluginDelegate),e=new A(this._analyticsMetadata.trackingServer,this._analyticsMetadata.publisher);e.sdk=this._analyticsMetadata.appVersion;e.debugLogging=this._analyticsMetadata.debugLogging;e.ssl=this._analyticsMetadata.useSSL;d.configure(e);this._playerWrapper=new AdobePSDK.VA.VideoPlayerPluginDelegate(this._mediaPlayer,
this._analyticsMetadata);this._playerPlugin=new p(this._playerWrapper);this._playerWrapper.playerPlugin=this._playerPlugin;this._playerWrapper.analyticsPlugin=this._aaPlugin;e=new a;e.debugLogging=this._analyticsMetadata.debugLogging;this._playerPlugin.configure(e);d=[this._playerPlugin,this._aaPlugin,d];if(this._extensions)for(var e=this._extensions.length,f=0;f<e;f++){var k=this._extensions[f].getExtension(this._mediaPlayerItem,this._analyticsMetadata);k&&d.push(k)}this._heartbeat=new c(new AdobePSDK.VA.HeartbeatDelegate,
d);d=new g;d.debugLogging=this._analyticsMetadata.debugLogging;this._heartbeat.configure(d)}}};AdobePSDK.VA.VideoAnalyticsNielsenTrackerExtension=function(){this._channelMetadataBlock=this._adMetadataBlock=this._videoMetadataBlock=this._configKey=this._appInfo=null;AdobePSDK.VA.VideoAnalyticsTrackerExtension.call(this);var a=this;Object.defineProperty(this,"appInfo",{get:function(){return a.getAppInfo()},set:function(b){return a.setAppInfo(b)}});Object.defineProperty(this,"configKey",{get:function(){return a.getConfigKey()},
set:function(b){return a.setConfigKey(b)}});Object.defineProperty(this,"videoMetadataBlock",{get:function(){return a.getVideoMetadataBlock()},set:function(b){return a.setVideoMetadataBlock(b)}});Object.defineProperty(this,"adMetadataBlock",{get:function(){return a.getAdMetadataBlock()},set:function(b){return a.setAdMetadataBlock(b)}});Object.defineProperty(this,"channelMetadataBlock",{get:function(){return a.getChannelMetadataBlock()},set:function(b){return a.setChannelMetadataBlock(b)}});return this};
AdobePSDK.VA.VideoAnalyticsNielsenTrackerExtension.prototype=Primetime.helper.extend(AdobePSDK.VA.VideoAnalyticsTrackerExtension.prototype,{constructor:AdobePSDK.VA.VideoAnalyticsNielsenTrackerExtension,setAppInfo:function(a){this._appInfo=a;this.delegate&&this.delegate.setAppInfo&&this.delegate.setAppInfo(a)},getAppInfo:function(){return this._appInfo},setConfigKey:function(a){this._configKey=a;this.delegate&&this.delegate.setConfigKey&&this.delegate.setConfigKey(a)},getConfigKey:function(){return this._configKey},
getExtension:function(a,b){var d=new k(new AdobePSDK.VA.NielsenPluginDelegate(this)),c=new H;c.debugLogging=b.debugLogging;c.appInfo=this.getAppInfo();c.configKey=this.getConfigKey();d.configure(c);return d},getMetadataInfo:function(){return this._videoMetadataBlock?this._videoMetadataBlock():null},getAdMetadataInfo:function(){return this._adMetadataBlock?this._adMetadataBlock():null},getChannelInfo:function(){return this._channelMetadataBlock?this._channelMetadataBlock():null},setVideoMetadataBlock:function(a){this._videoMetadataBlock=
a;this.delegate&&this.delegate.setVideoMetadataBlock&&this.delegate.setVideoMetadataBlock(a)},getVideoMetadataBlock:function(){return this._videoMetadataBlock},setAdMetadataBlock:function(a){this._adMetadataBlock=a;this.delegate&&this.delegate.setAdMetadataBlock&&this.delegate.setAdMetadataBlock(a)},getAdMetadataBlock:function(){return this._adMetadataBlock},setChannelMetadataBlock:function(a){this._channelMetadataBlock=a;this.delegate&&this.delegate.setChannelMetadataBlock()&&this.delegate.setChannelMetadataBlock(a)},
getChannelMetadataBlock:function(){return this._channelMetadataBlock}});AdobePSDK.VA.VideoPlayerPluginDelegate=function(a,b){this.analyticsPlugin=this.playerPlugin=null;this._mediaPlayer=a;this._mediaPlayerItem=a.currentItem;this._analyticsMetadata=b;this._currentChapter=this._qosProvider=null;this._usingCustomChapters=this._isSeeking=this._isFirstTimeUpdateAfterSeek=this._isInAdBreak=this._isDefaultChaptersSet=this._chaptersSet=this._mainVideoOpened=!1;this._adBreakInfo=this._chapterInfo=this._adInfo=
this._videoInfo=this._chapters=null;this._currentBreakIndex=this._currentAdIndex=0;this._onThisPlayerStatusChange=this._onPlayerStatusChange.bind(this);this._onThisBufferingBegin=this._onBufferingBegin.bind(this);this._onThisBufferingEnd=this._onBufferingEnd.bind(this);this._onThisSeekStart=this._onSeekStart.bind(this);this._onThisSeekEnd=this._onSeekEnd.bind(this);this._onThisTimeChanged=this._onTimeChanged.bind(this);this._onThisAdbreakStarted=this._onAdbreakStarted.bind(this);this._onThisAdbreakCompleted=
this._onAdbreakCompleted.bind(this);this._onThisAdStarted=this._onAdStarted.bind(this);this._onThisAdCompleted=this._onAdCompleted.bind(this);this._onThisProfileChanged=this._onProfileChanged.bind(this);this._addListeners();this._setupQoS()};AdobePSDK.VA.VideoPlayerPluginDelegate.prototype=Primetime.helper.extend(d,{getVideoInfo:function(){this._videoInfo&&(this._videoInfo.playhead=this._getMainContentPlayhead());return this._videoInfo},getAdBreakInfo:function(){return this._adBreakInfo},getAdInfo:function(){return this._adInfo},
getQoSInfo:function(){var a=new m;if(this._qosProvider){var b=this._qosProvider.playbackInformation;b&&(a.bitrate=b.bitRate,a.fps=b.frameRate,a.droppedFrames=b.droppedFrameCount,a.startupTime=b.timeToStart)}return a},getChapterInfo:function(){return this._chapterInfo},detachMediaPlayer:function(){this._unloadVideo()},trackVideoComplete:function(){this._itemPlayCompleted()},onError:function(a){console.log("VideoPlayerPlugin error: "+a.getMessage()+" | "+a.getDetails())},_isChapterTrackingEnabled:function(){return this._analyticsMetadata&&
this._analyticsMetadata.getEnableChapterTracking()},_playerName:function(){return this._analyticsMetadata&&this._analyticsMetadata.getPlayerName()?this._analyticsMetadata.getPlayerName():"PSDK-based player"},_getMainContentPlayhead:function(){if(this._mainVideoOpened&&this._mediaPlayer)if(this._analyticsMetadata&&this._analyticsMetadata.currentTimeUpdateBlock){var a=this._analyticsMetadata.currentTimeUpdateBlock();if(void 0!=a)return a}else return this._mediaPlayer.localTime/1E3;return-1},_indexForAdBreak:function(a){if(a){var b=
this._mediaPlayer.timeline;if(b&&b.timelineMarkers)for(var b=b.timelineMarkers,d=b.length,c=0;c<d;c++){var e=b[c];if(e&&e.adBreak===a)return c}}return 0},_startTimeForAdBreak:function(a){if(a){var b=this._mediaPlayer.timeline;if(b&&b.timelineMarkers)for(var b=b.timelineMarkers,d=b.length,c=0;c<d;c++){var e=b[c];e&&e.adBreak===a&&e.localRange.begin/1E3}}return 0},_beginTracking:function(){if(!this._mainVideoOpened&&(this._videoInfo&&(this._videoInfo=null),this._analyticsMetadata)){var a=-1,b=this._mediaPlayer.playbackRange;
b&&!this._mediaPlayerItem.isLive?a=this._mediaPlayer.timeline.convertToLocalTime(b.duration)/1E3:this._mediaPlayerItem.isLive&&this._analyticsMetadata.assetDuration&&(b=Number(this._analyticsMetadata.assetDuration))&&(a=b);this._videoInfo=new x;this._videoInfo.id=this._analyticsMetadata.videoId;this._videoInfo.name=this._analyticsMetadata.videoName;this._videoInfo.playerName=this._analyticsMetadata.playerName;this._videoInfo.length=a;this._videoInfo.streamType=this._mediaPlayerItem&&this._mediaPlayerItem.isLive?
v.ASSET_TYPE_LIVE:v.ASSET_TYPE_VOD;this._videoInfo.playhead=0;this._mainVideoOpened=!0;this.playerPlugin&&(this.analyticsPlugin&&this._analyticsMetadata.videoMetadataBlock&&this.analyticsPlugin.setVideoMetadata(this._analyticsMetadata.videoMetadataBlock()),this.playerPlugin.trackVideoLoad())}},_unloadVideo:function(){this.playerPlugin&&this.playerPlugin.trackVideoUnload();this._qosProvider&&(this._qosProvider.detachMediaPlayer(),this._qosProvider=null);this._removeListeners();this.analyticsPlugin=
this.playerPlugin=this._mediaPlayer=null},_extractDefaultChapters:function(){if(!this._isDefaultChaptersSet){this._chapters=[];var a=this._mediaPlayer.timeline;if(a){var b=a.timelineMarkers;if(b&&0<b.length){for(var d,c=1,e=b.length,f=[],a=0;a<e;a++)(d=b[a])&&d instanceof AdobePSDK.AdBreakTimelineItem&&f.push(d);e=f.length;for(a=0;a<e;a++)if(d=f[a]){0==a&&1<d.localRange.begin&&this._chapters.push(new AdobePSDK.VA.VideoAnalyticsChapterData("chapter_"+c,0,d.localRange.begin/1E3,c++));var g=this._mediaPlayer.playbackRange,
b=null;e>a+1&&(b=f[a+1]);g=Math.floor(this._mediaPlayer.timeline.convertToLocalTime(g.duration))-Math.floor(d.localRange.begin);(b||0<g)&&this._chapters.push(new AdobePSDK.VA.VideoAnalyticsChapterData("chapter_"+c,d.localRange.begin/1E3,b?(b.localRange.begin-d.localRange.begin)/1E3:g,c++))}}else this._chapters.push(this._createDefaultContentChapter())}else this._chapters.push(this._createDefaultContentChapter());this._isDefaultChaptersSet=!0}},_createDefaultContentChapter:function(){return new AdobePSDK.VA.VideoAnalyticsChapterData("chapter_1",
0,this._mediaPlayer.playbackRange.duration/1E3,1)},_extractTrackingMetadataChapters:function(){if(!this._chaptersSet){var a=this._analyticsMetadata.getChapters();a&&(this._chapters=Array.from(a),this._usingCustomChapters=!0);this._chaptersSet=!0}},_resetCurrentChapter:function(){var a=this._chapterForTime(this._mediaPlayer.localTime);a&&a!==this._currentChapter&&this._trackChapterStart(a)},_trackChapterStart:function(a){this._updateCurrentChapter(a);this.playerPlugin&&(this.analyticsPlugin&&this._analyticsMetadata.chapterMetadataBlock&&
this.analyticsPlugin.setChapterMetadata(this._analyticsMetadata.chapterMetadataBlock(a)),this.playerPlugin.trackChapterStart())},_updateCurrentChapter:function(a){this._currentChapter=a;this._chapterInfo&&(this._chapterInfo=null);this._currentChapter&&(this._chapterInfo=new G,this._chapterInfo.length=this._currentChapter.getDuration(),this._chapterInfo.startTime=this._currentChapter.getStartTime(),this._chapterInfo.name=this._currentChapter.getName(),this._chapterInfo.position=this._currentChapter.getIndex())},
_chapterForTime:function(a){if(this._chapters&&0<this._chapters.length)for(var b=this._chapters.length,d=0;d<b;d++){var c=this._chapters[d];if(a>1E3*c.getStartTime()&&a<=1E3*(c.getStartTime()+c.getDuration()))return c}return null},_setupQoS:function(){this._qosProvider=new AdobePSDK.QOSProvider;this._qosProvider.attachMediaPlayer(this._mediaPlayer)},_handleStatusPlaying:function(){!this._mediaPlayerItem.isLive&&this._isChapterTrackingEnabled()&&(this._extractDefaultChapters(),this._extractTrackingMetadataChapters());
this._beginTracking();this.playerPlugin&&this.playerPlugin.trackPlay()},_onTimeChanged:function(){this._mainVideoOpened||this._handleStatusPlaying();if(!this._isInAdBreak&&!this._isSeeking){var a=this._mediaPlayer.localTime;if(this._chapters&&0<this._chapters.length){var b=this._chapterForTime(a);b&&this._currentChapter!=b?this._trackChapterStart(b):b&&this._currentChapter==b&&1E3>=1E3*(b.getStartTime()+b.getDuration())-a&&(this._updateCurrentChapter(null),this.playerPlugin&&this.playerPlugin.trackChapterComplete())}this._isFirstTimeUpdateAfterSeek=
!1}},_onSeekStart:function(){this._mainVideoOpened&&(this._isSeeking=!0,this.playerPlugin&&this.playerPlugin.trackSeekStart())},_onSeekEnd:function(){this._mainVideoOpened&&(this._isSeeking=!1,this._resetCurrentChapter(),this.playerPlugin&&this.playerPlugin.trackSeekComplete())},_onBufferingBegin:function(){this._mainVideoOpened&&!this._isSeeking&&this.playerPlugin&&this.playerPlugin.trackBufferStart()},_onBufferingEnd:function(){this._mainVideoOpened&&!this._isSeeking&&this.playerPlugin&&this.playerPlugin.trackBufferComplete()},
_onAdbreakStarted:function(a){this._currentChapter&&!this._usingCustomChapters&&(this._updateCurrentChapter(null),this._isFirstTimeUpdateAfterSeek||this.playerPlugin&&this.playerPlugin.trackChapterComplete(),this._isFirstTimeUpdateAfterSeek=!1);this._currentAdIndex=0;this._isInAdBreak=!0;this._currentBreakIndex=this._indexForAdBreak(a.adBreak)+1;this._adBreakInfo=new C;this._adBreakInfo.name="";this._adBreakInfo.position=this._currentBreakIndex;this._adBreakInfo.playerName=this._analyticsMetadata.getPlayerName();
this._adBreakInfo.startTime=this._startTimeForAdBreak(a.adBreak)},_onAdbreakCompleted:function(){this._currentAdIndex=0;this._isInAdBreak=!1;this._adBreakInfo=null},_onAdStarted:function(a){this._adInfo=null;this._currentAdIndex++;this._adInfo=new w;this._adInfo.id=a.ad.id;this._adInfo.name="";this._adInfo.length=a.ad.duration;this._adInfo.position=this._currentAdIndex;this.playerPlugin&&(this.analyticsPlugin&&this._analyticsMetadata.adMetadataBlock&&this.analyticsPlugin.setAdMetadata(this._analyticsMetadata.adMetadataBlock(a.ad)),
this.playerPlugin.trackAdStart())},_onAdCompleted:function(){this.playerPlugin&&this.playerPlugin.trackAdComplete();this._adInfo=null},_onProfileChanged:function(){this.playerPlugin&&this.playerPlugin.trackBitrateChange()},_itemPlayCompleted:function(){this._currentChapter&&(this._updateCurrentChapter(null),this.playerPlugin&&this.playerPlugin.trackChapterComplete());this.playerPlugin&&this.playerPlugin.trackComplete();this._mainVideoOpened=!1},_onPlayerStatusChange:function(a){switch(a.status){case AdobePSDK.MediaPlayerStatus.PLAYING:this._handleStatusPlaying();
break;case AdobePSDK.MediaPlayerStatus.PAUSED:this._beginTracking();this.playerPlugin.trackPause();break;case AdobePSDK.MediaPlayerStatus.COMPLETE:this._itemPlayCompleted();break;case AdobePSDK.MediaPlayerStatus.ERROR:this.playerPlugin.trackVideoPlayerError("Player Status: ERROR"),this._unloadVideo()}},_addListeners:function(){this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.StatusChangeEvent,this._onThisPlayerStatusChange);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.BufferingBeginEvent,
this._onThisBufferingBegin);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.BufferingEndEvent,this._onThisBufferingEnd);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.SeekBeginEvent,this._onThisSeekStart);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.SeekEndEvent,this._onThisSeekEnd);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.TimeChangeEvent,this._onThisTimeChanged);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.AdBreakStartedEvent,
this._onThisAdbreakStarted);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.AdBreakCompletedEvent,this._onThisAdbreakCompleted);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.AdStartedEvent,this._onThisAdStarted);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.AdCompletedEvent,this._onThisAdCompleted);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.ProfileChangeEvent,this._onThisProfileChanged)},_removeListeners:function(){this._mediaPlayer&&
(this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.StatusChangeEvent,this._onThisPlayerStatusChange),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.BufferingBeginEvent,this._onThisBufferingBegin),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.BufferingEndEvent,this._onThisBufferingEnd),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.SeekBeginEvent,this._onThisSeekStart),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.SeekEndEvent,
this._onThisSeekEnd),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.TimeChangeEvent,this._onThisTimeChanged),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.AdBreakStartedEvent,this._onThisAdbreakStarted),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.AdBreakCompletedEvent,this._onThisAdbreakCompleted),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.AdStartedEvent,this._onThisAdStarted),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.AdCompletedEvent,
this._onThisAdCompleted),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.ProfileChangeEvent,this._onThisProfileChanged))}})})();(function(){AdobePSDK.VA=AdobePSDK.VA||{};AdobePSDK.VA.VideoAnalyticsMetadata=function(){var c=null,g=null,f=null,p=null,a=null,d=null,b=null,h=null,e=null,F=null,A=!1,y=!1,k=!1,H=null,z=null,v=null,x=null;Object.defineProperty(this,"appMeasurement",{get:function(){return c},set:function(a){c=a}});Object.defineProperty(this,"trackingServer",{get:function(){return g},set:function(a){g=a}});Object.defineProperty(this,"publisher",{get:function(){return f},set:function(a){f=a}});Object.defineProperty(this,
"playerName",{get:function(){return p},set:function(a){p=a}});Object.defineProperty(this,"appVersion",{get:function(){return a},set:function(b){a=b}});Object.defineProperty(this,"channel",{get:function(){return d},set:function(a){d=a}});Object.defineProperty(this,"videoName",{get:function(){return b},set:function(a){b=a}});Object.defineProperty(this,"videoId",{get:function(){return h},set:function(a){h=a}});Object.defineProperty(this,"assetDuration",{get:function(){return e},set:function(a){e=a}});
Object.defineProperty(this,"chapters",{get:function(){return F},set:function(a){F=a}});Object.defineProperty(this,"useSSL",{get:function(){return y},set:function(a){y=a}});Object.defineProperty(this,"enableChapterTracking",{get:function(){return A},set:function(a){A=a}});Object.defineProperty(this,"debugLogging",{get:function(){return k},set:function(a){k=a}});Object.defineProperty(this,"videoMetadataBlock",{get:function(){return H},set:function(a){H=a}});Object.defineProperty(this,"adMetadataBlock",
{get:function(){return z},set:function(a){z=a}});Object.defineProperty(this,"chapterMetadataBlock",{get:function(){return v},set:function(a){v=a}});Object.defineProperty(this,"currentTimeUpdateBlock",{get:function(){return x},set:function(a){x=a}});return this};AdobePSDK.VA.VideoAnalyticsMetadata.prototype={constructor:AdobePSDK.VA.VideoAnalyticsMetadata}})();(function(){AdobePSDK.VA=AdobePSDK.VA||{};AdobePSDK.VA.VideoAnalyticsNielsenMetadata=function(){var c=null,g=null,f=null,p=null,a=null;Object.defineProperty(this,"appInfo",{get:function(){return c},set:function(a){c=a}});Object.defineProperty(this,"configKey",{get:function(){return g},set:function(a){g=a}});Object.defineProperty(this,"contentMetadataBlock",{get:function(){return f},set:function(a){f=a}});Object.defineProperty(this,"channelMetadataBlock",{get:function(){return p},set:function(a){p=
a}});Object.defineProperty(this,"adMetadataBlock",{get:function(){return a},set:function(d){a=d}})};AdobePSDK.VA.VideoAnalyticsNielsenMetadata.prototype={constructor:AdobePSDK.VA.VideoAnalyticsNielsenMetadata}})();(function(){AdobePSDK.VA=AdobePSDK.VA||{};var c=ADB.va.MediaHeartbeat,g=ADB.va.MediaHeartbeatConfig,f=ADB.va.MediaHeartbeatDelegate,p=c.StreamType;AdobePSDK.VA.VideoAnalyticsProvider=function(a,d){if(!(a&&a instanceof AdobePSDK.VA.VideoAnalyticsMetadata))throw Error("analyticsMetadata is required to initialize VideoAnalyticsProvider and should be an instance of VideoAnalyticsMetadata");this._analyticsMetadata=a;if(d&&!(d instanceof AdobePSDK.VA.VideoAnalyticsNielsenMetadata))throw Error("nielsenMetadata if present should be an instance of VideoAnalyticsNielsenMetadata.");
this._nielsenMetadata=d;this._onThisItemCreated=this._onItemCreated.bind(this);return this};AdobePSDK.VA.VideoAnalyticsProvider.prototype={constructor:AdobePSDK.VA.VideoAnalyticsProvider,attachMediaPlayer:function(a){this.detachMediaPlayer();this._mediaPlayer=a;this._mediaPlayerItem=null;this._mediaPlayer&&(this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.ItemCreatedEvent,this._onThisItemCreated),this._setup())},detachMediaPlayer:function(){this._playerWrapper&&(this._playerWrapper.detachMediaPlayer(),
this._playerWrapper=null);this._mediaPlayer&&(this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.ItemCreatedEvent,this._onThisItemCreated),this._mediaPlayer=null)},trackVideoComplete:function(){null!=this._playerWrapper&&this._playerWrapper.trackVideoComplete()},_onItemCreated:function(){this._setup()},_setup:function(){this._mediaPlayer.currentItem&&this._mediaPlayer.currentItem!=AdobePSDK.PSDKErrorCode.kECIllegalState&&(this._mediaPlayerItem=this._mediaPlayer.currentItem,this._configure())},
_configure:function(){var a=this._analyticsMetadata,d=this._nielsenMetadata;if(a){var b=new g;b.trackingServer=a.trackingServer;b.channel=a.channel;b.appVersion=a.appVersion;b.ovp=a.publisher;b.playerName=a.playerName;b.ssl=!!a.useSSL;b.debugLogging=!!a.debugLogging;var f=!1;d&&d.appInfo&&d.configKey&&(b.nielsenAppInfo=d.appInfo,b.nielsenConfigKey=d.configKey,f=!0);this._playerWrapper=new AdobePSDK.VA.MediaHeartbeatDelegate(this._mediaPlayer,a,f?d:null);this._mediaHeartbeat=new c(this._playerWrapper,
b,a.appMeasurement);this._playerWrapper.mediaHeartbeat=this._mediaHeartbeat}}};AdobePSDK.VA.MediaHeartbeatDelegate=function(a,d,b){this.mediaHeartbeat=null;this._mediaPlayer=a;this._mediaPlayerItem=a.currentItem;this._analyticsMetadata=d;this._nielsenMetadata=b;this._currentChapter=this._qosProvider=null;this._usingCustomChapters=this._isSeeking=this._isFirstTimeUpdateAfterSeek=this._isInAdBreak=this._isDefaultChaptersSet=this._chaptersSet=this._mainVideoOpened=!1;this._chapters=null;this._currentBreakIndex=
this._currentAdIndex=0;this._onThisPlayerStatusChange=this._onPlayerStatusChange.bind(this);this._onThisBufferingBegin=this._onBufferingBegin.bind(this);this._onThisBufferingEnd=this._onBufferingEnd.bind(this);this._onThisSeekStart=this._onSeekStart.bind(this);this._onThisSeekEnd=this._onSeekEnd.bind(this);this._onThisTimeChanged=this._onTimeChanged.bind(this);this._onThisAdbreakStarted=this._onAdbreakStarted.bind(this);this._onThisAdbreakCompleted=this._onAdbreakCompleted.bind(this);this._onThisAdStarted=
this._onAdStarted.bind(this);this._onThisAdCompleted=this._onAdCompleted.bind(this);this._onThisProfileChanged=this._onProfileChanged.bind(this);this._addListeners();this._setupQoS()};AdobePSDK.VA.MediaHeartbeatDelegate.prototype=Primetime.helper.extend(f,{getCurrentPlaybackTime:function(){return this._getMainContentPlayhead()},getQoSObject:function(){var a=null;if(this._qosProvider){var d=this._qosProvider.playbackInformation;d&&(a=c.createQoSObject(d.bitRate,d.timeToStart,d.frameRate,d.droppedFrameCount))}return a},
detachMediaPlayer:function(){this._unloadVideo()},trackVideoComplete:function(){this._itemPlayCompleted()},_isChapterTrackingEnabled:function(){return this._analyticsMetadata&&this._analyticsMetadata.enableChapterTracking},_playerName:function(){return this._analyticsMetadata&&this._analyticsMetadata.playerName?this._analyticsMetadata.playerName:"PSDK-based player"},_getMainContentPlayhead:function(){if(this._mainVideoOpened&&this._mediaPlayer)if(this._analyticsMetadata&&this._analyticsMetadata.currentTimeUpdateBlock){var a=
this._analyticsMetadata.currentTimeUpdateBlock();if(void 0!=a)return a}else return this._mediaPlayer.localTime/1E3;return-1},_indexForAdBreak:function(a){if(a){var d=this._mediaPlayer.timeline;if(d&&d.timelineMarkers)for(var d=d.timelineMarkers,b=d.length,c=0;c<b;c++){var e=d[c];if(e&&e.adBreak===a)return c}}return 0},_startTimeForAdBreak:function(a){if(a){var d=this._mediaPlayer.timeline;if(d&&d.timelineMarkers)for(var d=d.timelineMarkers,b=d.length,c=0;c<b;c++){var e=d[c];if(e&&e.adBreak===a)return e.localRange.begin/
1E3}}return 0},_beginTracking:function(){if(!this._mainVideoOpened&&this._analyticsMetadata){var a=this._analyticsMetadata.videoName,d=this._analyticsMetadata.videoId,b=p.VOD;this._mediaPlayerItem&&this._mediaPlayerItem.isLive&&(b=p.LIVE);var f=-1,e=this._mediaPlayer.playbackRange;e&&!this._mediaPlayerItem.isLive?f=this._mediaPlayer.timeline.convertToLocalTime(e.duration)/1E3:this._mediaPlayerItem.isLive&&this._analyticsMetadata.assetDuration&&(e=Number(this._analyticsMetadata.assetDuration))&&(f=
e);a=c.createMediaObject(a,d,f,b);this._nielsenMetadata&&(this._nielsenMetadata.contentMetadataBlock&&(d=this._nielsenMetadata.contentMetadataBlock())&&a.setValue(c.MediaObjectKey.NielsenContentMetadata,d),this._nielsenMetadata.channelMetadataBlock&&(d=this._nielsenMetadata.channelMetadataBlock())&&a.setValue(c.MediaObjectKey.NielsenChannelMetadata,d));d=null;this._analyticsMetadata.videoMetadataBlock&&(d=this._analyticsMetadata.videoMetadataBlock());this.mediaHeartbeat&&this.mediaHeartbeat.trackSessionStart(a,
d);this._mainVideoOpened=!0}},_unloadVideo:function(){this.mediaHeartbeat&&this.mediaHeartbeat.trackSessionEnd();this._qosProvider&&(this._qosProvider.detachMediaPlayer(),this._qosProvider=null);this._removeListeners();this.mediaHeartbeat=this._mediaPlayer=null},_extractDefaultChapters:function(){if(!this._isDefaultChaptersSet){this._chapters=[];var a=this._mediaPlayer.timeline;if(a){var d=a.timelineMarkers;if(d&&0<d.length){for(var b,c=1,e=d.length,f=[],a=0;a<e;a++)(b=d[a])&&b instanceof AdobePSDK.AdBreakTimelineItem&&
f.push(b);e=f.length;for(a=0;a<e;a++)if(b=f[a]){0==a&&1<b.localRange.begin&&this._chapters.push(new AdobePSDK.VA.VideoAnalyticsChapterData("chapter_"+c,0,b.localRange.begin/1E3,c++));var g=this._mediaPlayer.playbackRange,d=null;e>a+1&&(d=f[a+1]);g=Math.floor(this._mediaPlayer.timeline.convertToLocalTime(g.duration))-Math.floor(b.localRange.begin);(d||0<g)&&this._chapters.push(new AdobePSDK.VA.VideoAnalyticsChapterData("chapter_"+c,b.localRange.begin/1E3,d?(d.localRange.begin-b.localRange.begin)/1E3:
g,c++))}}else this._chapters.push(this._createDefaultContentChapter())}else this._chapters.push(this._createDefaultContentChapter());this._isDefaultChaptersSet=!0}},_createDefaultContentChapter:function(){return new AdobePSDK.VA.VideoAnalyticsChapterData("chapter_1",0,this._mediaPlayer.playbackRange.duration/1E3,1)},_extractTrackingMetadataChapters:function(){if(!this._chaptersSet){var a=this._analyticsMetadata.chapters;a&&(this._chapters=Array.from(a),this._usingCustomChapters=!0);this._chaptersSet=
!0}},_resetCurrentChapter:function(a,c){this._currentChapter!=a&&(this._currentChapter&&(c?this._trackChapterComplete():this._trackChapterSkip()),a&&this._trackChapterStart(a))},_trackChapterStart:function(a){this._updateCurrentChapter(a);var d=c.createChapterObject(a.name,a.index,a.duration,a.startTime),b=null;this._analyticsMetadata.chapterMetadataBlock&&(b=this._analyticsMetadata.chapterMetadataBlock(a));this.mediaHeartbeat&&this.mediaHeartbeat.trackEvent(c.Event.ChapterStart,d,b)},_trackChapterComplete:function(){this.mediaHeartbeat&&
this.mediaHeartbeat.trackEvent(c.Event.ChapterComplete);this._updateCurrentChapter(null)},_trackChapterSkip:function(){this.mediaHeartbeat&&this.mediaHeartbeat.trackEvent(c.Event.ChapterSkip);this._updateCurrentChapter(null)},_updateCurrentChapter:function(a){this._currentChapter=a},_chapterForTime:function(a){if(this._chapters&&0<this._chapters.length)for(var c=this._chapters.length,b=0;b<c;b++){var f=this._chapters[b];if(a>1E3*f.startTime&&a<=1E3*(f.startTime+f.duration))return f}return null},_setupQoS:function(){this._qosProvider=
new AdobePSDK.QOSProvider;this._qosProvider.attachMediaPlayer(this._mediaPlayer)},_handleStatusPlaying:function(){!this._mediaPlayerItem.isLive&&this._isChapterTrackingEnabled()&&(this._extractDefaultChapters(),this._extractTrackingMetadataChapters());this._beginTracking();this.mediaHeartbeat&&this.mediaHeartbeat.trackPlay()},_onTimeChanged:function(){this._mainVideoOpened||this._handleStatusPlaying();if(!this._isInAdBreak&&!this._isSeeking){var a=this._mediaPlayer.localTime;this._chapters&&0<this._chapters.length&&
(a=this._chapterForTime(a),this._currentChapter!=a&&this._resetCurrentChapter(a,!this._isFirstTimeUpdateAfterSeek));this._isFirstTimeUpdateAfterSeek=!1}},_onSeekStart:function(){this._mainVideoOpened&&(this._isSeeking=!0,this.mediaHeartbeat&&this.mediaHeartbeat.trackEvent(c.Event.SeekStart))},_onSeekEnd:function(){this._mainVideoOpened&&(this._isFirstTimeUpdateAfterSeek=!0,this._isSeeking=!1,this.mediaHeartbeat&&this.mediaHeartbeat.trackEvent(c.Event.SeekComplete))},_onBufferingBegin:function(){this._mainVideoOpened&&
!this._isSeeking&&this.mediaHeartbeat&&this.mediaHeartbeat.trackEvent(c.Event.BufferStart)},_onBufferingEnd:function(){this._mainVideoOpened&&!this._isSeeking&&this.mediaHeartbeat&&this.mediaHeartbeat.trackEvent(c.Event.BufferComplete)},_onAdbreakStarted:function(a){this._currentChapter&&!this._usingCustomChapters&&this._resetCurrentChapter(null,!this._isFirstTimeUpdateAfterSeek);this._currentAdIndex=0;this._isInAdBreak=!0;var d=this._currentBreakIndex=this._indexForAdBreak(a.adBreak)+1;a=this._startTimeForAdBreak(a.adBreak);
d=c.createAdBreakObject("",d,a);this.mediaHeartbeat&&this.mediaHeartbeat.trackEvent(c.Event.AdBreakStart,d)},_onAdbreakCompleted:function(){this.mediaHeartbeat&&this.mediaHeartbeat.trackEvent(c.Event.AdBreakComplete);this._currentAdIndex=0;this._isInAdBreak=!1},_onAdStarted:function(a){this._currentAdIndex++;var d=c.createAdObject("",a.ad.id,this._currentAdIndex,a.ad.duration);if(this._nielsenMetadata&&this._nielsenMetadata.adMetadataBlock){var b=this._nielsenMetadata.adMetadataBlock(a.ad);b&&d.setValue(c.MediaObjectKey.NielsenAdMetadata,
b)}b=null;this._analyticsMetadata.adMetadataBlock&&(b=this._analyticsMetadata.adMetadataBlock(a.ad));this.mediaHeartbeat&&this.mediaHeartbeat.trackEvent(c.Event.AdStart,d,b)},_onAdCompleted:function(){this.mediaHeartbeat&&this.mediaHeartbeat.trackEvent(c.Event.AdComplete)},_onProfileChanged:function(){this.mediaHeartbeat&&this.mediaHeartbeat.trackEvent(c.Event.BitrateChange)},_itemPlayCompleted:function(){this._resetCurrentChapter(null,!0);this.mediaHeartbeat&&this.mediaHeartbeat.trackComplete();
this._mainVideoOpened=!1},_onPlayerStatusChange:function(a){switch(a.status){case AdobePSDK.MediaPlayerStatus.PLAYING:this._handleStatusPlaying();break;case AdobePSDK.MediaPlayerStatus.PAUSED:this._beginTracking();this.mediaHeartbeat&&this.mediaHeartbeat.trackPause();break;case AdobePSDK.MediaPlayerStatus.COMPLETE:this._itemPlayCompleted();break;case AdobePSDK.MediaPlayerStatus.ERROR:this.mediaHeartbeat&&this.mediaHeartbeat.trackError("Player Status: ERROR"),this._unloadVideo()}},_addListeners:function(){this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.StatusChangeEvent,
this._onThisPlayerStatusChange);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.BufferingBeginEvent,this._onThisBufferingBegin);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.BufferingEndEvent,this._onThisBufferingEnd);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.SeekBeginEvent,this._onThisSeekStart);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.SeekEndEvent,this._onThisSeekEnd);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.TimeChangeEvent,
this._onThisTimeChanged);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.AdBreakStartedEvent,this._onThisAdbreakStarted);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.AdBreakCompletedEvent,this._onThisAdbreakCompleted);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.AdStartedEvent,this._onThisAdStarted);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.AdCompletedEvent,this._onThisAdCompleted);this._mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.ProfileChangeEvent,
this._onThisProfileChanged)},_removeListeners:function(){this._mediaPlayer&&(this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.StatusChangeEvent,this._onThisPlayerStatusChange),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.BufferingBeginEvent,this._onThisBufferingBegin),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.BufferingEndEvent,this._onThisBufferingEnd),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.SeekBeginEvent,
this._onThisSeekStart),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.SeekEndEvent,this._onThisSeekEnd),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.TimeChangeEvent,this._onThisTimeChanged),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.AdBreakStartedEvent,this._onThisAdbreakStarted),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.AdBreakCompletedEvent,this._onThisAdbreakCompleted),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.AdStartedEvent,
this._onThisAdStarted),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.AdCompletedEvent,this._onThisAdCompleted),this._mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.ProfileChangeEvent,this._onThisProfileChanged))}})})();
