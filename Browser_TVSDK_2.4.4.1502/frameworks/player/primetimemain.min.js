Primetime=function(){return{bindings:{},utils:{},flash:{},html:{}}}();(function(){Primetime.helper={extend:function(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];if("object"==typeof c)for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a},arrayEquals:function(a,b,c){if(a===b)return!0;if(!(a&&b&&a instanceof Array&&b instanceof Array)||a.length!==b.length)return!1;for(var d=0;d<a.length;d++)if(a[d]instanceof Array&&b[d]instanceof Array){if(!this.arrayEquals(a[d],b[d]))return!1}else if(c&&a[d]instanceof Object&&b[d]instanceof Object){if(!c(a[d],b[d]))return!1}else if(a[d]!==
b[d])return!1;return!0}}})();(function(){Primetime.DOMHelper={isFullscreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?!0:!1},exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},makeFullscreen:function(a){"undefined"!==typeof a&&null!==
a&&(a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.webkitEnterFullscreen&&a.webkitEnterFullscreen())},addFullscreenChangeHandler:function(a){var b=null;document.mozCancelFullScreen?b="mozfullscreenchange":document.webkitExitFullscreen?b="webkitfullscreenchange":document.exitFullscreen?b="fullscreenchange":document.msExitFullscreen&&(b="MSFullscreenChange");
b&&document.addEventListener(b,a)},addResizeHandler:function(a){window.addEventListener("resize",a)},removeFullScreenChangeHandler:function(a){var b=null;document.mozCancelFullScreen?b="mozfullscreenchange":document.webkitExitFullscreen?b="webkitfullscreenchange":document.exitFullscreen?b="fullscreenchange":document.msExitFullscreen&&(b="MSFullscreenChange");b&&document.removeEventListener(b,a)},removeResizeHandler:function(a){window.removeEventListener("resize",a)},addFullscreenCSS:function(a){var b=
document.createElement("style"),c=null;document.mozCancelFullScreen?c="-moz-full-screen":document.webkitExitFullscreen?c="-webkit-full-screen":document.webkitExitFullScreen?c="-webkit-full-screen":document.exitFullscreen?c="fullscreen":document.msExitFullscreen&&(c="-ms-fullscreen");c&&(c=".fullScr:"+c+"{width: 100% !important; height: 100% !important;}",b.type="text/css",document.head.appendChild(b),(b=b.sheet)&&(b.insertRule?b.insertRule(c,b.cssRules.length):b.addRule&&b.addRule("*:ms-fullscreen",
"width: 100% !important; height: 100% !important;")),a.className+=a.className?" fullScr":"fullScr")}}})();(function(){var a=function(){var a="",b="",c="";screen.width&&(b=screen.width?screen.width:"",c=screen.height?screen.height:"",a+=""+b+" x "+c);var d=navigator.appVersion,l=navigator.userAgent,n=navigator.appName,k=""+parseFloat(navigator.appVersion),m=parseInt(navigator.appVersion,10),p,u;-1!=(p=l.indexOf("Opera"))?(n="Opera",k=l.substring(p+6),-1!=(p=l.indexOf("Version"))&&(k=l.substring(p+8))):-1!=(p=l.indexOf("MSIE"))?(n="Microsoft Internet Explorer",k=l.substring(p+5)):"Netscape"==n&&-1!=l.indexOf("Trident/")?
(n="Microsoft Internet Explorer",k=l.substring(p+5),-1!=(p=l.indexOf("rv:"))&&(k=l.substring(p+3))):"Netscape"==n&&-1!=(p=l.indexOf("Edge"))?(n="Microsoft Internet Explorer/Edge",k=l.substring(p+5)):-1!=(p=l.indexOf("Chrome"))?(n="Chrome",k=l.substring(p+7)):-1!=(p=l.indexOf("Safari"))?(n="Safari",k=l.substring(p+7),-1!=(p=l.indexOf("Version"))&&(k=l.substring(p+8)),-1!=l.indexOf("CriOS")&&(n="Chrome")):-1!=(p=l.indexOf("Firefox"))?(n="Firefox",k=l.substring(p+8)):(m=l.lastIndexOf(" ")+1)<(p=l.lastIndexOf("/"))&&
(n=l.substring(m,p),k=l.substring(p+1),n.toLowerCase()==n.toUpperCase()&&(n=navigator.appName));-1!=(u=k.indexOf(";"))&&(k=k.substring(0,u));-1!=(u=k.indexOf(" "))&&(k=k.substring(0,u));-1!=(u=k.indexOf(")"))&&(k=k.substring(0,u));m=parseInt(""+k,10);isNaN(m)&&(k=""+parseFloat(navigator.appVersion),parseInt(navigator.appVersion,10));u=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(d);m="Unknown";p=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",
r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",
r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var q in p){var t=
p[q];if(t.r.test(l)){m=t.s;break}}q="Unknown";/Windows/.test(m)&&(q=/Windows (.*)/.exec(m)[1],m="Windows");switch(m){case "Mac OS X":q=/Mac OS X (10[\.\_\d]+)/.exec(l)[1];break;case "Android":q=/Android ([\.\_\d]+)/.exec(l)[1];break;case "iOS":q=/OS (\d+)_(\d+)_?(\d+)?/.exec(d),q=q[1]+"."+q[2]+"."+(q[3]|0)}return{screen:a,screenWidth:b,screenHeight:c,browser:n,browserVersion:k,mobile:u,os:m,osVersion:q}},b=function(b){this.browserInfo||(this.browserInfo=a.call(this));return-1<this.browserInfo.browser.indexOf(b)},
c=function(b){this.browserInfo||(this.browserInfo=a.call(this));return-1<this.browserInfo.os.indexOf(b)},d=function(a){var b=0;"undefined"!==typeof a&&null!==a&&(b=a.split(".")[0]);return b};Primetime.BrowserExtensions={browserInfo:void 0,getAllPlatformInfo:function(){this.browserInfo||(this.browserInfo=a.call(this));return this.browserInfo},isIE:function(){return b.call(this,"Internet Explorer")&&!this.isEdge()},isEdge:function(){return b.call(this,"Edge")},isChrome:function(){return b.call(this,
"Chrome")},isFirefox:function(){return b.call(this,"Firefox")},isSafari:function(){return b.call(this,"Safari")},getPlatformOSAndVersion:function(){this.browserInfo||(this.browserInfo=a.call(this));return{os:this.browserInfo.os,osVersion:this.browserInfo.osVersion}},isIOS:function(){return c.call(this,"iOS")},isMacOSX:function(){return c.call(this,"Mac OS")},isWindows:function(){return c.call(this,"Windows")},isIOS7orLess:function(){var a=this.isIOS(),b=this.getPlatformOSAndVersion(),b=b?d.call(this,
b.osVersion):0;if(a&&8>Number(b))return!0},isAndroid:function(){return c.call(this,"Android")},isAndroid443OrLess:function(){var a=this.isAndroid(),b=this.getPlatformOSAndVersion(),c=!0;a?(a=b.osVersion.split("."))&&0<a.length&&(4<Number(a[0])?c=!1:4===Number(a[0])&&a[1]&&4<Number(a[1])?c=!1:4===Number(a[0])&&a[1]&&4===Number(a[1])&&a[2]&&4<=Number(a[2])&&(c=!1)):c=!1;return c},getBrowserMajorVersion:function(){this.browserInfo||(this.browserInfo=a.call(this));var b=d.call(this,this.browserInfo.browserVersion);
return Number(b)},isMobile:function(){this.browserInfo||(this.browserInfo=a.call(this));return this.browserInfo.mobile}}})();var createPerformanceMonitor=function(){return{startCounter:function(a){},endCounter:function(a){},printCounters:function(){}}};(function(){window._PrimetimeSavedRequireJSDefine=window.define;window.define=void 0})();!function(a,b){function c(){var a=Error.apply(this,arguments);this.message=a.message;this.stack=a.stack}function d(){var a=Error.apply(this,arguments);this.message=a.message;this.stack=a.stack}function e(a,b){b=!!b;for(var c=a.length,d=new Uint8Array(b?4*c:c),e=0,l=0;c>e;e++){var f=a.charCodeAt(e);if(b&&55296<=f&&56319>=f){if(++e>=c)throw Error("Malformed string, low surrogate expected at position "+e);f=(55296^f)<<10|65536|56320^a.charCodeAt(e)}else if(!b&&f>>>8)throw Error("Wide characters are not allowed.");
!b||127>=f?d[l++]=f:2047>=f?(d[l++]=192|f>>6,d[l++]=128|63&f):65535>=f?(d[l++]=224|f>>12,d[l++]=128|f>>6&63,d[l++]=128|63&f):(d[l++]=240|f>>18,d[l++]=128|f>>12&63,d[l++]=128|f>>6&63,d[l++]=128|63&f)}return d.subarray(0,l)}function f(a){return"string"==typeof a}function g(a,b,c,d,e){var f=a.length-b;e=e>f?f:e;return a.set(c.subarray(d,d+e),b),e}function h(a){a=a||{};this.result=null;this.len=this.pos=0;var b=a.key;if(void 0!==b){if(b instanceof ArrayBuffer||b instanceof Uint8Array)b=new Uint8Array(b);
else{if(!f(b))throw new TypeError("unexpected key type");b=e(b)}var d=b.length;if(16!==d&&24!==d&&32!==d)throw new c("illegal key size");var l=new DataView(b.buffer,b.byteOffset,b.byteLength);this.asm.set_key(d>>2,l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12),16<d?l.getUint32(16):0,16<d?l.getUint32(20):0,24<d?l.getUint32(24):0,24<d?l.getUint32(28):0);this.key=b}else if(!this.key)throw Error("key is required");if(this.hasOwnProperty("iv"))if(b=a.iv,void 0!==b){if(b instanceof ArrayBuffer||
b instanceof Uint8Array)b=new Uint8Array(b);else{if(!f(b))throw new TypeError("unexpected iv type");b=e(b)}if(16!==b.length)throw new c("illegal iv size");d=new DataView(b.buffer,b.byteOffset,b.byteLength);this.iv=b;this.asm.set_iv(d.getUint32(0),d.getUint32(4),d.getUint32(8),d.getUint32(12))}else this.iv=null,this.asm.set_iv(0,0,0,0);this.hasOwnProperty("padding")&&(a=a.padding,void 0!==a?this.padding=!!a:this.padding=!0);return this}function l(a){if(f(a)&&(a=e(a)),a instanceof ArrayBuffer&&(a=new Uint8Array(a)),
!(a instanceof Uint8Array))throw new TypeError("data isn't of expected type");for(var b=this.asm,c=this.heap,d=t.ENC[this.mode],l=t.HEAP_DATA,n=this.pos,h=this.len,k=0,m=a.length||0,p=0,z=0,u=new Uint8Array(h+m&-16);0<m;)z=g(c,n+h,a,k,m),h+=z,k+=z,m-=z,(z=b.cipher(d,l+n,h))&&u.set(c.subarray(n,n+z),p),p+=z,h>z?(n+=z,h-=z):(n=0,h=0);return this.result=u,this.pos=n,this.len=h,this}function n(a){var b=null,d=0;void 0!==a&&(b=l.call(this,a).result,d=b.length);a=this.asm;var e=this.heap,f=t.ENC[this.mode],
g=t.HEAP_DATA,n=this.pos,h=this.len,k=16-h%16,m=h;if(this.hasOwnProperty("padding"))if(this.padding){for(m=0;k>m;++m)e[n+h+m]=k;m=h+=k}else{if(h%16)throw new c("data length must be a multiple of the block size");}else h+=k;k=new Uint8Array(d+m);return d&&k.set(b),h&&a.cipher(f,g+n,h),m&&k.set(e.subarray(n,n+m),d),this.result=k,this.pos=0,this.len=0,this}function k(a){if(f(a)&&(a=e(a)),a instanceof ArrayBuffer&&(a=new Uint8Array(a)),!(a instanceof Uint8Array))throw new TypeError("data isn't of expected type");
var b=this.asm,c=this.heap,d=t.DEC[this.mode],l=t.HEAP_DATA,n=this.pos,h=this.len,k=0,m=a.length||0,p=0,z=h+m&-16,u=0,q=0;this.hasOwnProperty("padding")&&this.padding&&(u=h+m-z||16,z-=u);for(z=new Uint8Array(z);0<m;)q=g(c,n+h,a,k,m),h+=q,k+=q,m-=q,(q=b.cipher(d,l+n,h-(m?0:u)))&&z.set(c.subarray(n,n+q),p),p+=q,h>q?(n+=q,h-=q):(n=0,h=0);return this.result=z,this.pos=n,this.len=h,this}function m(a){var b=null,e=0;void 0!==a&&(b=k.call(this,a).result,e=b.length);var l=this.asm;a=this.heap;var f=t.DEC[this.mode],
g=t.HEAP_DATA,n=this.pos,h=this.len,m=h;if(0<h){if(h%16){if(this.hasOwnProperty("padding"))throw new c("data length must be a multiple of the block size");h+=16-h%16}if(l.cipher(f,g+n,h),this.hasOwnProperty("padding")&&this.padding){l=a[n+m-1];if(1>l||16<l||l>m)throw new d("bad padding");f=0;for(g=l;1<g;g--)f|=l^a[n+m-g];if(f)throw new d("bad padding");m-=l}}l=new Uint8Array(e+m);return 0<e&&l.set(b),0<m&&l.set(a.subarray(n,n+m),e),this.result=l,this.pos=0,this.len=0,this}function p(a){this.padding=
!0;this.iv=null;a=a||{};var c=a.heap,d=c?c.byteLength:a.heapSize||65536;if(4095&d||0>=d)throw Error("heap size must be a positive integer and a multiple of 4096");this.heap=(c||new Uint8Array(new ArrayBuffer(d))).subarray(t.HEAP_DATA);this.asm=a.asm||t(b,null,this.heap.buffer);this.key=this.mode=null;this.reset(a);this.mode="CBC"}function u(a){p.call(this,a)}function q(a){p.call(this,a)}(function(){var a=Error.apply(this,arguments);this.message=a.message;this.stack=a.stack}).prototype=Object.create(Error.prototype,
{name:{value:"IllegalStateError"}});c.prototype=Object.create(Error.prototype,{name:{value:"IllegalArgumentError"}});d.prototype=Object.create(Error.prototype,{name:{value:"SecurityError"}});var t=(b.Float64Array||b.Float32Array,function(){function a(b,e){var l=c[(d[b]+d[e])%255];return(0===b||0===e)&&(l=0),l}function b(){if(!n){c=[];d=[];var h,k,m=1;for(h=0;255>h;h++)c[h]=m,k=128&m,m<<=1,m&=255,128===k&&(m^=27),m^=c[h],d[c[h]]=h;c[255]=c[0];d[0]=0;n=!0}e=[];l=[];f=[[],[],[],[]];g=[[],[],[],[]];for(h=
0;256>h;h++){var p=void 0,m=k=void 0,p=c[255-d[h]];k=m=(0===h&&(p=0),p);for(p=0;4>p;p++)k=255&(k<<1|k>>>7),m^=k;k=m^99;e[h]=k;l[k]=h;f[0][h]=a(2,k)<<24|k<<16|k<<8|a(3,k);g[0][k]=a(14,h)<<24|a(9,h)<<16|a(13,h)<<8|a(11,h);for(m=1;4>m;m++)f[m][h]=f[m-1][h]>>>8|f[m-1][h]<<24,g[m][k]=g[m-1][k]>>>8|g[m-1][k]<<24}}var c,d,e,l,f,g,n=!1,h=function(a,c,d){b();var n=new Uint32Array(d);n.set(e,512);n.set(l,768);for(var h=0;4>h;h++)n.set(f[h],4096+1024*h>>2),n.set(g[h],8192+1024*h>>2);var k=function(a,b,c){function d(a,
b,c,e,l,k,m,p){a|=0;b|=0;c|=0;e|=0;var z=0,u=0,q=0,w=0,r=0,t=0,x=0,N=0,z=c|1024,u=c|2048,q=c|3072;l=(l|0)^A[(a|0)>>2];k=(k|0)^A[(a|4)>>2];m=(m|0)^A[(a|8)>>2];p=(p|0)^A[(a|12)>>2];for(N=16;(N|0)<=e<<4;N=N+16|0)w=A[(c|l>>22&1020)>>2]^A[(z|k>>14&1020)>>2]^A[(u|m>>6&1020)>>2]^A[(q|p<<2&1020)>>2]^A[(a|N|0)>>2],r=A[(c|k>>22&1020)>>2]^A[(z|m>>14&1020)>>2]^A[(u|p>>6&1020)>>2]^A[(q|l<<2&1020)>>2]^A[(a|N|4)>>2],t=A[(c|m>>22&1020)>>2]^A[(z|p>>14&1020)>>2]^A[(u|l>>6&1020)>>2]^A[(q|k<<2&1020)>>2]^A[(a|N|8)>>2],
x=A[(c|p>>22&1020)>>2]^A[(z|l>>14&1020)>>2]^A[(u|k>>6&1020)>>2]^A[(q|m<<2&1020)>>2]^A[(a|N|12)>>2],l=w,k=r,m=t,p=x;f=A[(b|l>>22&1020)>>2]<<24^A[(b|k>>14&1020)>>2]<<16^A[(b|m>>6&1020)>>2]<<8^A[(b|p<<2&1020)>>2]^A[(a|N|0)>>2];g=A[(b|k>>22&1020)>>2]<<24^A[(b|m>>14&1020)>>2]<<16^A[(b|p>>6&1020)>>2]<<8^A[(b|l<<2&1020)>>2]^A[(a|N|4)>>2];n=A[(b|m>>22&1020)>>2]<<24^A[(b|p>>14&1020)>>2]<<16^A[(b|l>>6&1020)>>2]<<8^A[(b|k<<2&1020)>>2]^A[(a|N|8)>>2];h=A[(b|p>>22&1020)>>2]<<24^A[(b|l>>14&1020)>>2]<<16^A[(b|k>>
6&1020)>>2]<<8^A[(b|m<<2&1020)>>2]^A[(a|N|12)>>2]}function e(a,b,c,l){d(0,2048,4096,y,a|0,b|0,c|0,l|0)}function l(a,b,c,e){d(0,2048,4096,y,k^(a|0),m^(b|0),p^(c|0),z^(e|0));k=f;m=g;p=n;z=h}"use asm";var f=0,g=0,n=0,h=0,k=0,m=0,p=0,z=0,u=0,q=0,w=0,r=0,t=0,x=0,N=0,G=0,E=0,F=0,B=0,J=0,y=0,A=new a.Uint32Array(c),D=new a.Uint8Array(c),I=[e,function(a,b,c,e){var l=0;d(1024,3072,8192,y,a|0,e|0,c|0,b|0);l=g;g=h;h=l},l,function(a,b,c,e){a|=0;b|=0;c|=0;e|=0;var l=0;d(1024,3072,8192,y,a,e,c,b);l=g;g=h;h=l;f^=
k;g^=m;n^=p;h^=z;k=a;m=b;p=c;z=e},function(a,b,c,e){a|=0;b|=0;c|=0;e|=0;d(0,2048,4096,y,k,m,p,z);k=f^=a;m=g^=b;p=n^=c;z=h^=e},function(a,b,c,e){a|=0;b|=0;c|=0;e|=0;d(0,2048,4096,y,k,m,p,z);f^=a;g^=b;n^=c;h^=e;k=a;m=b;p=c;z=e},function(a,b,c,e){a|=0;b|=0;c|=0;e|=0;d(0,2048,4096,y,k,m,p,z);k=f;m=g;p=n;z=h;f^=a;g^=b;n^=c;h^=e},function(a,b,c,e){a|=0;b|=0;c|=0;e|=0;d(0,2048,4096,y,u,q,w,r);r=~G&r|G&r+1;w=~N&w|N&w+(0==(r|0));q=~x&q|x&q+(0==(w|0));u=~t&u|t&u+(0==(q|0));f^=a;g^=b;n^=c;h^=e}],L=[l,function(a,
b,c,d){var e=0,l=0,f=0,g=0,n=0,h=0,u=0,q=0,w=0,r=0;a=(a|0)^k;b=(b|0)^m;c=(c|0)^p;d=(d|0)^z;e=E|0;l=F|0;f=B|0;for(g=J|0;128>(w|0);w=w+1|0)e>>>31&&(n^=a,h^=b,u^=c,q^=d),e=e<<1|l>>>31,l=l<<1|f>>>31,f=f<<1|g>>>31,g<<=1,r=d&1,d=d>>>1|c<<31,c=c>>>1|b<<31,b=b>>>1|a<<31,a>>>=1,r&&(a^=3774873600);k=n;m=h;p=u;z=q}];return{set_rounds:function(a){y=a|0},set_state:function(a,b,c,d){f=a|0;g=b|0;n=c|0;h=d|0},set_iv:function(a,b,c,d){k=a|0;m=b|0;p=c|0;z=d|0},set_nonce:function(a,b,c,d){u=a|0;q=b|0;w=c|0;r=d|0},set_mask:function(a,
b,c,d){t=a|0;x=b|0;N=c|0;G=d|0},set_counter:function(a,b,c,d){r=~G&r|G&(d|0);w=~N&w|N&(c|0);q=~x&q|x&(b|0);u=~t&u|t&(a|0)},get_state:function(a){a|=0;if(a&15)return-1;D[a|0]=f>>>24;D[a|1]=f>>>16&255;D[a|2]=f>>>8&255;D[a|3]=f&255;D[a|4]=g>>>24;D[a|5]=g>>>16&255;D[a|6]=g>>>8&255;D[a|7]=g&255;D[a|8]=n>>>24;D[a|9]=n>>>16&255;D[a|10]=n>>>8&255;D[a|11]=n&255;D[a|12]=h>>>24;D[a|13]=h>>>16&255;D[a|14]=h>>>8&255;D[a|15]=h&255;return 16},get_iv:function(a){a|=0;if(a&15)return-1;D[a|0]=k>>>24;D[a|1]=k>>>16&
255;D[a|2]=k>>>8&255;D[a|3]=k&255;D[a|4]=m>>>24;D[a|5]=m>>>16&255;D[a|6]=m>>>8&255;D[a|7]=m&255;D[a|8]=p>>>24;D[a|9]=p>>>16&255;D[a|10]=p>>>8&255;D[a|11]=p&255;D[a|12]=z>>>24;D[a|13]=z>>>16&255;D[a|14]=z>>>8&255;D[a|15]=z&255;return 16},gcm_init:function(){e(0,0,0,0);E=f;F=g;B=n;J=h},cipher:function(a,b,c){a|=0;b|=0;c|=0;var d=0;if(b&15)return-1;for(;16<=(c|0);)I[a&7](D[b|0]<<24|D[b|1]<<16|D[b|2]<<8|D[b|3],D[b|4]<<24|D[b|5]<<16|D[b|6]<<8|D[b|7],D[b|8]<<24|D[b|9]<<16|D[b|10]<<8|D[b|11],D[b|12]<<24|
D[b|13]<<16|D[b|14]<<8|D[b|15]),D[b|0]=f>>>24,D[b|1]=f>>>16&255,D[b|2]=f>>>8&255,D[b|3]=f&255,D[b|4]=g>>>24,D[b|5]=g>>>16&255,D[b|6]=g>>>8&255,D[b|7]=g&255,D[b|8]=n>>>24,D[b|9]=n>>>16&255,D[b|10]=n>>>8&255,D[b|11]=n&255,D[b|12]=h>>>24,D[b|13]=h>>>16&255,D[b|14]=h>>>8&255,D[b|15]=h&255,d=d+16|0,b=b+16|0,c=c-16|0;return d|0},mac:function(a,b,c){a|=0;b|=0;c|=0;var d=0;if(b&15)return-1;for(;16<=(c|0);)L[a&1](D[b|0]<<24|D[b|1]<<16|D[b|2]<<8|D[b|3],D[b|4]<<24|D[b|5]<<16|D[b|6]<<8|D[b|7],D[b|8]<<24|D[b|
9]<<16|D[b|10]<<8|D[b|11],D[b|12]<<24|D[b|13]<<16|D[b|14]<<8|D[b|15]),d=d+16|0,b=b+16|0,c=c-16|0;return d|0}}}(a,c,d);return k.set_key=function(a,b,c,d,l,f,h,m,p){var z=n.subarray(0,60),u=n.subarray(256,316);z.set([b,c,d,l,f,h,m,p]);b=a;for(d=1;4*a+28>b;b++)c=z[b-1],(0===b%a||8===a&&4===b%a)&&(c=e[c>>>24]<<24^e[c>>>16&255]<<16^e[c>>>8&255]<<8^e[255&c]),0===b%a&&(c=c<<8^c>>>24^d<<24,d=d<<1^(128&d?27:0)),z[b]=z[b-a]^c;for(d=0;b>d;d+=4)for(l=0;4>l;l++)c=z[b-(4+d)+(4-l)%4],4>d||d>=b-4?u[d+l]=c:u[d+l]=
g[0][e[c>>>24]]^g[1][e[c>>>16&255]]^g[2][e[c>>>8&255]]^g[3][e[255&c]];k.set_rounds(a+5)},k};return h.ENC={ECB:0,CBC:2,CFB:4,OFB:6,CTR:7},h.DEC={ECB:1,CBC:3,CFB:5,OFB:6,CTR:7},h.MAC={CBC:0,GCM:1},h.HEAP_DATA=16384,h}()),r=p.prototype;r.BLOCK_SIZE=16;r.reset=h;r.encrypt=n;r.decrypt=m;r=u.prototype;r.BLOCK_SIZE=16;r.reset=h;r.process=l;r.finish=n;r=q.prototype;r.BLOCK_SIZE=16;r.reset=h;r.process=k;r.finish=m;var w=new Uint8Array(1048576),z=t(b,null,w.buffer);return a.AES_CBC=p,a.AES_CBC.encrypt=function(a,
b,c,d){if(void 0===a)throw new SyntaxError("data required");if(void 0===b)throw new SyntaxError("key required");return(new p({heap:w,asm:z,key:b,padding:c,iv:d})).encrypt(a).result},a.AES_CBC.decrypt=function(a,b,c,d){if(void 0===a)throw new SyntaxError("data required");if(void 0===b)throw new SyntaxError("key required");return(new p({heap:w,asm:z,key:b,padding:c,iv:d})).decrypt(a).result},a.AES_CBC.Encrypt=u,a.AES_CBC.Decrypt=q,"function"==typeof define&&define.amd?define([],function(){return a}):
"object"==typeof module&&module.exports?module.exports=a:b.asmCrypto=a,a}({},function(){return this}());(function(){window.define=window._PrimetimeSavedRequireJSDefine;window._PrimetimeSavedRequireJSDefine=void 0})();(function(){var a=null,b=null,c=null,d=1,e=function(){return Primetime.BrowserExtensions.isAndroid443OrLess()&&(!Primetime.BrowserExtensions.isChrome()||33>Primetime.BrowserExtensions.getBrowserMajorVersion())?!1:!0},f=function(){if(this.capabilities.supportsMediaSource()&&!(Primetime.BrowserExtensions.isIOS()||Primetime.BrowserExtensions.isSafari()||Primetime.BrowserExtensions.isAndroid()&&!e.call(this))){if(Primetime.bindings.streamengine)return console.log("using StreamEngine for HLS"),Primetime.bindings.streamengine;
console.log("using mse");return Primetime.bindings.mse}var a=document.createElement("video");return this.capabilities.supportsVideo()&&(Primetime.BrowserExtensions.isAndroid443OrLess()||this.capabilities.supportsCodec(a,Primetime.MimeTypeUtils.getCodec("HLS")))?Primetime.bindings.me:this.isFlashSupported()?Primetime.bindings.flash:null},g=function(){return this.capabilities.supportsMediaSource()?Primetime.bindings.streamengine?(console.log("using StreamEngine for DASH"),Primetime.bindings.streamengine):
Primetime.bindings.mse:null},h=function(a){var b=!1;switch(a){case AdobePSDK.MediaResourceType.HDS:case AdobePSDK.MediaResourceType.HLS:case AdobePSDK.MediaResourceType.ISOBMFF:case AdobePSDK.MediaResourceType.CUSTOM:b=!0}return b},l=function(a,b){if(a){a._status=AdobePSDK.MediaPlayerStatus.ERROR;var c=new AdobePSDK.Metadata;c.setValue("PSDK_ERROR_CODE",AdobePSDK.PSDKErrorCode.kECGenericError+"");c.setValue("PSDK_ERROR","kECGenericError");c.setValue("DESCRIPTION",b);a._eventDispatcher.dispatchEvent(new AdobePSDK.MediaPlayerStatusChangeEvent(a._status,
a,c))}else console.log(b)},n=function(d,e,n){var u=null;c||(c={ContentFactory:AdobePSDK.ContentFactory,AdPolicySelector:AdobePSDK.AdPolicySelector,AdSignalingMode:AdobePSDK.AdSignalingMode,MediaPlayerItem:AdobePSDK.MediaPlayerItem,PSDKEventType:AdobePSDK.PSDKEventType,AdBannerAsset:AdobePSDK.AdBannerAsset,Ad:AdobePSDK.Ad,AdAsset:AdobePSDK.AdAsset,AdBreak:AdobePSDK.AdBreak,AdBreakPlacement:AdobePSDK.AdBreakPlacement,AdClick:AdobePSDK.AdClick,Placement:AdobePSDK.Placement,Opportunity:AdobePSDK.Opportunity,
MediaResource:AdobePSDK.MediaResource});a||(a={ContentFactory:AdobePSDK.ContentFactory,AdPolicySelector:AdobePSDK.AdPolicySelector,AdSignalingMode:AdobePSDK.AdSignalingMode,MediaPlayerItem:AdobePSDK.MediaPlayerItem,PSDKEventType:AdobePSDK.PSDKEventType,AdBannerAsset:AdobePSDK.AdBannerAsset,Ad:AdobePSDK.Ad,AdAsset:AdobePSDK.AdAsset,AdBreak:AdobePSDK.AdBreak,AdBreakPlacement:AdobePSDK.AdBreakPlacement,AdClick:AdobePSDK.AdClick,Placement:AdobePSDK.Placement,Opportunity:AdobePSDK.Opportunity,MediaResource:AdobePSDK.MediaResource});
b||(AdobePSDKEI=new AdobePSDKEI,b={});if("undefined"!==typeof e&&null!==e&&e.forceFlash)return this.isFlashSupported()?h.call(this,d)?this.isFlashSupported()?Primetime.bindings.flash:null:(l(n,"Currently Flash does not support this MediaResourceType"),null):(l(n,"Flash Fallback not Supported either due to Flash player notinstalled or Flash version < 23 or Device/OS not supported."),null);switch(d){case AdobePSDK.MediaResourceType.HDS:u=this.isFlashSupported()?Primetime.bindings.flash:null;break;case AdobePSDK.MediaResourceType.HLS:u=
f.call(this);break;case AdobePSDK.MediaResourceType.DASH:if("undefined"!==typeof e&&null!==e&&Primetime.BrowserExtensions.isIOS()&&Primetime.BrowserExtensions.isChrome())return l(n,"DASH not supported on Chrome iOS."),null;u=g.call(this);break;case AdobePSDK.MediaResourceType.ISOBMFF:d=document.createElement("video");u=this.capabilities.supportsVideo()&&this.capabilities.supportsCodec(d,Primetime.MimeTypeUtils.getCodec("ISOBMFF"))?Primetime.bindings.me:this.isFlashSupported()?Primetime.bindings.flash:
null;break;case AdobePSDK.MediaResourceType.CUSTOM:u=e&&e.url?this.capabilities.supportsVideo()?Primetime.bindings.vpaid:null:this.capabilities.supportsVideo()?Primetime.bindings.me:null;break;case AdobePSDK.MediaResourceType.UNKNOWN:u=this.capabilities.supportsVideo()?Primetime.bindings.me:null}return u};Primetime.BindingsFactory={capabilities:void 0,createMediaPlayer:function(a,b,c,d,e){this.capabilities=this.capabilities||new Primetime.utils.Capabilities;if("undefined"===typeof b||null===b||"undefined"===
typeof a||null===a)return null;var l=n.call(this,b,d,a);return l?l.createMediaPlayer(a,b,c,d,e):null},isSupported:function(a){this.capabilities=this.capabilities||new Primetime.utils.Capabilities;return"undefined"===typeof a||null===a?null:!!n.call(this,a)},isFlashSupported:function(){if(Primetime.BrowserExtensions.isMacOSX()||Primetime.BrowserExtensions.isWindows()&&!Primetime.BrowserExtensions.isMobile()){var a=swfobject.getFlashPlayerVersion();if(a&&23<=a.major)return!0}return!1},isFlashFallbackSupported:function(a){var b=
null;if(!(Primetime.BrowserExtensions.isMacOSX()||Primetime.BrowserExtensions.isWindows()&&!Primetime.BrowserExtensions.isMobile()))return b=new AdobePSDK.FlashFallbackSupportedResult(!1,AdobePSDK.FlashFallbackNotSupportedReason.DEVICE_OS_NOT_SUPPORTED);b=swfobject.getFlashPlayerVersion();return!b||23>b.major?b=new AdobePSDK.FlashFallbackSupportedResult(!1,AdobePSDK.FlashFallbackNotSupportedReason.FLASH_PLAYER_NOT_SUPPORTED):"undefined"!=typeof a&&null!=a&&h(a)?b=new AdobePSDK.FlashFallbackSupportedResult(!0,
null):b=new AdobePSDK.FlashFallbackSupportedResult(!1,AdobePSDK.FlashFallbackNotSupportedReason.MEDIA_RESOURCE_NOT_SUPPORTED)},getSupportedPlayerTech:function(a){if("undefined"===typeof a||null===a)return null;a=n.call(this,a.type,a);var b=AdobePSDK.PlayerTechnology.Type.UNKNOWN;if(a)switch(a){case Primetime.bindings.streamengine:case Primetime.bindings.mse:b=AdobePSDK.PlayerTechnology.Type.MSE;break;case Primetime.bindings.me:b=AdobePSDK.PlayerTechnology.Type.VIDEO_TAG;break;case Primetime.bindings.flash:b=
AdobePSDK.PlayerTechnology.Type.FLASH}return b},getDelegateId:function(a){a.id||(a.id=d++);return a.id},isAndroidMSESupported:e,setFlashAPIBindings:function(){AdobePSDK=Primetime.helper.extend(AdobePSDK,b)},setHtmlAPIBindings:function(){AdobePSDK=Primetime.helper.extend(AdobePSDK,a)},setDefaultAPIBindings:function(){AdobePSDK=Primetime.helper.extend(AdobePSDK,c)}}})();(function(){var a={};Primetime.bindings.mse={createMediaPlayer:function(b,c,d){if("undefined"===typeof c||null===c||"undefined"===typeof b||null===b)return null;if("undefined"===typeof d||null===d)d=!1;Primetime.BindingsFactory.setHtmlAPIBindings();if(d){d=null;if(c=Primetime.di.CommonContext.getContextInstance(c))d=new Primetime.mse.MediaPlayerImpl(c),d.startup(b,!0);return d}d=Primetime.BindingsFactory.getDelegateId(b);var e,f;a[d]||(a[d]={});e=a[d][c];!b._nativePlayer||e&&b._nativePlayer===e||
b._resetDelegates();if(!e){if(f=Primetime.di.CommonContext.getContextInstance(c))f=new Primetime.mse.MediaPlayerImpl(f),e=new Primetime.html.MediaPlayerImplDelegate(b,f,c),e.getViewDelegate(b.view),f.startup(e,!1);a[d][c]=e}b.view.getDelegate()&&b.view.getDelegate().showNativeView();return e}}})();(function(){Primetime.bindings.me={createMediaPlayer:function(a,b,c){var d=null,d=null;if("undefined"===typeof b||null===b||"undefined"===typeof a||null===a)return null;"undefined"==typeof c&&(c=!1);Primetime.BindingsFactory.setHtmlAPIBindings();d=Primetime.me.di.CommonContext.getContextInstance(b);d=new Primetime.me.MediaPlayerImpl(d);if(c)return d.startup(a,c),d;a._nativePlayer&&a._resetDelegates();b=new Primetime.html.MediaPlayerImplDelegate(a,d);b.getViewDelegate(a.view);a.view.getDelegate()&&
a.view.getDelegate().showNativeView();d.startup(b,c);return b}}})();(function(){AuthorizationCompleteCallbackFunc=function(){console.log("creationComplete called");c&&setTimeout(c,500)};dispatchEventCallbackFunc=function(a){"undefined"!==typeof a&&null!==a&&(a=_getEvent(a),d&&d(a))};var a={},b=[],c=null,d=null,e=function(){var a=Primetime.bindings.flash.swfId;return document.getElementById(a)&&document.getElementById(a).CallAsToInitializePlayer?!0:!1},f=function(a,c){var e,f,g=new AdobePSDKEI.MediaPlayer;b[g.key]=a;d=function(b){var c=_getParentDelegate(b.type,b.delegate.key);
c||(c=a);c._eventDispatcher.dispatchEvent(b)};var p=a._eventDispatcher.getListeners();for(f in p)for(e=0;e<p[f].length;e++)g.addEventListener(f,p[f][e]);document.getElementById(Primetime.bindings.flash.swfId).CallAsToInitializePlayer(g.key);a._textFormat&&c.getTextFormatDelegate(a._textFormat);c.setNativePlayer(g);return g},g=function(b,d,g,k){var m=Primetime.BindingsFactory.getDelegateId(b),p,u;Primetime.BindingsFactory.setFlashAPIBindings();p=a[m];!b._nativePlayer||p&&b._nativePlayer===p||b._resetDelegates();
p||(p=new Primetime.flash.MediaPlayerImplDelegate(b,null,d),a[m]=p);p.getViewDelegate(b.view);(u=b.view.getDelegate())&&u.showNativeView();if(!e.call(this))return c=function(){c=null;u.ensureDelegate();f.call(this,b,p,d,g,k);b._replaceCurrentResource(g,k)},p;p.getNativePlayer()||f.call(this,b,p,d,g,k);return p};_getParentDelegate=function(a,c){var d=-1;if("undefined"==typeof c||null==c)return event;switch(a){case AdobePSDK.PSDKEventType.AD_BREAK_COMPLETED:d=document.getElementById("flashFallback").AdBreakPlaybackEventGetTarget(c);
break;case AdobePSDK.PSDKEventType.AD_BREAK_SKIPPED:d=document.getElementById("flashFallback").AdBreakPlaybackEventGetTarget(c);break;case AdobePSDK.PSDKEventType.AD_BREAK_STARTED:d=document.getElementById("flashFallback").AdBreakPlaybackEventGetTarget(c);break;case AdobePSDK.PSDKEventType.AD_CLICK:d=document.getElementById("flashFallback").AdClickEventGetTarget(c);break;case AdobePSDK.PSDKEventType.AD_COMPLETED:d=document.getElementById("flashFallback").AdPlaybackEventGetTarget(c);break;case AdobePSDK.PSDKEventType.AD_PROGRESS:d=
document.getElementById("flashFallback").AdPlaybackEventGetTarget(c);break;case AdobePSDK.PSDKEventType.AD_STARTED:d=document.getElementById("flashFallback").AdPlaybackEventGetTarget(c);break;case AdobePSDK.PSDKEventType.AUDIO_UPDATED:d=document.getElementById("flashFallback").MediaPlayerItemEventGetTarget(c);break;case AdobePSDK.PSDKEventType.BUFFERING_BEGIN:d=document.getElementById("flashFallback").BufferEventGetTarget(c);break;case AdobePSDK.PSDKEventType.BUFFERING_END:d=document.getElementById("flashFallback").BufferEventGetTarget(c);
break;case AdobePSDK.PSDKEventType.BUFFER_PREPARED:d=document.getElementById("flashFallback").PSDKEventGetTarget(c);break;case AdobePSDK.PSDKEventType.CAPTIONS_UPDATED:d=document.getElementById("flashFallback").MediaPlayerItemEventGetTarget(c);break;case AdobePSDK.PSDKEventType.DRM_METADATA_INFO_AVAILABLE:d=document.getElementById("flashFallback").DRMMetadataInfoEventGetTarget(c);break;case AdobePSDK.PSDKEventType.ITEM_CREATED:d=document.getElementById("flashFallback").MediaPlayerItemEventGetTarget(c);
break;case AdobePSDK.PSDKEventType.ITEM_UPDATED:d=document.getElementById("flashFallback").MediaPlayerItemEventGetTarget(c);break;case AdobePSDK.PSDKEventType.LOAD_INFORMATION_AVAILABLE:d=document.getElementById("flashFallback").LoadInformationEventGetTarget(c);break;case AdobePSDK.PSDKEventType.MASTER_UPDATED:d=document.getElementById("flashFallback").MediaPlayerItemEventGetTarget(c);break;case AdobePSDK.PSDKEventType.OPERATION_FAILED:d=document.getElementById("flashFallback").NotificationEventGetTarget(c);
break;case AdobePSDK.PSDKEventType.PLAYBACK_RANGE_UPDATED:d=document.getElementById("flashFallback").PSDKEventGetTarget(c);break;case AdobePSDK.PSDKEventType.PLAY_START:d=document.getElementById("flashFallback").PSDKEventGetTarget(c);break;case AdobePSDK.PSDKEventType.PROFILE_CHANGED:d=document.getElementById("flashFallback").ProfileEventGetTarget(c);break;case AdobePSDK.PSDKEventType.RATE_PLAYING:d=document.getElementById("flashFallback").PlaybackRateEventGetTarget(c);break;case AdobePSDK.PSDKEventType.RATE_SELECTED:d=
document.getElementById("flashFallback").PlaybackRateEventGetTarget(c);break;case AdobePSDK.PSDKEventType.RESERVATION_REACHED:d=document.getElementById("flashFallback").ReservationEventGetTarget(c);break;case AdobePSDK.PSDKEventType.SEEK_BEGIN:d=document.getElementById("flashFallback").SeekEventGetTarget(c);break;case AdobePSDK.PSDKEventType.SEEK_END:d=document.getElementById("flashFallback").SeekEventGetTarget(c);break;case AdobePSDK.PSDKEventType.SEEK_POSITION_ADJUSTED:d=document.getElementById("flashFallback").SeekEventGetTarget(c);
break;case AdobePSDK.PSDKEventType.SIZE_AVAILABLE:d=document.getElementById("flashFallback").SizeAvailableEventGetTarget(c);break;case AdobePSDK.PSDKEventType.STATUS_CHANGED:d=document.getElementById("flashFallback").MediaPlayerStatusChangeEventGetTarget(c);break;case AdobePSDK.PSDKEventType.TIME_CHANGED:d=document.getElementById("flashFallback").TimeChangeEventGetTarget(c);break;case AdobePSDK.PSDKEventType.TIMED_EVENT:d=document.getElementById("flashFallback").TimedEventGetTarget(c);break;case AdobePSDK.PSDKEventType.TIMED_METADATA_AVAILABLE:d=
document.getElementById("flashFallback").TimedMetadataEventGetTarget(c);break;case AdobePSDK.PSDKEventType.TIMED_METADATA_IN_BACKGROUND:d=document.getElementById("flashFallback").PSDKEventGetTarget(c);break;case AdobePSDK.PSDKEventType.TIMELINE_UPDATED:d=document.getElementById("flashFallback").TimelineEventGetTarget(c);break;default:return null}return b[d]};_getEvent=function(a){var b=a.eventKey,c=a;if("undefined"==typeof b||null==b)return c;switch(a.type){case AdobePSDK.PSDKEventType.AD_BREAK_COMPLETED:c=
CreateAdBreakPlaybackEventEI(b);break;case AdobePSDK.PSDKEventType.AD_BREAK_SKIPPED:c=CreateAdBreakPlaybackEventEI(b);break;case AdobePSDK.PSDKEventType.AD_BREAK_STARTED:c=CreateAdBreakPlaybackEventEI(b);break;case AdobePSDK.PSDKEventType.AD_CLICK:c=CreateAdClickEventEI(b);break;case AdobePSDK.PSDKEventType.AD_COMPLETED:c=CreateAdPlaybackEventEI(b);break;case AdobePSDK.PSDKEventType.AD_PROGRESS:c=CreateAdPlaybackEventEI(b);break;case AdobePSDK.PSDKEventType.AD_STARTED:c=CreateAdPlaybackEventEI(b);
break;case AdobePSDK.PSDKEventType.AUDIO_UPDATED:c=CreateMediaPlayerItemEventEI(b);break;case AdobePSDK.PSDKEventType.BUFFERING_BEGIN:c=CreateBufferEventEI(b);break;case AdobePSDK.PSDKEventType.BUFFERING_END:c=CreateBufferEventEI(b);break;case AdobePSDK.PSDKEventType.BUFFER_PREPARED:c=CreateBufferEventEI(b);break;case AdobePSDK.PSDKEventType.CAPTIONS_UPDATED:c=CreateMediaPlayerItemEventEI(b);break;case AdobePSDK.PSDKEventType.DRM_METADATA_INFO_AVAILABLE:c=CreateDRMMetadataInfoEventEI(b);break;case AdobePSDK.PSDKEventType.ITEM_CREATED:c=
CreateMediaPlayerItemEventEI(b);break;case AdobePSDK.PSDKEventType.ITEM_UPDATED:c=CreateMediaPlayerItemEventEI(b);break;case AdobePSDK.PSDKEventType.LOAD_INFORMATION_AVAILABLE:c=CreateLoadInformationEventEI(b);break;case AdobePSDK.PSDKEventType.MASTER_UPDATED:c=CreateMediaPlayerItemEventEI(b);break;case AdobePSDK.PSDKEventType.OPERATION_FAILED:c=CreateNotificationEventEI(b);break;case AdobePSDK.PSDKEventType.PLAYBACK_RANGE_UPDATED:c=CreatePSDKEventEI(b);break;case AdobePSDK.PSDKEventType.PLAY_START:c=
CreatePSDKEventEI(b);break;case AdobePSDK.PSDKEventType.PROFILE_CHANGED:c=CreateProfileEventEI(b);break;case AdobePSDK.PSDKEventType.RATE_PLAYING:c=CreatePlaybackRateEventEI(b);break;case AdobePSDK.PSDKEventType.RATE_SELECTED:c=CreatePlaybackRateEventEI(b);break;case AdobePSDK.PSDKEventType.RESERVATION_REACHED:c=CreateReservationEventEI(b);break;case AdobePSDK.PSDKEventType.SEEK_BEGIN:c=CreateSeekEventEI(b);break;case AdobePSDK.PSDKEventType.SEEK_END:c=CreateSeekEventEI(b);break;case AdobePSDK.PSDKEventType.SEEK_POSITION_ADJUSTED:c=
CreateSeekEventEI(b);break;case AdobePSDK.PSDKEventType.SIZE_AVAILABLE:c=CreateSizeAvailableEventEI(b);break;case AdobePSDK.PSDKEventType.STATUS_CHANGED:c=CreateMediaPlayerStatusChangeEventEI(b);break;case AdobePSDK.PSDKEventType.TIME_CHANGED:c=CreateTimeChangeEventEI(b);break;case AdobePSDK.PSDKEventType.TIMED_EVENT:c=CreateTimedEventEI(b);break;case AdobePSDK.PSDKEventType.TIMED_METADATA_AVAILABLE:c=CreateTimedMetadataEventEI(b);break;case AdobePSDK.PSDKEventType.TIMED_METADATA_IN_BACKGROUND:c=
CreateTimedMetadataEventEI(b);break;case AdobePSDK.PSDKEventType.TIMELINE_UPDATED:c=CreateTimelineEventEI(b)}return c};Primetime.bindings.flash={swfId:"flashFallback",createMediaPlayer:function(a,b,c,d,e){return"undefined"===typeof b||null===b||"undefined"===typeof a||null===a?null:g.call(this,a,b,d,e)},createMetadataDelegate:function(a){return"undefined"!==typeof a&&null!==a?(a.setupDelegate(),a.getDelegate()):null},createAuditudeSettingsDelegate:function(a){return"undefined"!==typeof a&&null!==
a?(auditudeSettingsDelegate=a.setupDelegate(),a.getDelegate()):null},createAdFactoryDelegate:function(a){return"undefined"!==typeof a&&null!==a?(a.setupDelegate(),a.getDelegate()):null},createNetworkConfigurationDelegate:function(a){return"undefined"!==typeof a&&null!==a?(a.setupDelegate(),a.getDelegate()):null},isASInitialized:e,createPlacementDelegate:function(a){return"undefined"!==typeof a&&null!==a?(a.setupDelegate(),a.getDelegate()):null},createOpportunityDelegate:function(a){return"undefined"!==
typeof a&&null!==a?(a.setupDelegate(),a.getDelegate()):null},createMediaResourceDelegate:function(a){return"undefined"===typeof a||null===a?(a.setupDelegate(),a.getDelegate()):null},isFlashAlive:function(){return EI.isFlashAlive()}}})();(function(){var a=function(a){(a=a.substring(a.indexOf("=")+1))&&-1<a.indexOf(".")&&(a=a.substring(0,a.indexOf(".")));return a};Primetime.MimeTypeUtils={};Primetime.MimeTypeUtils.MimeTypes={HLS:"application/x-mpegURL",ISOBMFF:"video/mp4",OGG:"video/ogg"};Primetime.MimeTypeUtils=Primetime.helper.extend(Primetime.MimeTypeUtils,{CODECS:{HLS:"avc1.42E01E, mp4a.40.2",ISOBMFF:"avc1.42E01E, mp4a.40.2",OGG:"theora, vorbis"},mapExtToMimeType:{aac:["audio/x-aac"],mpd:["application/dash+xml","application/dash+xm",
"text/xml","application/xml","text/plain"],m4a:["audio/mp4"],m4v:["video/mp4"],mp4:["video/mp4","audio/mp4"],m3u8:"application/x-mpegURL application/vnd.apple.mpegurl application/vnd.apple.mpegurl.audio audio/mpegurl audio/x-mpegurl text/plain".split(" "),m4s:["video/iso.segment"],oga:["audio/ogg"],ogg:["video/ogg"],ogv:["video/ogg"],ts:["video/mp2t"],ttml:["text/html","application/ttml+xml"],vtt:["text/plain"],webm:["video/webm"],webvtt:["text/vtt"],xml:["text/xml","application/xml"]},Extension:{AAC:"aac",
DASH:"dash",M3U8:"m3u8",MPD:"mpd",MP4:"mp4",M4S:"m4s",M4A:"m4a",M4F:"m4f",M4V:"m4v",OGA:"oga",OGG:"ogg",OGV:"ogv",TS:"ts",TTML:"ttml",VTT:"vtt",WEBVTT:"webvtt",XML:"xml"},extensionToMimeType:function(a){var c=null;if("undefined"===typeof a||null===a)return c;a=a.toLowerCase();this.mapExtToMimeType.hasOwnProperty(a)&&(c=this.mapExtToMimeType[a]);return c},compatibleCodecs:function(b,c,d){if("video"===b||"audio"===b)if("undefined"!==typeof c&&null!==c&&"undefined"!==typeof d&&null!==d&&c.mimeType&&
c.codec&&d.mimeType&&d.codec){if(b=c.mimeType===d.mimeType)c=a(c.codec),d=a(d.codec),b=c&&d?c===d:!1;d=b}else d=!1;else d=!1;return d},getCodec:function(a){if(Primetime.MimeTypeUtils.MimeTypes[a])return Primetime.MimeTypeUtils.MimeTypes[a]},getExtension:function(a){if(!a)return"";a=a.replace(/\\/g,"/").split("/").pop();a=a.replace(/#(.*?)$/,"");a=a.replace(/\?(.*?)$/,"");return-1!==a.lastIndexOf(".")?a.substring(a.lastIndexOf(".")+1).toLowerCase():""},validateResponse:function(a,c,d){var e=-1;if(!d)return e;
a=this.getExtension(a);if(""!==a&&(e=d.indexOf(a),-1!==e))return e;if(c=c?c.split(";")[0].toLowerCase():null)for(a=0;a<d.length;a++){var f=this.extensionToMimeType(d[a]);if(f&&-1!==f.indexOf(c)){e=a;break}}return e}})})();(function(){Primetime.utils.TSUtils=function(){var a=function(a,b){this.bufferView=a;this.offset=b;this.streamId=this.pid=NaN;this.hasAdaptation=this.payloadStart=!1;this.type=null},b=function(b){var c=0,f=new Uint8Array(b),g=[],h=[],l=function(){return c+188<=f.length?!0:!1};return{hasNext:l,parseNext:function(){if(!l())throw Error("No next packet found");var b=c;c+=188;var d=new a(f,b);d.pid=(d.bufferView[b+1]&31)<<8|d.bufferView[b+2];d.payloadStart=d.bufferView[b+1]&64;d.hasPayload=d.bufferView[b+
3]&16;d.hasAdaptation=d.bufferView[b+3]&32;b+=4;d.hasAdaptation&&(b+=d.bufferView[b]+1);var m=d.bufferView;d.payloadStart&&0===m[b]&&0===m[b+1]&&1===m[b+2]&&(d.streamId=m[b+3]);if(-1!==h.indexOf(d.pid))d.type="video";else if(-1!==g.indexOf(d.pid))d.type="audio";else switch(d.streamId){case 224:h.push(d.pid);d.type="video";break;case 192:g.push(d.pid),d.type="audio"}return d}}},c=function(a){var b=new Uint8Array(188*a.length);a.forEach(function(a,c){var d=a.bufferView.subarray(a.offset,a.offset+188);
b.set(d,188*c)});return b.buffer};return{filterVideo:function(a){a=new b(a);for(var e=[];a.hasNext();){var f=a.parseNext();"video"===f.type&&e.push(f)}return c(e)}}}()})();(function(){Primetime=Primetime.helper.extend(Primetime,{mse:{},modules:{},dependencies:{protection:{servers:{},vo:{}}},vo:{},di:{},rules:{}})})();(function(){Primetime=Primetime.helper.extend(Primetime,{me:{modules:{},dependencies:{protection:{}},vo:{},di:{},models:{}}})})();(function(){Primetime=Primetime.helper.extend(Primetime,{flash:{}})})();(function(){Primetime.utils.Capabilities=function(){};Primetime.utils.Capabilities.prototype=Primetime.helper.extend(MediaPlayer.utils.Capabilities.prototype,{baseConstructor:MediaPlayer.utils.Capabilities.prototype.constructor,constructor:Primetime.utils.Capabilities,supportsMediaSource:function(){var a="WebKitMediaSource"in window,b="MediaSource"in window;try{a?new WebKitMediaSource:b&&new MediaSource}catch(c){a=b=!1}return a||b},supportsVideo:function(){return!!document.createElement("video").canPlayType}})})();(function(){Primetime.utils.DiUtils={createDiInstance:function(a){var b=new dijon.System;b.mapValue("system",b);b.mapOutlet("system");b.mapValue("eventBus",new MediaPlayer.utils.EventBus);b.mapOutlet("eventBus");var c=new MediaPlayer.utils.Debug;b.mapValue("debug",c);b.mapOutlet("debug");b.injectInto(c);c.setup();a&&b.injectInto(a);return b}}})();AdobePSDK=function(){return{setSWFPath:function(a){Primetime.defaults.setSWFPath(a)},setAuthorizationTokenPath:function(a){Primetime.defaults.setAuthorizationTokenPath(a)},setAuthorizationTokenFilename:function(a){Primetime.defaults.setAuthorizationTokenFilename(a)},setAuthorizationTokenType:function(a){Primetime.defaults.setAuthorizationTokenType(a)},setDRMMetadataPath:function(a){Primetime.defaults.setDRMMetadataPath(a)},checkIfFlashIsAlive:function(){return Primetime.bindings.flash.isFlashAlive()},
isFlashFallbackSupported:function(a){return Primetime.BindingsFactory.isFlashFallbackSupported(a)}}}();(function(){AdobePSDK.FlashFallbackSupportedResult=function(a,b){Object.defineProperty(this,"supported",{get:function(){return a}});Object.defineProperty(this,"reason",{get:function(){return b}});return this};AdobePSDK.FlashFallbackNotSupportedReason={DEVICE_OS_NOT_SUPPORTED:0,FLASH_PLAYER_NOT_SUPPORTED:1,MEDIA_RESOURCE_NOT_SUPPORTED:2}})();AdobePSDK.JSInterface=function(){};AdobePSDK.JSInterface.prototype={delegate:null,setDelegate:function(a){this.delegate&&this.delegate===a||(this.delegate=a)},getDelegate:function(){return this.delegate}};(function(){AdobePSDK.ApplicationInformation=function(){Object.defineProperty(this,"publisherId",{get:function(){}});Object.defineProperty(this,"visitorId",{get:function(){}});return this};AdobePSDK.ApplicationInformation.prototype={constructor:AdobePSDK.ApplicationInformation}})();(function(){AdobePSDK.PlaybackMetrics=function(a){AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"readHead",{get:function(){return this.delegate?this.delegate.readHead:{video:0,audio:0}}});Object.defineProperty(this,"bufferLength",{get:function(){if(this.delegate)return this.delegate.bufferLength;var b=a.getCribbedMetrics();return void 0!==b.video?{video:b.video?b.video.bufferLengthValue?b.video.bufferLengthValue:0:0,audio:b.audio?b.audio.bufferLengthValue?b.audio.bufferLengthValue:0:
0}:{video:b.bufferLengthValue?b.bufferLengthValue:0,audio:b.bufferLengthValue?b.bufferLengthValue:0}}});Object.defineProperty(this,"bufferTime",{get:function(){return this.delegate?this.delegate.bufferTime:{video:0,audio:0}}});Object.defineProperty(this,"bitRate",{get:function(){if(this.delegate)return this.delegate.bitRate;var b=a.getCribbedMetrics();return void 0!==b.video?{video:b.video?b.video.bandwidthValue?b.video.bandwidthValue:0:0,audio:b.audio?b.audio.bandwidthValue?b.audio.bandwidthValue:
0:0}:{video:b.bandwidthValue?b.bandwidthValue:0,audio:b.bandwidthValue?b.bandwidthValue:0}}});Object.defineProperty(this,"perceivedBandwidth",{get:function(){return this.delegate?this.delegate.perceivedBandwidth:{video:0,audio:0}}});Object.defineProperty(this,"droppedFramesCount",{get:function(){if(this.delegate)return this.delegate.droppedFramesCount;var b=a.getCribbedMetrics();return void 0!==b.video?{video:b.video?b.video.droppedFramesValue?b.video.droppedFramesValue:0:0,audio:b.audio?b.audio.droppedFramesValue?
b.audio.droppedFramesValue:0:0}:{video:b.droppedFramesValue?b.droppedFramesValue:0,audio:b.droppedFramesValue?b.droppedFramesValue:0}}});Object.defineProperty(this,"playbackRate",{get:function(){return this.delegate?this.delegate.playbackRate:a.getRate()}});Object.defineProperty(this,"frameRate",{get:function(){return this.delegate?this.delegate.frameRate:a.getAdditionalPlaybackInformationMetrics().frameRate}});Object.defineProperty(this,"time",{get:function(){return this.delegate?this.delegate.time:
a._delegate.getCurrentTime()}});Object.defineProperty(this,"playbackRange",{get:function(){return this.delegate?this.delegate.playbackRange:a._delegate.getPlaybackRange()}});Object.defineProperty(this,"bufferedRange",{get:function(){return this.delegate?this.delegate.bufferedRange:a._delegate.getBufferedRange()}});Object.defineProperty(this,"seekableRange",{get:function(){return this.delegate?this.delegate.seekableRange:a._delegate.getSeekableRange()}});Object.defineProperty(this,"frontBufferedRange",
{get:function(){return this.delegate?this.delegate.frontBufferedRange:a._delegate.getBufferedRange()}});Object.defineProperty(this,"backBufferedRange",{get:function(){return this.delegate?this.delegate.backBufferedRange:a._delegate.getBufferedRange()}});return this};AdobePSDK.PlaybackMetrics.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.PlaybackMetrics,reset:function(){this.delegate&&this.delegate.reset()},update:function(){this.delegate&&this.delegate.update()},
setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createPlaybackMetricsDelegate(this))}})})();(function(){AdobePSDK.PSDKErrorCode={SUCCESS:0,INVALID_ARGUMENT:1,NULL_POINTER:2,ILLEGAL_STATE:3,INTERFACE_NOT_FOUND:4,CREATION_FAILED:5,UNSUPPORTED_OPERATION:6,DATA_NOT_AVAILABLE:7,SEEK_ERROR:8,UNSUPPORTED_FEATURE:9,RANGE_ERROR:10,CODEC_NOT_SUPPORTED:11,MEDIA_ERROR:12,NETWORK_ERROR:13,GENERIC_ERROR:14,INVALID_SEEK_TIME:15,AUDIO_TRACK_ERROR:16,ACCESS_FROM_DIFFERENT_THREAD_ERROR:17,ELEMENT_NOT_FOUND:18,NOT_IMPLEMENTED:19,PREROLL_DISABLED:20,PLAYBACK_NOT_AUTHORIZED:57,PLAYBACK_OPERATION_FAILED:200,
NATIVE_WARNING:201,AD_RESOLVER_FAILED:202,AD_MANIFEST_LOAD_FAILED:203,LAZY_AD_RESOLUTION_IN_PROGRESS:204}})();AdobePSDK.PSDKErrorCode.kECSuccess=0;AdobePSDK.PSDKErrorCode.kECInvalidArgument=1;AdobePSDK.PSDKErrorCode.kECNullPointer=2;AdobePSDK.PSDKErrorCode.kECIllegalState=3;AdobePSDK.PSDKErrorCode.kECInterfaceNotFound=4;AdobePSDK.PSDKErrorCode.kECCreationFailed=5;AdobePSDK.PSDKErrorCode.kECUnsupportedOperation=6;AdobePSDK.PSDKErrorCode.kECDataNotAvailable=7;AdobePSDK.PSDKErrorCode.kECSeekError=8;
AdobePSDK.PSDKErrorCode.kECUnsupportedFeature=9;AdobePSDK.PSDKErrorCode.kECRangeError=10;AdobePSDK.PSDKErrorCode.kECCodecNotSupported=11;AdobePSDK.PSDKErrorCode.kECMediaError=12;AdobePSDK.PSDKErrorCode.kECNetworkError=13;AdobePSDK.PSDKErrorCode.kECGenericError=14;AdobePSDK.PSDKErrorCode.kECInvalidSeekTime=15;AdobePSDK.PSDKErrorCode.kECAudioTrackError=16;AdobePSDK.PSDKErrorCode.kECAccessFromDifferentThreadError=17;AdobePSDK.PSDKErrorCode.kECElementNotFound=18;
AdobePSDK.PSDKErrorCode.kECNotImplemented=19;AdobePSDK.PSDKErrorCode.kECNotSupported=20;AdobePSDK.PSDKErrorCode.kECPlaybackOperationFailed=200;AdobePSDK.PSDKErrorCode.kECNativeWarning=201;AdobePSDK.PSDKErrorCode.kECAdResolverFailed=202;(function(){AdobePSDK.PSDKEventType={FIRST_EVENT:100,AD_BREAK_STARTED:101,AD_BREAK_COMPLETED:102,AD_BREAK_SKIPPED:103,AD_CLICK:104,AD_STARTED:105,AD_PROGRESS:106,AD_COMPLETED:107,BUFFERING_BEGIN:108,BUFFERING_END:109,DRM_METADATA_INFO_AVAILABLE:110,LOAD_INFORMATION_AVAILABLE:111,ITEM_CREATED:112,ITEM_UPDATED:113,CAPTIONS_UPDATED:114,AUDIO_UPDATED:115,PLAYBACK_RANGE_UPDATED:116,MASTER_UPDATED:117,STATUS_CHANGED:118,RATE_SELECTED:119,RATE_PLAYING:120,PROFILE_CHANGED:121,RESERVATION_REACHED:122,SEEK_POSITION_ADJUSTED:123,
SEEK_BEGIN:124,SEEK_END:125,SIZE_AVAILABLE:126,TIME_CHANGED:127,TIMED_METADATA_AVAILABLE:128,TIMELINE_UPDATED:129,PLAY_START:130,OPERATION_FAILED:131,TIMED_METADATA_IN_BACKGROUND:132,TIMED_EVENT:133,BUFFER_PREPARED:134,AD_RESOLUTION_COMPLETE:135,LAST_EVENT:135,FIRST_USER_EVENT:1E4}})();(function(){AdobePSDK.PSDKEventTargetInterface=function(){Object.defineProperty(this,"eventDispatcher",{get:function(){}});return this};AdobePSDK.PSDKEventTargetInterface.prototype={constructor:AdobePSDK.PSDKEventTargetInterface}})();(function(){var a=function(a){a._view&&a._view.getDelegate()&&(a._view.getDelegate().hideNativeView(),a._view.getDelegate().reset&&a._view.getDelegate().reset(),a._view.setDelegate(null));a._textFormat&&a._textFormat.setDelegate(null);a._abrControlParameters&&a._abrControlParameters.setDelegate(null);a._bufferControlParameters&&a._bufferControlParameters.setDelegate(null)};AdobePSDK.MediaPlayer=function(){this._versionMax=2;this._versionMicro=this._versionMin=4;this._versionBuildNumber=1502;this._status=
this.PLAYER_STATUS_IDLE;this._eventDispatcher=new AdobePSDK.PSDKEventDispatcher(this);this._ccvisibility=AdobePSDK.MediaPlayer.VISIBLE;this._volume=AdobePSDK.MediaPlayer.DEFAULT_VOLUME;this._textFormat=new AdobePSDK.TextFormat(AdobePSDK.TextFormat.FONT_DEFAULT,AdobePSDK.TextFormat.WHITE,AdobePSDK.TextFormat.BLACK,AdobePSDK.TextFormat.FONT_EDGE_DEFAULT,AdobePSDK.TextFormat.BLACK,AdobePSDK.TextFormat.COLOR_DEFAULT,AdobePSDK.TextFormat.SIZE_DEFAULT,100,0,100);this._nativePlayer=null;this._view=void 0;
this._viewDelegate=this._drmManager=this._bufferControlParameters=this._abrControlParameters=null;var a=this;Object.defineProperty(this,"playbackRange",{get:function(){return this._nativePlayer?this._nativePlayer.getPlaybackRange():AdobePSDK.PSDKErrorCode.kECIllegalState}});Object.defineProperty(this,"seekableRange",{get:function(){return this._nativePlayer?this._nativePlayer.getSeekableRange():AdobePSDK.PSDKErrorCode.kECIllegalState}});Object.defineProperty(this,"currentTime",{get:function(){return this._nativePlayer?
this._nativePlayer.getCurrentTime():this.status!==this.PLAYER_STATUS_RELEASED?0:AdobePSDK.PSDKErrorCode.kECIllegalState}});Object.defineProperty(this,"localTime",{get:function(){return this._nativePlayer?this._nativePlayer.getLocalTime():AdobePSDK.PSDKErrorCode.kECIllegalState}});Object.defineProperty(this,"bufferedRange",{get:function(){return this._nativePlayer?this._nativePlayer.getBufferedRange():AdobePSDK.PSDKErrorCode.kECIllegalState}});Object.defineProperty(this,"currentItem",{get:function(){return this._nativePlayer?
this._nativePlayer.getCurrentItem():AdobePSDK.PSDKErrorCode.kECIllegalState}});Object.defineProperty(this,"drmManager",{get:function(){this._nativePlayer||(this._nativePlayer=Primetime.BindingsFactory.createMediaPlayer(this,AdobePSDK.MediaResourceType.DASH));this._nativePlayer&&(this._drmManager=this._nativePlayer.getDRMManager());return this._drmManager}});Object.defineProperty(this,"playbackMetrics",{get:function(){return a.getPlaybackMetrics()}});Object.defineProperty(this,"timeline",{get:function(){return this._nativePlayer?
this._nativePlayer.getTimeline():AdobePSDK.PSDKErrorCode.kECIllegalState}});Object.defineProperty(this,"status",{get:function(){this._nativePlayer&&(this._status=this._nativePlayer.getStatus());return this._status}});Object.defineProperty(this,"currentTimeUpdateInterval",{get:function(){return this._nativePlayer?this._nativePlayer.getCurrentTimeUpdateInterval():AdobePSDK.PSDKErrorCode.kECIllegalState},set:function(a){return this._nativePlayer?this._nativePlayer.setCurrentTimeUpdateInterval(a):AdobePSDK.PSDKErrorCode.kECIllegalState}});
Object.defineProperty(this,"volume",{get:function(){return this.status!==this.PLAYER_STATUS_RELEASED&&this.status!==this.PLAYER_STATUS_ERROR?this._nativePlayer?this._nativePlayer.getVolume():this._volume:AdobePSDK.PSDKErrorCode.kECIllegalState},set:function(a){return this.status!==this.PLAYER_STATUS_RELEASED&&this.status!==this.PLAYER_STATUS_ERROR?!isNaN(a)&&0<=a&&1>=a?(this._volume=a,this._nativePlayer?this._nativePlayer.setVolume(a):AdobePSDK.PSDKErrorCode.kECSuccess):AdobePSDK.PSDKErrorCode.kECInvalidArgument:
AdobePSDK.PSDKErrorCode.kECIllegalState}});Object.defineProperty(this,"abrControlParameters",{get:function(){if(this.status!==this.PLAYER_STATUS_RELEASED&&this.status!==this.PLAYER_STATUS_ERROR){if(this._nativePlayer){var a=this._nativePlayer.getABRControlParameters();if(a)return a}return this._abrControlParameters?this._abrControlParameters:Primetime.defaults.getABRControlParameters()}return AdobePSDK.PSDKErrorCode.kECIllegalState},set:function(a){var c=AdobePSDK.PSDKErrorCode.kECSuccess;this.status!==
this.PLAYER_STATUS_RELEASED?"undefined"!==typeof a&&null!==a?this._nativePlayer&&(this._abrControlParameters=null,c=this._nativePlayer.getABRControlParametersDelegate(a),c=this._nativePlayer.setABRControlParameters(c)):c=AdobePSDK.PSDKErrorCode.kECInvalidArgument:(b.call(this,"IllegalStateException"),c=AdobePSDK.PSDKErrorCode.kECIllegalState);this._abrControlParameters=c===AdobePSDK.PSDKErrorCode.kECSuccess?a:null;return c}});Object.defineProperty(this,"bufferControlParameters",{get:function(){return this.status!==
this.PLAYER_STATUS_RELEASED&&this.status!==this.PLAYER_STATUS_ERROR?(!this._bufferControlParameters&&this._nativePlayer&&(this._bufferControlParameters=this._nativePlayer.getBufferControlParameters()),this._bufferControlParameters?this._bufferControlParameters:Primetime.defaults.getBufferControlParameters()):AdobePSDK.PSDKErrorCode.kECIllegalState},set:function(a){var c=AdobePSDK.PSDKErrorCode.kECSuccess;this.status!==this.PLAYER_STATUS_RELEASED?"undefined"!==typeof a&&null!==a?this._nativePlayer&&
(this._bufferControlParameters=null,c=this._nativePlayer.getBufferControlParametersDelegate(a),c=this._nativePlayer.setBufferControlParameters(c)):c=AdobePSDK.PSDKErrorCode.kECInvalidArgument:(b.call(this,"IllegalStateException"),c=AdobePSDK.PSDKErrorCode.kECIllegalState);c===AdobePSDK.PSDKErrorCode.kECSuccess&&(this._bufferControlParameters=a);if(c!=AdobePSDK.PSDKErrorCode.kECSuccess){this._bufferControlParameters=null;switch(c){case AdobePSDK.PSDKErrorCode.kECIllegalState:a="kECIllegalState";break;
default:a="kECInvalidArgument"}throw a;}return c}});Object.defineProperty(this,"ccVisibility",{get:function(){return this.status!==this.PLAYER_STATUS_RELEASED&&this.status!==this.PLAYER_STATUS_ERROR?this._nativePlayer?this._nativePlayer.getCCVisibility():this._ccvisibility:AdobePSDK.PSDKErrorCode.kECIllegalState},set:function(a){return this.status!==this.PLAYER_STATUS_RELEASED&&this.status!==this.PLAYER_STATUS_ERROR&&(this._ccvisibility=a,this._nativePlayer)?this._nativePlayer.setCCVisibility(this._ccvisibility):
AdobePSDK.PSDKErrorCode.kECIllegalState}});Object.defineProperty(this,"preBuffering",{get:function(){return this.status!==this.PLAYER_STATUS_RELEASED&&this.status!==this.PLAYER_STATUS_ERROR&&this._nativePlayer?this._nativePlayer.getPreBuffering():AdobePSDK.PSDKErrorCode.kECIllegalState},set:function(a){return this.status!==this.PLAYER_STATUS_RELEASED&&this.status!==this.PLAYER_STATUS_ERROR&&this._nativePlayer?this._nativePlayer.setPreBuffering(a):AdobePSDK.PSDKErrorCode.kECIllegalState}});Object.defineProperty(this,
"abrSwitchBasedOnPDT",{get:function(){return this.status!==this.PLAYER_STATUS_RELEASED&&this.status!==this.PLAYER_STATUS_ERROR&&this._nativePlayer?this._nativePlayer.getQualitySwitchBasedOnPDT():AdobePSDK.PSDKErrorCode.kECIllegalState},set:function(a){return this.status!==this.PLAYER_STATUS_RELEASED&&this.status!==this.PLAYER_STATUS_ERROR&&this._nativePlayer?this._nativePlayer.setQualitySwitchBasedOnPDT(a):AdobePSDK.PSDKErrorCode.kECIllegalState}});Object.defineProperty(this,"ccStyle",{get:function(){return this.status!==
this.PLAYER_STATUS_RELEASED&&this.status!==this.PLAYER_STATUS_ERROR?this._textFormat:AdobePSDK.PSDKErrorCode.kECIllegalState},set:function(a){if(this.status!==this.PLAYER_STATUS_RELEASED&&"undefined"!==typeof a&&null!==a){if(this._textFormat=a,this._nativePlayer)return a=this._nativePlayer.getTextFormatDelegate(this._textFormat),this._nativePlayer.setCCStyle(a)}else return b.call(this,"IllegalStateException"),AdobePSDK.PSDKErrorCode.kECIllegalState}});Object.defineProperty(this,"rate",{get:function(){if(this.status!==
this.PLAYER_STATUS_RELEASED&&this.status!==this.PLAYER_STATUS_ERROR){if(this._nativePlayer)return this._nativePlayer.getRate()}else return AdobePSDK.PSDKErrorCode.kECIllegalState},set:function(a){return this._nativePlayer?this._nativePlayer.setRate(a):AdobePSDK.PSDKErrorCode.kECIllegalState}});Object.defineProperty(this,"view",{get:function(){return this.status!==this.PLAYER_STATUS_RELEASED&&this.status!==this.PLAYER_STATUS_ERROR?this._view:AdobePSDK.PSDKErrorCode.kECIllegalState},set:function(a){return this.status!==
this.PLAYER_STATUS_RELEASED&&this.status!==this.PLAYER_STATUS_ERROR?"undefined"!==typeof a&&null!==a?(this._view=a,this._nativePlayer&&(a=this._nativePlayer.getViewDelegate(this._view),this._nativePlayer.setMediaPlayerView(a)),AdobePSDK.PSDKErrorCode.kECSuccess):AdobePSDK.PSDKErrorCode.kECNullPointer:AdobePSDK.PSDKErrorCode.kECIllegalState}});Object.defineProperty(this,"context",{get:function(){return this._nativePlayer?this._nativePlayer.getContext():AdobePSDK.PSDKErrorCode.kECIllegalState},set:function(a){return this._nativePlayer?
this._nativePlayer.setContext(a):AdobePSDK.PSDKErrorCode.kECIllegalState}});Object.defineProperty(this,"eventDispatcher",{get:function(){return this._nativePlayer?this._nativePlayer.getEventDispatcher():AdobePSDK.PSDKErrorCode.kECIllegalState}});this.getAdditionalPlaybackInformationMetrics=function(){return this._nativePlayer?"undefined"===typeof this._nativePlayer.getAdditionalPlaybackInformationMetrics?null:this._nativePlayer.getAdditionalPlaybackInformationMetrics():AdobePSDK.PSDKErrorCode.kECIllegalState};
return this};AdobePSDK.MediaPlayerStatus={IDLE:0,INITIALIZING:1,INITIALIZED:2,PREPARING:3,PREPARED:4,PLAYING:5,PAUSED:6,SEEKING:7,COMPLETE:8,ERROR:9,RELEASED:10,SUSPENDED:11};AdobePSDK.MediaPlayerStatus.COMPLETED=8;AdobePSDK.MediaPlayer.VISIBLE=0;AdobePSDK.MediaPlayer.INVISIBLE=1;AdobePSDK.MediaPlayer.VISIBILITY={VISIBLE:AdobePSDK.MediaPlayer.VISIBLE,INVISIBLE:AdobePSDK.MediaPlayer.INVISIBLE};AdobePSDK.MediaPlayer.LogLevel={LOG_LEVEL_DEBUG:"DEBUG",LOG_LEVEL_INFO:"INFO",LOG_LEVEL_WARN:"WARN",LOG_LEVEL_ERROR:"ERROR"};
AdobePSDK.MediaPlayer.Events={AdBreakStartedEvent:101,AdBreakCompletedEvent:102,AdBreakSkippedEvent:103,AdClickedEvent:104,AdStartedEvent:105,AdProgressEvent:106,AdCompletedEvent:107,BufferingBeginEvent:108,BufferingEndEvent:109,DRMMetadataInfoAvailableEvent:110,LoadInformationEvent:111,ItemCreatedEvent:112,ItemUpdatedEvent:113,CaptionsUpdatedEvent:114,AudioUpdatedEvent:115,PlaybackRangeUpdatedEvent:116,MainManifestUpdatedEvent:117,StatusChangeEvent:118,PlaybackRateSelectedEvent:119,PlaybackRatePlayingEvent:120,
ProfileChangeEvent:121,ReservationReachedEvent:122,SeekPositionAdjustedEvent:123,SeekBeginEvent:124,SeekEndEvent:125,SizeAvailableEvent:126,TimeChangeEvent:127,TimedMetadataEvent:128,TimelineUpdatedEvent:129,PlayStartEvent:130,OperationFailedEvent:131,TimedMetadataInBackgroundEvent:132,TimedEvent:133,BufferPreparedEvent:134,PSDKLastEvent:134,PSDKFirstUserEvent:1E4};AdobePSDK.MediaPlayer.LIVE_POINT=-2;AdobePSDK.MediaPlayer.DEFAULT_VOLUME=1;var b=function(a){console.log("AdobePSDK.MediaPlayer error: "+
a)};AdobePSDK.MediaPlayer.prototype={constructor:AdobePSDK.MediaPlayer,prepareToPlay:function(a){return this._nativePlayer?this._nativePlayer.prepareToPlay(a):AdobePSDK.PSDKErrorCode.kECIllegalState},pause:function(){return this._nativePlayer?this._nativePlayer.pause():AdobePSDK.PSDKErrorCode.kECIllegalState},play:function(){return this._nativePlayer?this._nativePlayer.play():AdobePSDK.PSDKErrorCode.kECIllegalState},seek:function(a){if(this._nativePlayer)return this._nativePlayer.seek(a);b.call(this,
"IllegalStateException");return AdobePSDK.PSDKErrorCode.kECIllegalState},seekToLocal:function(a){if(this._nativePlayer)return this._nativePlayer.seekToLocal(a);b.call(this,"IllegalStateException");return AdobePSDK.PSDKErrorCode.kECIllegalState},reset:function(){if(this.status!==this.PLAYER_STATUS_RELEASED){Primetime.BindingsFactory.setDefaultAPIBindings();if(this._nativePlayer)this.status===this.PLAYER_STATUS_PLAYING&&this._nativePlayer.pause(),a(this),this._ccvisibility=AdobePSDK.MediaPlayer.VISIBLE,
this._nativePlayer.reset();else{a(this);this._ccvisibility=AdobePSDK.MediaPlayer.VISIBLE;var b=this.PLAYER_STATUS_IDLE;this._status=b;this._eventDispatcher.dispatchEvent(new AdobePSDK.MediaPlayerStatusChangeEvent(b,this))}return AdobePSDK.PSDKErrorCode.kECSuccess}return AdobePSDK.PSDKErrorCode.kECIllegalState},release:function(){if(this._nativePlayer)this._nativePlayer.release();else{this.reset();var a=this.PLAYER_STATUS_RELEASED;this._status=a;this._eventDispatcher.dispatchEvent(new AdobePSDK.MediaPlayerStatusChangeEvent(a,
this))}return AdobePSDK.PSDKErrorCode.kECSuccess},suspend:function(){return this._nativePlayer?this._nativePlayer.suspend():AdobePSDK.PSDKErrorCode.kECIllegalState},restore:function(){return this._nativePlayer?this._nativePlayer.restore():AdobePSDK.PSDKErrorCode.kECIllegalState},_resetDelegates:function(){a(this)},_replaceCurrentResource:function(a,b){if(this._nativePlayer){this.view=this._view;this._drmManager&&this._nativePlayer.setDRMManager(this._drmManager);var e=this._nativePlayer.getMediaResourceDelegate(a),
f=b;"undefined"!==typeof b&&null!==b&&(f=this._nativePlayer.getConfigDelegate(b));this._abrControlParameters&&(this.abrControlParameters=this._abrControlParameters);this._bufferControlParameters&&(this.bufferControlParameters=this._bufferControlParameters);this._nativePlayer.replaceCurrentResource(e,f);this.ccStyle=this._textFormat;this.ccVisibility=this._ccvisibility;this.volume=this._volume}},_preprocessForThumbnailScrubbing:function(a,b){var e=new Primetime.di.HlsContext,f=Primetime.utils.DiUtils.createDiInstance(e),
g=this,h=f.getObject("urlUtils");h.fetchAndParse({url:a.url,baseUrl:a.url,type:"manifest"},{},b.networkConfiguration,{onComplete:function(e,n){var k=f.getObject("parser").parseVariant(e,n),m;k&&k.trickPlayRepresentations&&k.trickPlayRepresentations.length?m=k.trickPlayRepresentations[0]:k&&k.representations&&k.representations.length&&(m=k.representations[0]);m&&(k=h.getFullUrl(m.isMuxed?m.muxed.uri:m.video.uri,n),a.url=k);g._replaceCurrentResource(a,b)},onError:function(a,b,c,d,e){d=f.getObject("errHandler");
"contentMismatch"===e?d.contentTypeError(null,"manifest"):d.downloadError(b,a,c)}},{})},replaceCurrentResource:function(a,b){if(this.status===this.PLAYER_STATUS_IDLE&&void 0!==a&&a instanceof AdobePSDK.MediaResource){var e=a.type;return(this._nativePlayer=Primetime.BindingsFactory.createMediaPlayer(this,a.type,!1,a,b))?(b&&b.thumbnailScrubber&&e===AdobePSDK.MediaResourceType.HLS?this._preprocessForThumbnailScrubbing(a,b):this._replaceCurrentResource(a,b),AdobePSDK.PSDKErrorCode.kECSuccess):AdobePSDK.PSDKErrorCode.kECGenericError}return AdobePSDK.PSDKErrorCode.kECIllegalState},
replaceCurrentItem:function(a){return this._nativePlayer?this._nativePlayer.replaceCurrentItem(a):AdobePSDK.PSDKErrorCode.kECIllegalState},getPlaybackMetrics:function(){return this._nativePlayer?this._nativePlayer.getPlaybackMetrics():AdobePSDK.PSDKErrorCode.kECIllegalState},getNotificationHistory:function(){return this._nativePlayer&&this._nativePlayer.getNotificationHistory?this._nativePlayer.getNotificationHistory():AdobePSDK.PSDKErrorCode.kECNotImplemented},addEventListener:function(a,b){return a&&
b&&(this._eventDispatcher.addListener(a,b),this._nativePlayer)?this._nativePlayer.addEventListener(a,b):AdobePSDK.PSDKErrorCode.kECInvalidArgument},removeEventListener:function(a,b){return a&&b&&(this._eventDispatcher.removeListener(a,b),this._nativePlayer)?this._nativePlayer.removeEventListener(a,b):AdobePSDK.PSDKErrorCode.kECInvalidArgument},notifyClick:function(){this._nativePlayer&&this._nativePlayer.notifyClick()},getVersion:function(){return this._versionMax+"."+this._versionMin+"."+this._versionMicro+
"."+this._versionBuildNumber},getLogLevel:function(){if(this._nativePlayer&&this._nativePlayer._nativePlayer)return this._nativePlayer._nativePlayer.debug.getLogLevel()},setLogLevel:function(a){this._nativePlayer&&this._nativePlayer._nativePlayer&&this._nativePlayer._nativePlayer.debug.setLogLevel(a)},getCustomAdView:function(){if(this._nativePlayer&&this._nativePlayer._nativePlayer&&this._nativePlayer._nativePlayer._mediaPlayerClient&&this._nativePlayer._nativePlayer._mediaPlayerClient._customAdHandlerClient)return this._nativePlayer._nativePlayer._mediaPlayerClient._customAdHandlerClient.getCustomAdView();
console.log("Custom Ad Handler Client is null");return null},setCustomAdTimeout:function(a){this._nativePlayer&&this._nativePlayer._nativePlayer&&this._nativePlayer._nativePlayer._mediaPlayerClient&&this._nativePlayer._nativePlayer._mediaPlayerClient._customAdHandlerClient?this._nativePlayer._nativePlayer._mediaPlayerClient._customAdHandlerClient.setCustomAdTimeout(a):console.log("Custom Ad Handler Client is null")},dispatchEvent:function(a){this._nativePlayer&&this._nativePlayer.dispatchEvent(a)},
prepareBuffer:function(){this._nativePlayer&&this._nativePlayer.prepareBuffer()},registerCurrentItemInBackground:function(a){this._nativePlayer&&this._nativePlayer.registerCurrentItemInBackground(a)},unregisterCurrentBackgroundItem:function(){this._nativePlayer&&this._nativePlayer.unregisterCurrentBackgroundItem()},PLAYER_STATUS_IDLE:AdobePSDK.MediaPlayerStatus.IDLE,PLAYER_STATUS_INITIALIZING:AdobePSDK.MediaPlayerStatus.INITIALIZING,PLAYER_STATUS_INITIALIZED:AdobePSDK.MediaPlayerStatus.INITIALIZED,
PLAYER_STATUS_PREPARING:AdobePSDK.MediaPlayerStatus.PREPARING,PLAYER_STATUS_PREPARED:AdobePSDK.MediaPlayerStatus.PREPARED,PLAYER_STATUS_PLAYING:AdobePSDK.MediaPlayerStatus.PLAYING,PLAYER_STATUS_PAUSED:AdobePSDK.MediaPlayerStatus.PAUSED,PLAYER_STATUS_SEEKING:AdobePSDK.MediaPlayerStatus.SEEKING,PLAYER_STATUS_COMPLETE:AdobePSDK.MediaPlayerStatus.COMPLETE,PLAYER_STATUS_ERROR:AdobePSDK.MediaPlayerStatus.ERROR,PLAYER_STATUS_RELEASED:AdobePSDK.MediaPlayerStatus.RELEASED,VISIBLE:AdobePSDK.MediaPlayer.VISIBLE,
INVISIBLE:AdobePSDK.MediaPlayer.INVISIBLE,LIVE_POINT:AdobePSDK.MediaPlayer.LIVE_POINT,LOG_LEVEL_DEBUG:AdobePSDK.MediaPlayer.LogLevel.LOG_LEVEL_DEBUG,LOG_LEVEL_INFO:AdobePSDK.MediaPlayer.LogLevel.LOG_LEVEL_INFO,LOG_LEVEL_WARN:AdobePSDK.MediaPlayer.LogLevel.LOG_LEVEL_WARN,LOG_LEVEL_ERROR:AdobePSDK.MediaPlayer.LogLevel.LOG_LEVEL_ERROR,INVALID_TIME:-1};AdobePSDK.MediaPlayer.DEFAULT_CC_VISIBILITY=AdobePSDK.MediaPlayer.VISIBILITY.INVISIBLE;AdobePSDK.MediaPlayer.INVALID_STATE=-1})();(function(){var a=function(a,c,d){if("undefined"===typeof c||null===c)c=document.createElement("DIV"),c.id="psdk-target";a._target=c;a._div=c;a._fullScreenDiv=d;a._fullScreenDiv?Primetime.DOMHelper.addFullscreenCSS(a._fullScreenDiv):Primetime.DOMHelper.addFullscreenCSS(a._div)};AdobePSDK.MediaPlayerView=function(b,c){AdobePSDK.JSInterface.call(this);a(this,b,c);this._target?(this._x=this._target.offsetLeft,this._y=this._target.offsetTop,this._width=this._target.offsetWidth,this._height=this._target.offsetHeight):
this._height=this._width=this._y=this._x=void 0;this._videoControlsTarget=this._depth=void 0;this._useDefaultResizeHandler=!0;var d=this;Object.defineProperty(this,"x",{get:function(){return d.getX()},set:function(a){this.delegate&&(this.delegate.x=a)}});Object.defineProperty(this,"y",{get:function(){return d.getY()},set:function(a){this.delegate&&(this.delegate.y=a)}});Object.defineProperty(this,"width",{get:function(){return d.getWidth()},set:function(a){this.delegate&&(this.delegate.width=a)}});
Object.defineProperty(this,"height",{get:function(){return d.getHeight()},set:function(a){this.delegate&&(this.delegate.height=a)}});Object.defineProperty(this,"depth",{get:function(){return d.getDepth()}});Object.defineProperty(this,"scalePolicy",{get:function(){if(this.delegate)return this.delegate.scalePolicy},set:function(a){this.delegate&&(this.delegate.scalePolicy=a)}});return this};AdobePSDK.MediaPlayerView.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.MediaPlayerView,
setupDelegate:function(){if(!this.delegate){var a=Primetime.DelegateFactory.createMediaPlayerViewDelegate(this);this.setDelegate(a)}},attachVideoControls:function(a){"undefined"!==typeof a&&null!==a&&this._div.appendChild(a);this._videoControlsTarget=a;this.delegate&&this.delegate.attachVideoControls&&this.delegate.attachVideoControls(a)},removeVideoControls:function(){this._videoControlsTarget&&(this._videoControlsTarget=null);this.delegate&&this.delegate.removeVideoControls&&this.delegate.removeVideoControls()},
getX:function(){return this.delegate?this.delegate.getX():this._x},getY:function(){return this.delegate?this.delegate.getY():this._y},getHeight:function(){return this.delegate?this.delegate.getHeight():this._height},getWidth:function(){return this.delegate?this.delegate.getWidth():this._width},getDepth:function(){return this.delegate?this.delegate.getDepth():this._depth},setSize:function(a,c){this._width=a;this._height=c;this.delegate&&this.delegate.setSize(a,c)},setPos:function(a,c){this._x=a;this._y=
c;this.delegate&&this.delegate.setPos(a,c)},setDepth:function(a){this._depth=a;this.delegate&&this.delegate.setDepth(a)},useDefaultResizeHandler:function(a){this._useDefaultResizeHandler=a;this.delegate&&this.delegate.useDefaultResizeHandler&&this.delegate.useDefaultResizeHandler(this._useDefaultResizeHandler)},makeFullScreen:function(){this.delegate&&this.delegate.makeFullScreen&&this.delegate.makeFullScreen()},exitFullScreen:function(){this.delegate&&this.delegate.exitFullScreen&&this.delegate.exitFullScreen()},
isFullScreen:function(){if(this.delegate&&this.delegate.isFullScreen)return this.delegate.isFullScreen()},create:function(a){if(this.delegate)return this.delegate.create(a)},getNativeSurfaceType:function(){if(this.delegate)return this.delegate.getNativeSurfaceType()},markForRefresh:function(){if(this.delegate)return this.delegate.markForRefresh()},hideBackgroundImage:function(){this.delegate&&this.delegate.hideBackgroundImage&&this.delegate.hideBackgroundImage()},setDelegate:function(a){this.delegate&&
this.delegate===a||(AdobePSDK.JSInterface.prototype.setDelegate.call(this,a),this.delegate&&(this.delegate.useDefaultResizeHandler&&this.delegate.useDefaultResizeHandler(this._useDefaultResizeHandler),this.delegate.setTarget&&this.delegate.setTarget(this._div,this._fullScreenDiv),void 0!==this._x&&void 0!==this._y&&this.delegate.setPos(this._x,this._y),void 0!==this._width&&void 0!==this._height&&this.delegate.setSize(this._width,this._height),void 0!==this._depth&&this.delegate.setDepth(this._depth)))},
getDelegate:function(){return AdobePSDK.JSInterface.prototype.getDelegate.call(this)}})})();(function(){AdobePSDK.MediaResource=function(a,b,c,d){AdobePSDK.JSInterface.call(this);var e=a,f=b,g=c,h=d;Object.defineProperty(this,"url",{get:function(){return this.delegate?this.delegate.url:e},set:function(a){e=a}});Object.defineProperty(this,"type",{get:function(){return this.delegate?this.delegate.type:f},set:function(a){f=a}});Object.defineProperty(this,"metadata",{get:function(){return this.delegate?this.delegate.metadata:g},set:function(a){g=a}});Object.defineProperty(this,"forceFlash",
{get:function(){return h},set:function(a){h=a}});Object.defineProperty(this,"isValid",{get:function(){if(this.delegate)return this.delegate.isValid}});return this};AdobePSDK.MediaResourceIntent={LINEAR_PLAYBACK:0,CUSTOM_LINEAR_PLAYBACK:1,NON_LINEAR_PLAYBACK:2,EXTERNAL:3};AdobePSDK.MediaResource.Intent=AdobePSDK.MediaResourceIntent;AdobePSDK.MediaResource.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.MediaResource,equals:function(a){return this.delegate?this.delegate.equals(a):
this.url===a.url},toString:function(){return"URL: "+this.url+"\nTYPE: "+this.type},setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createMediaResourceDelegate(this))}})})();(function(){AdobePSDK.MediaResourceType={HDS:0,HLS:1,DASH:2,CUSTOM:3,UNKNOWN:4,ISOBMFF:5}})();(function(){AdobePSDK.Metadata=function(){this._metadatas={};this._values={};this._objects={};this._byteArrays={};AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"isEmpty",{get:function(){return this.delegate&&this.delegate.isEmpty?this.delegate.isEmpty:0===Object.keys(this._values).length+Object.keys(this._metadatas).length+Object.keys(this._objects).length+Object.keys(this._byteArrays).length}});Object.defineProperty(this,"keySet",{get:function(){return this.delegate&&this.delegate.keySet?
this.delegate.keySet:[].concat(Object.keys(this._values),Object.keys(this._metadatas),Object.keys(this._objects),Object.keys(this._byteArrays))}});return this};AdobePSDK.Metadata.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.Metadata,containsKey:function(a){return this.delegate&&this.delegate.containsKey?this.delegate.containsKey(a):void 0!==this._metadatas[a]||void 0!==this._values[a]||void 0!==this._objects[a]||void 0!==this._byteArrays[a]},getValue:function(a){return this.delegate&&
this.delegate.getValue?this.delegate.getValue(a):this._values[a]},setValue:function(a,b){this._values[a]=b;this.delegate&&this.delegate.setValue&&this.delegate.setValue(a,b)},getObject:function(a){return this.delegate&&this.delegate.getObject?this.delegate.getObject(a):this._objects[a]},setObject:function(a,b){this._objects[a]=b;this.delegate&&this.delegate.setObject&&this.delegate.setObject(a,b)},getByteArray:function(a){return this.delegate&&this.delegate.getByteArray?this.delegate.getByteArray(a):
this._byteArrays[a]},setByteArray:function(a,b){this._byteArrays[a]=b;this.delegate&&this.delegate.setByteArray&&this.delegate.setByteArray(a,b)},getMetadata:function(a){return this.delegate&&this.delegate.getMetadata?this.delegate.getMetadata(a):this._metadatas[a]},setMetadata:function(a,b){this._metadatas[a]=b;this.delegate&&this.delegate.setMetadata&&this.delegate.setMetadata(a,b)},clone:function(){if(this.delegate)return this.delegate.clone()},setDelegate:function(a){AdobePSDK.JSInterface.prototype.setDelegate.call(this,
a);var b;if(this.delegate){if(this._metadatas&&this.delegate.setMetadata)for(b in this._metadatas)this.delegate.setMetadata(b,this._metadatas[b]);if(this._values&&this.delegate.setValue)for(b in this._values)this.delegate.setValue(b,this._values[b]);if(this._objects&&this.delegate.setObject)for(b in this._objects)this.delegate.setObject(b,this._objects[b]);if(this._byteArrays&&this.delegate.setByteArray)for(b in this._byteArrays)this.delegate.setByteArray(b,this._byteArrays[b])}},setupDelegate:function(){if(!this.delegate){var a=
Primetime.DelegateFactory.createMetadataDelegate(this);this.setDelegate(a)}}})})();(function(){AdobePSDK.MetadataKeys={ADVERTISING_METADATA:"advertisingMetadata",AUDITUDE_METADATA_KEY:"auditude_metadata",JSON_METADATA_KEY:"json_metadata",CUSTOM_RANGE_METADATA_KEY:"custom_range_metadata",SIGNALING_MODE:"signalingMode",METADATA_KEY_TYPE:"type",AUDITUDE_TRACKER_FOR_SERVER_ADS:"AuditudeTrackerForServerAds",TEST_RESOLVER:"TestResolver",MANIFEST_CUES:"ManifestCues",AUDITUDE_TIMELINE_PARAMETERS:"auditudetimeline",AUDITUDE_TL_PARAMS_FROM_CUES:"timeline",METADATA_KEY_ADJUST_SEEK_ENABLED:"AdjustSeekenabled",
AD_BREAK_AS_WATCHED:"AdBreakWatchedPolicy",SCTE35_OBJECT:"SCTE35Object",NETWORK_CONFIGURATION_KEY:"network_configuration",VIDEO_ANALYTICS_METADATA_KEY:"video_analytics_metadata"}})();(function(){AdobePSDK.MediaPlayerItem=function(a,b,c){AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"resource",{get:function(){return this.delegate?this.delegate.resource:b}});Object.defineProperty(this,"resourceId",{get:function(){if(this.delegate)return this.delegate.resourceId}});Object.defineProperty(this,"isLive",{get:function(){return this.delegate?this.delegate.isLive:c?c.isLive():!1}});Object.defineProperty(this,"hasAlternateAudio",{get:function(){if(this.delegate)return this.delegate.hasAlternateAudio;
var a=this.audioTracks;return a&&1<a.length?!0:!1}});Object.defineProperty(this,"audioTracks",{get:function(){if(this.delegate)return this.delegate.audioTracks;if(c)return c.getAudioTracks()}});Object.defineProperty(this,"selectedAudioTrack",{get:function(){if(this.delegate)return this.delegate.selectedAudioTrack;if(c)return c.getSelectedAudioTrack()}});Object.defineProperty(this,"hasClosedCaptions",{get:function(){if(this.delegate)return this.delegate.hasClosedCaptions;var a=this.closedCaptionsTracks;
return a&&0<a.length?!0:!1}});Object.defineProperty(this,"closedCaptionsTracks",{get:function(){if(this.delegate)return this.delegate.closedCaptionsTracks;if(c)return c.getClosedCaptionsTracks()},set:function(a){if(this.delegate){var b=[],f;for(f in a)f.setupDelegate(),b.push(f.getDelegate());this.delegate.closedCaptionsTracks=b}else c&&"function"===typeof c.setClosedCaptionsTracks&&c.setClosedCaptionsTracks(a)}});Object.defineProperty(this,"selectedClosedCaptionsTrack",{get:function(){if(this.delegate)return this.delegate.selectedClosedCaptionsTrack;
if(c)return c.getSelectedClosedCaptionsTrack()}});Object.defineProperty(this,"hasTimedMetadata",{get:function(){return this.delegate?this.delegate.hasTimedMetadata:c.getHasTimedMetadata()}});Object.defineProperty(this,"timedMetadata",{get:function(){return this.delegate?this.delegate.timedMetadata:c.getTimedMetadata()}});Object.defineProperty(this,"isDynamic",{get:function(){return this.delegate?this.delegate.isDynamic:c?c.isDynamic():!1}});Object.defineProperty(this,"isProtected",{get:function(){if(this.delegate)return this.delegate.isProtected;
if(c)return c.isProtected()}});Object.defineProperty(this,"drmMetadataInfos",{get:function(){if(this.delegate)return this.delegate.drmMetadataInfos;if(c)return c.getDRMMetadataInfos()}});Object.defineProperty(this,"profiles",{get:function(){if(this.delegate)return this.delegate.profiles;if(c)return c.getProfiles()}});Object.defineProperty(this,"selectedProfile",{get:function(){if(this.delegate)return this.delegate.selectedProfile;if(c)return c.getSelectedProfile()}});Object.defineProperty(this,"isTrickPlaySupported",
{get:function(){return this.delegate?this.delegate.isTrickPlaySupported:c?c.isTrickPlaySupported():!1}});Object.defineProperty(this,"availablePlaybackRates",{get:function(){if(this.delegate)return this.delegate.availablePlaybackRates;if(c)return c.getAvailablePlaybackRates()}});Object.defineProperty(this,"selectedPlaybackRate",{get:function(){if(this.delegate)return this.delegate.selectedPlaybackRate;if(a&&a._nativePlayer)return a._nativePlayer._playBackRate}});Object.defineProperty(this,"mediaPlayer",
{get:function(){return this.delegate?this.delegate.mediaPlayer:a}});Object.defineProperty(this,"config",{get:function(){if(this.delegate)return this.delegate.config;if(a&&a._nativePlayer)return a._nativePlayer._config}});this.selectAudioTrack=function(a){if(this.delegate)return a.setupDelegate(),this.delegate.selectAudioTrack(a.getDelegate());if(c)return c.selectAudioTrack(a)};this.selectClosedCaptionsTrack=function(a){if(this.delegate)return a.setupDelegate(),this.delegate.selectClosedCaptionsTrack(a.getDelegate());
if(c)return c.selectClosedCaptionsTrack(a)};c&&c.setDelegate(this);return this};AdobePSDK.MediaPlayerItem.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.MediaPlayerItem,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createMediaPlayerItemDelegate(this))}})})();(function(){AdobePSDK.MediaPlayerItemConfig=function(){AdobePSDK.JSInterface.call(this);this._advertisingMetadata=this._adFactory=null;this._subscribeTags=[];this._adTags=[];this._mediaResourceFilter=this._timedMetadataFilter=this._customRangeMetadata=this._adSignalingMode=null;this._networkConfiguration=new AdobePSDK.NetworkConfiguration;this._useHardwareDecoder=null;this._thumbnailScrubber=!1;this._billingMetricsConfiguration=null;Object.defineProperty(this,"advertisingMetadata",{get:function(){return this.getDelegate()?
this.getDelegate().advertisingMetadata:this._advertisingMetadata},set:function(a){this.getDelegate()&&(a.setupDelegate(),this.getDelegate().advertisingMetadata=a.getDelegate());this._advertisingMetadata=a}});Object.defineProperty(this,"advertisingFactory",{get:function(){return this.getDelegate()?this.getDelegate().advertisingFactory:this._adFactory},set:function(a){this.getDelegate()&&(this.getDelegate().advertisingFactory=a);this._adFactory=a}});Object.defineProperty(this,"adSignalingMode",{get:function(){return this.getDelegate()?
this.getDelegate().adSignalingMode:this._adSignalingMode},set:function(a){this._adSignalingMode=a;this.getDelegate()&&(this.getDelegate().adSignalingMode=a)}});Object.defineProperty(this,"customRangeMetadata",{get:function(){return this.getDelegate()?this.getDelegate().customRangeMetadata:this._customRangeMetadata},set:function(a){this._customRangeMetadata=a;this.getDelegate()&&(this.getDelegate().customRangeMetadata=a)}});Object.defineProperty(this,"timedMetadataFilter",{get:function(){return this.getDelegate()&&
this.getDelegate().timedMetadataFilter?this.getDelegate().timedMetadataFilter:this._timedMetadataFilter},set:function(a){this.getDelegate()&&this.getDelegate().timedMetadataFilter&&(this.getDelegate().timedMetadataFilter=a);this._timedMetadataFilter=a}});Object.defineProperty(this,"mediaResourceFilter",{get:function(){return this.getDelegate()&&this.getDelegate().mediaResourceFilter?this.getDelegate().mediaResourceFilter:this._mediaResourceFilter},set:function(a){this.getDelegate()&&this.getDelegate().mediaResourceFilter&&
(this.getDelegate().mediaResourceFilter=a);this._mediaResourceFilter=a}});Object.defineProperty(this,"networkConfiguration",{get:function(){return this.getDelegate()&&this.getDelegate().networkConfiguration?this.getDelegate().networkConfiguration:this._networkConfiguration},set:function(a){this.getDelegate()&&this.getDelegate().networkConfiguration&&(a.setupDelegate(),this.getDelegate().networkConfiguration=a.getDelegate());this._networkConfiguration=a}});Object.defineProperty(this,"useHardwareDecoder",
{get:function(){return this.getDelegate()&&this.getDelegate().useHardwareDecoder?this.getDelegate().useHardwareDecoder:this._useHardwareDecoder},set:function(a){this.getDelegate()&&this.getDelegate().useHardwareDecoder&&(this.getDelegate().useHardwareDecoder=a);this._useHardwareDecoder=a}});Object.defineProperty(this,"subscribeTags",{get:function(){return this.getDelegate()&&this.getDelegate().subscribeTags?this.getDelegate().subscribeTags:this._subscribeTags},set:function(a){this._subscribeTags=
a;if(this.getDelegate()&&this.getDelegate().subscribeTags)return this.getDelegate().subscribeTags=a}});Object.defineProperty(this,"adTags",{get:function(){return this.getDelegate()&&this.getDelegate().adTags?this.getDelegate().adTags:this._adTags},set:function(a){this._adTags=a;if(this.getDelegate()&&this.getDelegate().adTags)return this.getDelegate().adTags=a}});Object.defineProperty(this,"thumbnailScrubber",{get:function(){return this._thumbnailScrubber},set:function(a){this._thumbnailScrubber=
a}});Object.defineProperty(this,"billingMetricsConfiguration",{get:function(){return this.getDelegate()&&this.getDelegate().billingMetricsConfiguration?this.getDelegate().billingMetricsConfiguration:this._billingMetricsConfiguration},set:function(a){this.getDelegate()&&this.getDelegate().billingMetricsConfiguration&&(a.setupDelegate(),this.getDelegate().billingMetricsConfiguration=a.getDelegate());this._billingMetricsConfiguration=a}});return this};AdobePSDK.MediaPlayerItemConfig.DEFAULT_AD_TAG="#EXT-X-CUE";
AdobePSDK.MediaPlayerItemConfig.SERVER_SIDE_AD_TAG="#EXT-X-MARKER";AdobePSDK.MediaPlayerItemConfig.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.MediaPlayerItemConfig,setupDelegate:function(){if(!this.delegate){var a=Primetime.DelegateFactory.createMediaPlayerItemConfigDelegate(this);this.setDelegate(a)}},setDelegate:function(a){this.delegate&&this.delegate===a||(AdobePSDK.JSInterface.prototype.setDelegate.call(this,a),this.getDelegate()&&(this._advertisingMetadata&&
(this._advertisingMetadata.setupDelegate(),this.getDelegate().advertisingMetadata=this._advertisingMetadata.getDelegate()),this._adFactory&&(this.getDelegate().advertisingFactory=this._adFactory),null!==this._adSignalingMode&&(this.getDelegate().adSignalingMode=this._adSignalingMode),this._customRangeMetadata&&(this._customRangeMetadata.setupDelegate(),this.getDelegate().customRangeMetadata=this._customRangeMetadata.getDelegate()),this._timedMetadataFilter&&this.getDelegate().timedMetadataFilter&&
(this._timedMetadataFilter.setupDelegate(),this.getDelegate().timedMetadataFilter=this._timedMetadataFilter.getDelegate()),this._mediaResourceFilter&&this.getDelegate().mediaResourceFilter&&(this._mediaResourceFilter.setupDelegate(),this.getDelegate().mediaResourceFilter=this._mediaResourceFilter.getDelegate()),this._networkConfiguration&&this.getDelegate().networkConfiguration&&(this._networkConfiguration.setupDelegate(),this.getDelegate().networkConfiguration=this._networkConfiguration.getDelegate()),
null!==this._useHardwareDecoder&&this.getDelegate().useHardwareDecoder&&(this.getDelegate().useHardwareDecoder=this._useHardwareDecoder),this._adTags&&0<this._adTags.length&&this.getDelegate().adTags&&(this.getDelegate().adTags=this._adTags),this._subscribeTags&&0<this._subscribeTags.length&&this.getDelegate().subscribeTags&&(this.getDelegate().subscribeTags=this._subscribeTags),this._billingMetricsConfiguration&&this.getDelegate().billingMetricsConfiguration&&(this._billingMetricsConfiguration.setupDelegate(),
this.getDelegate().billingMetricsConfiguration=this._billingMetricsConfiguration.getDelegate())))}})})();(function(){AdobePSDK.MediaPlayerItemLoader=function(){var a,b,c;AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"abrControlParameters",{get:function(){return this.delegate?this.delegate.abrControlParameters:a},set:function(b){a=b;if(this.delegate){var c;b&&(b.setupDelegate(),c=b.getDelegate());this.delegate.abrControlParameters=c}}});Object.defineProperty(this,"bufferControlParameters",{get:function(){return this.delegate?this.delegate.bufferControlParameters:b},set:function(a){b=a;if(this.delegate){var c;
a&&(a.setupDelegate(),c=a.getDelegate());this.delegate.bufferControlParameters=c}}});Object.defineProperty(this,"keepRebufferingForLive",{get:function(){return this.delegate?this.delegate.keepRebufferingForLive:c},set:function(a){c=a;this.delegate&&(this.delegate.keepRebufferingForLive=a)}});Object.defineProperty(this,"currentItem",{get:function(){if(this.delegate)return this.delegate.currentItem}});Object.defineProperty(this,"drmManager",{get:function(){if(this.delegate)return this.delegate.drmManager}});
Object.defineProperty(this,"eventDispatcher",{get:function(){if(this.delegate)return this.delegate.eventDispatcher}});this.load=function(a,b,c,g){if(this.delegate){var h,l,n;a&&(a.setupDelegate(),h=a.getDelegate());c&&(c.setupDelegate(),l=c.getDelegate());g&&(g.setupDelegate(),n=g.getDelegate());this.delegate.load(h,b,l,n)}};this.cancel=function(){this.delegate&&this.delegate.cancel()};this.prepareBuffer=function(a){this.delegate&&this.delegate.prepareBuffer(a)};this.setDelegate=function(d){AdobePSDK.JSInterface.prototype.setDelegate.call(this,
d);this.delegate&&(a&&(a.setupDelegate(),this.delegate.abrControlParameters=a.getDelegate()),b&&(b.setupDelegate(),this.delegate.bufferControlParameters=b.getDelegate()),c&&(this.delegate.keepRebufferingForLive=c))};return this};AdobePSDK.MediaPlayerItemLoader.LIVE_POINT=-2;AdobePSDK.MediaPlayerItemLoader.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.MediaPlayerItemLoader,setupDelegate:function(){if(!this.delegate){var a=Primetime.DelegateFactory.createMediaPlayerItemLoaderDelegate(this);
this.setDelegate(a)}}})})();(function(){AdobePSDK.MediaResourceFilter=function(){return this};AdobePSDK.MediaResourceFilter.prototype={constructor:AdobePSDK.MediaResourceFilter,isSupported:function(a,b,c){return Primetime.BindingsFactory.isSupported(c)}}})();(function(){AdobePSDK.BufferControlParameters=function(a,b){AdobePSDK.JSInterface.call(this);var c=a,d=b;Object.defineProperty(this,"initialBufferTime",{get:function(){return this.delegate?this.delegate.initialBufferTime:c},set:function(a){c=a;this.delegate&&(this.delegate.initialBufferTime=a)}});Object.defineProperty(this,"playBufferTime",{get:function(){return this.delegate?this.delegate.playBufferTime:d},set:function(a){d=a;this.delegate&&(this.delegate.playBufferTime=a)}});return this};AdobePSDK.BufferControlParameters.DEFAULT_PLAY_BUFFER_TIME=
3E4;AdobePSDK.BufferControlParameters.DEFAULT_INITIAL_BUFFER_TIME=2E3;AdobePSDK.BufferControlParameters.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.BufferControlParameters,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createBufferControlParametersDelegate(this))}})})();(function(){AdobePSDK.ABRControlParameters=function(a,b,c,d,e,f,g,h){AdobePSDK.JSInterface.call(this);var l=a,n;n=b>c?Primetime.defaults.DEFAULT_MIN_BITRATE:b;var k=c,m=d,p=e;if("undefined"===typeof p||null===p)p=Primetime.defaults.DEFAULT_MAX_PLAYOUT_RATE;var u=f;if("undefined"===typeof u||null===u)u=Primetime.defaults.DEFAULT_MIN_BITRATE;var q=g;if("undefined"===typeof q||null===q)q=Primetime.defaults.DEFAULT_MAX_BITRATE;var t=h;Object.defineProperty(this,"initialBitRate",{get:function(){return this.delegate?
this.delegate.initialBitRate:l},set:function(a){l=a;this.delegate&&(this.delegate.initialBitRate=a)}});Object.defineProperty(this,"minBitRate",{get:function(){return this.delegate?this.delegate.minBitRate:n},set:function(a){n=a;this.delegate&&(this.delegate.minBitRate=a)}});Object.defineProperty(this,"maxBitRate",{get:function(){return this.delegate?this.delegate.maxBitRate:k},set:function(a){k=a;this.delegate&&(this.delegate.maxBitRate=a)}});Object.defineProperty(this,"abrPolicy",{get:function(){return this.delegate?
this.delegate.abrPolicy:m},set:function(a){m=a;this.delegate&&this.delegate.setABRPolicy(a)}});Object.defineProperty(this,"maxPlayoutRate",{get:function(){return this.delegate?this.delegate.maxPlayoutRate:p},set:function(a){p=a;this.delegate&&this.delegate.setMaxPlayoutRate&&this.delegate.setMaxPlayoutRate(a)}});Object.defineProperty(this,"minTrickPlayBitRate",{get:function(){return this.delegate?this.delegate.minTrickPlayBitRate:u},set:function(a){u=a;this.delegate&&void 0!==this.delegate.minTrickPlayBitRate&&
null!==this.delegate.minTrickPlayBitRate&&(this.delegate.minTrickPlayBitRate=a)}});Object.defineProperty(this,"maxTrickPlayBitRate",{get:function(){return this.delegate?this.delegate.maxTrickPlayBitRate:q},set:function(a){q=a;this.delegate&&void 0!==this.delegate.maxTrickPlayBitRate&&null!==this.delegate.maxTrickPlayBitRate&&(this.delegate.maxTrickPlayBitRate=a)}});Object.defineProperty(this,"maxTrickPlayBandwidthUsage",{get:function(){return this.delegate?this.delegate.maxTrickPlayBandwidthUsage:
t},set:function(a){t=a;this.delegate&&void 0!==this.delegate.maxTrickPlayBandwidthUsage&&null!==this.delegate.maxTrickPlayBandwidthUsage&&(this.delegate.maxTrickPlayBandwidthUsage=a)}});return this};AdobePSDK.ABRControlParameters.CONSERVATIVE_POLICY=0;AdobePSDK.ABRControlParameters.MODERATE_POLICY=1;AdobePSDK.ABRControlParameters.AGGRESSIVE_POLICY=2;AdobePSDK.ABRControlParameters.DEFAULT_ABR_INITIAL_BITRATE=0;AdobePSDK.ABRControlParameters.DEFAULT_ABR_MIN_BITRATE=0;AdobePSDK.ABRControlParameters.DEFAULT_ABR_MAX_BITRATE=
2147483647;AdobePSDK.ABRControlParameters.DEFAULT_ABR_POLICY=AdobePSDK.ABRControlParameters.MODERATE_POLICY;AdobePSDK.ABRControlParameters.DEFAULT_MAX_PLAYOUT_RATE=1;AdobePSDK.ABRControlParameters.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.ABRControlParameters,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createABRControlParametersDelegate(this))}})})();(function(){AdobePSDK.AudioTrack=function(a,b,c,d,e,f,g){AdobePSDK.JSInterface.call(this);this._mediaInfoIndex=b;Object.defineProperty(this,"name",{get:function(){return this.delegate?this.delegate.name:c}});Object.defineProperty(this,"language",{get:function(){return this.delegate?this.delegate.language:d}});Object.defineProperty(this,"isDefault",{get:function(){return this.delegate?this.delegate.isDefault:e}});Object.defineProperty(this,"isAutoSelect",{get:function(){return this.delegate?this.delegate.isAutoSelect:
f}});Object.defineProperty(this,"forced",{get:function(){return g}});Object.defineProperty(this,"isValid",{get:function(){return this.delegate?this.delegate.isValid:null}});Object.defineProperty(this,"pID",{get:function(){return this.delegate?this.delegate.pID:null}});return this};AdobePSDK.AudioTrack.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.AudioTrack,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createAudioTrackDelegate(this))},
equals:function(a){if(this.delegate)return a.setupDelegate(),this.delegate.equals(a.getDelegate())}})})();(function(){AdobePSDK.ClosedCaptionsTrack=function(a,b,c,d,e,f,g,h){AdobePSDK.JSInterface.call(this);this._mediaInfoIndex=b;this._mediaId=a;Object.defineProperty(this,"name",{get:function(){return this.delegate?this.delegate.name:c}});Object.defineProperty(this,"language",{get:function(){return this.delegate?this.delegate.language:d}});Object.defineProperty(this,"isDefault",{get:function(){return this.delegate?this.delegate.isDefault:e}});Object.defineProperty(this,"isAutoSelect",{get:function(){return this.delegate?
this.delegate.isAutoSelect:f}});Object.defineProperty(this,"serviceType",{get:function(){return this.delegate?this.delegate.serviceType:g}});Object.defineProperty(this,"isForced",{get:function(){return this.delegate?this.delegate.isForced:h}});Object.defineProperty(this,"isValid",{get:function(){return this.delegate?this.delegate.isValid:null}});return this};AdobePSDK.ClosedCaptionsTrack.ServiceType={SERVICE_608_CAPTIONS:0,SERVICE_708_CAPTIONS:1,SERVICE_WEB_VTT_CAPTIONS:2};AdobePSDK.ClosedCaptionsTrack.create=
function(a,b,c,d){return new AdobePSDK.ClosedCaptionsTrack(null,null,b,c,d,!1,a,!1)};AdobePSDK.ClosedCaptionsTrack.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.ClosedCaptionsTrack,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createClosedCaptionsTrackDelegate(this))}})})();(function(){AdobePSDK.TextFormat=function(a,b,c,d,e,f,g,h,l,n){AdobePSDK.JSInterface.call(this);var k=this;Object.defineProperty(this,"font",{get:function(){return this.delegate?this.delegate.font:k.delegate?k.delegate.font:a},set:function(a){this.delegate&&(this.delegate.font=a)}});Object.defineProperty(this,"size",{get:function(){return this.delegate?this.delegate.size:k.delegate?k.delegate.size:g},set:function(a){this.delegate&&(this.delegate.size=a)}});Object.defineProperty(this,"fontColor",{get:function(){return this.delegate?
this.delegate.fontColor:k.delegate?k.delegate.fontColor:b},set:function(a){this.delegate&&(this.delegate.fontColor=a)}});Object.defineProperty(this,"fontEdge",{get:function(){return this.delegate?this.delegate.fontEdge:k.delegate?k.delegate.fontEdge:d},set:function(a){this.delegate&&(this.delegate.fontEdge=a)}});Object.defineProperty(this,"edgeColor",{get:function(){return this.delegate?this.delegate.edgeColor:k.delegate?k.delegate.edgeColor:c},set:function(a){this.delegate&&(this.delegate.edgeColor=
a)}});Object.defineProperty(this,"fontOpacity",{get:function(){return this.delegate?this.delegate.fontOpacity:k.delegate?k.delegate.fontOpacity:h},set:function(a){this.delegate&&(this.delegate.fontOpacity=a)}});Object.defineProperty(this,"backgroundColor",{get:function(){return this.delegate?this.delegate.backgroundColor:k.delegate?k.delegate.backgroundColor:e},set:function(a){this.delegate&&(this.delegate.backgroundColor=a)}});Object.defineProperty(this,"backgroundOpacity",{get:function(){return this.delegate?
this.delegate.backgroundOpacity:k.delegate?k.delegate.backgroundOpacity:l},set:function(a){this.delegate&&(this.delegate.backgroundOpacity=a)}});Object.defineProperty(this,"fillColor",{get:function(){return this.delegate?this.delegate.fillColor:k.delegate?k.delegate.fillColor:f},set:function(a){this.delegate&&(this.delegate.fillColor=a)}});Object.defineProperty(this,"fillOpacity",{get:function(){return this.delegate?this.delegate.fillOpacity:k.delegate?k.delegate.fillOpacity:n},set:function(a){this.delegate&&
(this.delegate.fillOpacity=a)}});Object.defineProperty(this,"safeArea",{get:function(){return this.delegate?this.delegate.safeArea:null},set:function(a){this.delegate&&(this.delegate.safeArea=a)}});Object.defineProperty(this,"bottomInset",{get:function(){return this.delegate?this.delegate.bottomInset:null},set:function(a){this.delegate&&(this.delegate.bottomInset=a)}});return this};AdobePSDK.TextFormat.COLOR_DEFAULT=0;AdobePSDK.TextFormat.BLACK=1;AdobePSDK.TextFormat.GRAY=2;AdobePSDK.TextFormat.WHITE=
3;AdobePSDK.TextFormat.BRIGHT_WHITE=4;AdobePSDK.TextFormat.DARK_RED=5;AdobePSDK.TextFormat.RED=6;AdobePSDK.TextFormat.BRIGHT_RED=7;AdobePSDK.TextFormat.DARK_GREEN=8;AdobePSDK.TextFormat.GREEN=9;AdobePSDK.TextFormat.BRIGHT_GREEN=10;AdobePSDK.TextFormat.DARK_BLUE=11;AdobePSDK.TextFormat.BLUE=12;AdobePSDK.TextFormat.BRIGHT_BLUE=13;AdobePSDK.TextFormat.DARK_YELLOW=14;AdobePSDK.TextFormat.YELLOW=15;AdobePSDK.TextFormat.BRIGHT_YELLOW=16;AdobePSDK.TextFormat.DARK_MAGENTA=17;AdobePSDK.TextFormat.MAGENTA=
18;AdobePSDK.TextFormat.BRIGHT_MAGENTA=19;AdobePSDK.TextFormat.DARK_CYAN=20;AdobePSDK.TextFormat.CYAN=21;AdobePSDK.TextFormat.BRIGHT_CYAN=22;AdobePSDK.TextFormat.SIZE_DEFAULT=0;AdobePSDK.TextFormat.SMALL=1;AdobePSDK.TextFormat.MEDIUM=2;AdobePSDK.TextFormat.LARGE=3;AdobePSDK.TextFormat.FONT_EDGE_DEFAULT=0;AdobePSDK.TextFormat.NONE=1;AdobePSDK.TextFormat.RAISED=2;AdobePSDK.TextFormat.DEPRESSED=3;AdobePSDK.TextFormat.UNIFORM=4;AdobePSDK.TextFormat.DROP_SHADOW_LEFT=5;AdobePSDK.TextFormat.DROP_SHADOW_RIGHT=
6;AdobePSDK.TextFormat.LEFT_DROP_SHADOW=5;AdobePSDK.TextFormat.RIGHT_DROP_SHADOW=6;AdobePSDK.TextFormat.FONT_DEFAULT=0;AdobePSDK.TextFormat.MONOSPACED_WITH_SERIFS=1;AdobePSDK.TextFormat.PROPORTIONAL_WITH_SERIFS=2;AdobePSDK.TextFormat.MONOSPACED_WITHOUT_SERIFS=3;AdobePSDK.TextFormat.PROPORTIONAL_WITHOUT_SERIFS=4;AdobePSDK.TextFormat.CASUAL=5;AdobePSDK.TextFormat.CURSIVE=6;AdobePSDK.TextFormat.SMALL_CAPITALS=7;AdobePSDK.TextFormat.DEFAULT_OPACITY=-1;AdobePSDK.TextFormat.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,
{constructor:AdobePSDK.TextFormat,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createTextFormatDelegate(this))}})})();(function(){AdobePSDK.PlaybackInformation=function(a,b,c,d,e,f,g,h,l,n,k,m,p,u,q,t,r,w,z,G){AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"timeToFirstByte",{get:function(){return this.delegate?this.delegate.timeToFirstByte:a}});Object.defineProperty(this,"timeToLoad",{get:function(){return this.delegate?this.delegate.timeToLoad:b}});Object.defineProperty(this,"timeToStart",{get:function(){return this.delegate?this.delegate.timeToStart:c}});Object.defineProperty(this,"timeToFail",{get:function(){return this.delegate?
this.delegate.timeToFail:d}});Object.defineProperty(this,"totalSecondsPlayed",{get:function(){return this.delegate?this.delegate.totalSecondsPlayed:e}});Object.defineProperty(this,"totalSecondsSpent",{get:function(){return this.delegate?this.delegate.totalSecondsSpent:f}});Object.defineProperty(this,"frameRate",{get:function(){return this.delegate?this.delegate.frameRate:g}});Object.defineProperty(this,"droppedFrameCount",{get:function(){return this.delegate?this.delegate.droppedFrameCount:h}});Object.defineProperty(this,
"perceivedBandwidth",{get:function(){return this.delegate?this.delegate.perceivedBandwidth:l}});Object.defineProperty(this,"bitRate",{get:function(){return this.delegate?this.delegate.bitRate:n}});Object.defineProperty(this,"bufferTime",{get:function(){return this.delegate?this.delegate.bufferTime:k}});Object.defineProperty(this,"bufferLength",{get:function(){return this.delegate?this.delegate.bufferLength:m}});Object.defineProperty(this,"emptyBufferCount",{get:function(){return this.delegate?this.delegate.emptyBufferCount:
p}});Object.defineProperty(this,"bufferingTime",{get:function(){return this.delegate?this.delegate.bufferingTime:u}});Object.defineProperty(this,"timeToInitialize",{get:function(){return this.delegate?this.delegate.timeToInitialize:t}});Object.defineProperty(this,"timeToPrepare",{get:function(){return this.delegate?this.delegate.timeToPrepare:q}});Object.defineProperty(this,"timeToPlay",{get:function(){return this.delegate?this.delegate.timeToPlay:r}});Object.defineProperty(this,"totalBufferingTime",
{get:function(){return this.delegate?this.delegate.totalBufferingTime:w}});Object.defineProperty(this,"seekTimes",{get:function(){return this.delegate?this.delegate.seekTimes:z}});Object.defineProperty(this,"playbackMetrics",{get:function(){return this.delegate?this.delegate.playbackMetrics:G}})};AdobePSDK.PlaybackInformation.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.PlaybackInformation,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createPlaybackInformationDelegate(this))}})})();(function(){AdobePSDK.QOSProvider=function(){AdobePSDK.JSInterface.call(this);this.seekEndCallback=this.seekBeginCallback=this.bufferingEndCallback=this.bufferingBeginCallback=this.statusChangeCallback=this.seekMetrics=this.statusMetrics=this.bufferingMetrics=this.mediaPlayer=null;Object.defineProperty(this,"playbackInformation",{get:function(){if(this.delegate)return this.delegate.playbackInformation;if(null===this.mediaPlayer)return AdobePSDK.PSDKErrorCode.kECIllegalState;var a=this.mediaPlayer.getPlaybackMetrics();
if("undefined"===typeof a||null===a||a===AdobePSDK.PSDKErrorCode.kECIllegalState||a===AdobePSDK.PSDKErrorCode.kECElementNotFound)a={droppedFramesCount:0,perceivedBandwidth:0};var b=this.mediaPlayer.getAdditionalPlaybackInformationMetrics();if("undefined"===typeof b||null===b||b===AdobePSDK.PSDKErrorCode.kECIllegalState||b===AdobePSDK.PSDKErrorCode.kECElementNotFound)b={timeToFirstByte:0,frameRate:0,perceivedBandwidth:0,bufferTime:0,bufferLength:0};return new AdobePSDK.PlaybackInformation(b.timeToFirstByte,
this.statusMetrics.timeToInitialize,this.statusMetrics.timeToPlay,this.statusMetrics.timeToError,this.statusMetrics.totalSecondsPlayed,this.statusMetrics.totalSecondsSpent,b.frameRate,"object"===typeof a.droppedFramesCount?a.droppedFramesCount.video:a.droppedFramesCount,b.perceivedBandwidth,"object"===typeof a.bitRate?a.bitRate.video:a.bitRate,b.bufferTime,b.bufferLength,this.bufferingMetrics.emptyBufferCount,this.bufferingMetrics.bufferingTime,this.statusMetrics.timeToPrepare/1E3,this.statusMetrics.timeToInitialize/
1E3,this.statusMetrics.timeToPlay/1E3,this.bufferingMetrics.totalBufferingTime,this.seekMetrics.movingSeekTimes,a)}});Object.defineProperty(this,"deviceInformation",{get:function(){return this.delegate?this.delegate.deviceInformation:new AdobePSDK.DeviceInformation}});return this};AdobePSDK.QOSProvider.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.QOSProvider,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createQOSProviderDelegate(this))},
_onPlayerStatusChange:function(a){switch(a.status){case AdobePSDK.MediaPlayerStatus.INITIALIZING:this.statusMetrics.recordInitializeStart();break;case AdobePSDK.MediaPlayerStatus.INITIALIZED:this.statusMetrics.recordInitialized();break;case AdobePSDK.MediaPlayerStatus.PREPARING:this.statusMetrics.recordPrepareStart();break;case AdobePSDK.MediaPlayerStatus.PREPARED:this.statusMetrics.recordPrepared();break;case AdobePSDK.MediaPlayerStatus.PLAYING:this.statusMetrics.recordPlaybackStart();break;case AdobePSDK.MediaPlayerStatus.PAUSED:this.statusMetrics.recordPaused();
break;case AdobePSDK.MediaPlayerStatus.SEEKING:this.statusMetrics.recordSeeking();break;case AdobePSDK.MediaPlayerStatus.COMPLETE:this.statusMetrics.recordComplete();break;case AdobePSDK.MediaPlayerStatus.ERROR:this.statusMetrics.recordError();break;case AdobePSDK.MediaPlayerStatus.RELEASED:this.statusMetrics.recordReleased()}},_onBufferingBegin:function(){this.bufferingMetrics.recordBufferEmpty()},_onBufferingEnd:function(){this.bufferingMetrics.recordBufferFull()},_onSeekStart:function(){this.seekMetrics.recordSeekBegin()},
_onSeekEnd:function(){this.seekMetrics.recordSeekEnd()},attachMediaPlayer:function(a){this.delegate?(a.setupDelegate(),this.delegate.attachMediaPlayer(a.getDelegate())):(this.mediaPlayer&&this.detachMediaPlayer(),this.mediaPlayer=a,this.bufferingMetrics=new AdobePSDK.QOSProvider.BufferingMetrics,this.statusMetrics=new AdobePSDK.QOSProvider.PlaybackStatusMetrics,this.seekMetrics=new AdobePSDK.QOSProvider.SeekingMetrics,this.statusChangeCallback=this._onPlayerStatusChange.bind(this),this.bufferingBeginCallback=
this._onBufferingBegin.bind(this),this.bufferingEndCallback=this._onBufferingEnd.bind(this),this.seekBeginCallback=this._onSeekStart.bind(this),this.seekEndCallback=this._onSeekEnd.bind(this),this.mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.StatusChangeEvent,this.statusChangeCallback),this.mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.BufferingBeginEvent,this.bufferingBeginCallback),this.mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.BufferingEndEvent,this.bufferingEndCallback),
this.mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.SeekBeginEvent,this.seekBeginCallback),this.mediaPlayer.addEventListener(AdobePSDK.MediaPlayer.Events.SeekEndEvent,this.seekEndCallback))},detachMediaPlayer:function(){this.delegate?this.delegate.detachMediaPlayer():(this.mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.StatusChangeEvent,this.statusChangeCallback),this.mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.BufferingBeginEvent,this.bufferingBeginCallback),
this.mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.BufferingEndEvent,this.bufferingEndCallback),this.mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.SeekBeginEvent,this.seekBeginCallback),this.mediaPlayer.removeEventListener(AdobePSDK.MediaPlayer.Events.SeekEndEvent,this.seekEndCallback),this.seekMetrics=this.statusMetrics=this.bufferingMetrics=this.mediaPlayer=this.seekEndCallback=this.seekBeginCallback=this.bufferingEndCallback=this.bufferingBeginCallback=this.statusChangeCallback=
null)}});AdobePSDK.QOSProvider.BufferingMetrics=function(){var a=0,b=0,c=0,d=0;Object.defineProperty(this,"emptyBufferCount",{get:function(){return this.delegate?this.delegate.emptyBufferCount:a}});Object.defineProperty(this,"totalBufferingTime",{get:function(){return this.delegate?this.delegate.totalBufferingTime:b}});Object.defineProperty(this,"bufferingTime",{get:function(){return this.delegate?this.delegate.bufferingTime:d}});this.reset=function(){d=b=a=0};this.recordBufferEmpty=function(){a++;
c=Date.now()};this.recordBufferFull=function(){0<c&&(d=Date.now()-c,b+=d,c=0)};return this};AdobePSDK.QOSProvider.PlaybackStatusMetrics=function(){var a,b,c,d,e,f,g,h,l;Object.defineProperties(this,{timeToInitialize:{get:function(){return 0<a&&0<b?Math.abs(b-a):0}},timeToPrepare:{get:function(){return 0<c&&0<d?Math.abs(d-c):0}},timeToPlay:{get:function(){return 0<e&&0<a?Math.abs(e-a):0}},timeToError:{get:function(){return 0<g&&0<a?Math.abs(g-a):0}},totalSecondsPlayed:{get:function(){var a=h;0<f&&
(a+=Math.abs(Date.now()-f));return a/1E3}},totalSecondsSpent:{get:function(){return 0<a?Math.abs((0<l?l:Date.now())-a)/1E3:0}}});this.reset=function(){l=h=g=f=e=d=c=b=a=0};this.reset();this.recordInitializeStart=function(){this.reset();a=Date.now()};this.recordInitialized=function(){b=Date.now()};this.recordPrepareStart=function(){c=Date.now()};this.recordPrepared=function(){d=Date.now()};this.recordPlaybackStart=function(){f=Date.now();0<e||(e=f)};this.recordPaused=function(){this.recordNotPlaying()};
this.recordSeeking=function(){this.recordNotPlaying()};this.recordComplete=function(){this.recordNotPlaying();0===l&&(l=Date.now())};this.recordError=function(){this.recordNotPlaying();0===g&&(g=Date.now());0===l&&(l=Date.now())};this.recordReleased=function(){this.recordNotPlaying();0===l&&(l=Date.now())};this.recordNotPlaying=function(){0<f&&(h+=Math.abs(Date.now()-f),f=0)};return this};AdobePSDK.QOSProvider.SeekingMetrics=function(){var a=[],b=0;Object.defineProperties(this,{count:{get:function(){return a.length}},
average:{get:function(){return 0===a.length?0:a.reduce(function(a,b){return a+b})/a.length}},high:{get:function(){return 0===a.length?0:a.reduce(function(a,b){return a>b?a:b})}},low:{get:function(){return 0===a.length?0:a.reduce(function(a,b){return a<b?a:b})}},movingSeekTimes:{get:function(){return{count:this.count,average:this.average,high:this.high,low:this.low}}}});this.reset=function(){a=[];b=0};this.recordSeekBegin=function(){b=Date.now()};this.recordSeekEnd=function(){if(0<b){var c=Date.now()-
b;a.push(c);b=0}};return this};AdobePSDK.PlayerTechnology={getSupportedTechnology:function(a){return Primetime.BindingsFactory.getSupportedPlayerTech(a)}};AdobePSDK.PlayerTechnology.Type={MSE:"MediaSourceExtensions",VIDEO_TAG:"Plain Video Tag",FLASH:"Flash",UNKNOWN:"unknown"}})();(function(){AdobePSDK.Profile=function(a,b,c,d,e){AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"width",{get:function(){return this.delegate?this.delegate.width:a}});Object.defineProperty(this,"height",{get:function(){return this.delegate?this.delegate.height:b}});Object.defineProperty(this,"bitRate",{get:function(){return this.delegate?this.delegate.bitRate:c}});Object.defineProperty(this,"streamType",{get:function(){return this.delegate?this.delegate.streamType:e}});Object.defineProperty(this,
"isIFrame",{get:function(){return this.delegate?this.delegate.isIFrame:d}});Object.defineProperty(this,"codecs",{get:function(){return this.delegate?this.delegate.codecs:null}});Object.defineProperty(this,"isAudioOnly",{get:function(){return this.delegate?this.delegate.isAudioOnly:null}});Object.defineProperty(this,"isValid",{get:function(){return this.delegate?this.delegate.isValid:null}});return this};AdobePSDK.Profile.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.Profile,
isEqual:function(a){if(this.delegate)return a.setupDelegate(),this.delegate.isEqual(a.getDelegate())},notEqual:function(a){if(this.delegate)return a.setupDelegate(),this.delegate.notEqual(a.getDelegate())},setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createProfileDelegate(this))}})})();(function(){AdobePSDK.DefaultMetadataKeys={AD_SIGNALING_MODE:"adSignalingMode",AD_BREAK_AS_WATCHED_POLICY:"adBreakAsWatchedPolicy",ADVERTISING_METADATA:"advertisingMetadata",AUDITUDE_METADATA_KEY:"auditude_metadata",JSON_METADATA_KEY:"json_metadata",VIDEO_ANALYTICS_METADATA_KEY:"video_analytics_metadata",CUSTOM_AD_MARKERS_METADATA_KEY:"custom_ad_markers_metadata",METADATA_KEY_TYPE:"type",METADATA_KEY_ADJUST_SEEK_ENABLED:"adjust_seek_enabled",CUSTOM_PARAMETERS:"customParams",TARGETING_PARAMETERS:"targetingParameters",
NETWORK_CONFIGURATION_KEY:"network_configuration"}})();(function(){AdobePSDK.Notification=function(a,b,c,d){AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"type",{get:function(){return this.delegate?this.delegate.type:a}});Object.defineProperty(this,"code",{get:function(){return this.delegate?this.delegate.code:b}});Object.defineProperty(this,"metadata",{get:function(){return this.delegate?this.delegate.metadata:c}});Object.defineProperty(this,"innerNotification",{get:function(){return this.delegate?this.delegate.innerNotification:d}});return this};
AdobePSDK.Notification.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.Notification,toString:function(){if(this.delegate)return this.delegate.toString()},setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createNotificationDelegate(this))}});AdobePSDK.NotificationType={Info:0,INFO:0,Warning:1,WARNING:1,Error:2,ERROR:2}})();(function(){AdobePSDK.NetworkConfiguration=function(){AdobePSDK.JSInterface.call(this);var a=!1,b=!0,c=null,d=null,e=-1,f=!1,g=null,h=null,l=null;this.setDelegate=function(n){AdobePSDK.JSInterface.prototype.setDelegate.call(this,n);this.delegate&&(a&&(this.delegate.forceNativeNetworking=a),b&&(this.delegate.useRedirectedUrl=b),c&&(c.setupDelegate(),this.delegate.cookieHeaders=c.getDelegate()),d&&(this.delegate.readSetCookieHeader=d),e&&(this.delegate.masterUpdateInterval=e),f&&(this.delegate.useCookieHeaderForAllRequests=
f),g&&(this.delegate.readLimit=g),h&&this.delegate.setCORSConfig&&this.delegate.setCORSConfig(h),l&&(this.delegate.numFragmentsToTryBeforeError=l))};Object.defineProperty(this,"forceNativeNetworking",{get:function(){return this.delegate?this.delegate.forceNativeNetworking:a},set:function(b){this.delegate?this.delegate.forceNativeNetworking=b:a=b}});Object.defineProperty(this,"useRedirectedUrl",{get:function(){return this.delegate?this.delegate.useRedirectedUrl:b},set:function(a){this.delegate?this.delegate.useRedirectedUrl=
a:b=a}});Object.defineProperty(this,"cookieHeaders",{get:function(){return this.delegate?this.delegate.cookieHeaders:c},set:function(a){this.delegate?(a.setupDelegate(),this.delegate.cookieHeaders=a.getDelegate()):c=a}});Object.defineProperty(this,"readSetCookieHeader",{get:function(){return this.delegate?this.delegate.readSetCookieHeader:d},set:function(a){this.delegate?this.delegate.readSetCookieHeader=a:d=a}});Object.defineProperty(this,"masterUpdateInterval",{get:function(){return this.delegate?
this.delegate.masterUpdateInterval:e},set:function(a){this.delegate?this.delegate.masterUpdateInterval=a:e=a}});Object.defineProperty(this,"useCookieHeaderForAllRequests",{get:function(){return this.delegate?this.delegate.useCookieHeaderForAllRequests:f},set:function(a){this.delegate?this.delegate.useCookieHeaderForAllRequests=a:f=a}});Object.defineProperty(this,"readLimit",{get:function(){return this.delegate?this.delegate.readLimit:g},set:function(a){this.delegate?this.delegate.readLimit=a:g=a}});
Object.defineProperty(this,"CORSConfig",{get:function(){return this.delegate?this.delegate.CORSConfig:h},set:function(a){this.delegate&&this.delegate.setCORSConfig?this.delegate.setCORSConfig(a):h=a}});Object.defineProperty(this,"numFragmentsToTryBeforeError",{get:function(){return this.delegate?this.delegate.numFragmentsToTryBeforeError:l},set:function(a){this.delegate?this.delegate.numFragmentsToTryBeforeError=a:l=a}});Object.defineProperty(this,"keepAlive",{get:function(){return this.delegate?
this.delegate.keepAlive:null},set:function(a){this.delegate&&(this.delegate.keepAlive=a)}});return this};AdobePSDK.NetworkConfiguration.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.NetworkConfiguration,setupDelegate:function(){if(!this.delegate){var a=Primetime.DelegateFactory.createNetworkConfigurationDelegate(this);this.setDelegate(a)}},addCustomHeaders:function(a,b){this.delegate?this.delegate.addCustomHeaders(a,b):(this._customHeaders||(this._customHeaders=
{}),this._customHeaders[a]=b,this.delegate&&this.delegate.addCustomHeaders&&this.delegate.addCustomHeaders(a,b))},getCustomHeaders:function(a){return this._customHeaders&&this._customHeaders[a]?this._customHeaders[a]:null}})})();(function(){AdobePSDK.CORSConfig=function(){var a=this;Object.defineProperty(this,"enableEncryptionRequest",{get:function(){return a.getEnableEncryptionRequest()},set:function(b){return a.setEnableEncryptionRequest(b)}});return this};AdobePSDK.CORSConfig.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.NetworkConfiguration,_enableEncryptionRequest:null,setEnableEncryptionRequest:function(a){this._enableEncryptionRequest=a;this.delegate&&this.delegate.setEnableEncryptionRequest&&
this.delegate.setEnableEncryptionRequest(a)},getEnableEncryptionRequest:function(){return this._enableEncryptionRequest},setDelegate:function(a){AdobePSDK.Metadata.prototype.setDelegate.call(this,a);this.delegate&&null!==this._enableEncryptionRequest&&this.setEnableEncryptionRequest(this._enableEncryptionRequest)}})})();(function(){AdobePSDK.LoadInformation=function(a,b,c,d,e,f,g,h,l){AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"type",{get:function(){return this.delegate?this.delegate.type:a}});Object.defineProperty(this,"url",{get:function(){return this.delegate?this.delegate.url:b}});Object.defineProperty(this,"periodIndex",{get:function(){return this.delegate?this.delegate.periodIndex:c}});Object.defineProperty(this,"size",{get:function(){return this.delegate?this.delegate.size:d}});Object.defineProperty(this,
"mediaDuration",{get:function(){return this.delegate?this.delegate.mediaDuration:e}});Object.defineProperty(this,"downloadDuration",{get:function(){return this.delegate?this.delegate.downloadDuration:f}});Object.defineProperty(this,"trackName",{get:function(){return this.delegate?this.delegate.trackName:g}});Object.defineProperty(this,"trackType",{get:function(){return this.delegate?this.delegate.trackType:h}});Object.defineProperty(this,"trackIndex",{get:function(){return this.delegate?this.delegate.trackIndex:
l}});return this};AdobePSDK.LoadInformation.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.LoadInformation,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createLoadInformationDelegate(this))}})})();(function(){AdobePSDK.LoadInformationType={FRAGMENT:0,TRACK:1,MANIFEST:2}})();(function(){AdobePSDK.PSDKEvent=function(a,b){Object.defineProperty(this,"type",{get:function(){return this.delegate?this.delegate.type:a}});Object.defineProperty(this,"target",{get:function(){return this.delegate?this.delegate.target:b}});Object.defineProperty(this,"postedTime",{get:function(){if(this.delegate)return this.delegate.postedTime}});return this};AdobePSDK.PSDKEvent.prototype={constructor:AdobePSDK.PSDKEvent}})();(function(){AdobePSDK.MediaPlayerItemEvent=function(a,b,c){this.baseConstructor(b,c);Object.defineProperty(this,"item",{get:function(){return this.delegate?this.delegate.item:a}});return this};AdobePSDK.MediaPlayerItemEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,{constructor:AdobePSDK.MediaPlayerItemEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,AUDIO_UPDATED:AdobePSDK.PSDKEventType.AUDIO_UPDATED,CAPTIONS_UPDATED:AdobePSDK.PSDKEventType.CAPTIONS_UPDATED,ITEM_CREATED:AdobePSDK.PSDKEventType.ITEM_CREATED,
ITEM_UPDATED:AdobePSDK.PSDKEventType.ITEM_UPDATED,MASTER_UPDATED:AdobePSDK.PSDKEventType.MASTER_UPDATED})})();(function(){AdobePSDK.MediaPlayerStatusChangeEvent=function(a,b,c){this.baseConstructor(AdobePSDK.MediaPlayer.Events.StatusChangeEvent,b);Object.defineProperty(this,"status",{get:function(){return this.delegate?this.delegate.status:a}});Object.defineProperty(this,"metadata",{get:function(){return this.delegate?this.delegate.metadata:c}});Object.defineProperty(this,"error",{get:function(){if(this.delegate)return this.delegate.error}});return this};AdobePSDK.MediaPlayerStatusChangeEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,
{constructor:AdobePSDK.MediaPlayerStatusChangeEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,STATUS_CHANGED:AdobePSDK.PSDKEventType.STATUS_CHANGED})})();(function(){AdobePSDK.SeekEvent=function(a,b,c,d,e){this.baseConstructor(a,e);var f=!!d;Object.defineProperty(this,"desiredPosition",{get:function(){return this.delegate?this.delegate.desiredPosition:b}});Object.defineProperty(this,"actualPosition",{get:function(){return this.delegate?this.delegate.actualPosition:c}});Object.defineProperty(this,"isLocal",{get:function(){return this.delegate?this.delegate.isLocal:f}});return this};AdobePSDK.SeekEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,
{constructor:AdobePSDK.SeekEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,SEEK_BEGIN:AdobePSDK.PSDKEventType.SEEK_BEGIN,SEEK_END:AdobePSDK.PSDKEventType.SEEK_END,SEEK_POSITION_ADJUSTED:AdobePSDK.PSDKEventType.SEEK_POSITION_ADJUSTED})})();(function(){AdobePSDK.PlaybackRateEvent=function(a,b,c){this.baseConstructor(a,c);Object.defineProperty(this,"rate",{get:function(){return this.delegate?this.delegate.rate:b}});return this};AdobePSDK.PlaybackRateEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,{constructor:AdobePSDK.PlaybackRateEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,RATE_PLAYING:AdobePSDK.PSDKEventType.RATE_PLAYING,RATE_SELECTED:AdobePSDK.PSDKEventType.RATE_SELECTED})})();(function(){AdobePSDK.TimeChangeEvent=function(a,b){this.baseConstructor(AdobePSDK.MediaPlayer.Events.TimeChangeEvent,b);Object.defineProperty(this,"time",{get:function(){return this.delegate?this.delegate.time:a}});return this};AdobePSDK.TimeChangeEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,{constructor:AdobePSDK.TimeChangeEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,TIME_CHANGED:AdobePSDK.PSDKEventType.TIME_CHANGED})})();(function(){AdobePSDK.ProfileEvent=function(a,b,c){this.baseConstructor(b,c);Object.defineProperty(this,"profile",{get:function(){return this.delegate?this.delegate.profile:a}});Object.defineProperty(this,"codecs",{get:function(){if(this.delegate)return this.delegate.codecs}});Object.defineProperty(this,"isAudioOnly",{get:function(){if(this.delegate)return this.delegate.isAudioOnly}});Object.defineProperty(this,"isIFrame",{get:function(){if(this.delegate)return this.delegate.isIFrame}});Object.defineProperty(this,
"profileIndex",{get:function(){if(this.delegate)return this.delegate.profileIndex}});Object.defineProperty(this,"skipFactor",{get:function(){if(this.delegate)return this.delegate.skipFactor}});Object.defineProperty(this,"time",{get:function(){if(this.delegate)return this.delegate.time}});Object.defineProperty(this,"description",{get:function(){if(this.delegate)return this.delegate.description}});Object.defineProperty(this,"height",{get:function(){if(this.delegate)return this.delegate.height}});Object.defineProperty(this,
"width",{get:function(){if(this.delegate)return this.delegate.width}});return this};AdobePSDK.ProfileEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,{constructor:AdobePSDK.ProfileEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,PROFILE_CHANGED:AdobePSDK.PSDKEvent.PROFILE_CHANGED})})();(function(){AdobePSDK.DRMEvent=function(a,b,c,d,e){this.baseConstructor(a,e);this._license=b;this._errorMessage=c;this._message=d;var f=this;Object.defineProperty(this,"license",{get:function(){return f._license}});Object.defineProperty(this,"message",{get:function(){return f._message}});Object.defineProperty(this,"errorMessage",{get:function(){return f._actualPosition}});return this};AdobePSDK.DRMEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,{constructor:AdobePSDK.DRMEvent,
baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor})})();(function(){AdobePSDK.AdPlaybackEvent=function(a,b,c,d,e,f,g){this.baseConstructor(a,g);Object.defineProperty(this,"adBreak",{get:function(){return this.delegate?this.delegate.adBreak:b}});Object.defineProperty(this,"ad",{get:function(){return this.delegate?this.delegate.ad:c}});Object.defineProperty(this,"progress",{get:function(){return this.delegate?this.delegate.progress:d}});Object.defineProperty(this,"rate",{get:function(){return this.delegate?this.delegate.rate:e}});Object.defineProperty(this,
"time",{get:function(){return this.delegate?this.delegate.time:f}});return this};AdobePSDK.AdPlaybackEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,{constructor:AdobePSDK.AdPlaybackEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,AD_COMPLETED:AdobePSDK.PSDKEventType.AD_COMPLETED,AD_PROGRESS:AdobePSDK.PSDKEventType.AD_PROGRESS,AD_STARTED:AdobePSDK.PSDKEventType.AD_STARTED})})();(function(){AdobePSDK.NotificationEvent=function(a,b,c){this.baseConstructor(a,c);Object.defineProperty(this,"notification",{get:function(){return this.delegate?this.delegate.notification:b}});return this};AdobePSDK.NotificationEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,{constructor:AdobePSDK.NotificationEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,OPERATION_FAILED:AdobePSDK.PSDKEventType.OPERATION_FAILED})})();(function(){AdobePSDK.TimedMetadataEvent=function(a,b,c){this.baseConstructor(a,c);Object.defineProperty(this,"timedMetadata",{get:function(){return this.delegate?this.delegate.timedMetadata:b}});return this};AdobePSDK.TimedMetadataEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,{constructor:AdobePSDK.TimedMetadataEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,TIMED_METADATA_AVAILABLE:AdobePSDK.PSDKEventType.TIMED_METADATA_AVAILABLE,TIMED_METADATA_IN_BACKGROUND:AdobePSDK.PSDKEventType.TIMED_METADATA_IN_BACKGROUND})})();(function(){AdobePSDK.LoadInformationEvent=function(a,b,c){this.baseConstructor(a,c);Object.defineProperty(this,"loadInformation",{get:function(){return this.delegate?this.delegate.loadInformation:b}});return this};AdobePSDK.LoadInformationEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,{constructor:AdobePSDK.LoadInformationEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,LOAD_INFORMATION_AVAILABLE:AdobePSDK.PSDKEventType.LOAD_INFORMATION_AVAILABLE})})();(function(){AdobePSDK.AdClickEvent=function(a,b,c,d,e){this.baseConstructor(a,e);Object.defineProperty(this,"adBreak",{get:function(){return this.delegate?this.delegate.adBreak:b}});Object.defineProperty(this,"ad",{get:function(){return this.delegate?this.delegate.ad:c}});Object.defineProperty(this,"adClick",{get:function(){return this.delegate?this.delegate.adClick:d}});return this};AdobePSDK.AdClickEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,{constructor:AdobePSDK.AdClickEvent,
baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,AD_CLICK:AdobePSDK.PSDKEventType.AD_CLICK})})();(function(){AdobePSDK.TimelineEvent=function(a,b,c){this.baseConstructor(a,c);this._timeline=b;var d=this;Object.defineProperty(this,"timeline",{get:function(){return this.delegate?this.delegate.timeline:d._timeline}});return this};AdobePSDK.TimelineEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,{constructor:AdobePSDK.TimelineEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,TIMELINE_UPDATED:AdobePSDK.PSDKEventType.TIMELINE_UPDATED})})();(function(){AdobePSDK.ReservationEvent=function(a,b){this.baseConstructor(null,b);Object.defineProperty(this,"reservation",{get:function(){return this.delegate?this.delegate.reservation:a}});return this};AdobePSDK.ReservationEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.ReservationEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,RESERVATION_REACHED:AdobePSDK.PSDKEventType.RESERVATION_REACHED})})();(function(){AdobePSDK.SizeAvailableEvent=function(a,b,c){this.baseConstructor(null,c);Object.defineProperty(this,"height",{get:function(){return this.delegate?this.delegate.height:a}});Object.defineProperty(this,"width",{get:function(){return this.delegate?this.delegate.width:b}});return this};AdobePSDK.SizeAvailableEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.SizeAvailableEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,
SIZE_AVAILABLE:AdobePSDK.PSDKEventType.SIZE_AVAILABLE})})();(function(){AdobePSDK.TimedEvent=function(){this.baseConstructor(null,null);Object.defineProperty(this,"childsDuration",{get:function(){if(this.delegate)return this.delegate.childsDuration}});Object.defineProperty(this,"description",{get:function(){if(this.delegate)return this.delegate.description}});Object.defineProperty(this,"duration",{get:function(){if(this.delegate)return this.delegate.duration}});Object.defineProperty(this,"id",{get:function(){if(this.delegate)return this.delegate.id}});Object.defineProperty(this,
"name",{get:function(){if(this.delegate)return this.delegate.name}});Object.defineProperty(this,"parent",{get:function(){if(this.delegate)return this.delegate.parent}});return this};AdobePSDK.TimedEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.TimedEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,TIMED_EVENT:AdobePSDK.PSDKEventType.TIMED_EVENT})})();(function(){AdobePSDK.BufferEvent=function(a,b){this.baseConstructor(a,b);return this};AdobePSDK.BufferEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.BufferEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,BUFFERING_BEGIN:AdobePSDK.PSDKEventType.BUFFERING_BEGIN,BUFFERING_END:AdobePSDK.PSDKEventType.BUFFERING_END})})();(function(){AdobePSDK.DRMMetadataInfoEvent=function(a,b){this.baseConstructor(AdobePSDK.PSDKEventType.DRM_METADATA_INFO_AVAILABLE,b);Object.defineProperty(this,"drmMetadataInfo",{get:function(){return this.delegate?this.delegate.drmMetadataInfo:a}});return this};AdobePSDK.DRMMetadataInfoEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.DRMMetadataInfoEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,DRM_METADATA_INFO_AVAILABLE:AdobePSDK.PSDKEventType.DRM_METADATA_INFO_AVAILABLE})})();(function(){AdobePSDK.PauseAtPeriodEnd=function(a,b,c){this.baseConstructor(a,c);Object.defineProperty(this,"adId",{get:function(){return this.delegate?this.delegate.adId:b}});return this};AdobePSDK.PauseAtPeriodEnd.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.PauseAtPeriodEnd,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor})})();(function(){AdobePSDK.AdBreakPlaybackEvent=function(a,b,c){this.baseConstructor(a,c);Object.defineProperty(this,"adBreak",{get:function(){return this.delegate?this.delegate.adBreak:b}});return this};AdobePSDK.AdBreakPlaybackEvent.prototype=Primetime.helper.extend(AdobePSDK.PSDKEvent.prototype,AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.AdBreakPlaybackEvent,baseConstructor:AdobePSDK.PSDKEvent.prototype.constructor,AD_BREAK_STARTED:AdobePSDK.PSDKEventType.AD_BREAK_STARTED,AD_BREAK_COMPLETED:AdobePSDK.PSDKEventType.AD_BREAK_COMPLETED,
AD_BREAK_SKIPPED:AdobePSDK.PSDKEventType.AD_BREAK_SKIPPED})})();(function(){AdobePSDK.DRMErrorListener=function(a){this.onDRMErrorCallbackFunc=a};AdobePSDK.DRMErrorListener.prototype={constructor:AdobePSDK.DRMErrorListener,onDRMError:function(a,b,c,d){if(this.onDRMErrorCallbackFunc)this.onDRMErrorCallbackFunc(a,b,c,d)}}})();(function(){AdobePSDK.DRMAcquireLicenseListener=function(a,b){this.baseConstructor(b);this.onLicenseAcquiredCallbackFunc=a};AdobePSDK.DRMAcquireLicenseListener.prototype=Primetime.helper.extend(AdobePSDK.DRMErrorListener.prototype,{constructor:AdobePSDK.DRMAcquireLicenseListener,baseConstructor:AdobePSDK.DRMErrorListener.prototype.constructor,onLicenseAcquired:function(a){if(this.onLicenseAcquiredCallbackFunc)this.onLicenseAcquiredCallbackFunc(a)}})})();(function(){AdobePSDK.DRMAuthenticateListener=function(a,b){this.baseConstructor(b);this.onAuthenticationCompleteCallbackFunc=a};AdobePSDK.DRMAuthenticateListener.prototype=Primetime.helper.extend(AdobePSDK.DRMErrorListener.prototype,{constructor:AdobePSDK.DRMAuthenticateListener,baseConstructor:AdobePSDK.DRMErrorListener.prototype.constructor,onAuthenticationComplete:function(a){if(this.onAuthenticationCompleteCallbackFunc)this.onAuthenticationCompleteCallbackFunc(a)}})})();(function(){AdobePSDK.DRMOperationCompleteListener=function(a,b){this.baseConstructor(b);this.onDRMOperationCompleteCallbackFunc=a};AdobePSDK.DRMOperationCompleteListener.prototype=Primetime.helper.extend(AdobePSDK.DRMErrorListener.prototype,{constructor:AdobePSDK.DRMOperationCompleteListener,baseConstructor:AdobePSDK.DRMErrorListener.prototype.constructor,onDRMOperationComplete:function(){if(this.onDRMOperationCompleteCallbackFunc)this.onDRMOperationCompleteCallbackFunc()}})})();(function(){AdobePSDK.DRMReturnLicenseListener=function(a,b){this.baseConstructor(b);this.onLicenseReturnCompleteCallbackFunc=a};AdobePSDK.DRMReturnLicenseListener.prototype=Primetime.helper.extend(AdobePSDK.DRMErrorListener.prototype,{constructor:AdobePSDK.DRMReturnLicenseListener,baseConstructor:AdobePSDK.DRMErrorListener.prototype.constructor,onLicenseReturnComplete:function(a){if(this.onLicenseReturnCompleteCallbackFunc)this.onLicenseReturnCompleteCallbackFunc(a)}})})();(function(){AdobePSDK.ItemLoaderListener=function(){return this};AdobePSDK.ItemLoaderListener.prototype={constructor:AdobePSDK.ItemLoaderListener,onErrorCallbackFunc:function(){},onLoadCompleteCallbackFunc:function(){},onBufferPreparedCallbackFunc:function(){},onBufferingBeginCallbackFunc:function(){}}})();Primetime.AD_BANNER_TYPE={STATIC:"static",IFRAME:"iframe",HTML:"html"};(function(){AdobePSDK.Ad=function(a,b,c,d,e,f,g,h,l,n){AdobePSDK.JSInterface.call(this);this._duration=c;Object.defineProperty(this,"primaryAsset",{get:function(){return this.delegate?this.delegate.primaryAsset:e}});Object.defineProperty(this,"companionAssets",{get:function(){return this.delegate?this.delegate.companionAssets:f}});Object.defineProperty(this,"duration",{get:function(){return this.delegate?this.delegate.duration:this._duration}});Object.defineProperty(this,"id",{get:function(){return this.delegate?
this.delegate.id:a}});Object.defineProperty(this,"adType",{get:function(){return this.delegate?this.delegate.adType:b}});Object.defineProperty(this,"isCustomAdMarker",{get:function(){return this.delegate?this.delegate.isCustomAdMarker:d}});Object.defineProperty(this,"isVPAIDAd",{get:function(){return this.delegate?this.delegate.isVPAIDAd:n}});Object.defineProperty(this,"adInsertionType",{get:function(){return this.delegate?this.delegate.adInsertionType:h}});Object.defineProperty(this,"isClickable",
{get:function(){return this.delegate?this.delegate.isClickable:l}});Object.defineProperty(this,"tracker",{get:function(){return this.delegate?this.delegate.tracker:g}});Object.defineProperty(this,"isCustomAd",{get:function(){if(this.delegate)return this.delegate.isCustomAd}});return this};AdobePSDK.Ad.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.Ad,equals:function(a){if(this.delegate)return this.delegate.equals(a)},setupDelegate:function(){this.delegate||
(this.delegate=Primetime.DelegateFactory.createAdDelegate(this))}})})();(function(){AdobePSDK.AdType={LINEAR:0,NON_LINEAR:1}})();(function(){AdobePSDK.AdAsset=function(a,b,c,d,e,f){AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"id",{get:function(){return this.delegate?this.delegate.id:a}});Object.defineProperty(this,"duration",{get:function(){return this.delegate?this.delegate.duration:b}});Object.defineProperty(this,"resource",{get:function(){return this.delegate?this.delegate.resource:c}});Object.defineProperty(this,"adClick",{get:function(){return this.delegate?this.delegate.adClick:d}});Object.defineProperty(this,
"metadata",{get:function(){return this.delegate?this.delegate.metadata:e}});Object.defineProperty(this,"parameters",{get:function(){return this.delegate?this.delegate.adParameters:f}});Object.defineProperty(this,"adParameters",{get:function(){return this.delegate?this.delegate.adParameters:f}});Object.defineProperty(this,"isValid ",{get:function(){if(this.delegate)return this.delegate.isValid}});return this};AdobePSDK.AdAsset.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.AdAsset,
setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createAdAssetDelegate(this))}})})();(function(){AdobePSDK.AdBannerAsset=function(a,b,c,d,e,f,g,h,l,n,k){AdobePSDK.AdAsset.call(this,a,b,c,e,l);var m="";e&&(m=e.url);Object.defineProperty(this,"width",{get:function(){return this.delegate?this.delegate.width:f}});Object.defineProperty(this,"height",{get:function(){return this.delegate?this.delegate.height:g}});Object.defineProperty(this,"resourceType",{get:function(){return this.delegate?this.delegate.resourceType:h}});Object.defineProperty(this,"staticUrl",{get:function(){return this.delegate?
this.delegate.staticUrl:d}});Object.defineProperty(this,"bannerData",{get:function(){if(this.delegate)return this.delegate.bannerData;var a;a:{a="";var b;switch(h){case Primetime.AD_BANNER_TYPE.STATIC:a='<a href="'+m+'"target="_blank"><img width="'+f+'" height="'+g+'" src="'+d+'" alt="" border="0" onclick="';if(n&&n.length)for(b=0;b<n.length;++b)a+="(new Image()).src="+n[b]+";";a+='"></a>';break;case Primetime.AD_BANNER_TYPE.IFRAME:a='<iframe width="'+f+'" height="'+g+'" frameborder="0" scrolling="no" allowtransparency="true" leftmargin="0" rightmargin="0" marginwidth="0" marginheight="0" src="'+
d+'"></iframe>';break;case Primetime.AD_BANNER_TYPE.HTML:a=d;break;default:a=null;break a}b="";if(k&&k.length)for(var c=0;c<k.length;++c)b+='<img src="',b+=k[c],b+='" width="1" height="1" border="0" style="height:1px;width:1px;border:0;position:absolute;top:0;left:0;background-color:Transparent;background-image:none;padding:0;margin:0;">';b&&(a=a+"\n"+b)}return a}});return this};AdobePSDK.AdBannerAsset.prototype=Primetime.helper.extend(AdobePSDK.AdAsset.prototype,{constructor:AdobePSDK.AdBannerAsset,
setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createAdBannerAssetDelegate(this))}})})();(function(){AdobePSDK.AdBreak=function(a,b){AdobePSDK.JSInterface.call(this);var c=-1;if(a)for(var d=0;d<a.length;d++)c+=a[d].duration;Object.defineProperty(this,"ads",{get:function(){return this.delegate?this.delegate.ads:a}});Object.defineProperty(this,"duration",{get:function(){return this.delegate?this.delegate.duration:c}});Object.defineProperty(this,"insertionType",{get:function(){return this.delegate?this.delegate.insertionType:""}});Object.defineProperty(this,"tracker",{get:function(){return this.delegate?
this.delegate.tracker:null}});return this};AdobePSDK.AdBreak.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.AdBreak,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createAdBreakDelegate(this))}})})();(function(){AdobePSDK.AdBreakPlacement=function(a,b){AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"adBreak",{get:function(){return this.delegate?this.delegate.adBreak:a}});Object.defineProperty(this,"placement",{get:function(){return this.delegate?this.delegate.placement:b}});Object.defineProperty(this,"time",{get:function(){return this.delegate?this.delegate.time:-1}});Object.defineProperty(this,"duration",{get:function(){return this.delegate?this.delegate.duration:null}});Object.defineProperty(this,
"isValid",{get:function(){return this.delegate?this.delegate.isValid:null}});return this};AdobePSDK.AdBreakPlacement.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.AdBreakPlacement,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createAdBreakPlacementDelegate(this))},setInvalid:function(){this.delegate&&this.delegate.setInvalid()}})})();(function(){AdobePSDK.AdBreakPolicy={PLAY:0,SKIP:1,REMOVE:2,REMOVE_AFTER_PLAY:3}})();(function(){AdobePSDK.AdBreakRemoval=function(a){this._adBreakTimelineItem=a;var b=this;Object.defineProperty(this,"adBreakTimelineItem",{get:function(){return b.getAdBreakTimelineItem()}});return this};AdobePSDK.AdBreakRemoval.prototype={constructor:AdobePSDK.AdBreakRemoval,getAdBreakTimelineItem:function(){return this._adBreakTimelineItem}}})();(function(){AdobePSDK.AdBreakMove=function(a,b){this._adBreakTimelineItem=a;this._newPlacement=b;var c=this;Object.defineProperty(this,"adBreakTimelineItem",{get:function(){return c.getAdBreakTimelineItem()}});Object.defineProperty(this,"newPlacement",{get:function(){return c.getNewPlacement()}});return this};AdobePSDK.AdBreakMove.prototype={constructor:AdobePSDK.AdBreakMove,getAdBreakTimelineItem:function(){return this._adBreakTimelineItem},getNewPlacement:function(){return this._newPlacement}}})();(function(){var a=function(){if(this._items){for(var a=new AdobePSDK.TimeRange(-1,-1),c=new AdobePSDK.TimeRange(-1,-1),d=0;d<this._items.length;d++){var e=this._items[d];if(e){var a=e.virtualRange,c=e.localRange,f=e.ad;f&&f.adType==AdobePSDK.AdType.LINEAR&&(a.expandTimeRange(e.virtualRange),c.expandTimeRange(e.localRange))}}this._timelineItem.virtualRange=a;this._timelineItem.localRange=c}};AdobePSDK.AdBreakTimelineItem=function(b,c){AdobePSDK.JSInterface.call(this);var d;(this._items=c)&&0<this._items.length&&
(d=this._items[0].adBreak);this._timelineItem=new AdobePSDK.TimelineItem(b,new AdobePSDK.TimeRange(0,0),new AdobePSDK.TimeRange(0,0));var e=this;Object.defineProperty(this,"id",{get:function(){return this.delegate?this.delegate.id:e._timelineItem.id}});Object.defineProperty(this,"virtualRange",{get:function(){return this.delegate?this.delegate.virtualRange:e._timelineItem.virtualRange}});Object.defineProperty(this,"localRange",{get:function(){return this.delegate?this.delegate.localRange:e._timelineItem.localRange}});
Object.defineProperty(this,"watched",{get:function(){return this.delegate?this.delegate.watched:e._timelineItem.watched},set:function(a){this._timelineItem.watched=a}});Object.defineProperty(this,"isWatched",{get:function(){return this.delegate?this.delegate.watched:e._timelineItem.watched},set:function(a){this._timelineItem.watched=a}});Object.defineProperty(this,"isTemporary",{get:function(){return this.delegate?this.delegate.isTemporary:e._timelineItem.isTemporary}});Object.defineProperty(this,
"time",{get:function(){return this.delegate?this.delegate.time:e._timelineItem.time}});Object.defineProperty(this,"duration",{get:function(){return this.delegate?this.delegate.duration:e._timelineItem.duration}});Object.defineProperty(this,"items",{get:function(){return this.delegate?this.delegate.items:e._items}});Object.defineProperty(this,"adBreak",{get:function(){return this.delegate?this.delegate.adBreak:d},set:function(a){d=a}});Object.defineProperty(this,"placementType",{get:function(){return this.delegate?
this.delegate.placementType:this._type},set:function(a){this.delegate||(this._type=a)}});a.call(this);return this};AdobePSDK.AdBreakTimelineItem.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.AdBreakTimelineItem,update:a,insertItem:function(b){this._items.push(b);a.call(this)},setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createAdBreakTimelineItemDelegate(this))}})})();(function(){AdobePSDK.AdBreakWatchedPolicy={WATCHED_ON_BEGIN:0,WATCHED_ON_END:1,NEVER:2}})();(function(){AdobePSDK.AdClick=function(a,b,c){AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"id",{get:function(){return this.delegate?this.delegate.id:a}});Object.defineProperty(this,"title",{get:function(){return this.delegate?this.delegate.title:b}});Object.defineProperty(this,"url",{get:function(){return this.delegate?this.delegate.url:c}});Object.defineProperty(this,"isValid",{get:function(){return this.delegate?this.delegate.isValid:null!=c&&0<c.length}});return this};AdobePSDK.AdClick.prototype=
Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.AdClick,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createAdClickDelegate(this))}})})();(function(){AdobePSDK.AdPolicy={PLAY:0,PLAY_FROM_AD_BEGIN:1,PLAY_FROM_AD_BREAK_BEGIN:2,SKIP_TO_NEXT_AD_IN_AD_BREAK:3,SKIP_AD_BREAK:4}})();(function(){AdobePSDK.AdPolicyInfo=function(a,b,c,d,e,f){AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"adBreakTimelineItems",{get:function(){return this.delegate?this.delegate.adBreakTimelineItems:a}});Object.defineProperty(this,"adTimelineItem",{get:function(){return this.delegate?this.delegate.adTimelineItem:b}});Object.defineProperty(this,"currentTime",{get:function(){return this.delegate?this.delegate.currentTime:c}});Object.defineProperty(this,"seekToTime",{get:function(){return this.delegate?
this.delegate.seekToTime:d}});Object.defineProperty(this,"rate",{get:function(){return this.delegate?this.delegate.rate:e}});Object.defineProperty(this,"mode",{get:function(){return this.delegate?this.delegate.mode:f}});return this};AdobePSDK.AdPolicyInfo.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.AdPolicyInfo,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createAdPolicyInfoDelegate(this))}})})();(function(){AdobePSDK.AdPolicyMode={PLAY:0,SEEK:1,TRICK_PLAY:2,PREPARE_BUFFER:3}})();(function(){AdobePSDK.AdPolicySelectorType={AD_POLICY_SELECTOR_DEFAULT:0}})();AdobePSDK.AdSignalingMode={DEFAULT:0,MANIFEST_CUES:1,SERVER_MAP:2,CUSTOM_RANGES:3};AdobePSDK.AdSignalingMode.isValidMode=function(a){return a?a===AdobePSDK.AdSignalingMode.DEFAULT||a===AdobePSDK.AdSignalingMode.MANIFEST_CUES||a===AdobePSDK.AdSignalingMode.SERVER_MAP||a===AdobePSDK.AdSignalingMode.CUSTOM_RANGES:!1};(function(){AdobePSDK.AdTimelineItem=function(a,b,c,d,e){AdobePSDK.JSInterface.call(this);var f=b,g,h;f&&(g=f.begin,h=f.duration);Object.defineProperty(this,"id",{get:function(){return this.delegate?this.delegate.id:a}});Object.defineProperty(this,"virtualRange",{get:function(){return this.delegate?this.delegate.virtualRange:f},set:function(a){f=a}});Object.defineProperty(this,"localRange",{get:function(){return this.delegate?this.delegate.localRange:c}});Object.defineProperty(this,"adBreak",{get:function(){return this.delegate?
this.delegate.adBreak:d}});Object.defineProperty(this,"ad",{get:function(){return this.delegate?this.delegate.ad:e}});Object.defineProperty(this,"time",{get:function(){return this.delegate?this.delegate.time:g}});Object.defineProperty(this,"duration",{get:function(){return this.delegate?this.delegate.duration:h}});Object.defineProperty(this,"watched",{get:function(){if(this.delegate)return this.delegate.watched}});Object.defineProperty(this,"isWatched",{get:function(){if(this.delegate)return this.delegate.watched}});
Object.defineProperty(this,"isTemporary",{get:function(){if(this.delegate)return this.delegate.isTemporary}});return this};AdobePSDK.AdTimelineItem.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.AdTimelineItem,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createAdTimelineItemDelegate(this))}})})();AdobePSDK.AdInsertionType={SERVER_INSERTED:0,CLIENT_INSERTED:1};(function(){AdobePSDK.AdvertisingMetadata=function(){var a=null,b=null,c=null,d;AdobePSDK.Metadata.call(this);var e=AdobePSDK.AdBreakWatchedPolicy.WATCHED_ON_BEGIN;Object.defineProperty(this,"adBreakAsWatched",{get:function(){return this.delegate?this.delegate.adBreakAsWatched:e},set:function(a){e=a;this.delegate&&this.delegate.adBreakAsWatched&&(this.delegate.adBreakAsWatched=a)}});Object.defineProperty(this,"livePreroll",{get:function(){return this.delegate?this.delegate.hasLivePreroll:c},set:function(a){c=
a;this.delegate&&this.delegate.livePreroll&&(this.delegate.livePreroll=a)}});Object.defineProperty(this,"delayAdLoading",{get:function(){return this.delegate?this.delegate.hasDelayAdLoading:b},set:function(a){b=a;this.delegate&&this.delegate.delayAdLoading&&(this.delegate.delayAdLoading=a)}});Object.defineProperty(this,"preroll",{get:function(){return this.delegate?this.delegate.hasPreroll:d},set:function(a){this.delegate?this.delegate.preroll=a:d=a}});Object.defineProperty(this,"mode",{get:function(){return a},
set:function(b){a=b;this.delegate&&this.delegate.mode&&(this.delegate.mode=b)}});Object.defineProperty(this,"hasDelayAdLoading",{get:function(){return this.delegate?this.delegate.hasDelayAdLoading:null}});Object.defineProperty(this,"hasLivePreroll",{get:function(){return this.delegate?this.delegate.hasLivePreroll:null}});this.setDelegate=function(d){AdobePSDK.Metadata.prototype.setDelegate.call(this,d);this.delegate&&(e&&this.delegate.adBreakAsWatched&&(e.setupDelegate(),this.delegate.adBreakAsWatched=
e.getDelegate()),c&&this.delegate.livePreroll&&(this.delegate.livePreroll=c),b&&this.delegate.delayAdLoading&&(this.delegate.delayAdLoading=b),a&&this.delegate.mode&&(a.setupDelegate(),this.delegate.mode=a.getDelegate()))};return this};AdobePSDK.AdvertisingMetadata.prototype=Primetime.helper.extend(AdobePSDK.Metadata.prototype,{constructor:AdobePSDK.AdvertisingMetadata,setupDelegate:function(){if(!this.delegate){var a=Primetime.DelegateFactory.createAdvertisingMetadataDelegate(this);this.setDelegate(a)}}})})();(function(){AdobePSDK.AuditudeSettings=function(){AdobePSDK.AdvertisingMetadata.call(this);var a,b,c,d,e,f,g,h,l,n,k,m,p,u,q;Object.defineProperty(this,"zoneId",{get:function(){return this.delegate?this.delegate.zoneId:a},set:function(b){a=b;this.delegate&&(this.delegate.zoneId=a)}});Object.defineProperty(this,"mediaId",{get:function(){return this.delegate?this.delegate.mediaId:b},set:function(a){b=a;this.delegate&&(this.delegate.mediaId=b)}});Object.defineProperty(this,"defaultMediaId",{get:function(){return this.delegate?
this.delegate.defaultMediaId:c},set:function(a){c=a;this.delegate&&(this.delegate.defaultMediaId=c)}});Object.defineProperty(this,"domain",{get:function(){return this.delegate?this.delegate.domain:d},set:function(a){d=a;this.delegate&&(this.delegate.domain=d)}});Object.defineProperty(this,"targetingInfo",{get:function(){return this.delegate?this.delegate.targetingInfo:e},set:function(a){e=a;this.delegate&&(e.setupDelegate(),this.delegate.targetingInfo=e.getDelegate())}});Object.defineProperty(this,
"customParameters",{get:function(){return this.delegate?this.delegate.customParameters:f},set:function(a){f=a;this.delegate&&(f.setupDelegate(),this.delegate.customParameters=f.getDelegate())}});Object.defineProperty(this,"creativeRepackagingEnabled",{get:function(){return this.delegate?this.delegate.creativeRepackagingEnabled:g},set:function(a){g=a;this.delegate&&(this.delegate.creativeRepackagingEnabled=g)}});Object.defineProperty(this,"crsZoneId",{get:function(){return h},set:function(a){h=a}});
Object.defineProperty(this,"showStaticBanners",{get:function(){return this.delegate?this.delegate.showStaticBanners:l},set:function(a){l=a;this.delegate&&(this.delegate.showStaticBanners=l)}});Object.defineProperty(this,"creativeRepackagingFormat",{get:function(){return this.delegate?this.delegate.creativeRepackagingFormat:n},set:function(a){n=a;this.delegate&&(this.delegate.creativeRepackagingFormat=n)}});Object.defineProperty(this,"responseType",{get:function(){return k},set:function(a){k=a}});
Object.defineProperty(this,"validMimeTypes",{get:function(){return this.delegate?this.delegate.validMimeTypes:m},set:function(a){m=a;this.delegate&&(this.delegate.validMimeTypes=m)}});Object.defineProperty(this,"creativeRepackagingDomain",{get:function(){return this.delegate?this.delegate.creativeRepackagingDomain:p},set:function(a){p=a;this.delegate&&(this.delegate.creativeRepackagingDomain=p)}});Object.defineProperty(this,"fallbackOnInvalidCreative",{get:function(){return this.delegate?this.delegate.fallbackOnInvalidCreative:
u},set:function(a){u=a;this.delegate&&(this.delegate.fallbackOnInvalidCreative=u)}});Object.defineProperty(this,"userAgent",{get:function(){return this.delegate?this.delegate.userAgent:q},set:function(a){q=a;this.delegate&&(this.delegate.userAgent=q)}});Object.defineProperty(this,"vpaidAdWithLive",{get:function(){if(this.delegate)return this.delegate.vpaidAdWithLive}});this.setDelegate=function(h){AdobePSDK.AdvertisingMetadata.prototype.setDelegate.call(this,h);this.delegate&&(a&&(this.delegate.zoneId=
a),b&&(this.delegate.mediaId=b),c&&(this.delegate.defaultMediaId=c),d&&(this.delegate.domain=d),e&&(e.setupDelegate(),this.delegate.targetingInfo=e.getDelegate()),f&&(f.setupDelegate(),this.delegate.customParameters=f.getDelegate()),g&&(this.delegate.creativeRepackagingEnabled=g),n&&(this.delegate.creativeRepackagingFormat=n),l&&(this.delegate.showStaticBanners=l),m&&(this.delegate.validMimeTypes=m))}};AdobePSDK.AuditudeSettings.prototype=Primetime.helper.extend(AdobePSDK.AdvertisingMetadata.prototype,
{constructor:AdobePSDK.AuditudeSettings,setupDelegate:function(){if(!this.delegate){var a=Primetime.DelegateFactory.createAuditudeSettingsDelegate(this);this.setDelegate(a)}},clone:function(){if(this.delegate)return this.delegate.clone()},enableVPAIDAdsOnLive:function(a){if(this.delegate)return this.delegate.enableVPAIDAdsOnLive(a)}})})();(function(){AdobePSDK.BillingMetricsConfiguration=function(){var a=!0,b,c,d,e,f=30,g=30,h=30;Object.defineProperty(this,"isEnabled",{get:function(){return this.delegate?this.delegate.isEnabled:a},set:function(b){this.delegate?this.delegate.enabled=b:a=b}});Object.defineProperty(this,"publisherId",{get:function(){return this.delegate?this.delegate.publisherId:b},set:function(a){this.delegate?this.delegate.publisherId=a:b=a}});Object.defineProperty(this,"reportSuiteId",{get:function(){return this.delegate?
this.delegate.reportSuiteId:c},set:function(a){this.delegate?this.delegate.reportSuiteId=a:c=a}});Object.defineProperty(this,"visitorId",{get:function(){return this.delegate?this.delegate.visitorId:d},set:function(a){this.delegate?this.delegate.visitorId=a:d=a}});Object.defineProperty(this,"trackingServer",{get:function(){return this.delegate?this.delegate.trackingServer:e},set:function(a){this.delegate?this.delegate.trackingServer=a:e=a}});Object.defineProperty(this,"stdVODBillableDurationMinutes",
{get:function(){return this.delegate?this.delegate.stdVODBillableDurationMinutes:f},set:function(a){this.delegate?this.delegate.stdVODBillableDurationMinutes=a:f=a}});Object.defineProperty(this,"proVODBillableDurationMinutes",{get:function(){return this.delegate?this.delegate.proVODBillableDurationMinutes:g},set:function(a){this.delegate?this.delegate.proVODBillableDurationMinutes=a:g=a}});Object.defineProperty(this,"liveBillableDurationMinutes",{get:function(){return this.delegate?this.delegate.liveBillableDurationMinutes:
h},set:function(a){this.delegate?this.delegate.liveBillableDurationMinutes=a:h=a}});this.setDelegate=function(l){AdobePSDK.JSInterface.prototype.setDelegate.call(this,l);this.delegate&&(a&&(this.delegate.enabled=a),b&&(this.delegate.publisherId=b),c&&(this.delegate.reportSuiteId=c),d&&(this.delegate.visitorId=d),e&&(this.delegate.trackingServer=e),f&&(this.delegate.stdVODBillableDurationMinutes=f),g&&(this.delegate.proVODBillableDurationMinutes=g),h&&(this.delegate.liveBillableDurationMinutes=h))}};
AdobePSDK.BillingMetricsConfiguration.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.BillingMetricsConfiguration,setupDelegate:function(){if(!this.delegate){var a=Primetime.DelegateFactory.createBillingMetricsConfigurationDelegate(this);this.setDelegate(a)}}})})();(function(){AdobePSDK.ContentFactory=function(){return this};AdobePSDK.ContentFactory.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.ContentFactory,retrieveAdPolicySelectorCallbackFunc:function(){},retrieveResolversCallbackFunc:function(){},retrieveOpportunityGeneratorsCallbackFunc:function(){},retrieveCustomAdPlaybackHandlersCallbackFunc:function(){},setupDelegate:function(){}})})();(function(){AdobePSDK.ContentResolver=function(){return this};AdobePSDK.ContentResolver.prototype={constructor:AdobePSDK.ContentResolver,configureCallbackFunc:function(){},canResolveCallbackFunc:function(){},resolveCallbackFunc:function(){},cleanupCallbackFunc:function(){}}})();(function(){AdobePSDK.ContentResolverClient=function(){return this};AdobePSDK.ContentResolverClient.prototype={constructor:AdobePSDK.ContentResolverClient,process:function(){},notifyCompleted:function(){},notifyFailed:function(){}}})();(function(){AdobePSDK.ContentTracker=function(){return this};AdobePSDK.ContentTracker.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.ContentTracker,onAdStartCallbackFunc:function(){},onAdProgressCallbackFunc:function(){},onAdCompleteCallbackFunc:function(){},onAdClickCallbackFunc:function(){},onAdBreakStartCallbackFunc:function(){},onAdBreakCompleteCallbackFunc:function(){},onAdErrorCallbackFunc:function(){},setupDelegate:function(){this.delegate=Primetime.DelegateFactory.createContentTrackerDelegate(this)}})})();(function(){AdobePSDK.CustomAdHandler=function(){return this};AdobePSDK.CustomAdHandler.prototype={constructor:AdobePSDK.CustomAdHandler,configureCallbackFunc:function(){},initAdCallbackFunc:function(){},startAdCallbackFunc:function(){},pauseAdCallbackFunc:function(){},resumeAdCallbackFunc:function(){},stopAdCallbackFunc:function(){},disposeCallbackFunc:function(){}}})();(function(){AdobePSDK.CustomAdHandlerClient=function(){return this};AdobePSDK.CustomAdHandlerClient.prototype={constructor:AdobePSDK.CustomAdHandlerClient,onAdBegin:function(){},onAdPaused:function(){},onAdResumed:function(){},onAdError:function(){},onAdEnd:function(){},onAdProgress:function(a,b){},onAdClickThru:function(){}}})();(function(){AdobePSDK.CustomRangeMetadata=function(){var a,b,c;Object.defineProperty(this,"type",{get:function(){return this.delegate?this.delegate.type:a},set:function(b){a=b;this.delegate&&(this.delegate.type=b)}});Object.defineProperty(this,"adjustSeekPosition",{get:function(){return this.delegate?this.delegate.adjustSeekPosition:b},set:function(a){b=a;this.delegate&&(this.delegate.adjustSeekPosition=a)}});Object.defineProperty(this,"timeRangeList",{get:function(){return this.delegate?this.delegate.timeRangeList:
c},set:function(a){c=a;if(this.delegate){var b=[],f;for(f in a){var g=a[f];g&&(g.setupDelegate(),b.push(g.getDelegate()))}this.delegate.timeRangeList=b}}});this.setDelegate=function(d){AdobePSDK.JSInterface.prototype.setDelegate.call(this,d);if(this.delegate&&(a&&(this.delegate.type=a),b&&(this.delegate.adjustSeekPosition=b),c)){d=[];for(var e in c){var f=c[e];f&&(f.setupDelegate(),d.push(f.getDelegate()))}this.delegate.timeRangeList=d}};return this};AdobePSDK.CustomRangeMetadata.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,
{constructor:AdobePSDK.CustomRangeMetadata,setupDelegate:function(){if(!this.delegate){var a=Primetime.DelegateFactory.createCustomRangeMetadataDelegate(this);this.setDelegate(a)}}})})();(function(){AdobePSDK.CustomRangeType={MARK_RANGE:1,DELETE_RANGE:2,REPLACE_RANGE:3}})();(function(){AdobePSDK.DeleteRangeTimelineOperation=function(a){var b;Object.defineProperty(this,"isValid",{get:function(){if(this.delegate)return this.delegate.isValid}});Object.defineProperty(this,"placement",{get:function(){return this.delegate?this.delegate.placement:b},set:function(a){b=a;if(this.delegate){var d;a&&(a.setupDelegate(),d=a.getDelegate());this.delegate.placement=d}}});this.setDelegate=function(a){AdobePSDK.JSInterface.prototype.setDelegate.call(this,a);this.delegate&&b&&(b.setupDelegate(),
this.delegate.placement=b)};return this};AdobePSDK.DeleteRangeTimelineOperation.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.DeleteRangeTimelineOperation,setupDelegate:function(){if(!this.delegate){var a=Primetime.DelegateFactory.createDeleteRangeTimelineOperationDelegate(this);this.setDelegate(a)}}})})();(function(){AdobePSDK.DeviceInformation=function(){var a=Primetime.BrowserExtensions.getAllPlatformInfo();Object.defineProperty(this,"os",{get:function(){if(this.delegate)return this.delegate.os;if(a)return a.os+" "+a.osVersion}});this.getId=function(){};Object.defineProperty(this,"densityDPI",{get:function(){if(this.delegate)return this.delegate.densityDPI}});Object.defineProperty(this,"heightPixels",{get:function(){if(this.delegate)return this.delegate.heightPixels;if(a)return a.screenHeight}});
Object.defineProperty(this,"widthPixels",{get:function(){if(this.delegate)return this.delegate.widthPixels;if(a)return a.screenWidth}});Object.defineProperty(this,"isSeekToKeyFrame",{get:function(){if(this.delegate)return this.delegate.isSeekToKeyFrame}});this.getBrowser=function(){return a?{browserName:a.browser,browserVersion:a.browserVersion}:null}};AdobePSDK.DeviceInformation.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.DeviceInformation,setupDelegate:function(){this.delegate||
(this.delegate=Primetime.DelegateFactory.createDeviceInformationDelegate(this))}})})();(function(){AdobePSDK.DRMAuthenticationMethod=function(){return this};AdobePSDK.DRMAuthenticationMethod={UNKNOWN:0,ANONYMOUS:1,USERNAME_AND_PASSWORD:2};AdobePSDK.DRMAuthenticationMethod.prototype={constructor:AdobePSDK.DRMAuthenticationMethod}})();(function(){AdobePSDK.initiateDRMWorkFlow=function(){return AdobePSDK.PSDKErrorCode.kECSuccess};AdobePSDK.DRMManager=function(a,b){this._mediaPlayer=a;this._nativeDRMManager=b;this._maxOperationTime=0;this._sessionType=this._protectionData=null;Object.defineProperty(this,"maxOperationTime",{get:function(){return AdobePSDK.PSDKErrorCode.kECNotSupported},set:function(){return AdobePSDK.PSDKErrorCode.kECNotSupported}});Object.defineProperty(this,"eventDispatcher",{get:function(){if(this.delegate)return this.delegate.eventDispatcher}});
return this};AdobePSDK.DRMAcquireLicenseSettings={kDRMLicenseForceRefresh:0,FORCE_REFRESH:0,kDRMLicenseLocalOnly:1,LOCAL_ONLY:1,kDRMLicenseAllowServer:2,ALLOW_SERVER:2};AdobePSDK.DRMManager.prototype={constructor:AdobePSDK.DRMManager,_setNativeDRMManager:function(a){this._nativeDRMManager!==a&&(this._nativeDRMManager=a,this._protectionData&&this.setProtectionData(this._protectionData),this._sessionType&&this.setEMESessionType(this._sessionType))},acquireLicense:function(a,b,c,d){return"undefined"===
typeof a||null===a?AdobePSDK.PSDKErrorCode.kECInvalidArgument:this._nativeDRMManager?(a.delegate?this._nativeDRMManager.acquireLicense(a.delegate,b,c,d):this._nativeDRMManager.acquireLicense(a,b,c,d),AdobePSDK.PSDKErrorCode.kECSuccess):AdobePSDK.PSDKErrorCode.kECIllegalState},acquirePreviewLicense:function(){return AdobePSDK.PSDKErrorCode.kECNotSupported},authenticate:function(a,b,c,d,e,f){return"undefined"===typeof a||null===a?AdobePSDK.PSDKErrorCode.kECInvalidArgument:this._nativeDRMManager?(a.delegate?
this._nativeDRMManager.authenticate(a.delegate,b,c,d,e,f):this._nativeDRMManager.authenticate(a,b,c,d,e,f),AdobePSDK.PSDKErrorCode.kECSuccess):AdobePSDK.PSDKErrorCode.kECIllegalState},createMetadataFromBytes:function(){return AdobePSDK.PSDKErrorCode.kECNotSupported},initialize:function(a){return this._mediaPlayer&&this._mediaPlayer.status===AdobePSDK.MediaPlayerStatus.IDLE&&this._nativeDRMManager?(this._nativeDRMManager.initializeDRM(a),AdobePSDK.PSDKErrorCode.kECSuccess):AdobePSDK.PSDKErrorCode.kECIllegalState},
joinLicenseDomain:function(){return AdobePSDK.PSDKErrorCode.kECNotSupported},leaveLicenseDomain:function(){return AdobePSDK.PSDKErrorCode.kECNotSupported},resetDRM:function(){return AdobePSDK.PSDKErrorCode.kECNotImplemented},returnLicense:function(a,b,c,d,e,f){return"undefined"===typeof f||null===f?AdobePSDK.PSDKErrorCode.kECInvalidArgument:this._nativeDRMManager?(this._nativeDRMManager.returnLicense(a,b,c,d,f,e),AdobePSDK.PSDKErrorCode.kECSuccess):AdobePSDK.PSDKErrorCode.kECIllegalState},setAuthenticationToken:function(a,
b,c,d){return"undefined"===typeof a||null===a?AdobePSDK.PSDKErrorCode.kECInvalidArgument:this._nativeDRMManager?(this._nativeDRMManager.setAuthenticationToken(a,b,c,d),AdobePSDK.PSDKErrorCode.kECSuccess):AdobePSDK.PSDKErrorCode.kECIllegalState},storeLicenseBytes:function(){return AdobePSDK.PSDKErrorCode.kECNotSupported},setProtectionData:function(a){this._protectionData=a;return this._nativeDRMManager&&this._nativeDRMManager.setProtectionData?this._nativeDRMManager.setProtectionData(a):AdobePSDK.PSDKErrorCode.kECIllegalState},
setEMESessionType:function(a){if("undefined"===typeof a||null===a)return AdobePSDK.PSDKErrorCode.kECInvalidArgument;this._sessionType=a;return this._nativeDRMManager&&this._nativeDRMManager.setEMESessionType?(this._nativeDRMManager.setEMESessionType(a),AdobePSDK.PSDKErrorCode.kECSuccess):AdobePSDK.PSDKErrorCode.kECIllegalState}}})();(function(){AdobePSDK.DRMMetadata=function(a,b,c,d,e){Object.defineProperty(this,"serverUrl",{get:function(){return this.delegate?this.delegate.serverUrl:a}});Object.defineProperty(this,"licenseId",{get:function(){return this.delegate?this.delegate.licenseID:null}});Object.defineProperty(this,"policies",{get:function(){return this.delegate?this.delegate.policies:c}});Object.defineProperty(this,"systemString",{get:function(){return d}});Object.defineProperty(this,"initData",{get:function(){return e}});
return this};AdobePSDK.DRMMetadata.prototype={constructor:AdobePSDK.DRMMetadata}})();(function(){AdobePSDK.DRMMetadataInfo=function(){Object.defineProperty(this,"drmMetadata",{get:function(){if(this.delegate)return this.delegate.drmMetadata}});Object.defineProperty(this,"prefetchTimestamp",{get:function(){if(this.delegate)return this.delegate.prefetchTimestamp}});Object.defineProperty(this,"timeRange",{get:function(){if(this.delegate)return this.delegate.timeRange}});return this};AdobePSDK.DRMMetadataInfo.INVALID_TIME_RANGE_START_POSITION_AVE=-1E3;AdobePSDK.DRMMetadataInfo.INVALID_TIME_RANGE_START_POSITION_PSDK=
-1;AdobePSDK.DRMMetadataInfo.MAX_TIME=65535E3;AdobePSDK.DRMMetadataInfo.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.DRMMetadataInfo,setupDelegate:function(){if(!this.delegate){var a=Primetime.DelegateFactory.createDRMMetadataInfoDelegate(this);this.setDelegate(a)}}})})();(function(){AdobePSDK.DRMPolicy=function(){Object.defineProperty(this,"authenticationDomain",{get:function(){return this.delegate?this.delegate.authenticationDomain:null}});Object.defineProperty(this,"authenticationMethod",{get:function(){return this.delegate?this.delegate.authenticationMethod:null}});Object.defineProperty(this,"displayName",{get:function(){return this.delegate?this.delegate.displayName:null}});Object.defineProperty(this,"licenseDomain",{get:function(){return this.delegate?this.delegate.licenseDomain:
null}});return this};AdobePSDK.DRMPolicy.prototype={constructor:AdobePSDK.DRMPolicy}})();(function(){AdobePSDK.DRMLicenseDomain=function(){var a=null;Object.defineProperty(this,"authenticationDomain",{get:function(){return this.delegate?this.delegate.authenticationDomain:null}});Object.defineProperty(this,"authenticationMethod",{get:function(){return this.delegate?this.delegate.authenticationMethod:null}});Object.defineProperty(this,"serverUrl",{get:function(){return this.delegate?this.delegate.serverUrl:null}});Object.defineProperty(this,"name",{get:function(){return this.delegate?this.delegate.name:
a},set:function(b){this.delegate?this.delegate.name=b:a=b}});return this};AdobePSDK.DRMLicenseDomain.prototype={constructor:AdobePSDK.DRMLicenseDomain}})();(function(){AdobePSDK.DRMLicense=function(a,b){var c={},d=this;Object.defineProperty(this,"bytes",{get:function(){return d.getBytes()}});Object.defineProperty(this,"licenseStartDate",{get:function(){return null}});Object.defineProperty(this,"licenseEndDate",{get:function(){return null}});Object.defineProperty(this,"offlineStorageStartDate",{get:function(){return null}});Object.defineProperty(this,"offlineStorageEndDate",{get:function(){return null}});Object.defineProperty(this,"serverURL",{get:function(){return null}});
Object.defineProperty(this,"licenseID",{get:function(){return null}});Object.defineProperty(this,"policyID",{get:function(){return null}});Object.defineProperty(this,"playbackTimeWindow",{get:function(){return null}});Object.defineProperty(this,"customProperties",{get:function(){return c}});Object.defineProperty(this,"session",{get:function(){return a}});Object.defineProperty(this,"message",{get:function(){return b}});return this};AdobePSDK.DRMLicense.prototype={constructor:AdobePSDK.DRMLicense,toBytes:function(){return AdobePSDK.PSDKErrorCode.kECNotImplemented}}})();(function(){AdobePSDK.DRMLicenseRequest=function(a,b,c,d,e){this._licenseMessage=a;this._systemString=b;this._rawInitData=c;this._generatedInitData=d;this._assetId=e;var f=this;Object.defineProperty(this,"licenseMessage",{get:function(){return f._licenseMessage}});Object.defineProperty(this,"rawInitData",{get:function(){return f._rawInitData}});Object.defineProperty(this,"generatedInitData",{get:function(){return f._generatedInitData}});Object.defineProperty(this,"systemString",{get:function(){return f.getSystemString()}});
Object.defineProperty(this,"assetId",{get:function(){return f._assetId}});return this};AdobePSDK.DRMLicenseRequest.prototype={constructor:AdobePSDK.DRMLicenseRequest}})();(function(){AdobePSDK.DRMPlaybackTimeWindow=function(){Object.defineProperty(this,"playbackPeriodInSeconds",{get:function(){return 0}});Object.defineProperty(this,"playbackStartDate",{get:function(){return-1}});Object.defineProperty(this,"playbackEndDate",{get:function(){return-1}});return this};AdobePSDK.DRMPlaybackTimeWindow.prototype={constructor:AdobePSDK.DRMPlaybackTimeWindow}})();(function(){AdobePSDK.DRMWorkflowInitializationType={APP_CONTEXT:0,URL_CONTEXT:1,DRM_MANAGER_CONTEXT:2}})();(function(){AdobePSDK.Opportunity=function(a,b,c,d){AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"placement",{get:function(){return this.delegate?this.delegate.placement:b}});Object.defineProperty(this,"settings",{get:function(){return this.delegate?this.delegate.settings:c}});Object.defineProperty(this,"customParams",{get:function(){return this.delegate?this.delegate.customParams:d}});Object.defineProperty(this,"customParameters",{get:function(){return this.delegate?this.delegate.customParameters:
d}});Object.defineProperty(this,"id",{get:function(){return this.delegate?this.delegate.id:a}});return this};AdobePSDK.Opportunity.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.Opportunity,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createOpportunityDelegate(this))}})})();(function(){AdobePSDK.OpportunityGeneratorClient=function(){return this};AdobePSDK.OpportunityGeneratorClient.prototype={constructor:AdobePSDK.OpportunityGeneratorClient,resolve:function(){},hold:function(){},cancel:function(){}}})();(function(){AdobePSDK.Placement=function(a,b,c,d){AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"type",{get:function(){return this.delegate?this.delegate.type:a}});Object.defineProperty(this,"time",{get:function(){return this.delegate?this.delegate.time:b}});Object.defineProperty(this,"duration",{get:function(){return this.delegate?this.delegate.duration:c}});Object.defineProperty(this,"mode",{get:function(){return this.delegate?this.delegate.mode:d}});Object.defineProperty(this,"range",
{get:function(){return new AdobePSDK.TimeRange(b,c)}});Object.defineProperty(this,"isValid",{get:function(){if(this.delegate)return this.delegate.isValid}});return this};AdobePSDK.Placement.UNKNOWN_TIME=-1;AdobePSDK.Placement.UNKNOWN_DURATION=-1;AdobePSDK.PlacementType={PRE_ROLL:0,MID_ROLL:1,POST_ROLL:2,SERVER_MAP:3};AdobePSDK.PlacementMode={DEFAULT:0,INSERT:1,REPLACE:2,DELETE:3,MARK:4,FREEREPLACE:5};AdobePSDK.Placement.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.Placement,
compareTo:function(a){if(this.delegate)return a.setupDelegate(),this.delegate.compareTo(a.getDelegate())},setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createPlacementDelegate(this))}})})();(function(){AdobePSDK.Reservation=function(a){AdobePSDK.JSInterface.call(this);var b=a.begin;Object.defineProperty(this,"range",{get:function(){return this.delegate?this.delegate.range:a}});Object.defineProperty(this,"hold",{get:function(){return this.delegate?this.delegate.hold:b}});return this};AdobePSDK.Reservation.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.Reservation,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createReservationDelegate(this))}})})();(function(){AdobePSDK.ResolverType={RESOLVER_AUDITUDE:0,RESOLVER_TEST:1,RESOLVER_JSON:2}})();(function(){AdobePSDK.TagDecoder=function(a){this.setupDelegate=function(){if(!this.delegate){var b=Primetime.DelegateFactory.createTagDecoderDelegate(a);this.setDelegate(b)}};return this};AdobePSDK.TagDecoder.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.TagDecoder,process:function(a){if(this.delegate&&this.delegate.process)return this.delegate.process(a)}})})();(function(){AdobePSDK.TagDecoderType={SCTE35:0,TEXT:1,UNKNOWN:2}})();(function(){AdobePSDK.TimedMetadata=function(a,b,c,d,e,f){AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"type",{get:function(){return this.delegate?this.delegate.type:a}});Object.defineProperty(this,"time",{get:function(){return this.delegate?this.delegate.time:b}});Object.defineProperty(this,"id",{get:function(){return this.delegate?this.delegate.id:c}});Object.defineProperty(this,"name",{get:function(){return this.delegate?this.delegate.name:d}});Object.defineProperty(this,"content",
{get:function(){return this.delegate?this.delegate.content:e}});Object.defineProperty(this,"metadata",{get:function(){return this.delegate?this.delegate.metadata:f}});return this};AdobePSDK.TimedMetadataType={TAG:0,ID3:1};AdobePSDK.TimedMetadata.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.TimedMetadata,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createTimedMetadataDelegate(this))},compareTo:function(a){if(this.delegate)return a.setupDelegate(),
this.delegate.compareTo(a.getDelegate())},equals:function(a){if(this.delegate)return a.setupDelegate(),this.delegate.equals(a.getDelegate())}})})();(function(){AdobePSDK.Timeline=function(a){AdobePSDK.JSInterface.call(this);Object.defineProperty(this,"timelineMarkers",{get:function(){return this.delegate?this.delegate.timelineMarkers:a._videoEngineTimeline?a._videoEngineTimeline.getAdBreakTimelineItems():[]}});Object.defineProperty(this,"timelineItems",{get:function(){return this.delegate?this.delegate.timelineItems:[]}});this.convertToLocalTime=function(b){return this.delegate?this.delegate.convertToLocalTime(b):a._videoEngineTimeline?a._videoEngineTimeline.convertToLocalTime(b):
b};this.convertToVirtualTime=function(b){return this.delegate?this.delegate.convertToVirtualTime(b):a._videoEngineTimeline?a._videoEngineTimeline.convertToVirtualTime(b):b};return this};AdobePSDK.Timeline.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.Timeline,checkIfPositionIsReserved:function(a){if(this.delegate)return this.delegate.checkIfPositionIsReserved(a)},setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createTimelineDelegate(this))}})})();(function(){AdobePSDK.TimelineItem=function(a,b,c){AdobePSDK.JSInterface.call(this);var d=b,e=c,f=!1;Object.defineProperty(this,"id",{get:function(){return this.delegate?this.delegate.id:a}});Object.defineProperty(this,"virtualRange",{get:function(){return this.delegate?this.delegate.virtualRange:d},set:function(a){d=a}});Object.defineProperty(this,"localRange",{get:function(){return e},set:function(a){e=a}});Object.defineProperty(this,"isWatched",{get:function(){return this.delegate?this.delegate.watched:
f},set:function(a){f=a}});Object.defineProperty(this,"watched",{get:function(){return this.delegate?this.delegate.watched:f},set:function(a){f=a}});Object.defineProperty(this,"isTemporary",{get:function(){return this.delegate?this.delegate.isTemporary:!0}});Object.defineProperty(this,"time",{get:function(){return this.delegate?this.delegate.time:d.begin}});Object.defineProperty(this,"duration",{get:function(){return this.delegate?this.delegate.duration:d.duration}});return this};AdobePSDK.TimelineItem.prototype=
Primetime.helper.extend(AdobePSDK.JSInterface.prototype,{constructor:AdobePSDK.TimelineItem,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createTimelineItemDelegate(this))}})})();(function(){AdobePSDK.TimelineMarker=function(a,b){Object.defineProperty(this,"time",{get:function(){return this.delegate?this.delegate.time:a}});Object.defineProperty(this,"duration",{get:function(){return this.delegate?this.delegate.duration:b}});return this};AdobePSDK.TimelineMarker.prototype={constructor:AdobePSDK.TimelineMarker,setupDelegate:function(){}}})();(function(){AdobePSDK.TimelineOperation=function(){Object.defineProperty(this,"placement",{get:function(){}});return this};AdobePSDK.TimelineOperation.prototype={constructor:AdobePSDK.TimelineOperation}})();(function(){AdobePSDK.TimelineOperationType={AdBreakPlacement:"AdBreakPlacement",AdBreakMove:"AdBreakMove",AdBreakRemoval:"AdBreakRemoval",AdBreakRestore:"AdBreakRestore"}})();(function(){AdobePSDK.TimeRange=function(a,b){AdobePSDK.JSInterface.call(this);var c=a,d=b,e=a+b;Object.defineProperty(this,"begin",{get:function(){return this.delegate?this.delegate.begin:c}});Object.defineProperty(this,"end",{get:function(){return this.delegate?this.delegate.end:e}});Object.defineProperty(this,"duration",{get:function(){return this.delegate?this.delegate.duration:d}});Object.defineProperty(this,"isValid",{get:function(){return this.delegate?this.delegate.isValid:null}});this.contains=
function(a){return this.delegate?this.delegate.contains(a):a>=c&&a<=e};this.expandTimeRange=function(a){a&&(this.delegate&&this.delegate.expandTimeRange(a),-1!=c&&e>c?(c>a.begin&&(c=a.begin),e<a.end&&(e=a.end)):(c=a.begin,e=a.end),e>=c&&(d=e-c))};this.compareTo=function(a){if(this.delegate)return a.setupDelegate(),this.compareTo(a.getDelegate())};this.intersects=function(a){if(this.delegate)return a.setupDelegate(),this.intersects(a.getDelegate())};return this};AdobePSDK.TimeRange.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,
{constructor:AdobePSDK.TimeRange,setupDelegate:function(){this.delegate||(this.delegate=Primetime.DelegateFactory.createTimeRangeDelegate(this))}})})();(function(){AdobePSDK.ReplaceTimeRange=function(a,b,c){AdobePSDK.TimeRange.call(this,a,b);Object.defineProperty(this,"replaceDuration",{get:function(){return this.delegate?this.delegate.replaceDuration:c}});this.setDelegate=function(a){AdobePSDK.TimeRange.prototype.setDelegate.call(this,a)};return this};AdobePSDK.ReplaceTimeRange.prototype=Primetime.helper.extend(AdobePSDK.TimeRange.prototype,{constructor:AdobePSDK.ReplaceTimeRange,setupDelegate:function(){if(!this.delegate){var a=Primetime.DelegateFactory.createReplaceTimeRangeDelegate(this);
this.setDelegate(a)}}})})();(function(){AdobePSDK.Track=function(a,b,c,d){Object.defineProperty(this,"name",{get:function(){return this.delegate?this.delegate.name:a}});Object.defineProperty(this,"language",{get:function(){return this.delegate?this.delegate.language:b}});Object.defineProperty(this,"isDefault",{get:function(){return this.delegate?this.delegate.isDefault:c}});Object.defineProperty(this,"isAutoSelect",{get:function(){return this.delegate?this.delegate.isAutoSelect:d}});return this};AdobePSDK.Track.prototype=Primetime.helper.extend(AdobePSDK.JSInterface.prototype,
{constructor:AdobePSDK.Track,setupDelegate:function(){if(!this.delegate){var a=Primetime.DelegateFactory.createAudioTrackDelegate(this);this.setDelegate(a)}}})})();(function(){AdobePSDK.Version=function(){return this};AdobePSDK.Version.version="2.4.3";AdobePSDK.Version.description="Browser TVSDK";AdobePSDK.Version.major=2;AdobePSDK.Version.minor=4;AdobePSDK.Version.revision=3;AdobePSDK.Version.revisionMinor=1;AdobePSDK.Version.apiVersion=1;AdobePSDK.Version.prototype={constructor:AdobePSDK.Version}})();(function(){AdobePSDK.OpportunityGenerator=function(){return this};AdobePSDK.OpportunityGenerator.prototype={constructor:AdobePSDK.OpportunityGenerator,cleanupCallbackFunc:function(){},updateCallbackFunc:function(){},configureCallbackFunc:function(){}}})();(function(){Primetime.defaults={DEFAULT_INITIAL_BITRATE:0,DEFAULT_MAX_BITRATE:Number.MAX_VALUE,DEFAULT_MIN_BITRATE:0,DEFAULT_MAX_PLAYOUT_RATE:1,DEFAULT_MAX_PLAYOUT_RATE_WITHOUT_TRICK_PLAY_PROFILES:8,DEFAULT_MAX_PLAYOUT_RATE_TRICKPLAY_STREAM:64,DEFAULT_ABR_POLICY:AdobePSDK.ABRControlParameters.MODERATE_POLICY,DEFAULT_INITIAL_BUFFER_TIME:2E3,DEFAULT_MIN_BUFFER_TIME:2E4,BUFFER_TIME_AT_TOP_QUALITY:3E4,TOKEN_URL:"token/",DRM_METADATA_PATH:"./drmMetadata/",_abrControlParameters:null,_bufferControlParameters:null,
_swfPath:"./",_authorizationTokenFilename:"hlsAF_localhost.dat",_authorizationTokenType:"DAT",_authorizationTokenPath:null,_drmMetadataPath:null,_config:null,getABRControlParameters:function(){this._abrControlParameters||(this._abrControlParameters=new AdobePSDK.ABRControlParameters(this.DEFAULT_INITIAL_BITRATE,this.DEFAULT_MIN_BITRATE,this.DEFAULT_MAX_BITRATE,this.DEFAULT_ABR_POLICY,this.DEFAULT_MAX_PLAYOUT_RATE,this.DEFAULT_MIN_BITRATE,this.DEFAULT_MAX_BITRATE));return this._abrControlParameters},
getBufferControlParameters:function(){this._bufferControlParameters||(this._bufferControlParameters=new AdobePSDK.BufferControlParameters(this.DEFAULT_INITIAL_BUFFER_TIME,this.BUFFER_TIME_AT_TOP_QUALITY));return this._bufferControlParameters},setSWFPath:function(a){this._swfPath=a},getSWFPath:function(){return this._swfPath},setAuthorizationTokenFilename:function(a){this._authorizationTokenFilename=a},getAuthorizationTokenFilename:function(){return this._authorizationTokenFilename},setAuthorizationTokenType:function(a){this._authorizationTokenType=
a},getAuthorizationTokenType:function(){return this._authorizationTokenType},setAuthorizationTokenPath:function(a){this._authorizationTokenPath=a},getAuthorizationTokenPath:function(){return this._authorizationTokenPath?this._authorizationTokenPath:this._swfPath+this.TOKEN_URL},setDRMMetadataPath:function(a){this._drmMetadataPath=a},getDRMMetadataPath:function(){return this._drmMetadataPath?this._drmMetadataPath:this.DRM_METADATA_PATH},getConfig:function(){this._config||(this._config=new AdobePSDK.MediaPlayerItemConfig,
this._config.networkConfiguration=new AdobePSDK.NetworkConfiguration);return this._config}}})();(function(){AdobePSDK.PSDKEventDispatcher=function(a){var b={},c=function(a){var c=b[a];c||(c=[],b[a]=c);return c};return{addListener:function(a,b){c(a).push(b);return AdobePSDK.PSDKErrorCode.kECSuccess},removeListener:function(a,b){var f=c(a),g=f.indexOf(b);return-1!=g?(f.splice(g,1),AdobePSDK.PSDKErrorCode.kECSuccess):AdobePSDK.PSDKErrorCode.kECElementNotFound},purgeListeners:function(a){a?b[a]=[]:b={};return AdobePSDK.PSDKErrorCode.kECSuccess},dispatchEvent:function(b){for(var e=c(b.type),f=0;f<
e.length;f++)e[f].call(a,b);return AdobePSDK.PSDKErrorCode.kECSuccess},getListeners:function(){return b}}};AdobePSDK.PSDKEventDispatcher.prototype={constructor:AdobePSDK.PSDKEventDispatcher}})();(function(){var a=function(){var a=this.virtualTimelineManager.getActiveItem();a||(a=this.getVirtualTimeline().getItems(),0<a.length&&(a=a[0],this.onFirstVirtualTimelineItemActivating(a),this.virtualTimelineManager.activateItem(a)),(a=this.virtualTimelineManager.getActiveItem())&&a.getMediaPlayerImpl().activateStream(a.getStreamInfo()))},b=function(){this.log("_checkIfTimelineIsReady called","INFO");this._isReady?this.log("_checkIfTimelineIsReady called is Ready","INFO"):this._initializedVirtualTimeline&&
this._didCreateOrUpdateVirtualTimelineItems?(this._isReady=!0,this.log("_checkIfTimelineIsReady called is ready now","INFO"),this.virtualTimelineManager.debugPrint(),this.isMainContentPlayer()&&(this.log("_checkIfTimelineIsReady called is main content player","INFO"),a.call(this),this._delegate._nativeNotification("prepared"))):this.log("_checkIfTimelineIsReady called : "+this._initializedVirtualTimeline+" "+this._didCreateOrUpdateVirtualTimelineItems,"INFO")};Primetime.MediaPlayerImpl=function(){};
Primetime.MediaPlayerImpl.prototype={constructor:Primetime.MediaPlayerImpl,system:void 0,log:void 0,timeline:void 0,parser:void 0,timelineImpl:void 0,virtualTimelineManager:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,_initializedVirtualTimeline:!1,_protectionController:void 0,_streamController:null,_playbackVolume:1,_view:null,_delegate:null,_mediaResource:null,_item:null,_drmManager:null,_seekExpected:null,_playbackStarted:!1,_playbackStopped:!1,_currentLicense:null,_isAdOnly:!1,_config:Primetime.defaults.getConfig(),
_mediaPlayerClient:null,_resourceType:null,_virtualTimelineManager:null,_didCreateOrUpdateVirtualTimelineItems:!1,_fpsSampleTime:-Infinity,_fpsSample:0,_framesSample:0,_seekMode:AdobePSDK.AdPolicyMode.PLAY,_returningFromTrickPlay:!1,_initialTrickPlayPosition:-1,_abrControlParameters:Primetime.defaults.getABRControlParameters(),protectionDataConst:{},setup:function(){this._isAdOnly?this.virtualTimelineManager=null:(this.system.mapSingleton("virtualTimelineManager",Primetime.VirtualTimelineManager),
this.virtualTimelineManager=this.system.getObject("virtualTimelineManager"),this._timelineMonitor=this.system.getObject("timelineMonitor"),this._timelineMonitor.setVirtualTimeline(this.virtualTimelineManager.virtualTimeline))},startup:function(a,b){this._isAdOnly=b;this._delegate=a},setStreamController:function(a){this._streamController=a},getStreamController:function(){return this._streamController},haveCurrentStreamTime:function(){return!1},getProgressTime:function(){if(this.haveCurrentStreamTime())return this.getCurrentStreamTime()},
getProtectionController:function(){this._protectionController||(this._protectionController=this.system.getObject("protectionController"),this._protectionController.initListeners(),this._protectionController.setProtectionData(this.protectionDataConst));return this._protectionController},prepareToPlay:function(a){if(this._mediaResource){this._delegate&&this._delegate._nativeNotification("preparing");"undefined"!==typeof a&&null!==a&&0!==a&&-2!==a&&(null!==this._streamController&&this._streamController.getStreams()&&
this._streamController.getStreams().length&&(this._streamController.getStreams()[0].getStreamInfo().seekTimeBeforePlay=a/1E3),this.virtualTimelineManager&&this.virtualTimelineManager.virtualTimeline&&this.virtualTimelineManager.virtualTimeline._mainContentTimelineItem&&this.virtualTimelineManager.virtualTimeline._mainContentTimelineItem.setSeekTimeBeforePlay(a));if(this.isMainContentPlayer()){this._item&&this._item.isLive()&&-2===a&&(a=this.getLiveStartTime(),0<a&&3E4<a&&(a-=3E4));var b=null,e=!0;
this._config&&(b=this._config.advertisingFactory);b||(b=new Primetime.DefaultContentFactory,e=!1);this._mediaPlayerClient=this.system.getObject("mediaPlayerClient");var f=this.getStreamPlaybackRange();this._mediaPlayerClient.initialize(this.getCurrentItem()._delegate,b,this.getVirtualTimeline(),this.getTimelineMonitor(),this,this.timeline,this.parser,e,a,f);this._videoEngineTimeline=this._mediaPlayerClient._veTimeline;this._customAdHandlerClient=this._mediaPlayerClient._customAdHandlerClient}else this.setInitalizedVirtualTimeline(!0);
return!0}return!1},play:function(){a.call(this);var b=this.virtualTimelineManager.getActiveItem(),d=!1;if(b){var e=b.getMediaPlayerImpl();(d=e.playStream(b.getStreamInfo()))&&e.setStreamRate(1)}else this._streamController&&(this._streamController.playbackController.start(),d=!0,this.setStreamRate(1));return d},playStream:function(a){if("undefined"!==typeof a&&null!==a)return null!==this._streamController?(this._streamController.playStream(a),!0):!1},activateStream:function(a){if("undefined"!==typeof a&&
null!==a)return null!==this._streamController?(this._streamController.activateStream(a),!0):!1},createTransition:function(a,b){return new Primetime.DefaultTransition(a,b)},pause:function(){var a=this.virtualTimelineManager.getActiveItem();if(!a)return!0;var b=a._mediaPlayerImpl.pauseStream();b&&a._mediaPlayerImpl.setStreamRate(0);return b},pauseStream:function(){return null!==this._streamController?(this._shouldPlayStreamWhenReady=!1,this._streamController.playbackController.pause(),!0):!1},seekToLocal:function(a){return this.seekInternal(a,
!0,AdobePSDK.AdPolicyMode.SEEK)},seek:function(a){return this._delegate.seek(a)},onReturningFromTrickPlay:function(){},seekStream:function(a){if(-2===a)return this.seekToLivePoint();0>a&&(a=0);if(this._item&&this._item.isLive())return this.liveSeek(a);this._seekExpected=a;return!0},liveSeek:function(){},seekToLivePoint:function(){return!1},getLiveStartTime:function(){return-2},createOrUpdateVirtualTimelineItems:function(){if(this.getVirtualTimeline()&&this.getStreamController()){var a,d,e=this.getStreamController().getStreams()||
[];for(a=0;a<e.length;a++){d=e[a].getStreamInfo();var f=1E3*d.start,g=1E3*d.duration;!this.isMainContentPlayer()||d.isMPAd||d.isAd?d.isMPAd&&this.getVirtualTimeline().updateItem(this,f,g,d):this.getVirtualTimeline().insertOrUpdateMainItem(this,f,g,d)}this._didCreateOrUpdateVirtualTimelineItems=!0;b.call(this)}},isMainContentPlayer:function(){return!this._isAdOnly},getVirtualTimeline:function(){return this._virtualTimeline},setVirtualTimeline:function(a){this._virtualTimeline=a;this._timelineMonitor&&
this._timelineMonitor.setVirtualTimeline(a)},getTimelineMonitor:function(){return this._timelineMonitor},setInitalizedVirtualTimeline:function(a){this._initializedVirtualTimeline=a;b.call(this)},addSource:function(){},attachSource:function(a,b,e,f){this._resourceType=f},replaceCurrentResource:function(a,b){if(void 0!==a){this._config=b?b:this._config;this._isAdOnly||(this._virtualTimeline=this.system.getObject("virtualTimeline"),this._virtualTimeline.initialize(this._delegate),this.virtualTimelineManager&&
this.virtualTimelineManager.initialize());this._mediaResource=a;this._delegate&&this._delegate._nativeNotification("initializing");var e=this.getProtectionController(),f=e?e.getProtectionData():null;this.attachSource(this._mediaResource.url,e,f,a.type)}return!0},getCurrentTime:function(){var a=this.virtualTimelineManager.getActiveItem();return a?a._mediaPlayerImpl.getCurrentStreamTime():0},getLocalTime:function(){var a=this.virtualTimelineManager.getActiveItem();return a?a._mediaPlayerImpl.getLocalStreamTime():
0},haveCurrentTime:function(){var a=this.virtualTimelineManager.getActiveItem();return a?a._mediaPlayerImpl.haveCurrentStreamTime():!1},getCurrentStreamTime:function(){return 0},getLocalStreamTime:function(){return 0},getPlaybackRange:function(){var a=null;this.virtualTimelineManager&&(a=this.virtualTimelineManager.getActiveItem());return a?a._mediaPlayerImpl.getStreamPlaybackRange():{start:0,end:0}},getSeekableRange:function(){var a=this.getPlaybackRange();if(this._item&&this._item.isLive()){var b=
this.getLiveEdgeTime(a);a.end=a.start+b}return a},attachView:function(){},setView:function(a){if(void 0!==a){this._view=a;this.attachView(a);var b=this,e=function(a){this.removeEventListener(Primetime.MediaPlayerImpl.Events.ERROR,e,!1);b._delegate&&b._delegate._nativeError(a)};this.addEventListener(Primetime.MediaPlayerImpl.Events.ERROR,e,!1);this._setVolumePending&&(this._view.volume=this._playbackVolume,this._setVolumePending=!1);return!0}return!1},getView:function(){return this._view},getBufferControlParameters:function(){},
setBufferControlParameters:function(){},getABRControlParameters:function(){return this._abrControlParameters},setABRControlParameters:function(a){"undefined"!==typeof a&&(this._abrControlParameters=a)},setCCVisibility:function(){},setCCStyle:function(){},getVolume:function(){this._view&&(this._playbackVolume=this._view.volume);return this._playbackVolume},setVolume:function(a){this._playbackVolume=a;this._view?this._view.volume=a:this._setVolumePending=!0;return!0},setRate:function(a){if(this.virtualTimelineManager){var b=
null,e=null;(e=this.virtualTimelineManager.getActiveItem())?(b=e._mediaPlayerImpl,e=e.getStreamInfo()):(b=this,e=this._streamController?this._streamController.getActiveStreamInfo():null);AdobePSDK.MediaPlayerStatus.PAUSED!==this._delegate.getStatus()&&AdobePSDK.MediaPlayerStatus.PREPARED!==this._delegate.getStatus()||0===a?AdobePSDK.MediaPlayerStatus.PLAYING===this._delegate.getStatus()&&0===a&&b.pauseStream(e):b.playStream(e);b.setStreamRate(a);return!0}},setStreamRate:function(a){null!==this._streamController&&
this._streamController.setRate(a)},getRate:function(){if(this.virtualTimelineManager){var a=this.virtualTimelineManager.getActiveItem();return a?a._mediaPlayerImpl.getStreamRate():void 0}},getStreamRate:function(){if(null!==this._streamController)return this._streamController.getRate()},isTrickPlayMode:function(){var a=this.getRate();return a&&1!==a?!0:!1},playbackRateSelected:function(a){this._delegate&&this._delegate._nativeNotification("rateSelected",{rate:a})},playbackRateChanged:function(){this._delegate&&
this._delegate._nativeNotification("ratePlaying")},onStreamsComposed:function(){},hasActiveStream:function(){return this._streamController&&this._streamController.getActiveStream()?!0:!1},onManifestUpdated:function(){},onPlaybackTimeUpdated:function(){this.sampleFps()},hasPlaybackStarted:function(){return this._playbackStarted},onPlaybackStarted:function(){if(this._delegate){var a=!1===this._playbackStarted;this._delegate._nativeNotification("playing");this._delegate._nativeNotification("playStart");
this._playbackStarted=!0;this._playbackStopped=!1;if(a&&this.virtualTimelineManager)this.virtualTimelineManager.onProgressUpdate()}},onPlaybackPaused:function(){if(this._delegate){var a=this.getCurrentStreamTime();this.getStreamPlaybackRange();var b=this._streamController.getActiveStream().getStreamInfo(),e=!1;b&&b.manifestInfo&&(e=b.manifestInfo.isDynamic);b&&b.periodManifestInfo&&(e=b.periodManifestInfo.isDynamic);this._streamController&&this._streamController.getStreams()&&0<this._streamController.getStreams().length&&
(!this._streamController.getActiveStream().getStreamInfo().isLast||e&&!b.stopUpdates)||this._streamController&&this._streamController.getStreams()&&1<this._streamController.getStreams().length&&(!this._streamController.getActiveStream().getStreamInfo().isLast||this._streamController.getActiveStream().getStreamInfo().isDynamic&&!b.stopUpdates)||(b=this._streamController.getActiveStream().getStreamInfo().start+this._streamController.getActiveStream().getStreamInfo().duration,a+.1>=b?this._playbackStopped||
(this._delegate._nativeNotification("stop"),this._playbackStopped=!0):this._delegate._nativeNotification("pause"))}},onPlaybackStopped:function(){this._delegate&&!this._playbackStopped&&(this._delegate._nativeNotification("stop"),this._playbackStopped=!0)},onPlaybackSeeking:function(){if(!this._seekExpected){if(!this._playbackStarted)return;this._seekExpected=this.getCurrentStreamTime()}this._delegate&&this._delegate._nativeNotification("seekStart",{desiredPosition:this._seekExpected,actualPosition:this.getCurrentStreamTime(),
local:!0});if(!this._playbackStarted)this.onPlaybackPaused()},onPlaybackSeeked:function(){if(this._delegate){null!==this._streamController&&(this._streamController.isPaused()?this._delegate._nativeNotification("pause"):this._delegate._nativeNotification("playing"));var a=this.getCurrentStreamTime();this._seekExpected!=a&&this._delegate._nativeNotification("seekPositionAdjusted",{desiredPosition:1E3*this._seekExpected,actualPosition:1E3*a,local:!0});this._delegate._nativeNotification("seekEnd",{desiredPosition:this._seekExpected,
actualPosition:a,local:!0})}this._seekExpected=null},onBufferLevelStateChanged:function(a,b){a?this._delegate&&this._delegate._nativeNotification("bufferEnd",b):this._delegate&&this._delegate._nativeNotification("bufferBegin",b)},onDRMMetadataAvailable:function(a,b){var e,f={};if("undefined"!==typeof a&&null!==a&&"undefined"!==typeof b&&null!==b&&0!==b.length&&this._delegate){e=a.systemString;var g=null,h=this.getProtectionController();(h=h?h.getProtectionData():null)&&(g=e in h?h[e]:null);e=g;e=
new AdobePSDK.DRMMetadata(e?e.laURL:null,null,null,a.systemString,b);f.drmMetadata=e;this.getCurrentItem()&&this.getCurrentItem().addDRMMetadataInfo(f);this._delegate._nativeNotification("drmMetadataInfoAvailable",{drmMetadataInfo:f})}},onQualityChanged:function(){},getTimeline:function(){return this.timelineImpl},getCurrentItem:function(){return this._item},getDRMManager:function(){this._drmManager||(this._drmManager=this.system.getObject("drmManagerImpl"),this._drmManager.initialize(this,this.getProtectionController()));
return this._drmManager},reset:function(){this.removeEventListeners();this._playbackVolume=1;this._seekExpected=this._mediaResource=this._view=null;this._playbackStopped=this._playbackStarted=!1;this._config=this._currentLicense=null;this._returningFromTrickPlay=!1;this._initialTrickPlayPosition=-1;var a=this,b=!1,e=!1,f={};f[Primetime.VirtualTimeline.eventList.ENAME_VIRTUAL_TIMELINE_RESET_COMPLETE]=function(){a.isMainContentPlayer()&&a.getVirtualTimeline()&&a.getVirtualTimeline().unsubscribe(Primetime.VirtualTimeline.eventList.ENAME_VIRTUAL_TIMELINE_RESET_COMPLETE,
f);b=!0;e&&a.notify(Primetime.MediaPlayerImpl.Events.ENAME_RESET_COMPLETE,{})};if(this.isMainContentPlayer()&&this.getVirtualTimeline())this.getVirtualTimeline().subscribe(Primetime.VirtualTimeline.eventList.ENAME_VIRTUAL_TIMELINE_RESET_COMPLETE,f,void 0,!0),this.getVirtualTimeline().reset();else f[Primetime.VirtualTimeline.eventList.ENAME_VIRTUAL_TIMELINE_RESET_COMPLETE]();this.virtualTimelineManager&&this.virtualTimelineManager.reset();this._videoEngineTimeline=this._mediaPlayerClient=this._isAdOnly=
this._virtualTimeline=null;this._isReady=this._didCreateOrUpdateVirtualTimelineItems=this._initializedVirtualTimeline=!1;this._videoEngineTimeline=null;this.resetCurrentItem();this.timelineImpl.reset();this._fpsSampleTime=-Infinity;this._framesSample=this._fpsSample=0;var g=function(){a._protectionController&&a._protectionController.removeEventListener(Primetime.dependencies.ProtectionController.events.ENAME_RESET_COMPLETE,g);e=!0;b&&a.notify(Primetime.MediaPlayerImpl.Events.ENAME_RESET_COMPLETE,
{})};this._protectionController?(this._protectionController.addEventListener(Primetime.dependencies.ProtectionController.events.ENAME_RESET_COMPLETE,g),this._protectionController.reset()):g();return!0},resetCurrentItem:function(){this._item=this._mediaResource=null},resetDRMManager:function(){this._drmManager=null},getBufferedRange:function(a){var b=this.virtualTimelineManager.getActiveItem();return b?b._mediaPlayerImpl.getStreamBufferedRange(a):AdobePSDK.PSDKErrorCode.kECElementNotFound},getStreamBufferedRange:function(){return AdobePSDK.PSDKErrorCode.kECElementNotFound},
getPlaybackMetrics:function(){this.playbackMetrics||(this.playbackMetrics=new AdobePSDK.PlaybackMetrics(this));return this.playbackMetrics},getAdditionalPlaybackInformationMetrics:function(){var a=this.virtualTimelineManager.getActiveItem();return a?a._mediaPlayerImpl.getStreamAdditionalPlaybackInformationMetrics():AdobePSDK.PSDKErrorCode.kECElementNotFound},onFirstVirtualTimelineItemActivating:function(a){a.getMediaPlayerImpl()!=this&&this.deactivate()},deactivate:function(){},sampleFps:function(){var a=
Date.now();if(!(a<this._fpsSampleTime+1E3)){var b=this.getPlaybackQuality();null!==b&&0!==b.totalVideoFrames&&(b=b.totalVideoFrames-b.droppedVideoFrames,this._fpsSample=a<this._fpsSampleTime+5E3?(b-this._framesSample)/((a-this._fpsSampleTime)/1E3):0,this._framesSample=b,this._fpsSampleTime=a)}},getFps:function(){return Date.now()<this._fpsSampleTime+5E3?this._fpsSample:0},getCORSConfig:function(){return this._config&&this._config.networkConfiguration?this._config.networkConfiguration.CORSConfig:null},
getNetworkConfig:function(){return this._config&&this._config.networkConfiguration?this._config.networkConfiguration:null},timelineUpdating:function(){},timelineUpdated:function(){},addVirtualTimelineItem:function(){},pauseAtPeriodEnd:function(a){this._delegate._nativeNotification("pauseAtPeriodEnd",{customAdId:a})},onPauseAtPeriodEnd:function(a){if(this._customAdHandlerClient)this._customAdHandlerClient.onVideoEnginePauseEvent(a)},addEventListeners:function(){},removeEventListeners:function(){},
getSSAIController:function(){},handlePlaybackComplete:function(){this._timelineMonitor&&this._timelineMonitor.endContent()},timedMetadataUpdated:function(a){this._delegate._nativeNotification("timedMetadataAvailable",{timedMetadata:a})}};Primetime.MediaPlayerImpl.Events={ERROR:"error",ENAME_VIRTUAL_TIMELINE_ITEM_COMPLETED_BUFFERING:"virtualTimelineItemCompletedBuffering",ENAME_VIRTUAL_TIMELINE_ITEM_COMPLETED_PLAYING:"virtualTimelineItemCompletedPlaying",ENAME_VIRTUAL_TIMELINE_ITEM_ON_SEEKING:"virtualTimelineItemOnSeeking",
ENAME_RESET_COMPLETE:"resetCompleted"}})();(function(){var a=function(a,c){return a.time-c.time};Primetime.MediaPlayerItemImpl=function(){this._timedMetadatas=[];this._dispatchedTimedMetadata=[];this._hasTimedMetadata=!1;return this};Primetime.MediaPlayerItemImpl.prototype={constructor:Primetime.MediaPlayerItemImpl,system:void 0,log:void 0,videoModel:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,getHasTimedMetadata:function(){return this._hasTimedMetadata},getTimedMetadata:function(){return this._timedMetadatas},updateTimedMetadata:function(b,
c){this.deleteOldTimedMetadata(this._timedMetadatas);this.deleteOldTimedMetadata(this._dispatchedTimedMetadata);var d=this.appendNewTimedMetadata(b);this._timedMetadatas.sort(a);this._hasTimedMetadata=0<this._timedMetadatas.length;if(d&&0<d.length)for(var e=0;e<d.length;e++)c.timedMetadataUpdated(d[e])},updateID3Metadata:function(b,c){if(!("undefined"===typeof b||null===b||0>=b.length)){var d=this.appendID3Metadata(b,c);if(d&&d.length){this._timedMetadatas.sort(a);for(var e=0;e<d.length;e++)c.timedMetadataUpdated(d[e])}}},
deleteOldTimedMetadata:function(a){var c=0,d=this.system.getObject("mediaPlayer").getPlaybackRange();if("undefined"!==typeof a&&null!==a&&d)for(d=1E3*d.start;0<a.length&&!(a[0].time>=d);)a.shift(),c++;return c},appendNewTimedMetadata:function(b){var c=[],d=b.timeline.getCurrentPeriodIndex();if((b=b.timeline.getManifest().Period_asArray[d])&&(b=b.representations)&&!(0>=b.length)){var e=this.getStreamController(),f=null,g=d=null;e&&(f=e.getActiveStream());f&&(e=f.getStreamProcessors())&&e.length&&(d=
e[0]);d&&(g=d.getCurrentRepresentationInfo());if(g){d=b[g.id];b=[];d&&d.muxed?b[0]=d.muxed:(g=0,d&&d.video&&(b[g++]=d.video),d&&d.audio&&(b[g++]=d.audio));for(d=0;d<b.length;d++)if(g=b[d].segments)for(e=0;e<g.length;e++)if(g[e].timedMetadata&&0!==g[e].timedMetadata.length)for(var f=g[e].timedMetadata,h=Math.round(1E3*(g[e].startTime+b[d].start)),l=0;l<f.length;l++)if(!this.tagIsAlreadyProcessed(this._timedMetadatas,f[l],h)){var n=Primetime.TimedMetadataParser(f[l],h);this._timedMetadatas.push(n);
c.push(n)}this._timedMetadatas.sort(a);return c}}},appendID3Metadata:function(a,c){for(var d=[],e=1E3*c.getPlaybackRange().start;0<a.length;){var f=a[0];!this.id3AlreadyProcessed(this._timedMetadatas,f.time)&&f.time>=e&&(this._timedMetadatas.push(f),d.push(f));a.shift()}return d},id3AlreadyProcessed:function(a,c){for(var d=0;d<a.length;d++){var e=a[d];if(e.type==AdobePSDK.TimedMetadataType.ID3&&e.time==c)return!0}return!1},tagIsAlreadyProcessed:function(a,c,d){for(var e=0;e<a.length;e++){var f=a[e];
if(f.type==AdobePSDK.TimedMetadataType.TAG&&f.time.toFixed()==d.toFixed()&&f.content==c)return!0}return!1},getStreamController:function(){var a=this.system.getObject("mediaPlayer"),c=null;a&&(c=a.getStreamController());return c}}})();(function(){var a=function(){var a,b=0;for(a=b=0;a<this._virtualTimelineItems.length;a++){var c=this._virtualTimelineItems[a];c.setStartTime(b);b+=c.getDuration()}},b=function(b,d,e,f){var k,m=!1,p=(this._mainContentTimelineItem.getMediaPlayerImpl()._mediaResource.type===AdobePSDK.MediaResourceType.HLS||this._mainContentTimelineItem.getMediaPlayerImpl()._mediaResource.type===AdobePSDK.MediaResourceType.DASH)&&b.getPlacementType()==AdobePSDK.PlacementType.MID_ROLL&&this._mainContentTimelineItem.getMediaPlayerImpl().timeline&&
(b.getMediaPlayerImpl()._resourceType===AdobePSDK.MediaResourceType.ISOBMFF||b.getMediaPlayerImpl()._resourceType===AdobePSDK.MediaResourceType.CUSTOM);k=this._mainContentTimelineItem.getMediaPlayerImpl()._mediaResource.type===AdobePSDK.MediaResourceType.DASH&&b.getPlacementType()==AdobePSDK.PlacementType.MID_ROLL&&this._mainContentTimelineItem.getMediaPlayerImpl().timeline&&b.getMediaPlayerImpl()._resourceType===AdobePSDK.MediaResourceType.HLS;p=p||k;for(k=0;k<this._virtualTimelineItems.length;k++){var u=
this._virtualTimelineItems[k];if(b.getStartTime()<=u.getStartTime()){b.isMainContent()||p&&u.isMainContent()&&!e?(this._virtualTimelineItems.splice(k+1,0,b),p&&(m=c.call(this,b.getStartTime(),1E3*f[1].duration),m.setLocalStartTime(b.getLocalStartTime()),m.setSeekTimeBeforePlay(d+2),this._virtualTimelineItems.splice(k+2,0,m))):(b.isMainContent()||u.isMainContent()||b.getStartTime()!=u.getStartTime()?this._virtualTimelineItems.splice(k,0,b):this._virtualTimelineItems.splice(k+1,0,b),p&&!e&&(m=c.call(this,
b.getStartTime(),1E3*f[1].duration),m.setLocalStartTime(b.getLocalStartTime()),m.setSeekTimeBeforePlay(d+2),this._virtualTimelineItems.splice(k+1,0,m)));m=!0;break}}if(!m){if(b.isMainContent()){m=b.getSeekTimeBeforePlay();if(void 0===m||null===m)m=b.getLocalStartTime()+2;b.setSeekTimeBeforePlay(m)}this._virtualTimelineItems.push(b);p&&!e&&(m=c.call(this,b.getStartTime(),1E3*f[1].duration),m.setLocalStartTime(b.getLocalStartTime()),m.setSeekTimeBeforePlay(d+2),this._virtualTimelineItems.push(m))}a.call(this);
this.log("virtualTimeline: _insertItemIntoOrderedArray","INFO");this.debugPrint()},c=function(a,b){return new Primetime.VirtualTimelineItem(this._mainContentTimelineItem.getMediaPlayerImpl(),!0,a,b,this._mainContentTimelineItem.getStreamInfo())},d=function(b,c,d,e){var f;this.log("virtualTimeline: _updateItem","INFO");for(f=0;f<this._virtualTimelineItems.length;f++)if(c=this._virtualTimelineItems[f],c.getMediaPlayerImpl()===b&&c.getStreamInfo()&&c.getStreamInfo().id===e.id)return d!==c.getDuration()&&
(c.setDuration(d),a.call(this),c._adId&&d&&(b=this.getAdTimelineItemFor(c._adId))&&b.ad&&(b.ad._duration=d)),c.setUpdating(!1),this.debugPrint(),c;this.log("noop","INFO");return null},e=function(a){for(var b=0,c=0;c<this._virtualTimelineItems.length;c++){var d=this._virtualTimelineItems[c];if(a>d.getLocalStartTime())b+=d.getDuration();else break}return b},f=function(a,b,c){this._adItems.push(a);this._itemMaps[a.id]=b.id;c&&this.insertAdItem(a.ad.primaryAsset.resource,a,b.placementType)};Primetime.VirtualTimeline=
function(){this._virtualTimelineItems=[];this._adBreakItems=[];this._adItems=[];this._itemMaps={}};Primetime.VirtualTimeline.prototype={constructor:Primetime.VirtualTimeline,system:void 0,log:void 0,subscribe:void 0,unsubscribe:void 0,notify:void 0,_virtualTimelineItems:null,_mediaPlayerDelegate:void 0,_mainContentTimelineItem:void 0,_nextTimelineId:0,_adBreakItems:null,_adItems:null,_itemMaps:null,_liveOffset:12E4,sendTimelineUpdatedEvent:function(){this._mediaPlayerDelegate._nativeNotification("timelineUpdated")},
initialize:function(a){this._mediaPlayerDelegate=a},getItems:function(){return this._virtualTimelineItems},insertOrUpdateMainItem:function(a,b,c,e){return d.call(this,a,b,c,e)?!0:this.insertMainItem(a,b,c,e)},insertMainItem:function(a,c,d,e){if("undefined"===typeof a||null===a||"undefined"===typeof c||null===c||"undefined"===typeof d||null===d)return null;this._mainContentTimelineItem=new Primetime.VirtualTimelineItem(a,!0,c,d,e);a=0;!0===(this._mainContentTimelineItem&&this._mainContentTimelineItem._mediaPlayerImpl&&
this._mainContentTimelineItem._mediaPlayerImpl._item&&this._mainContentTimelineItem._mediaPlayerImpl._item.isLive())&&(a=this._liveOffset);this._mainContentTimelineItem.setLocalStartTime(a);this.log("virtual timeline: insertMainItem","INFO");b.call(this,this._mainContentTimelineItem);this.notify(Primetime.VirtualTimeline.eventList.ENAME_VIRTUAL_TIMELINE_ITEM_INSERTED,{})},updateItem:function(a,b,c,e){this.log("virtual timeline: updateItem","INFO");if(a=d.call(this,a,b,c,e)){c=!0;for(b=0;b<this._virtualTimelineItems.length;b++)if(this._virtualTimelineItems[b].isUpdating()){c=
!1;break}if(c){c=!1;for(b=0;b<this._virtualTimelineItems.length;b++)this._virtualTimelineItems[b].getPlacementType()===AdobePSDK.PlacementType.PRE_ROLL&&(c=!0);c&&this._mainContentTimelineItem.getMediaPlayerImpl().setInitalizedVirtualTimeline(!0)}}return a},registerInlineAdBreak:function(a,b){var c=new AdobePSDK.AdBreakTimelineItem(++this._nextTimelineId,[]);this._adBreakItems.push(c);this.sendTimelineUpdatedEvent();c.adBreak=a;c._timelineItem=new AdobePSDK.TimelineItem(c.id,new AdobePSDK.TimeRange(0,
0),new AdobePSDK.TimeRange(b,0));return c},registerInlineAd:function(a,b,c,d,e){b=new AdobePSDK.AdTimelineItem(d,new AdobePSDK.TimeRange(e,c.duration),new AdobePSDK.TimeRange(e,c.duration),b,c);a.insertItem(b);f.call(this,b,a,!1);return b},removeAdTimelineItem:function(a){var b=this._adItems.indexOf(a);-1!=b&&this._adItems.splice(b,1);"undefined"!==this._itemMaps[a.id]&&delete this._itemMaps[a.id]},removeAdBreakItem:function(a){a=this._adBreakItems.indexOf(a);-1!=a&&(this._adBreakItems.splice(a,1),
this.sendTimelineUpdatedEvent())},createAndInsertAcceptedAdBreakTimelineItem:function(a,b){var c=a.ads,d=null;if(a.mainContentSplit){var k=a.mainContentSplit[0],m,p=0;this.log("virtualTimeline: _updateItemForMP4Midroll","INFO");for(m=0;m<this._virtualTimelineItems.length;m++){var u=this._virtualTimelineItems[m];if(this._mainContentTimelineItem.getMediaPlayerImpl()==u.getMediaPlayerImpl()){if(p==k.index){u.setDuration(1E3*k.duration);break}p++}}}if(b){if(b.type===AdobePSDK.PlacementType.PRE_ROLL)k=
e.call(this,0);else if(b.type===AdobePSDK.PlacementType.POST_ROLL){k=this.getItems();for(m=0;m<k.length;m++);k=e.call(this,Infinity)}else m=b.time,0>m&&(m=0),k=e.call(this,m);p=m=k;for(u=0;u<this._virtualTimelineItems.length;u++){var q=this._virtualTimelineItems[u];!q._isMainContent&&q._startTime<m&&(p-=q.getDuration())}!0===(this._mainContentTimelineItem&&this._mainContentTimelineItem._mediaPlayerImpl&&this._mainContentTimelineItem._mediaPlayerImpl._mediaPlayerClient&&this._mainContentTimelineItem._mediaPlayerImpl._mediaPlayerClient._itemIsLive)&&
(p+=this._liveOffset);m=p;p=[];u=this._mainContentTimelineItem&&this._mainContentTimelineItem._mediaPlayerImpl&&this._mainContentTimelineItem._mediaPlayerImpl._mediaPlayerClient&&this._mainContentTimelineItem._mediaPlayerImpl._mediaPlayerClient._itemIsLive;for(q=0;q<c.length;++q){var t=c[q];if(!t.isVPAIDAd||!u||b.type===AdobePSDK.PlacementType.PRE_ROLL){var r=t.duration,w=t.duration;p.push(new AdobePSDK.AdTimelineItem(++this._nextTimelineId,new AdobePSDK.TimeRange(k,w),new AdobePSDK.TimeRange(m,r),
a,t));k+=w}}if(p.length){c=new AdobePSDK.AdBreakTimelineItem(++this._nextTimelineId,p);c.placementType=b.type;this._adBreakItems.push(c);this.sendTimelineUpdatedEvent();d=c.items;k=!1;for(m=0;m<d.length;m++)p=d[m],p.adInSameAdbreak=k,p.mainContentSplit=a.mainContentSplit,f.call(this,p,c,!0),k=!0;d=c}}return d},getVirtualTimelineItemsForAdBreak:function(a){var b=[];a=a.items;for(var c=0;c<a.length;c++)for(var d=a[c],e=0;e<this._virtualTimelineItems.length;e++){var f=this._virtualTimelineItems[e];if(f._adId===
d.id){b.push(f);break}}return b},insertVpaidAdItem:function(a,c,d){var e=c.time,f=c.id,m=c.localRange.begin,p=c.adInSameAdbreak,u=c.mainContentSplit,q=Primetime.BindingsFactory.createMediaPlayer(this._mediaPlayerDelegate,a.type,!0,a);q._customAdHandlerClient=this._mainContentTimelineItem.getMediaPlayerImpl()._customAdHandlerClient;q._vpaidAd=c.ad;q._vpaidAdTimelineItem=c;a=q.addSource(a,e,0);d=new Primetime.VirtualTimelineItem(q,!1,e,0,a,!0,f,d);d.setLocalStartTime(c.localRange.begin);q.addVirtualTimelineItem(d);
b.call(this,d,m,p,u);this.notify(Primetime.VirtualTimeline.eventList.ENAME_VIRTUAL_TIMELINE_ITEM_INSERTED,{})},insertAdItem:function(a,c,d){if(c.ad.isVPAIDAd)return this.insertVpaidAdItem(a,c,d);var e=c.time,f=c.duration,m=c.id,p=c.localRange.begin,u=c.adInSameAdbreak,q=c.mainContentSplit,t=Primetime.BindingsFactory.createMediaPlayer(this._mediaPlayerDelegate,a.type,!0);t.getView()||t.setView(this._mediaPlayerDelegate.getView()._video);!t.getVirtualTimeline()&&this._mainContentTimelineItem&&this._mainContentTimelineItem.getMediaPlayerImpl()&&
t.setVirtualTimeline(this._mainContentTimelineItem.getMediaPlayerImpl().getVirtualTimeline());a=t.addSource(a,e,f);d=new Primetime.VirtualTimelineItem(t,!1,e,f,a,!0,m,d);d.setLocalStartTime(c.localRange.begin);t.addVirtualTimelineItem(d);b.call(this,d,p,u,q);this.notify(Primetime.VirtualTimeline.eventList.ENAME_VIRTUAL_TIMELINE_ITEM_INSERTED,{})},getVirtualTimelineItemFor:function(a){if(0<this._virtualTimelineItems.length)for(var b=0;b<this._virtualTimelineItems.length;b++){var c=this._virtualTimelineItems[b];
if(c._adId==a)return c}return null},getAdTimelineItemForTime:function(a,b){if(0<this._adItems.length)for(var c=0;c<this._adItems.length;c++){var d=this._adItems[c],e;if((e=b?d.getLocalRange():d.getVirtualRange())&&e.contains(a))return d}return null},getAdBreakTimelineItemFor:function(a){if(a&&0<this._adBreakItems.length&&(a=this._itemMaps[a.id]))for(var b=0;b<this._adBreakItems.length;++b){var c=this._adBreakItems[b];if(c.id==a)return c}return null},getAdBreakTimelineItem:function(){return this._adBreakItems},
getTimelineItems:function(){return this._adItems},getAdBreakTimelineItemById:function(a){if(this._adBreakItems){for(var b=[],c=0;c<this._adBreakItems.length;c++){var d=this._adBreakItems[c],e=d.items();if(e)for(var f=0;f<e.length;++f)e[f].id==a&&b.push(d)}return b}return null},getAdTimelineItemForVpaidByTime:function(a,b){if(0<this._adItems.length)for(var c=0;c<this._adItems.length;c++){var d=this._adItems[c],e=b?d.localRange:d.virtualRange;if(e.begin-500<=a&&a<e.begin+1E3)return d}return null},getAdBreakTimelineItemsForRange:function(a){if(this._adBreakItems){for(var b=
[],c=0;c<this._adBreakItems.length;c++){var d=this._adBreakItems[c];0==a.compareTo(d.localRange)&&b.push(d)}return b}return null},getAdTimelineItemFor:function(a){if(0<this._adItems.length)for(var b=0;b<this._adItems.length;b++){var c=this._adItems[b];if(c.id==a)return c}return null},getPreviousAdTimelineItemFor:function(a){if(0<this._adItems.length){for(var b=null,c=0;c<this._adItems.length&&(b=this._adItems[c],b.id!=a);c++);if(c<this._adItems.length&&0<c)return b=this._adItems[c-1]}return null},
reset:function(){var a,b,c=this,d=0,e=function(){d===c._virtualTimelineItems.length&&(c._virtualTimelineItems=[],c._mediaPlayerDelegate=void 0,c._mainContentTimelineItem=void 0,c._nextTimelineId=0,c._adBreakItems=[],c._adItems=[],c._itemMaps=[],c.notify(Primetime.VirtualTimeline.eventList.ENAME_VIRTUAL_TIMELINE_RESET_COMPLETE,{}))};if(this._virtualTimelineItems&&0<this._virtualTimelineItems.length)for(a=0;a<this._virtualTimelineItems.length;a++)if(b=this._virtualTimelineItems[a],this._mainContentTimelineItem&&
b.getMediaPlayerImpl()===this._mainContentTimelineItem.getMediaPlayerImpl())d++,e();else{var f={};f[Primetime.MediaPlayerImpl.Events.ENAME_RESET_COMPLETE]=function(){b.getMediaPlayerImpl().unsubscribe(Primetime.MediaPlayerImpl.Events.ENAME_RESET_COMPLETE,f);d++;e()};b.getMediaPlayerImpl().subscribe(Primetime.MediaPlayerImpl.Events.ENAME_RESET_COMPLETE,f,void 0,!0);b.getMediaPlayerImpl().reset()}else e()},debugPrint:function(){for(var a=this.getItems(),b=0;b<a.length;++b){var c=a[b];this.log("  "+
c.getStartTime()+" "+c.getDuration()+" "+(c.isMainContent()?"MAIN":"AD")+(c.isUpdating()?" UPDATING":""),"INFO")}}};Primetime.VirtualTimeline.eventList={ENAME_VIRTUAL_TIMELINE_ITEM_INSERTED:"virtualTimelineItemInserted",ENAME_VIRTUAL_TIMELINE_RESET_COMPLETE:"virtualTimelineResetComplete"}})();(function(){Primetime.VirtualTimelineItem=function(a,b,c,d,e,f,g,h){this._mediaPlayerImpl=a;this._isMainContent=b;this._localStartTime=void 0;this._startTime=c;this._duration=d;this._streamInfo=e;this._updating=f;this._adId=g;this._shouldSkip=!1;this._placementType=h;this._playAtOffset=this._seekTimePending=this._seekTimeBeforePlay=void 0};Primetime.VirtualTimelineItem.prototype={_mediaPlayerImpl:void 0,_startTime:0,_duration:0,constructor:Primetime.VirtualTimelineItem,isMainContent:function(){return this._isMainContent},
setStartTime:function(a){this._startTime=a;this._streamInfo&&(this._streamInfo.virtualStart=a)},getStartTime:function(){return this._startTime},setLocalStartTime:function(a){this._localStartTime=a},getLocalStartTime:function(){return this._localStartTime},setDuration:function(a){this._duration=a},getDuration:function(){return this._duration},setSeekTimeBeforePlay:function(a){this._seekTimeBeforePlay=a},getSeekTimeBeforePlay:function(){return this._seekTimeBeforePlay},setPlayAtOffset:function(a){this._playAtOffset=
a},getPlayAtOffset:function(){return this._playAtOffset},setSeekTimePending:function(a){this._seekTimePending=a},getSeekTimePending:function(){return this._seekTimePending},getMediaPlayerImpl:function(){return this._mediaPlayerImpl},getStreamInfo:function(){return this._streamInfo},isUpdating:function(){return this._updating},setUpdating:function(a){this._updating=a},getPlacementType:function(){return this._placementType}}})();(function(){var a=function(){if(!this._activeItem)return null;var a=this.virtualTimeline.getItems(),b=a.indexOf(this._activeItem);if(-1===b||b>=a.length)return null;for(b+=1;b<a.length&&a[b]._shouldSkip;++b);if(b>=a.length)return null;a[b]._shouldSkip=!1;return a[b]},b=function(){this._transition&&(this._transition.cancel(),this._transition=null)},c=function(){!this._transition&&(this._nextItem=a.call(this))&&(this._transition=this._nextItem.getMediaPlayerImpl().createTransition(this._activeItem,
this._nextItem),this._didActiveItemCompleteBuffering&&this._transition.startBuffering(),this._didActiveItemCompletePlaying&&this._transition.startPlaying())},d=function(){b.call(this);if(this._activeItem){var a=this._activeItem.getMediaPlayerImpl();a&&a.isTrickPlayMode()&&a.setStreamRate(1);this._didActiveItemCompleteBuffering||a.unsubscribe(Primetime.MediaPlayerImpl.Events.ENAME_VIRTUAL_TIMELINE_ITEM_COMPLETED_BUFFERING,this);this._didActiveItemCompletePlaying||a.unsubscribe(Primetime.MediaPlayerImpl.Events.ENAME_VIRTUAL_TIMELINE_ITEM_COMPLETED_PLAYING,
this);this._didActiveItemOnSeeking||a.unsubscribe(Primetime.MediaPlayerImpl.Events.ENAME_VIRTUAL_TIMELINE_ITEM_ON_SEEKING,this)}this._activeItem=null};Primetime.VirtualTimelineManager=function(){};Primetime.VirtualTimelineManager.prototype={constructor:Primetime.VirtualTimelineManager,system:void 0,log:void 0,subscribe:void 0,unsubscribe:void 0,notify:void 0,virtualTimeline:void 0,timelineMonitor:void 0,_activeItem:null,_nextItem:null,_transition:null,_didActiveItemCompleteBuffering:!1,_didActiveItemCompletePlaying:!1,
_didActiveItemOnSeeking:!1,_isInitialized:!1,_monitorTimer:null,setup:function(){this.virtualTimeline.subscribe(Primetime.VirtualTimeline.eventList.ENAME_VIRTUAL_TIMELINE_ITEM_INSERTED,this);this.subscribe(Primetime.VirtualTimelineManager.eventList.ENAME_ACTIVE_VIRTUAL_TIMELINE_ITEM_CHANGED,this.timelineMonitor);this._monitorTimer=setInterval(this.onProgressUpdate.bind(this),250)},onProgressUpdate:function(){if(this.timelineMonitor&&this._activeItem&&this._activeItem.getMediaPlayerImpl()){var a=this._activeItem.getMediaPlayerImpl();
this.timelineMonitor.update(a.getProgressTime());this.virtualTimeline._mediaPlayerDelegate._nativeNotification("timeUpdated",a.getProgressTime());if(a.getSSAIController&&a.getSSAIController())a.getSSAIController().onProgressUpdate(1E3*a.getProgressTime())}},reset:function(){this.timelineMonitor.reset();this._isInitialized&&(this._isInitialized=!1,d.call(this),this._transition=this._nextItem=this._activeItem=null,this._didActiveItemOnSeeking=this._didActiveItemCompletePlaying=this._didActiveItemCompleteBuffering=
!1,this._monitorTimer=null)},initialize:function(){if(!this._isInitialized){this._isInitialized=!0;var a=this.virtualTimeline.getItems();0<a.length&&this.activateItem(a[0])}},activateItem:function(a){void 0!==typeof a&&null!==a&&(d.call(this),this._activeItem=a,this._didActiveItemOnSeeking=this._didActiveItemCompletePlaying=this._didActiveItemCompleteBuffering=!1,this._activeItem&&(a=this._activeItem.getMediaPlayerImpl(),a.subscribe(Primetime.MediaPlayerImpl.Events.ENAME_VIRTUAL_TIMELINE_ITEM_COMPLETED_BUFFERING,
this,null,!0),a.subscribe(Primetime.MediaPlayerImpl.Events.ENAME_VIRTUAL_TIMELINE_ITEM_COMPLETED_PLAYING,this,null,!0),a.subscribe(Primetime.MediaPlayerImpl.Events.ENAME_VIRTUAL_TIMELINE_ITEM_ON_SEEKING,this,null,!0)),c.call(this),this.debugPrint(),this.notify(Primetime.VirtualTimelineManager.eventList.ENAME_ACTIVE_VIRTUAL_TIMELINE_ITEM_CHANGED,{item:this._activeItem}),this.virtualTimeline.sendTimelineUpdatedEvent())},getActiveItem:function(){return this._activeItem},virtualTimelineItemInserted:function(){this._isInitialized&&
this._activeItem&&a.call(this)!==this._nextItem&&(b.call(this),c.call(this))},virtualTimelineItemCompletedBuffering:function(){this._isInitialized&&!this._didActiveItemCompleteBuffering&&(this._didActiveItemCompleteBuffering=!0,this._transition&&this._transition.startBuffering())},virtualTimelineItemCompletedPlaying:function(){if(this._isInitialized&&!this._didActiveItemCompletePlaying&&(this._didActiveItemCompletePlaying=!0,this._nextItem)){var a=this._transition;this._transition=null;this.activateItem(this._nextItem);
a.startPlaying()}},virtualTimelineItemOnSeeking:function(a){if(this._isInitialized)if(a=a.data,this._didActiveItemOnSeeking)clearInterval(this._monitorTimer);else{this._didActiveItemOnSeeking=!0;if(this._activeItem.isMainContent())for(var c=this.virtualTimeline.getItems(),d=0;d<c.length;++d){var h=c[d];if(h.isMainContent()){var l=void 0!==h.getSeekTimeBeforePlay()?h.getSeekTimeBeforePlay():0;if(a>=l&&a<l+h.getDuration()){b.call(this);h.setSeekTimePending(a+2);this._nextItem=h;this._transition=this._nextItem.getMediaPlayerImpl().createTransition(this._activeItem,
this._nextItem);break}}}a=this._transition;this._transition=null;this.activateItem(this._nextItem);a.startPlaying()}},skipItem:function(a){this._isInitialized&&(a._shouldSkip=!0,c.call(this),this._activeItem==a&&(this._nextItem?this.virtualTimelineItemCompletedPlaying():(a=this._activeItem.getMediaPlayerImpl(),a.pauseStream(),a.deactivate(),d.call(this))))},debugPrint:function(){this.log("virtual timeline:","INFO");for(var a=this.virtualTimeline.getItems(),b=0;b<a.length;++b){var c=a[b];this.log("  "+
c.getStartTime()+" "+c.getDuration()+" "+(c.isMainContent()?"MAIN":"AD")+" "+(c===this.getActiveItem()?"<--":""),"INFO")}}};Primetime.VirtualTimelineManager.eventList={ENAME_ACTIVE_VIRTUAL_TIMELINE_ITEM_CHANGED:"activeVirtualTimelineItemChanged"}})();(function(){Primetime.VirtualTimelineTransition=function(a,b){this._prevItem=a;this._nextItem=b};Primetime.VirtualTimelineTransition.prototype={startBuffering:function(){},startPlaying:function(){},cancel:function(){}}})();(function(){Primetime.DefaultTransition=function(a,b){Primetime.VirtualTimelineTransition.call(this,a,b)};Primetime.DefaultTransition.prototype=Primetime.helper.extend(Primetime.VirtualTimelineTransition.prototype,{startPlaying:function(){var a=this._prevItem.getMediaPlayerImpl(),b=this._nextItem.getMediaPlayerImpl();a!==b&&a.deactivate();void 0!==this._nextItem.getSeekTimePending()?(b.playStream(this._nextItem.getStreamInfo(),!0),b.seek(this._nextItem.getSeekTimePending()),this._nextItem.setSeekTimePending(void 0)):
void 0!==this._nextItem.getSeekTimeBeforePlay()?b.playStream(b.getStreamController().getStreamForTime(this._nextItem.getSeekTimeBeforePlay()/1E3).getStreamInfo(),!0):void 0!==this._nextItem.getPlayAtOffset()?(b.playStream(b.getStreamController().getStreamForTime(this._nextItem.getPlayAtOffset()/1E3).getStreamInfo(),!0),b.seekStream(this._nextItem.getPlayAtOffset()/1E3)):b.playStream(this._nextItem.getStreamInfo(),!0)}})})();(function(){var a=function(a){this._lookForCustomMarkers=!0;this._lastCustomMarkerId=-1;e.call(this,a.data.item.getStreamInfo(),a.data.item._adId)},b=this;this[Primetime.VirtualTimelineManager.eventList.ENAME_ACTIVE_VIRTUAL_TIMELINE_ITEM_CHANGED]=function(c){a.call(b,c)};var c=function(a,b){if(this._lastProcessedTime!==b){var c=this._currentVirtualTimeLineItem&&this._currentVirtualTimeLineItem.getMediaPlayerImpl();if(!c||c.hasPlaybackStarted())if(this._lastProcessedTime=b,!this._skipAdBreaks&&void 0!=
this._virtualTimeline&&null!=this._virtualTimeline){var e=this._virtualTimeline.getAdTimelineItemFor(a);c=this._currentInfo?this._currentInfo!==e:null!==e;if(c)d.call(this,e);else if(e){var n,c=e.adBreak;n=e.ad;var k=1E3*(b-this._contentStartTime),m=n.duration,p=this._currentVirtualTimeLineItem&&this._currentVirtualTimeLineItem.getMediaPlayerImpl();p&&n.isVPAIDAd&&(m=1E3*p.getTotalTime());m=100*parseFloat(k)/m;m=new Primetime.AdInformation(n,e.id,m);if(0>m._progress||100<m._progress)100<m._progress&&
(c=this._virtualTimeline.getAdBreakTimelineItemFor(e))&&c.placementType===AdobePSDK.PlacementType.POST_ROLL&&d.call(this,null);else if(!(this._lastAdInfo&&this._lastAdInfo._id==m._id&&m._progress<=this._lastAdInfo._progress)){this._lastAdInfo=m;if(e=n.tracker)e.onAdProgressCallbackFunc(m._ad,m._progress);e=!1;this.system.hasMapping("manifestModel")&&(e=this.system.getObject("manifestModel").getValue(),e=e.hasDiscontinuity&&e.isHls);e||this._mediaPlayerDelegate._nativeNotification("adProgress",{adBreak:c,
ad:m._ad,progress:m._progress,rate:this._mediaPlayerDelegate.getRate(),time:k})}}}}},d=function(a){var b=null,c=null,d=null,e=null,k=null;a&&(d=a.adBreak,e=a.ad);if(this._currentInfo){b=this._currentInfo.adBreak;c=this._currentInfo.ad;if(!(this._bCurrentAdSkipOrRemoved||a&&c==e)&&(a&&this._virtualTimeline.getPreviousAdTimelineItemFor(a.id),this._mediaPlayerDelegate._nativeNotification("adCompleted",{adBreak:b,ad:c,progress:100,rate:this._mediaPlayerDelegate.getRate(),time:c.duration}),k=c.tracker))k.onAdCompleteCallbackFunc(c);
if(!(this._bCurrentAdSkipOrRemoved||a&&b==d)&&(this._mediaPlayerDelegate._nativeNotification("adBreakCompleted",{adBreak:b}),k=this._virtualTimeline.getAdBreakTimelineItemFor(this._currentInfo))){this._adPolicyProxy.setAdBreakAsWatched(k,AdobePSDK.AdBreakWatchedPolicy.WATCHED_ON_END);var m=k.adBreak;if(m){var p=m.ads,u;if(p&&(0<p.length&&(u=p[p.length-1]),u&&(u=u.tracker)))u.onAdBreakCompleteCallbackFunc(m)}this._adPolicyProxy.onAdBreakComplete(k)}}this._currentInfo=a;null==a&&(this._contentId=-1);
this._bCurrentAdSkipOrRemoved=!1;if(a){if(d!=b&&(a=this._virtualTimeline.getAdBreakTimelineItemFor(a))){var q;b=!0;if(a){b=this._adPolicyProxy&&a?this._adPolicyProxy.onAdBreakDetected(a):!1;if(k=a.adBreak)if(m=k.ads)if(0<m.length&&(q=m[m.length-1]),q&&(q=q.tracker))q.onAdBreakStartCallbackFunc(k);this._adPolicyProxy.setAdBreakAsWatched(a,AdobePSDK.AdBreakWatchedPolicy.WATCHED_ON_BEGIN);q=b}else q=!1;q?this._mediaPlayerDelegate._nativeNotification("adBreakStarted",{adBreak:d}):this._bCurrentAdSkipOrRemoved=
!0}if(e!=c&&!this._bCurrentAdSkipOrRemoved&&(this._mediaPlayerDelegate._nativeNotification("adStarted",{adBreak:d,ad:e,progress:0,rate:this._mediaPlayerDelegate.getRate(),time:0}),k=e.tracker))k.onAdStartCallbackFunc(e)}},e=function(a,b){var d=0,e=0;a&&(a.isInlineAd||a.isAd)?(d=a.id,e=a.start):d=b;d!==this._contentId&&(this._contentStartTime=e,this._contentId=d,this._lastProcessedTime=-1,this._virtualTimeline?(this._currentVirtualTimeLineItem=this._virtualTimeline.getVirtualTimelineItemFor(this._contentId),
this._currentVirtualTimeLineItem||(this._currentVirtualTimeLineItem=this._virtualTimeline.getVirtualTimelineItemFor(null))):this._currentVirtualTimeLineItem=null,c.call(this,d,e))};Primetime.TimelineMonitor=function(){this._contentStartTime=0;this._lastProcessedTime=this._contentId=-1;this._currentInfo=null;this._bCurrentAdSkipOrRemoved=!1;this._virtualTimeline=null;this._skipAdBreaks=!1;this._lastCustomMarkerId=-1;this._lookForCustomMarkers=!1;this._currentVirtualTimeLineItem=null};Primetime.TimelineMonitor.prototype=
{system:void 0,constructor:Primetime.TimelineMonitor,setup:function(){var b=this;this[Primetime.VirtualTimelineManager.eventList.ENAME_ACTIVE_VIRTUAL_TIMELINE_ITEM_CHANGED]=function(c){a.call(b,c)}},setVirtualTimeline:function(a){this._virtualTimeline=a},getVirtualTimeline:function(){return this._virtualTimeline},initialize:function(a,b){this._adPolicyProxy=a;this._mediaPlayerDelegate=b;_setAdBreakForRestore=[]},update:function(a){c.call(this,this._contentId,a)},reset:function(){this._currentInfo=
null;this._contentStartTime=this._contentId=0;this._currentVirtualTimeLineItem=null;this._lastProcessedTime=-1;this._bCurrentAdSkipOrRemoved=!1;this._lastAdInfo=null},updateContent:function(a,b){e.call(this,a,b)},endContent:function(){d.call(this,null)},processAdClick:function(){var a=this._virtualTimeline.getAdTimelineItemFor(this._contentId);if(a){var b=a.adBreak;if((a=a.ad)&&b){var c=a.primaryAsset.adClick;if(c&&c.isValid){var d=a.tracker;if(void 0!==d&&null!==d)d.onAdClickCallbackFunc(a);this._mediaPlayerDelegate._nativeNotification("adClicked",
{adBreak:b,ad:a,adClick:c})}}}}}})();(function(){AdobePSDK.TimeMapping=function(a,b){this._period=a;this._time=b};AdobePSDK.TimeMapping.INVALID_PERIOD=-1;AdobePSDK.TimeMapping.INVALID_POSITION=-3;AdobePSDK.TimeMapping.prototype={constructor:Primetime.TimeMapping,setInvalid:function(){this._period=AdobePSDK.TimeMapping.INVALID_PERIOD;this._time=AdobePSDK.TimeMapping.INVALID_POSITION},isInvalid:function(){return _period==AdobePSDK.TimeMapping.INVALID_PERIOD&&_time==AdobePSDK.TimeMapping.INVALID_POSITION},getTime:function(){return this._time},
getPeriod:function(){return this._period}}})();(function(){Primetime.VideoEngineTimeline=function(){return this};var a=function(a,b){var e=this;(function(a){try{var c=e.mainPlayerImpl.system.getObject("urlUtils"),h=e.mainPlayerImpl.system.getObject("parser");c.fetchAndParse({url:a,baseUrl:a,type:"manifest"},{},e.mainPlayerImpl._config.networkConfiguration,{onComplete:function(a,c,f,l){var g={};g[MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_PARSING_COMPLETE]=function(a){a.error?b(null,a.error):b(a.data.manifest);h.unsubscribe(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_PARSING_COMPLETE,
g)};h.subscribe(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_PARSING_COMPLETE,g);h.parse(a,f,c,e.mainPlayerImpl.system.getObject("xlinkController"),!0)},onError:function(c,e,l,g){b(null,"Error in retrieving manifest for ad url:"+a)}})}catch(l){b(null,l.message)}})(a)},b=function(a,b,e,f,g,h,l,n,k){var m=!0;if(n){this.mainPlayerImpl.addedAdStreamObj();var p=a/1E3;k=0;var u;if(this.mainContentIsLive){k=p;var q=this.mainPlayerImpl.virtualTimelineManager.getActiveItem();q&&q.isMainContent()&&
q.getMediaPlayerImpl().hasActiveStream()&&(u=this.timeline.insertByVirtualTime(n,p,k,this.mainPlayerImpl.hasPlaybackStarted()))}else p=this.timeline.mapLocalTime(p),u=p[0],p=p[1],u=this.timeline.insertByLocalTime(u,n,p,k,this.mainPlayerImpl.hasPlaybackStarted());if(null!=u&&void 0!=u&&u.periodIds&&0<u.periodIds.length){for(n=0;n<u.periodIds.length;n++)k=u.periodIds[n],p=this.timeline.getPeriodForId(k).duration,f._duration=1E3*p,this.virtualTimeline.registerInlineAd(e,b,f,k,a);if(g&&this.mainPlayerImpl.getStreamController())for(a=
this.mainPlayerImpl.getStreamController().getActiveStreamInfo(),b=this.virtualTimeline.getItems(),f=0;f<b.length;f++)if(u=b[f],u.getMediaPlayerImpl()===this.mainPlayerImpl&&u.getStreamInfo()&&u.getStreamInfo().id===a.id){u._streamInfo=a;break}this.virtualTimeline.sendTimelineUpdatedEvent()}else this.log("failed to insert ad period : "+JSON.stringify(u,null,4),"INFO"),m=!1}else this.log("failed to load ad manifest","INFO"),k&&this.log(k,"INFO"),m=!1;m&&(l||g)&&(this.playerClient.proposalProcessed(h),
l&&(this.updateTimelineItems(),this.sendPlacementEvent(!0,h,e)))};Primetime.VideoEngineTimeline.prototype={constructor:Primetime.VideoEngineTimeline,log:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,sendPlacementBeginEvent:function(){this.notify(Primetime.VideoEngineTimeline.eventList.AD_BREAK_PLACEMENT_STARTED,{})},sendPlacementEvent:function(a,b,e){a?this.notify(Primetime.VideoEngineTimeline.eventList.AD_BREAK_PLACEMENT_COMPLETE,{proposal:b,adBreakItem:e}):this.notify(Primetime.VideoEngineTimeline.eventList.AD_BREAK_PLACEMENT_FAILED,
{proposal:b})},initialize:function(a,b,e,f,g,h){this.timelineMonitor=a;this.virtualTimeline=b;this.mainPlayerImpl=e;this.playerClient=f;this.contentLoader=new Primetime.ContentLoader;this.mainContentIsLive=this.mainPlayerImpl._item._delegate.isLive;this._reservationManager=new Primetime.TimelineReservationManager(e);this.timeline=h;this.manifestParser=g;this.initialTimeMapping=-1},processViaVirtualTimeline:function(a,b){this.sendPlacementBeginEvent();var e=this.virtualTimeline.createAndInsertAcceptedAdBreakTimelineItem(a,
b.placement);this.playerClient.proposalProcessed(b);this.sendPlacementEvent(e,b,e)},processPlacementProposal:function(c){if(this.virtualTimeline._mainContentTimelineItem){var d=c.adBreak,e;a:{e=d.ads;for(var f=0;f<e.length;++f){var g=e[f].primaryAsset;if(g.resource.type===AdobePSDK.MediaResourceType.ISOBMFF||g.resource.type===AdobePSDK.MediaResourceType.CUSTOM){e=!0;break a}}e=!1}f=e&&(this.virtualTimeline._mainContentTimelineItem.getMediaPlayerImpl()._mediaResource.type===AdobePSDK.MediaResourceType.HLS||
this.virtualTimeline._mainContentTimelineItem.getMediaPlayerImpl()._mediaResource.type===AdobePSDK.MediaResourceType.DASH);a:{for(var g=d.ads,h=0;h<g.length;++h)if(g[h].primaryAsset.resource.type===AdobePSDK.MediaResourceType.HLS){g=!0;break a}g=!1}g=g&&this.virtualTimeline._mainContentTimelineItem.getMediaPlayerImpl()._mediaResource.type===AdobePSDK.MediaResourceType.DASH;if(c.placement.type==AdobePSDK.PlacementType.MID_ROLL&&(f||g)&&this.timeline)e=this.timeline.splitAt(c.placement.time/1E3,!0,
!1),d.mainContentSplit=e,this.processViaVirtualTimeline(d,c);else if(this.timeline)if(e||g||this.mainContentIsLive&&c.placement.type==AdobePSDK.PlacementType.PRE_ROLL)this.mainContentIsLive&&c.placement.type==AdobePSDK.PlacementType.PRE_ROLL&&this.mainPlayerImpl._streamController&&this.mainPlayerImpl._streamController.playbackController&&this.mainPlayerImpl._streamController.playbackController.videoModel&&this.mainPlayerImpl._streamController.playbackController.videoModel.setCurrentTime(0),this.processViaVirtualTimeline(d,
c);else for(e=c.placement.time,e==AdobePSDK.Placement.UNKNOWN_TIME&&(e=c.placement.type==AdobePSDK.PlacementType.PRE_ROLL?0:Number.MAX_VALUE),!this.mainContentIsLive&&this.virtualTimeline._mainContentTimelineItem&&e>this.virtualTimeline._mainContentTimelineItem._duration&&(e=this.virtualTimeline._mainContentTimelineItem._duration),f=this.virtualTimeline.registerInlineAdBreak(d,e),g=d.ads,0<g.length&&this.sendPlacementBeginEvent(),h=0;h<g.length;++h){var l=g[h],n=l.primaryAsset.resource.url,k=c.placement.type==
AdobePSDK.PlacementType.PRE_ROLL&&0==h,m=h==g.length-1;this.contentLoader.queueReq(a.bind(this),n,b.bind(this,e,d,f,l,k,c,m))}else this.processViaVirtualTimeline(d,c)}},processRemovalProposal:function(a){if(this.timeline){a=a.getAdBreakTimelineItem();if(null!==a&&void 0!==a){for(var b=a.items,e=0;e<b.length;e++)this.virtualTimeline.removeAdTimelineItem(b[e]),this.timeline.removePeriodById(b[e].id,!0,!1);this.virtualTimeline.removeAdBreakItem(a)}this.updateTimelineItems()}},proposalMoveProposal:function(a){if(this.timeline){var b=
a.getAdBreakTimelineItem().adBreak,e=new AdobePSDK.AdBreakRemoval(a.getAdBreakTimelineItem());this.processRemovalProposal(e);a=new AdobePSDK.AdBreakPlacement(b,a.getNewPlacement());this.processPlacementProposal(a)}},process:function(a){if(a instanceof AdobePSDK.AdBreakPlacement)return this.processPlacementProposal(a);if(a instanceof AdobePSDK.AdBreakRemoval){var b=this.processRemovalProposal(a),e=0;a=a.getAdBreakTimelineItem().items;for(var f=0;f<a.length;f++)e+=a[f].duration;e=1E3*this.mainPlayerImpl.time()-
e;this.mainPlayerImpl._delegate._status==AdobePSDK.MediaPlayerStatus.SEEKING?this.mainPlayerImpl._delegate.rawSeek(e):this.mainPlayerImpl._delegate.seek(e);return b}if(a instanceof AdobePSDK.AdBreakMove)return this.proposalMoveProposal(a)},notifyTimelineUpdated:function(){this.notify(Primetime.VideoEngineTimeline.eventList.TIMELINE_RESERVATION_UPDATED,{})},convertToLocalTime:function(a){if(0==this.virtualTimeline._adBreakItems.length||1<this.virtualTimeline._virtualTimelineItems.length)return a;for(var b=
0,e=this.virtualTimeline._adItems,f=0;f<e.length;++f){var g=e[f],h=g.virtualRange,g=g.localRange;if(h.contains(a))return g.begin;h.end<a&&(b+=h.duration)}e=this.virtualTimeline._deletedItems;if(null!==e&&void 0!==e)for(f=0;f<e.length;++f)h=e[f],h.end<a&&(b-=h.duration);return a>b?a-b:0},convertToVirtualTime:function(a){var b=this.mainPlayerImpl.virtualTimelineManager.getActiveItem();return b&&b.getMediaPlayerImpl()?b.getMediaPlayerImpl().getVirtualTimeForLocalTime(a):a},getAdBreakTimelineItems:function(){return this.virtualTimeline?
this.virtualTimeline.getAdBreakTimelineItem():null},getTimelineItems:function(){return this.virtualTimeline?this.virtualTimeline.getTimelineItems():null},getAdBreakTimelineItemById:function(a){return this.virtualTimeline?this.virtualTimeline.getAdBreakTimelineItemById():null},getAdTimelineItemForVpaidByTime:function(a,b){return this.virtualTimeline?this.virtualTimeline.getAdTimelineItemForVpaidByTime():null},getAdBreakTimelineItemsForRange:function(a){return this.virtualTimeline?this.virtualTimeline.getAdBreakTimelineItemsForRange():
null},getPreviousAdTimelineItemFor:function(a){return this.virtualTimeline?this.virtualTimeline.getPreviousAdTimelineItemFor(a):null},setInitialTimeMapping:function(a){this._initialTimeMapping=a},Hold:function(a){a=this.adjustTimeRange(a);(a=this._reservationManager.Hold(a))&&this.notifyTimelineUpdated();return a},cancel:function(a){this._reservationManager.cancel(a);this.notifyTimelineUpdated()},adjustTimeRange:function(a){var b=a.begin,e=a.duration;if(this.timeline&&this.timeline.isComplete()){var f=
this.mainPlayerImpl._delegate.getPlaybackRange();f.end<a.begin&&(b=f.end)}return new AdobePSDK.TimeRange(b,e)},updateTimelineItems:function(){for(var a=this.virtualTimeline._adBreakItems,b=0;b<a.length;++b){for(var e=a[b],f=e.items,g=0;g<f.length;++g){var h=f[g],l=this.timeline.getVirtualTimeForPeriod(h.id);l&&(h.virtualRange=new AdobePSDK.TimeRange(1E3*l.start,h.virtualRange.duration))}e.update()}},getAdBreakTimelineItemFor:function(a){return this.virtualTimeline?this.virtualTimeline.getAdBreakTimelineItemFor(a):
null},updateAcceptedAdBreakTimelineItem:function(a,b){var e=adjustPlacement(b),f=0<e.duration||e.mode==AdobePSDK.PlacementMode.REPLACE,g=e.time;e.type!=AdobePSDK.PlacementType.PRE_ROLL||this.initialTimeMapping.isInvalid()||(g=this.initialTimeMapping.getTime());for(var e=this.timeline.convertToVirtualTime(g),h=a.items,l=[],n=0;n<h.length;++n){var k=h[n],m=k.adBreak,p=k.ad,u=f?p.duration:0,q=p.adType==AdobePSDK.AdType.LINEAR?p.duration:0,k=new AdTimelineItem(k.id,new TimeRange(e,q),new TimeRange(g,
u),m,p);l.push(k);g+=u;e+=q}f=new AdBreakTimelineItem(a.id,l,b.type);a.isWatched()&&f.setIsWatched(!0);return f},adjustPlacement:function(a){var b=a.type,e=a.mode,f=a.time;a=a.duration;e==AdobePSDK.PlacementMode.DEFAULT&&null!=this.timeline&&(e=timeline.IsLive()?AdobePSDK.PlacementMode.REPLACE:AdobePSDK.PlacementMode.INSERT);var g=this.mainPlayerImpl.getPlaybackRange(),h=this.timeline.convertToVirtualTime(f);if(!g.contains(h))switch(b){case AdobePSDK.PlacementType.PRE_ROLL:f=this.timeline.convertToLocalTime(1E3*
g.begin);break;default:f=this.timeline.convertToLocalTime(1E3*g.end)}e==AdobePSDK.PlacementMode.FREEREPLACE&&(a=0);return new Placement(b,f,a,e)}};Primetime.VideoEngineTimeline.eventList={TIMELINE_RESERVATION_UPDATED:"timelineReservationsUpdated",AD_BREAK_PLACEMENT_STARTED:"adBreakPlacementStartedEvent",AD_BREAK_PLACEMENT_COMPLETE:"adBreakPlacementCompleteEvent",AD_BREAK_PLACEMENT_FAILED:"adBreakPlacementFailedEvent"}})();(function(){Primetime.TimelineReservationManager=function(a){this._mainPlayerImpl=a;this._currentHold=Primetime.TimelineReservationManager.INVALID_HOLD_POSITION;this._holdReferences={};this._queuedHolds=[];this._reservations=[];return this};Primetime.TimelineReservationManager.INVALID_HOLD_POSITION=-1;Primetime.TimelineReservationManager.NO_HOLD_ON_TIMELINE=0;Primetime.TimelineReservationManager.FAKE_HOLD_AT_ZERO=1;Primetime.TimelineReservationManager.ADJUST_ACTUAL_HOLD=1E4;Primetime.TimelineReservationManager.prototype=
{constructor:Primetime.TimelineReservationManager,CanAcceptReservationFor:function(a){if(!this._mainPlayerImpl)return!1;var b=this._mainPlayerImpl._delegate.getPlaybackRange();return-1==a.begin?(console.log("Accepting request for a global hold."),!0):a.begin<b.begin?(console.log("Ignoring request because is trying to place a reservation at "+a.begin+"before the beginning of the playback range "+b.begin),!1):!0},Hold:function(a){if(this.CanAcceptReservationFor(a))return a=new AdobePSDK.Reservation(a),
this._reservations.push(a),this.RegisterHold(a.hold),a;console.log("The specified time range is not valid.")},cancel:function(a){if(0==this._reservations.length)return console.log("#cancel There are no registered reservation."),!1;for(var b=0;b<this._reservations.length;){if(this._reservations[b]==a)return this._reservations.splice(b,1),this.UnregisterHold(a.hold),!0;b++}return!1},checkIfPositionIsReserved:function(a){if(0==this._reservations.length)return!1;for(var b=0;b<this._reservations.length;b++){var c=
this._reservations[b].range;if(0>c.begin&&0>c.end||this._reservations[b].hold<=a||c.begin<=a&&a<c.end||c.begin==a&&-1==c.duration)return!0}return!1},UnregisterHold:function(a){for(var b=-1,c=0;c<this._queuedHolds.length;c++)if(this._queuedHolds[c]==a){b=c;break}-1!=b&&(c=this._holdReferences[a],--c,0<c?this._holdReferences[a]=c:(this._holdReferences[a]=void 0,this._queuedHolds.splice(b,1),this.Update()))},RegisterHold:function(a){for(var b=!1,c=0,d=-1,e=0;e<this._queuedHolds.length;e++)if(this._queuedHolds[e]==
a){d=e;break}-1==d?(b=0==this._queuedHolds.length?!0:this._queuedHolds[this._queuedHolds.length-1]>a,this._queuedHolds.push(a)):c=this._holdReferences[a];this._holdReferences[a]=++c;b&&(this._queuedHolds.sort(function(a,b){return a-b}),this.Update())},Update:function(){if(0==this._queuedHolds.length)this._currentHold!=Primetime.TimelineReservationManager.INVALID_HOLD_POSITION&&(this._currentHold=this.ResetHold());else{var a=this._queuedHolds[0];if(this._currentHold==Primetime.TimelineReservationManager.INVALID_HOLD_POSITION||
this._currentHold<a)this._currentHold=this.ApplyHold(a)}},ApplyHold:function(a){if(this._currentHold!=a){var b=a;a>Primetime.TimelineReservationManager.ADJUST_ACTUAL_HOLD&&(b-=Primetime.TimelineReservationManager.ADJUST_ACTUAL_HOLD);0==b&&(b=Primetime.TimelineReservationManager.FAKE_HOLD_AT_ZERO);this._mainPlayerImpl&&this._mainPlayerImpl.setHoldAt(b/1E3)}return a},ResetHold:function(){this._mainPlayerImpl&&this._mainPlayerImpl.setHoldAt(Primetime.TimelineReservationManager.NO_HOLD_ON_TIMELINE);return Primetime.TimelineReservationManager.INVALID_HOLD_POSITION}}})();(function(){Primetime.ContentLoader=function(){this.reqQ=[];this.pending=!1;return this};Primetime.ContentLoader.prototype={constructor:Primetime.ContentLoader,queueReq:function(a,b,c){this.reqQ.push({fn:a,cb:c,arg:b});this.processQ()},processQ:function(){if(!this.pending&&0<this.reqQ.length){this.pending=!0;var a=this.reqQ.shift();a.fn(a.arg,function(b){this.pending=!1;a.cb(b);this.processQ()}.bind(this))}}}})();(function(){var a;Primetime.DefaultAdPolicySelector=function(b){if(b){var c=AdobePSDK.AdBreakWatchedPolicy.WATCHED_ON_BEGIN;if(b=b.config)if(b=b.advertisingMetadata)c=b.adBreakAsWatched;a=c}return this};Primetime.DefaultAdPolicySelector.prototype={constructor:Primetime.DefaultAdPolicySelector,selectPolicyForAdBreakCallbackFunc:function(a){return(a=a.adBreakTimelineItems)&&0<a.length&&(a=a[0],a.watched)?AdobePSDK.AdBreakPolicy.SKIP:AdobePSDK.AdBreakPolicy.PLAY},selectWatchedPolicyForAdBreakCallbackFunc:function(b){return a},
selectPolicyForSeekIntoAdCallbackFunc:function(a){if(a=a.adBreakTimelineItems){var c=a.length;if(0<c&&a[c-1].watched)return AdobePSDK.AdPolicy.SKIP_AD_BREAK}return AdobePSDK.AdPolicy.PLAY_FROM_AD_BEGIN},selectAdBreaksToPlayCallbackFunc:function(a){var c=a.adBreakTimelineItems,d=[];if(c&&0<c.length){var e=c.length;0<e&&a.currentTime<=a.seekToTime&&(c=c[e-1],c.time/1E3<a.seekToTime&&!c.watched&&d.push(c))}return d}}})();(function(){Primetime.DefaultContentFactory=function(){this._auditudeResolver=null;return this};Primetime.DefaultContentFactory.prototype={constructor:Primetime.DefaultContentFactory,retrieveResolversCallbackFunc:function(a){var b=[];if(null==a)return b;a=a.config;null!=a&&void 0!=a&&(a=a.advertisingMetadata,null!=a&&a instanceof AdobePSDK.AuditudeSettings&&(null==this._auditudeResolver&&(this._auditudeResolver=new Primetime.AuditudeResolver(a)),b.push(this._auditudeResolver)));return b},retrieveOpportunityGeneratorsCallbackFunc:function(a){var b=
[];if(null==a)return b;b.push(new Primetime.AdSignalingModeOpportunityGenerator);return b},retrieveAdPolicySelectorCallbackFunc:function(a){return new Primetime.DefaultAdPolicySelector(a)},retrieveCustomAdPlaybackHandlersCallbackFunc:function(a){var b=[];if(null==a)return b;b.push(new Primetime.CustomAdPlaybackHandler);return b}}})();(function(){Primetime.MediaPlayerClient=function(){return this};Primetime.MediaPlayerClient.prototype={constructor:Primetime.MediaPlayerClient,system:void 0,log:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,LIVE_HOLD_DELAY:1E3,setup:function(){this.subscribe(Primetime.MediaPlayerClient.eventList.TIMELINE_RESERVATION_LIVE_HOLD_UPDATE,this);this.subscribe(Primetime.MediaPlayerClient.eventList.OPPORTUNITY_GENERATED,this);this.subscribe(Primetime.MediaPlayerClient.eventList.TIMELINE_OPERATION_GENERATED,
this)},initialize:function(a,b,c,d,e,f,g,h,l,n){this._item=a;this._factory=b;this._mediaPlayer=e;this._adPolicySelector=this._adPolicyProxy=this._generators=this._resolvers=null;this.isCustomFactory=h;this._queuedOpportunities=[];this._reservations={};this._liveReservation=null;this._timeline=f;this._playerInitDone=!1;this._veTimeline=this.system.getObject("videoEngineTimeline");this._veTimeline.initialize(d,c,e,this,g,f);this._timelineMonitor=d;this._firstOppGen=!1;this._itemIsLive=this._item.isLive;
this._customAdHandlerClient=null;if(!this._factory||!this._item)return!1;this._minimumOpportunityTime=-1;this._generators=this._factory.retrieveOpportunityGeneratorsCallbackFunc(this._item);this._resolvers=this._factory.retrieveResolversCallbackFunc(this._item);this._adPolicySelector=this._factory.retrieveAdPolicySelectorCallbackFunc(this._item);this.isCustomFactory&&(a=new Primetime.DefaultContentFactory,this._generators&&0!=this._generators.length||(this._generators=a.retrieveOpportunityGeneratorsCallbackFunc(this._item)),
this._resolvers&&0!=this._resolvers.length||(this._resolvers=a.retrieveResolversCallbackFunc(this._item)),this._adPolicySelector||(this._adPolicySelector=a.retrieveAdPolicySelectorCallbackFunc(this._item)));void 0==Primetime.AdRequest&&(this._resolvers=[]);this._veTimeline.setInitialTimeMapping(l);this._adPolicyProxy=new Primetime.AdPolicyProxy(this._mediaPlayer,this._veTimeline,this._adPolicySelector);this._timelineMonitor.initialize(this._adPolicyProxy,this._mediaPlayer._delegate);this._customAdHandlerClient=
new Primetime.CustomAdPlaybackManagerClient(this._mediaPlayer,this._item,this._veTimeline,this._factory);if(this._resolvers)for(a=0;a<this._resolvers.length;a++)this._resolvers[a].configureCallbackFunc(this._item,this);a=this.extractAdSignalingMode();this._oppTimeout=this.getOpportunityTimeout();if(this._generators)for(b=0;b<this._generators.length;b++)this._generators[b].configureCallbackFunc(this._item,this,a,l,n);this._veTimeline.setInitialTimeMapping(l);this._veTimeline.notifyTimelineUpdated();
this._resolvers&&this._generators&&0!=this._resolvers.length&&0!=this._generators.length||this.initPlayer();this._firstOppGen||this.initPlayer()},lookupContentResolver:function(a){for(var b=0;b<this._resolvers.length;b++){var c=this._resolvers[b];if(c.canResolveCallbackFunc(a))return c}},canAcceptOpportunity:function(a){return isNaN(this._minimumOpportuntiyTime)?!0:this._minimumOpportuntiyTime<a.placement.time},validateProposals:function(a){if(!a)return!1;for(var b=0;b<a.length;b++)if(!a[b])return!1;
return!0},getOpportunityTimeout:function(){var a=null;if(this._item){var b=this._item.config;b&&(b=b.advertisingMetadata)&&(a=b.timeout)}if(!a||isNaN(a))a=2E4;this.log("using opportunity timeout = "+a,"INFO");return a},extractAdSignalingMode:function(){var a;if(this._item){var b=this._item.config;b&&b.advertisingMetadata&&(a=b.adSignalingMode)}a||(a=AdobePSDK.AdSignalingMode.DEFAULT);a==AdobePSDK.AdSignalingMode.DEFAULT&&this._item&&(this.log("#extractAdSignalingMode The received ad signaling mode is default.",
"INFO"),a=this._item.isLive?AdobePSDK.AdSignalingMode.MANIFEST_CUES:AdobePSDK.AdSignalingMode.SERVER_MAP);return a},initPlayer:function(){this._playerInitDone||(this._mediaPlayer.setInitalizedVirtualTimeline(!0),this._playerInitDone=!0,this._mediaPlayer._virtualTimeline&&this._mediaPlayer._virtualTimeline.sendTimelineUpdatedEvent(),this.log("Primetime.MediaPlayerClient -> player init done successfully from ad workflow.","INFO"))},csaiTestCode:function(a,b){var c=a.ads[0].primaryAsset.resource.url;
if(b.placement.type===AdobePSDK.PlacementType.PRE_ROLL){var d=this.system;d.getObject("parser");var e=d.getObject("timeline");(function(a){var b=null;-1!==a.indexOf("/")&&(-1!==a.indexOf("?")&&(a=a.substring(0,a.indexOf("?"))),b=a.substring(0,a.lastIndexOf("/")+1));return b})(c);this._mediaPlayer.retrieveManifest(c,function(a){this._mediaPlayer.setScheduleControllerStartEnabled(!0);var b;b=e.insertByLocalTime(a,0,0,!1);b=e.insertByLocalTime(a,20,0,!1);b=e.insertByLocalTime(a,900,0,!1);a=e.removePeriodById(b.periodIds[0],
!0);a=e.getCurrentPeriodIndex();a=e.getPeriodInfo(a);a=e.isComplete();a=e.mapToLocalTime(16);a=e.mapToVirtualTime(1,1.03);a=e.getFirstPeriodIndex();a=e.getLastPeriodIndex();a=this._mediaPlayer.convertToLocalTimeMapping(16);a=this._mediaPlayer.convertToLocalTimeMapping(34.8);a=this._mediaPlayer.getVirtualTimeForLocalTime();this._mediaPlayer._delegate._nativeNotification("prepared");setTimeout(function(){},4E4)}.bind(this))}},process:function(a,b){if(this.delegate){var c=[],d;for(d in a){var e=a[d];
e&&(e.setupDelegate(),c.push(e.getDelegate()))}var f;b&&(f=b.getDelegate());this.delegate.process(c,f)}else{if("undefined"!==typeof b&&null!==b)for(b.proposals=[],c=0;c<a.length;c++)b.proposals.push(a[c]);this.notify(Primetime.MediaPlayerClient.eventList.TIMELINE_OPERATION_GENERATED,{proposals:a,opportunity:b})}},timelineOperationsGenerated:function(a){var b=a.data.proposals;a=a.data.opportunity;if(this.validateProposals(b))for(a=0;a<b.length;a++)this._veTimeline.process(b[a]);else this.log("invalid proposals generated",
"INFO"),a&&(a.proposals=null)},proposalProcessed:function(a){if("undefined"!==typeof a&&null!==a){var b=a.parentOpportunity;if(b&&b.proposals){for(var c=0;c<b.proposals.length;c++)if(b.proposals[c]===a){b.proposals.splice(c,1);break}0===b.proposals.length&&this.notifyCompleted(b)}this.initPlayer()}},notifyCompleted:function(a){this.delegate?(a.setupDelegate(),this.delegate.notifyCompleted(a.getDelegate())):"undefined"!==typeof a&&null!==a&&(a.proposals&&0===a.proposals.length||!a.proposals)&&this.unregisterOpportunity(a)},
notifyFailed:function(a,b){this.delegate?(a.setupDelegate(),this.delegate.notifyFailed(a.getDelegate())):(this.unregisterOpportunity(a),"undefined"!==typeof a&&null!==a&&this.initPlayer())},resolve:function(a){this.delegate?(a.setupDelegate(),this.delegate.resolve(a.getDelegate())):this.notify(Primetime.MediaPlayerClient.eventList.OPPORTUNITY_GENERATED,{opportunity:a})},opportunityGenerated:function(a){var b=a.data.opportunity;if(this._resolvers){a=b.placement;if(!this._veTimeline.mainContentIsLive||
a.type!=AdobePSDK.PlacementType.PRE_ROLL){var c=0>this._minimumOpportunityTime?this._minimumOpportunityTime:this._mediaPlayer.convertToLocalTimeMapping(this._minimumOpportunityTime).time;if(a.time<c){this.log("#onOpportunityGenerated Opportunity can not be accepted for placement at position "+a.time+"Current minimum opportunity time "+c+" : virtual "+this._minimumOpportunityTime,"INFO");this.handleFailedOpportunity(b);return}}this.registerOpportunity(b);var d=this.lookupContentResolver(b);if(d){if(this.shouldHandleTimeoutForOpportunity(b)){this._firstOppGen=
!0;var e=this;setTimeout(function(){e.initPlayer()},this._oppTimeout)}setTimeout(function(){d.resolveCallbackFunc(b)},0)}else this.log("#onOpportunityGenerated No content resolver can resolve the specified opportunity "+b.id,"INFO"),this.handleFailedOpportunity(b)}else this.log("#onOpportunityGenerated The list of content resolvers is invalid. Ignoring the opportunity event","INFO")},shouldHandleTimeoutForOpportunity:function(a){return!this._firstOppGen&&!this._playerInitDone&&(a.placement.type==
AdobePSDK.PlacementType.PRE_ROLL||a.placement.type==AdobePSDK.PlacementType.SERVER_MAP)},handleFailedOpportunity:function(a,b){this.notifyFailed(a)},registerOpportunity:function(a){},unregisterOpportunity:function(a){},hold:function(a){if(this.delegate)a.setupDelegate(),this.delegate.hold(a.getDelegate());else return this._veTimeline.Hold(a)},cancel:function(a){if(this.delegate)a.setupDelegate(),this.delegate.cancel(a.getDelegate());else return this._veTimeline.cancel(a)},update:function(a,b,c){},
cleanup:function(){this.cancel(this._liveReservation);this._liveReservation=null;this._minimumOpportunityTime=-1;this.unsubscribe(Primetime.MediaPlayerClient.eventList.TIMELINE_RESERVATION_LIVE_HOLD_UPDATE,this);this.unsubscribe(Primetime.MediaPlayerClient.eventList.OPPORTUNITY_GENERATED,this);if(this._generators)for(var a=0;a<this._generators.length;a++)this._generators[a].cleanup();if(this._resolvers)for(a=0;a<this._resolvers.length;a++)this._resolvers[a].cleanup();this._adPolicySelector=this._resolvers=
this._generators=null},timelineReservationLiveHoldUpdated:function(a){}};Primetime.MediaPlayerClient.eventList={TIMELINE_RESERVATION_LIVE_HOLD_UPDATE:"timelineReservationLiveHoldUpdated",OPPORTUNITY_GENERATED:"opportunityGenerated",TIMELINE_OPERATION_GENERATED:"timelineOperationsGenerated"}})();Primetime.TimedMetadataParser=function(a,b){var c=b,d=AdobePSDK.TimedMetadataType.TAG,e=a,f=new AdobePSDK.Metadata,g=a.indexOf(":");if(-1!=g)for(var e=a.substring(0,g).trim(),c=e+"_"+b.toFixed(),g=a.substring(g+1).trim().split(","),h=0;h<g.length;h++){var l=g[h].split("=");if(2==l.length){var n=l[1].replace(/['"]+/g,"");f.setValue(l[0],n);"id"==l[0].toLowerCase()&&(c=n)}else 1==l.length&&f.setValue(l[0],"")}return new AdobePSDK.TimedMetadata(d,b,c,e,a,f)};(function(){Primetime.ID3Parser=function(){return this};Primetime.ID3Parser.prototype={constructor:Primetime.ID3Parser,hex2a:function(a,b,c){var d="";if(!a)return d;for(var e=b;e<a.length&&e<b+c;e++)d+=String.fromCharCode(a[e]);return d},utf8HexToString:function(a,b,c){for(var d="",e=b;e<a.length&&e<b+c;e++)d+=a[e].toString();return decodeURIComponent(d.replace(/\s+/g,"").replace(/[0-9a-f]{2}/g,"%$&"))},parse:function(a){if(10<a.length&&73==a[0]&&68==a[1]&&51==a[2]){var b=a[3];if(4<b)console.log("major version > 4");
else{var b=4==b,c=5,d=a[c]&64,e=a[c]&32,f=!1;b&&(f=a[c]&16);if(e)console.log("experimental tag");else if(d)console.log("extended header.. skipping");else{d=a.length;f&&(d-=10);f=[];++c;++c;++c;++c;for(e={};c<d;){if(c+10>d)return e;++c;var g;b?(g=a[c+4],g<<=21,g+=a[c+5],g<<=14,g+=a[c+6],g<<=7):(g=a[c+4],g<<=8,g+=a[c+5],g<<=8,g+=a[c+6],g<<=8);g+=a[c+7];g=c+10+g;if(d<g)break;e.id=this.hex2a(a,c,4);e.data=a.subarray(c+10,g);f.push(e);c=g}return f}}}}}})();(function(){Primetime.html.MediaPlayerImplDelegate=function(a,b,c){this._status=AdobePSDK.MediaPlayerStatus.IDLE;this._mediaResource=null;this._eventDispatcher=a._eventDispatcher;this._timeline=this._config=this._currentItem=null;this._captionTracks=[];this._audioTracks=[];this._ccvisibility=AdobePSDK.MediaPlayer.VISIBLE;this._volume=AdobePSDK.MediaPlayer.DEFAULT_VOLUME;this._nativePlayer=b;this._delegate=a;this._view=void 0;this._videoPlayTimeout=this._drmManager=this._bufferControlParameters=this._abrControlParameters=
null;this._resourceType=c;return this};var a=function(a,b){this._status=a;this._eventDispatcher.dispatchEvent(new AdobePSDK.MediaPlayerStatusChangeEvent(a,this._delegate,b))},b=function(b){var c="",d=AdobePSDK.PSDKErrorCode.kECGenericError,e="",f="",g=AdobePSDK.NotificationType.Error,h=new AdobePSDK.Metadata,t=!1,r=null,r=!1;b.event&&b.event.message?c=b.event.message:b.message&&(c=b.message);switch(b.error){case "NativePlayerError":d=AdobePSDK.PSDKErrorCode.kECPlaybackOperationFailed;e="kECPlaybackOperationFailed";
f="There was an error during the playback operation";h.setValue("id",b.id);h.setValue("PSDK_ERROR_CODE",d+"");h.setValue("PSDK_ERROR",e);h.setValue("DESCRIPTION",f);break;case "mediasource":r=t=!0;c=b.event;"MEDIA_ERR_ABORTED"===b.event?(d=AdobePSDK.PSDKErrorCode.kECGenericError,e="kECGenericError",f="Generic error."):"MEDIA_ERR_NETWORK"===b.event?(d=AdobePSDK.PSDKErrorCode.kECNetworkError,e="kECNetworkError",f="A network error occurred."):"MEDIA_ERR_DECODE"===b.event?(d=AdobePSDK.PSDKErrorCode.kECCodecNotSupported,
e="kECCodecNotSupported",f="Unsupported codec."):"MEDIA_ERR_SRC_NOT_SUPPORTED"===b.event?(d=AdobePSDK.PSDKErrorCode.kECCodecNotSupported,e="kECCodecNotSupported",f="Unsupported codec."):"MEDIA_ERR_ENCRYPTED"===b.event&&(d=AdobePSDK.PSDKErrorCode.kECGenericError,e="kECGenericError",f="Generic error.");h.setValue("PSDK_ERROR_CODE",d+"");h.setValue("PSDK_ERROR",e);h.setValue("DESCRIPTION",f);break;case "capability":t=!0;c=b.event;d=AdobePSDK.PSDKErrorCode.kECNotSupported;e="kECNotSupported";f="Feature not supported in this platform.";
h.setValue("PSDK_ERROR_CODE",d+"");h.setValue("PSDK_ERROR",e);h.setValue("DESCRIPTION",f);break;case "download":r=t=!0;d=AdobePSDK.PSDKErrorCode.kECNetworkError;e="kECNetworkError";f="A network error occurred.";h.setValue("id",b.event.id);h.setValue("URL",b.event.url);h.setValue("request",b.event.request);h.setValue("PSDK_ERROR_CODE",d+"");h.setValue("PSDK_ERROR",e);h.setValue("DESCRIPTION",f);break;case "contentTypeError":r=t=!0;d=AdobePSDK.PSDKErrorCode.kECGenericError;e="kECGenericError";f="Generic error.";
h.setValue("id",b.event.id);h.setValue("PSDK_ERROR_CODE",d+"");h.setValue("PSDK_ERROR",e);h.setValue("DESCRIPTION",f);break;case "manifestError":r=t=!0;d=AdobePSDK.PSDKErrorCode.kECGenericError;e="kECGenericError";f="Generic error.";h.setValue("id",b.event.id);h.setValue("manifest",b.event.manifest);h.setValue("PSDK_ERROR_CODE",d+"");h.setValue("PSDK_ERROR",e);h.setValue("DESCRIPTION",f);break;case "cc":d=AdobePSDK.PSDKErrorCode.kECGenericError;e="kECGenericError";f="Generic error.";h.setValue("id",
b.id);h.setValue("cc",b.cc);h.setValue("PSDK_ERROR_CODE",d+"");h.setValue("PSDK_ERROR",e);h.setValue("DESCRIPTION",f);break;case "key_session":case "key_message":case "key_system_selection":c=b.event,d=AdobePSDK.PSDKErrorCode.kECNotSupported,e="kECNotSupported",f="Feature not supported in this platform.",h.setValue("PSDK_ERROR_CODE",d+""),h.setValue("PSDK_ERROR",e),h.setValue("DESCRIPTION",f)}h.setValue("message",b.error+"."+c);if(r&&this._nativePlayer&&this._nativePlayer.virtualTimelineManager&&
(e=this._nativePlayer.virtualTimelineManager.getActiveItem())&&!e.getMediaPlayerImpl().isMainContentPlayer()){console.log("Skipping to next item in case of error related to ad manifest/url");this._nativePlayer.virtualTimelineManager.skipItem(e);return}r=new AdobePSDK.Notification(g,d,h,null);this._eventDispatcher.dispatchEvent(new AdobePSDK.NotificationEvent(AdobePSDK.MediaPlayer.Events.OperationFailedEvent,r,this._delegate));console.log("AdobePSDK.MediaPlayer error: "+b.error+"."+c);t&&a.call(this,
AdobePSDK.MediaPlayerStatus.ERROR,h)},c=function(a){console.log("AdobePSDK.MediaPlayer error: "+a)},d=function(){this._currentItem||(this._currentItem=new AdobePSDK.MediaPlayerItem(this._delegate,this._mediaResource,this._nativePlayer.getCurrentItem()),this._eventDispatcher.dispatchEvent(new AdobePSDK.MediaPlayerItemEvent(this._currentItem,AdobePSDK.MediaPlayer.Events.ItemCreatedEvent,this._delegate)))},e=function(){this._nativePlayer&&!this._drmManager&&(this._drmManager=new AdobePSDK.DRMManager(this._delegate,
this._nativePlayer.getDRMManager()))},f=function(){this._config=this._currentItem=null;this._captionTracks=[];this._audioTracks=[];this._nativePlayer&&this._nativePlayer.resetCurrentItem()},g=function(a,b){if(a===b)return!0;if(!(a&&b&&a instanceof AdobePSDK.AudioTrack&&b instanceof AdobePSDK.AudioTrack))return!1;var c=a.default===b.default,d=a.forced===b.forced,e=a.language===b.language,f=a.mediaId===b.mediaId,g=a.mediaInfoIndex===b.mediaInfoIndex,h=a.name===b.name;return a.autoSelect===b.autoSelect&&
c&&d&&e&&f&&g&&h},h=function(a){return Math.floor(1E3*a)};Primetime.html.MediaPlayerImplDelegate.prototype={constructor:Primetime.html.MediaPlayerImplDelegate,getTextFormatDelegate:function(a){return a},getMediaResourceDelegate:function(a){return a},getConfigDelegate:function(a){return a},getViewDelegate:function(a){if("undefined"!==typeof a&&null!==a){for(var b=a._div.getElementsByTagName("video"),c=0;c<b.length;c++)b[c].style.visibility="visible",void 0!==a._videoControlsTarget&&b[c].removeAttribute("controls");
b=a.getDelegate();b||(b=new Primetime.html.MediaPlayerViewDelegate,a.setDelegate(b));return b}},getABRControlParametersDelegate:function(a){return a},getBufferControlParametersDelegate:function(a){return a},getOpportunityDelegate:function(a){return a},getPlacementDelegate:function(a){return a},setDRMManager:function(a){this._drmManager=a;this._nativePlayer&&this._drmManager&&this._drmManager._setNativeDRMManager(this._nativePlayer.getDRMManager())},prepareToPlay:function(a){if(this._status===AdobePSDK.MediaPlayerStatus.INITIALIZED){if(this._nativePlayer.prepareToPlay(a))return AdobePSDK.PSDKErrorCode.kECSuccess;
b.call(this,{error:"NativePlayerError",id:"prepareToPlay"})}else return AdobePSDK.PSDKErrorCode.kECIllegalState;return AdobePSDK.PSDKErrorCode.kECGenericError},dispatchEvent:function(a){},prepareBuffer:function(){},registerCurrentItemInBackground:function(a){},unregisterCurrentBackgroundItem:function(){},play:function(){var a=this;if(this._status===AdobePSDK.MediaPlayerStatus.PAUSED||this._status===AdobePSDK.MediaPlayerStatus.PREPARED||this._status===AdobePSDK.MediaPlayerStatus.PLAYING||this._status===
AdobePSDK.MediaPlayerStatus.SEEKING||this._status===AdobePSDK.MediaPlayerStatus.COMPLETE){if(this._view&&!1===this._view._videoPlayed)return null==this._videoPlayTimeout&&(this._view.playEmptyVideoTags(),this._videoPlayTimeout=setTimeout(function(){a.play();a._videoPlayTimeout=null},1E3)),AdobePSDK.PSDKErrorCode.kECSuccess;if(this._nativePlayer.play())return AdobePSDK.PSDKErrorCode.kECSuccess;b.call(this,{error:"NativePlayerError",id:"play"})}else return c.call(this,"IllegalStateException"),AdobePSDK.PSDKErrorCode.kECIllegalState;
return AdobePSDK.PSDKErrorCode.kECGenericError},pause:function(){if(this._status===AdobePSDK.MediaPlayerStatus.PLAYING||this._status===AdobePSDK.MediaPlayerStatus.PREPARED||this._status===AdobePSDK.MediaPlayerStatus.PAUSED||this._status===AdobePSDK.MediaPlayerStatus.SEEKING||this._status===AdobePSDK.MediaPlayerStatus.COMPLETE){if(this._nativePlayer.pause())return a.call(this,AdobePSDK.MediaPlayerStatus.PAUSED),AdobePSDK.PSDKErrorCode.kECSuccess;b.call(this,{error:"NativePlayerError",id:"pause"})}else return c.call(this,
"IllegalStateException"),AdobePSDK.PSDKErrorCode.kECIllegalState;return AdobePSDK.PSDKErrorCode.kECGenericError},_innerSeek:function(a){var c=a;a&&a!==AdobePSDK.MediaPlayer.LIVE_POINT&&(c=a/1E3,(a=this._nativePlayer.getPlaybackRange())&&(c-=a.start),c=h(c));this._nativePlayer.isTrickPlayMode()&&this.setRate(1);if(this._nativePlayer.seek(c))return AdobePSDK.PSDKErrorCode.kECSuccess;b.call(this,{error:"NativePlayerError",id:"seek"})},rawSeek:function(a){if(this._status===AdobePSDK.MediaPlayerStatus.PLAYING||
this._status===AdobePSDK.MediaPlayerStatus.PREPARED||this._status===AdobePSDK.MediaPlayerStatus.PAUSED||this._status===AdobePSDK.MediaPlayerStatus.COMPLETE||this._status===AdobePSDK.MediaPlayerStatus.SEEKING)return this._innerSeek(a);c.call(this,"IllegalStateException");return AdobePSDK.PSDKErrorCode.kECIllegalState},seek:function(a){if(this._status===AdobePSDK.MediaPlayerStatus.PLAYING||this._status===AdobePSDK.MediaPlayerStatus.PREPARED||this._status===AdobePSDK.MediaPlayerStatus.PAUSED||this._status===
AdobePSDK.MediaPlayerStatus.COMPLETE)return this._innerSeek(a);c.call(this,"IllegalStateException");return AdobePSDK.PSDKErrorCode.kECIllegalState},seekToLocal:function(a){if(this._status===AdobePSDK.MediaPlayerStatus.PLAYING||this._status===AdobePSDK.MediaPlayerStatus.PREPARED||this._status===AdobePSDK.MediaPlayerStatus.PAUSED){if(this._nativePlayer.seekToLocal(a))return AdobePSDK.PSDKErrorCode.kECSuccess;b.call(this,{error:"NativePlayerError",id:"seekToLocal"})}else return c.call(this,"IllegalStateException"),
AdobePSDK.PSDKErrorCode.kECIllegalState},reset:function(){if(this._status!==AdobePSDK.MediaPlayerStatus.RELEASED){f.call(this);var b=this,c={};c[Primetime.MediaPlayerImpl.Events.ENAME_RESET_COMPLETE]=function(){b._nativePlayer&&b._nativePlayer.unsubscribe(Primetime.MediaPlayerImpl.Events.ENAME_RESET_COMPLETE,c);b._mediaResource=null;b._currentItem=null;b._drmManager=null;b._timeline=null;b._captionTracks=[];b._audioTracks=[];b._ccvisibility=AdobePSDK.MediaPlayer.VISIBLE;a.call(b,AdobePSDK.MediaPlayerStatus.IDLE)};
if(this._nativePlayer)this._nativePlayer.subscribe(Primetime.MediaPlayerImpl.Events.ENAME_RESET_COMPLETE,c,void 0,!0),this._nativePlayer.reset();else c[Primetime.MediaPlayerImpl.Events.ENAME_RESET_COMPLETE]();this._videoPlayTimeout=null;return AdobePSDK.PSDKErrorCode.kECSuccess}return AdobePSDK.PSDKErrorCode.kECIllegalState},release:function(){a.call(this,AdobePSDK.MediaPlayerStatus.RELEASED);this.reset();return AdobePSDK.PSDKErrorCode.kECSuccess},suspend:function(){return AdobePSDK.PSDKErrorCode.kECNotImplemented},
restore:function(){return AdobePSDK.PSDKErrorCode.kECNotImplemented},replaceCurrentResource:function(a,b){return this._status===AdobePSDK.MediaPlayerStatus.IDLE&&void 0!==a&&a instanceof AdobePSDK.MediaResource?(f.call(this),this._mediaResource=a,this._config=b,this._nativePlayer?(this.abrControlParameters=this._nativePlayer._abrControlParameters,this._view&&this._view.hideBackgroundImage&&this._view.hideBackgroundImage(),this._nativePlayer.replaceCurrentResource(a,b),AdobePSDK.PSDKErrorCode.kECSuccess):
AdobePSDK.PSDKErrorCode.kECGenericError):AdobePSDK.PSDKErrorCode.kECIllegalState},replaceCurrentItem:function(){return this._status!==AdobePSDK.MediaPlayerStatus.RELEASED?AdobePSDK.PSDKErrorCode.kECNotImplemented:AdobePSDK.PSDKErrorCode.kECIllegalState},getCurrentTime:function(){return this._status!==AdobePSDK.MediaPlayerStatus.RELEASED?this._nativePlayer?h(this._nativePlayer.getCurrentTime()):0:AdobePSDK.PSDKErrorCode.kECIllegalState},getLocalTime:function(){return this._status!==AdobePSDK.MediaPlayerStatus.RELEASED?
this._nativePlayer?h(this._nativePlayer.getLocalTime()):0:AdobePSDK.PSDKErrorCode.kECIllegalState},getPlaybackRange:function(){if(this._nativePlayer&&(this._status===AdobePSDK.MediaPlayerStatus.PREPARED||this._status===AdobePSDK.MediaPlayerStatus.PLAYING||this._status===AdobePSDK.MediaPlayerStatus.PAUSED||this._status===AdobePSDK.MediaPlayerStatus.SEEKING||this._status===AdobePSDK.MediaPlayerStatus.COMPLETE)){var a=this._nativePlayer.getPlaybackRange();return a?new AdobePSDK.TimeRange(h(a.start),
h(a.end-a.start)):AdobePSDK.PSDKErrorCode.kECElementNotFound}return AdobePSDK.PSDKErrorCode.kECIllegalState},getSeekableRange:function(){if(this._nativePlayer&&(this._status===AdobePSDK.MediaPlayerStatus.PREPARED||this._status===AdobePSDK.MediaPlayerStatus.PLAYING||this._status===AdobePSDK.MediaPlayerStatus.PAUSED||this._status===AdobePSDK.MediaPlayerStatus.SEEKING||this._status===AdobePSDK.MediaPlayerStatus.COMPLETE)){var a=this._nativePlayer.getSeekableRange();return a?new AdobePSDK.TimeRange(h(a.start),
h(a.end-a.start)):AdobePSDK.PSDKErrorCode.kECElementNotFound}return AdobePSDK.PSDKErrorCode.kECIllegalState},getBufferedRange:function(){if(this._nativePlayer&&(this._status!==AdobePSDK.MediaPlayerStatus.ERROR||this._status!==AdobePSDK.MediaPlayerStatus.RELEASED)){var a=this._nativePlayer.getBufferedRange("muxed");a===AdobePSDK.PSDKErrorCode.kECElementNotFound&&(a=this._nativePlayer.getBufferedRange("video"));return new AdobePSDK.TimeRange(h(a.begin),h(a.duration))}return AdobePSDK.PSDKErrorCode.kECIllegalState},
getPlaybackMetrics:function(){return this._nativePlayer&&this._status!==AdobePSDK.MediaPlayerStatus.RELEASED?this._nativePlayer.getPlaybackMetrics():AdobePSDK.PSDKErrorCode.kECIllegalState},getAdditionalPlaybackInformationMetrics:function(){return this._nativePlayer?this._nativePlayer.getAdditionalPlaybackInformationMetrics():AdobePSDK.PSDKErrorCode.kECIllegalState},getTimeline:function(){return this._status!==AdobePSDK.MediaPlayerStatus.RELEASED?this._timeline:AdobePSDK.PSDKErrorCode.kECIllegalState},
getCurrentItem:function(){return this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==AdobePSDK.MediaPlayerStatus.ERROR?this._currentItem:AdobePSDK.PSDKErrorCode.kECIllegalState},getStatus:function(){return this._status},getDRMManager:function(){this._drmManager||e.call(this);return this._drmManager},getView:function(){return this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==AdobePSDK.MediaPlayerStatus.ERROR?this._view:AdobePSDK.PSDKErrorCode.kECIllegalState},setMediaPlayerView:function(a){return this.setView(a)},
setView:function(a){return this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==AdobePSDK.MediaPlayerStatus.ERROR?a?(this._view=a,this._nativePlayer&&this._nativePlayer.setView(a._video),AdobePSDK.PSDKErrorCode.kECSuccess):AdobePSDK.PSDKErrorCode.kECNullPointer:AdobePSDK.PSDKErrorCode.kECIllegalState},getVolume:function(){return this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==AdobePSDK.MediaPlayerStatus.ERROR?this._nativePlayer?this._nativePlayer.getVolume():this._volume:
AdobePSDK.PSDKErrorCode.kECIllegalState},setVolume:function(a){return this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==AdobePSDK.MediaPlayerStatus.ERROR?!isNaN(a)&&0<=a&&1>=a?(this._volume=a,this._nativePlayer&&this._nativePlayer.setVolume(a),AdobePSDK.PSDKErrorCode.kECSuccess):AdobePSDK.PSDKErrorCode.kECInvalidArgument:AdobePSDK.PSDKErrorCode.kECIllegalState},getRate:function(){if(this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==AdobePSDK.MediaPlayerStatus.ERROR){if(this._nativePlayer)return this._nativePlayer.getRate()}else return AdobePSDK.PSDKErrorCode.kECIllegalState},
setRate:function(a){if(this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==AdobePSDK.MediaPlayerStatus.ERROR&&this._status!==AdobePSDK.MediaPlayerStatus.INITIALIZING&&this._status!==AdobePSDK.MediaPlayerStatus.INITIALIZED&&this._status!==AdobePSDK.MediaPlayerStatus.PREPARING&&this._status!==AdobePSDK.MediaPlayerStatus.IDLE&&this._nativePlayer){if(this._currentItem&&"undefined"!==typeof a&&null!==a){var b=this._currentItem.availablePlaybackRates,c=null,d=-1;if(b&&0<b.length)for(var e=
0;e<b.length;e++){if(b[e]===a){c=b[e];break}if(0===a||1===a){c=a;break}else if(0>a&&0>b[e]||0<a&&0<=b[e]){var f=Math.abs(b[e]-a);if(-1===d||f<d)c=b[e],d=f}}a=c;if(null!==a)return this._nativePlayer.setRate(a),AdobePSDK.PSDKErrorCode.kECSuccess}return AdobePSDK.PSDKErrorCode.kECInvalidArgument}return AdobePSDK.PSDKErrorCode.kECIllegalState},getContext:function(){},setContext:function(a){},getBufferControlParameters:function(){return this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==
AdobePSDK.MediaPlayerStatus.ERROR?this._nativePlayer?this._nativePlayer.getBufferControlParameters():this._bufferControlParameters?this._bufferControlParameters:Primetime.BindingsFactory.getDefaultBufferControlParameters():AdobePSDK.PSDKErrorCode.kECIllegalState},setBufferControlParameters:function(a){if(this._status!==AdobePSDK.MediaPlayerStatus.RELEASED){if("undefined"!==typeof a&&null!==a){if(this._nativePlayer){if(0==this._nativePlayer.setBufferControlParameters(a))return c.call(this,"IllegalArgumentException"),
AdobePSDK.PSDKErrorCode.kECInvalidArgument;this._bufferControlParameters=a}return AdobePSDK.PSDKErrorCode.kECSuccess}return AdobePSDK.PSDKErrorCode.kECInvalidArgument}c.call(this,"IllegalStateException");return AdobePSDK.PSDKErrorCode.kECIllegalState},getABRControlParameters:function(){return this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==AdobePSDK.MediaPlayerStatus.ERROR?this._nativePlayer?this._nativePlayer.getABRControlParameters():this._abrControlParameters?this._abrControlParameters:
Primetime.defaults.getABRControlParameters():AdobePSDK.PSDKErrorCode.kECIllegalState},setABRControlParameters:function(a){if(this._status!==AdobePSDK.MediaPlayerStatus.RELEASED)return"undefined"!==typeof a&&null!==a?(this._abrControlParameters=a,this._nativePlayer&&this._nativePlayer.setABRControlParameters(a),AdobePSDK.PSDKErrorCode.kECSuccess):AdobePSDK.PSDKErrorCode.kECInvalidArgument;c.call(this,"IllegalStateException");return AdobePSDK.PSDKErrorCode.kECIllegalState},getCCVisibility:function(){return this._status!==
AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==AdobePSDK.MediaPlayerStatus.ERROR?this._ccvisibility:AdobePSDK.PSDKErrorCode.kECIllegalState},setCCVisibility:function(a){this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==AdobePSDK.MediaPlayerStatus.ERROR&&(this._ccvisibility=a,this._nativePlayer&&this._nativePlayer.setCCVisibility(a));return AdobePSDK.PSDKErrorCode.kECIllegalState},getPreBuffering:function(){return this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==
AdobePSDK.MediaPlayerStatus.ERROR?this._nativePlayer?this._nativePlayer.getPreBuffering():!1:AdobePSDK.PSDKErrorCode.kECIllegalState},setPreBuffering:function(a){this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==AdobePSDK.MediaPlayerStatus.ERROR&&this._nativePlayer&&this._nativePlayer.setPreBuffering(a);return AdobePSDK.PSDKErrorCode.kECIllegalState},getQualitySwitchBasedOnPDT:function(){return this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==AdobePSDK.MediaPlayerStatus.ERROR?
this._nativePlayer?this._nativePlayer.getQualitySwitchBasedOnPDT():!1:AdobePSDK.PSDKErrorCode.kECIllegalState},setQualitySwitchBasedOnPDT:function(a){this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==AdobePSDK.MediaPlayerStatus.ERROR&&this._nativePlayer&&this._nativePlayer.setQualitySwitchBasedOnPDT(a);return AdobePSDK.PSDKErrorCode.kECIllegalState},getCCStyle:function(){return this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&this._status!==AdobePSDK.MediaPlayerStatus.ERROR?
this._textFormat:AdobePSDK.PSDKErrorCode.kECIllegalState},setCCStyle:function(a){if(this._status!==AdobePSDK.MediaPlayerStatus.RELEASED)this._textFormat=a,this._nativePlayer&&this._nativePlayer.setCCStyle(this._textFormat);else return c.call(this,"IllegalStateException"),AdobePSDK.PSDKErrorCode.kECIllegalState},getCurrentTimeUpdateInterval:function(){return AdobePSDK.PSDKErrorCode.kECNotImplemented},setCurrentTimeUpdateInterval:function(){return AdobePSDK.PSDKErrorCode.kECNotImplemented},getNotificationHistory:function(){return AdobePSDK.PSDKErrorCode.kECNotImplemented},
addEventListener:function(){return AdobePSDK.PSDKErrorCode.kECSuccess},removeEventListener:function(){return AdobePSDK.PSDKErrorCode.kECSuccess},notifyClick:function(){var a=this._nativePlayer&&this._nativePlayer.getTimelineMonitor();a&&a.processAdClick()},getEventDispatcher:function(){return AdobePSDK.PSDKErrorCode.kECSuccess},_nativeNotification:function(b,c){var f=null;switch(b){case "reset":this._status!==AdobePSDK.MediaPlayerStatus.RELEASED&&a.call(this,AdobePSDK.MediaPlayerStatus.IDLE);break;
case "initializing":this._status===AdobePSDK.MediaPlayerStatus.IDLE&&a.call(this,AdobePSDK.MediaPlayerStatus.INITIALIZING);break;case "initialized":this._status===AdobePSDK.MediaPlayerStatus.INITIALIZING&&a.call(this,AdobePSDK.MediaPlayerStatus.INITIALIZED);break;case "preparing":this._status===AdobePSDK.MediaPlayerStatus.INITIALIZED&&a.call(this,AdobePSDK.MediaPlayerStatus.PREPARING);break;case "prepared":this._status===AdobePSDK.MediaPlayerStatus.PREPARING&&a.call(this,AdobePSDK.MediaPlayerStatus.PREPARED);
break;case "playStart":this._status===AdobePSDK.MediaPlayerStatus.PLAYING&&(f=new AdobePSDK.PSDKEvent(AdobePSDK.MediaPlayer.Events.PlayStartEvent,this._delegate),this._eventDispatcher.dispatchEvent(f));break;case "playing":this._status!==AdobePSDK.MediaPlayerStatus.PLAYING&&this._status!==AdobePSDK.MediaPlayerStatus.INITIALIZING&&this._status!==AdobePSDK.MediaPlayerStatus.INITIALIZED&&this._status!==AdobePSDK.MediaPlayerStatus.PREPARING&&a.call(this,AdobePSDK.MediaPlayerStatus.PLAYING);break;case "pause":this._status!=
AdobePSDK.MediaPlayerStatus.PAUSED&&this._status!=AdobePSDK.MediaPlayerStatus.INITIALIZING&&this._status!=AdobePSDK.MediaPlayerStatus.INITIALIZED&&this._status!=AdobePSDK.MediaPlayerStatus.PREPARING&&a.call(this,AdobePSDK.MediaPlayerStatus.PAUSED);break;case "stop":this._status!=AdobePSDK.MediaPlayerStatus.ERROR&&this._status!=AdobePSDK.MediaPlayerStatus.RELEASED&&(this._nativePlayer&&this._nativePlayer.handlePlaybackComplete(),a.call(this,AdobePSDK.MediaPlayerStatus.COMPLETE));break;case "seekStart":if(this._status===
AdobePSDK.MediaPlayerStatus.PLAYING||this._status===AdobePSDK.MediaPlayerStatus.PREPARED||this._status===AdobePSDK.MediaPlayerStatus.PAUSED)a.call(this,AdobePSDK.MediaPlayerStatus.SEEKING),this._eventDispatcher.dispatchEvent(new AdobePSDK.SeekEvent(AdobePSDK.MediaPlayer.Events.SeekBeginEvent,h(c.desiredPosition),h(c.actualPosition),c.local,this._delegate));break;case "seekPositionAdjusted":this._eventDispatcher.dispatchEvent(new AdobePSDK.SeekEvent(AdobePSDK.MediaPlayer.Events.SeekPositionAdjustedEvent,
c.desiredPosition,c.actualPosition,c.local,this._delegate));break;case "seekEnd":this._eventDispatcher.dispatchEvent(new AdobePSDK.SeekEvent(AdobePSDK.MediaPlayer.Events.SeekEndEvent,h(c.desiredPosition),h(c.actualPosition),c.local,this._delegate));break;case "rateSelected":f=new AdobePSDK.PlaybackRateEvent(AdobePSDK.MediaPlayer.Events.PlaybackRateSelectedEvent,c.rate,this._delegate);this._eventDispatcher.dispatchEvent(f);break;case "ratePlaying":f=new AdobePSDK.PlaybackRateEvent(AdobePSDK.MediaPlayer.Events.PlaybackRatePlayingEvent,
this.getRate(),this._delegate);this._eventDispatcher.dispatchEvent(f);break;case "timeUpdated":f=new AdobePSDK.TimeChangeEvent(h(c),this._delegate);this._eventDispatcher.dispatchEvent(f);break;case "manifestUpdated":this._nativePlayer&&(this._timeline||(this._timeline=new AdobePSDK.Timeline(this._nativePlayer)),this._currentItem||d.call(this),this._eventDispatcher.dispatchEvent(new AdobePSDK.MediaPlayerItemEvent(this._currentItem,AdobePSDK.MediaPlayer.Events.ItemUpdatedEvent,this._delegate)),this._eventDispatcher.dispatchEvent(new AdobePSDK.MediaPlayerItemEvent(this._currentItem,
AdobePSDK.MediaPlayer.Events.MainManifestUpdatedEvent,this._delegate)));break;case "streamCreated":this._nativePlayer&&(this._timeline||(this._timeline=new AdobePSDK.Timeline(this._nativePlayer)),this._currentItem||d.call(this));break;case "streamsComposed":this._currentItem&&this._currentItem.hasClosedCaptions&&(f=this._currentItem.closedCaptionsTracks)&&0<f.length&&!Primetime.helper.arrayEquals(this._captionTracks,f)&&(this._captionTracks=f,this._eventDispatcher.dispatchEvent(new AdobePSDK.MediaPlayerItemEvent(this._currentItem,
AdobePSDK.MediaPlayer.Events.CaptionsUpdatedEvent,this._delegate)));this._currentItem&&this._currentItem.hasAlternateAudio&&(f=this._currentItem.audioTracks)&&0<f.length&&!Primetime.helper.arrayEquals(this._audioTracks,f,g)&&(this._audioTracks=f,this._eventDispatcher.dispatchEvent(new AdobePSDK.MediaPlayerItemEvent(this._currentItem,AdobePSDK.MediaPlayer.Events.AudioUpdatedEvent,this._delegate)));break;case "bufferBegin":f=new AdobePSDK.PSDKEvent(AdobePSDK.MediaPlayer.Events.BufferingBeginEvent,this._delegate);
f.streamType=c;this._eventDispatcher.dispatchEvent(f);break;case "bufferEnd":f=new AdobePSDK.PSDKEvent(AdobePSDK.MediaPlayer.Events.BufferingEndEvent,this._delegate);f.streamType=c;this._eventDispatcher.dispatchEvent(f);break;case "profileChanged":f=new AdobePSDK.ProfileEvent(c,AdobePSDK.MediaPlayer.Events.ProfileChangeEvent,this._delegate);this._eventDispatcher.dispatchEvent(f);break;case "drmKeySystemError":f=new AdobePSDK.DRMEvent(AdobePSDK.MediaPlayer.Events.OperationFailedEvent,c.license,c.errorMessage,
c.message,this._delegate);this._eventDispatcher.dispatchEvent(f);var f=new AdobePSDK.Metadata,m=AdobePSDK.PSDKErrorCode.kECUnsupportedFeature,p="kECUnsupportedFeature",u="Unsupported protected content format";f.setValue("PSDK_ERROR_CODE",m+"");f.setValue("PSDK_ERROR",p);f.setValue("DESCRIPTION",u);a.call(this,AdobePSDK.MediaPlayerStatus.ERROR,f);break;case "drmLicenseError":f=new AdobePSDK.DRMEvent(AdobePSDK.MediaPlayer.Events.OperationFailedEvent,c.license,c.errorMessage,c.message,this._delegate);
this._eventDispatcher.dispatchEvent(f);f=new AdobePSDK.Metadata;m=AdobePSDK.PSDKErrorCode.kECUnsupportedFeature;p="kECUnsupportedFeature";u="Unsupported protected content format";f.setValue("PSDK_ERROR_CODE",m+"");f.setValue("PSDK_ERROR",p);f.setValue("DESCRIPTION",u);a.call(this,AdobePSDK.MediaPlayerStatus.ERROR,f);break;case "drmMetadataInfoAvailable":this._drmManager||e.call(this);f=new AdobePSDK.DRMMetadataInfoEvent(c.drmMetadataInfo,this._delegate);this._eventDispatcher.dispatchEvent(f);break;
case "adStarted":f=new AdobePSDK.AdPlaybackEvent(AdobePSDK.MediaPlayer.Events.AdStartedEvent,c.adBreak,c.ad,c.progress,c.rate,c.time,this._delegate);this._eventDispatcher.dispatchEvent(f);break;case "adProgress":f=new AdobePSDK.AdPlaybackEvent(AdobePSDK.MediaPlayer.Events.AdProgressEvent,c.adBreak,c.ad,c.progress,c.rate,c.time,this._delegate);this._eventDispatcher.dispatchEvent(f);break;case "adClicked":f=new AdobePSDK.AdClickEvent(AdobePSDK.MediaPlayer.Events.AdClickedEvent,c.adBreak,c.ad,c.adClick,
this._delegate);this._eventDispatcher.dispatchEvent(f);break;case "adCompleted":f=new AdobePSDK.AdPlaybackEvent(AdobePSDK.MediaPlayer.Events.AdCompletedEvent,c.adBreak,c.ad,c.progress,c.rate,c.time,this._delegate);this._eventDispatcher.dispatchEvent(f);break;case "adBreakStarted":f=new AdobePSDK.AdPlaybackEvent(AdobePSDK.MediaPlayer.Events.AdBreakStartedEvent,c.adBreak,this._delegate);this._eventDispatcher.dispatchEvent(f);break;case "adBreakCompleted":f=new AdobePSDK.AdPlaybackEvent(AdobePSDK.MediaPlayer.Events.AdBreakCompletedEvent,
c.adBreak,this._delegate);this._eventDispatcher.dispatchEvent(f);break;case "timelineUpdated":f=new AdobePSDK.TimelineEvent(AdobePSDK.MediaPlayer.Events.TimelineUpdatedEvent,this._timeline,this._delegate);this._eventDispatcher.dispatchEvent(f);break;case "timedMetadataAvailable":f=new AdobePSDK.TimedMetadataEvent(AdobePSDK.MediaPlayer.Events.TimedMetadataEvent,c.timedMetadata,this._delegate);this._eventDispatcher.dispatchEvent(f);break;case "loadInformationAvailable":f=new AdobePSDK.LoadInformationEvent(AdobePSDK.MediaPlayer.Events.LoadInformationEvent,
c.loadInfo,this._delegate),this._eventDispatcher.dispatchEvent(f)}},_nativeError:function(a){b.call(this,a)},getResourceType:function(){return this._resourceType}}})();(function(){var a=!0;(function(){if("undefined"!==typeof Promise&&-1!==Promise.toString().indexOf("[native code]")){var b=document.createElement("video").play();b instanceof Promise?b.catch(function(b){"NotAllowedError"==b.name&&(a=!1)}).then(function(){}):console.log("Unknown if Auto play allowed")}})();Primetime.html.MediaPlayerViewDelegate=function(){this._depth=this._height=this._width=this._y=this._x=void 0;return this};Primetime.html.MediaPlayerViewDelegate.prototype={constructor:Primetime.html.MediaPlayerViewDelegate,
attachVideoControls:function(a){"undefined"!==this._div&&(this._video.controls=!1)},removeVideoControls:function(){"undefined"!==this._div&&(this._video.controls=!1)},getX:function(){return this._x},getY:function(){return this._y},getHeight:function(){return this._height},getWidth:function(){return this._width},setSize:function(a,c){this._width=a;this._height=c},setPos:function(a,c){this._x=a;this._y=c},setDepth:function(a){this._depth=a},setTarget:function(b,c){this._div=b;this._fullScreenDiv=c;
if(this._div){var d=this._div.getElementsByTagName("video");d&&0<d.length&&(this._video=d[d.length-1])}this._video||(this._video=document.createElement("VIDEO"),this._video.controls=!1,this._video.autoplay=!1,this._div.appendChild(this._video),this._video.style.width="100%",this._video.style.height="100%",this._video.style.position="absolute",this._video.style.left="0px",this._video.style.top="0px");this._vpaidVideo||(this._vpaidVideo=document.createElement("VIDEO"),this._vpaidVideo.style.width="100%",
this._vpaidVideo.style.height="100%",this._vpaidVideo.style.position="absolute",this._vpaidVideo.style.left="0px",this._vpaidVideo.style.top="0px");this._videoPlayed=1==this._videoPlayed?this._videoPlayed:a;this._video.style.visibility="visible"},updateVideoPosition:function(a,c,d,e){this._div&&(this._div.style.width=d+"px",this._div.style.height=e+"px")},makeFullScreen:function(){Primetime.BrowserExtensions.isIOS()&&Primetime.BrowserExtensions.isSafari()||Primetime.BrowserExtensions.isAndroid443OrLess()&&
(!Primetime.BrowserExtensions.isChrome()||33>Primetime.BrowserExtensions.getBrowserMajorVersion())?Primetime.DOMHelper.makeFullscreen(this._video):this._fullScreenDiv?Primetime.DOMHelper.makeFullscreen(this._fullScreenDiv):Primetime.DOMHelper.makeFullscreen(this._div)},exitFullScreen:function(){Primetime.DOMHelper.exitFullscreen()},isFullScreen:function(){return Primetime.DOMHelper.isFullscreen()},hideBackgroundImage:function(){this._div.style.background="url()";this._div.style.backgroundColor="black"},
hideNativeView:function(){this._video&&(this._video.style.visibility="hidden")},showNativeView:function(){this._video&&(this._video.style.visibility="visible")},playEmptyVideoTags:function(){var a=this;if(!this._videoPlayed&&!this.videoPlayTimeout){var c=function(){0==a._videoPlayFailed&&(a._videoPlayed=!0);a.videoPlayTimeout&&(clearTimeout(a.videoPlayTimeout),a.videoPlayTimeout=null)};a._videoPlayFailed=!1;var d=this._video.play(),e=this._vpaidVideo.play();Promise.all([d,e]).then(function(d){a._videoPlayFailed=
!1;c()},function(d){"NotAllowedError"==d.name&&(a._videoPlayFailed=!0,c())});this.videoPlayTimeout=setTimeout(function(){a.videoPlayTimeout=null;c()},1E3)}}}})();(function(){Primetime.AdPolicyProxy=function(a,b,c){this._mediaPlayer=a;this._adPolicySelector=c;this._oldAdBreakPlacements={};this._cachedSeekPosition=0;this._placingAdBreak=!1;this._videoEngineTimeline=b;this._firstPendingAdBreakPlacement=null;this._toPlaceAdBreakPlacements=[];this._adBreakPlacementReferenceCount=0;this._deleteOnAdBreakExit=[];this[Primetime.VideoEngineTimeline.eventList.AD_BREAK_PLACEMENT_STARTED]=this._onAdBreakPlacementStarted;this[Primetime.VideoEngineTimeline.eventList.AD_BREAK_PLACEMENT_COMPLETE]=
this._onAdBreakPlacementComplete;this[Primetime.VideoEngineTimeline.eventList.AD_BREAK_PLACEMENT_FAILED]=this._onAdBreakPlacementFailed;this._videoEngineTimeline.subscribe(Primetime.VideoEngineTimeline.eventList.AD_BREAK_PLACEMENT_STARTED,this);this._videoEngineTimeline.subscribe(Primetime.VideoEngineTimeline.eventList.AD_BREAK_PLACEMENT_COMPLETE,this);this._videoEngineTimeline.subscribe(Primetime.VideoEngineTimeline.eventList.AD_BREAK_PLACEMENT_FAILED,this)};Primetime.AdPolicyProxy.prototype={constructor:Primetime.AdPolicyProxy,
registerSeekOrTrickPlayToTime:function(a,b,c){this._desiredSeekPosition=a;this._beginPosition=b;this._seekOrTrickPlay=c;this._seekingForward=!1;a.getTime()>b&&(this._seekingForward=!0);return this._prepareTimeline()},_isSSAIAd:function(a){var b=!1;if(a&&a.items&&a.items.length){a=a.items[0].id;var c=this._mediaPlayer.getStreamController();null!==c&&void 0!==c&&(a=c.getStreamById(a),null!==a&&void 0!==a&&(a=a.getStreamInfo(),void 0!==a&&null!==a&&void 0!==a.isInlineAd&&1==a.isInlineAd&&(b=!0)))}return b},
_isMultiplayerEnabled:function(){return this._mediaPlayer instanceof Primetime.me.MediaPlayerImpl},_shouldIgnoreAdBehaviors:function(a){(a=this._isSSAIAd(a))||(a=1==this._isMultiplayerEnabled());a||(a=1<this._mediaPlayer.getTimelineMonitor().getVirtualTimeline().getItems().length);return a},_areSSAIAds:function(){var a=this._videoEngineTimeline.getAdBreakTimelineItems();return a&&a.length&&this._isSSAIAd(a[0])?!0:!1},_registerSeekOrTrickPlayToTimeInternal:function(){var a=this._desiredSeekPosition,
b=this._beginPosition,c=a.getTime(),d=this._seekingForward;if(this._areSSAIAds())return this._beginSeek(c);var e=this._getSeekIntoAd(a),f=null;e&&this._videoEngineTimeline&&(f=this._videoEngineTimeline.getAdBreakTimelineItemFor(e));if(e&&this._isCustomAdMarker(e)){var g=e.ad,h=this._videoEngineTimeline.timeline;h&&null!=g.primaryAsset.resource.getMetadata()&&(null!=metadata.getMetadata(AdobePSDK.DefaultMetadataKeys.METADATA_KEY_ADJUST_SEEK_ENABLED)?a=new AdobePSDK.TimeMapping(h.getFirstPeriodIndex(),
e.time):f=e=null)}if(e||f)c=this._shouldPlayUpcomingAdBreak(f)?this._getStartTimeFor(f,e,b,this._desiredSeekPosition):f.virtualRange.end;else{e=[];if(g=this._getSkippedAdBreaks(this._desiredSeekPosition,b))for(h=0;h<g.length;h++){var l=g[h];if(l&&l!=f){var n=l.items;if(0<n.length){for(var k=!1,m=0;m<n.length;++m)k=k||this._isCustomAdMarker(n[m]);k||e.push(l)}}}if(0<e.length){if((c=this._selectAdBreaksToPlayForSeek(e,b,this._desiredSeekPosition.getTime()))&&0<c.length){_pendingAdBreakTimelineItems=
c;a=[];for(b=0;b<c.length;b++)this._shouldPlayUpcomingAdBreak(c[b])&&a.push(c[b]);a&&0<a.length&&this._modifyAdBreakPlacements(a,this._desiredSeekPosition,d);return}c=a.getTime()}if((d=this._getNextAdBreaks(a.getTime()))&&0<d.length)for(a=0;a<d.length&&!this._shouldPlayUpcomingAdBreak(d[a],d[a].time-this._desiredSeekPosition.getTime());a++);}0==c&&(c=10);this._beginSeek(c)},_getAdBreakPolicyFor:function(a){var b=AdobePSDK.AdBreakPolicy.SKIP;if(a&&this._adPolicySelector){b=[];if(this._oldAdBreakPlacements.length&&
this._oldAdBreakPlacements[a.id]){var c=this._videoEngineTimeline.updateAcceptedAdBreakTimelineItem(a,this._oldAdBreakPlacements[a.id]);if(null==c)return AdobePSDK.AdBreakPolicy.SKIP;b.push(c)}else b.push(a);b.push(a);a=new AdobePSDK.AdPolicyInfo(b,null,this._mediaPlayer.getCurrentTime(),0,1,AdobePSDK.AdPolicyMode.PLAY);return this._adPolicySelector.selectPolicyForAdBreakCallbackFunc(a)}return b},_placeTimelineLineOperation:function(a){a&&this._videoEngineTimeline.process(a)},_restoreAdBreak:function(a){a&&
this._oldAdBreakPlacements&&this._oldAdBreakPlacements[a.id]&&delete this._oldAdBreakPlacements[a.id]},_seekThroughAdBreak:function(a){this._mediaPlayer.seekStream(a.virtualRange.end/1E3)},_removeOldAdBreakPlacementForAdBreak:function(a){a&&this._oldAdBreakPlacements&&delete this._oldAdBreakPlacements[a.id]},_onAdBreakPlacementStarted:function(a){0>=this._adBreakPlacementReferenceCount&&(this._adBreakPlacementReferenceCount=0,this._mediaPlayer.timelineUpdating());this._adBreakPlacementReferenceCount++;
console.log("_onAdBreakPlacementStarted _adBreakPlacementReferenceCount: "+this._adBreakPlacementReferenceCount)},_onAdBreakPlacementComplete:function(a){this._adBreakPlacementReferenceCount--;0>=this._adBreakPlacementReferenceCount&&(this._adBreakPlacementReferenceCount=0,this._mediaPlayer.timelineUpdated());console.log("_onAdBreakPlacementComplete _adBreakPlacementReferenceCount: "+this._adBreakPlacementReferenceCount);this._adBreakPlacementComplete(a.data.proposal,a.data.adBreakItem)},_onAdBreakPlacementFailed:function(a){this._adBreakPlacementReferenceCount--;
0>=this._adBreakPlacementReferenceCount&&(this._adBreakPlacementReferenceCount=0,this._mediaPlayer.timelineUpdated());console.log("_onAdBreakPlacementFailed _adBreakPlacementReferenceCount: "+this._adBreakPlacementReferenceCount);this._adBreakPlacementFailed(a.data.proposal)},_adBreakPlacementComplete:function(a,b){this._placingAdBreak=!1;if(a){var c=a.placement,d=null;this._firstPendingAdBreakPlacement&&(d=this._firstPendingAdBreakPlacement.placement);d&&c.time==d.time&&this._mediaPlayer._delegate._nativeNotification("seekPositionAdjusted",
{actualPosition:this._cachedSeekPosition,desiredPosition:this._cachedSeekPosition});this._toPlaceAdBreakPlacements&&(this._toPlaceAdBreakPlacements.length?(c=this._toPlaceAdBreakPlacements[0],this._toPlaceAdBreakPlacements.splice(0,1),this._placingAdBreak||(this._placingAdBreak=!0,this._videoEngineTimeline.process(c))):this._removeAdBreakPlacementListeners())}},_adBreakPlacementFailed:function(a){a&&this._toPlaceAdBreakPlacements&&(this._placingAdBreak=!1,this._toPlaceAdBreakPlacements.length?(a=
this._toPlaceAdBreakPlacements[0],this._toPlaceAdBreakPlacements.splice(0,1),this._firstPendingAdBreakPlacement=a,this._placingAdBreak||(this._placingAdBreak=!0,this._videoEngineTimeline.process(a))):this._removeAdBreakPlacementListeners())},_removeAdBreakPlacementListeners:function(){0<this._adBreakPlacementReferenceCount&&(this._adBreakPlacementReferenceCount=0,this._mediaPlayer.timelineUpdated());this._videoEngineTimeline.unsubscribe(Primetime.VideoEngineTimeline.eventList.AD_BREAK_PLACEMENT_STARTED,
this);this._videoEngineTimeline.unsubscribe(Primetime.VideoEngineTimeline.eventList.AD_BREAK_PLACEMENT_COMPLETE,this);this._videoEngineTimeline.unsubscribe(Primetime.VideoEngineTimeline.eventList.AD_BREAK_PLACEMENT_FAILED,this)},_getStartTimeFor:function(a,b,c,d){if(!a||!b)return d.getTime();var e=d.getTime(),f=a.virtualRange,g=b.virtualRange;if(this._adPolicySelector){var h=[];h.push(a);a=new AdobePSDK.AdPolicyInfo(h,b,c,this._desiredSeekPosition.getTime(),1,this._seekOrTrickPlay);switch(this._adPolicySelector.selectPolicyForSeekIntoAdCallbackFunc(a)){case AdobePSDK.AdPolicy.PLAY:e=
d.getTime();break;case AdobePSDK.AdPolicy.PLAY_FROM_AD_BEGIN:e=g.begin;break;case AdobePSDK.AdPolicy.SKIP_AD_BREAK:e=f.end;break;case AdobePSDK.AdPolicy.SKIP_TO_NEXT_AD_IN_AD_BREAK:e=g.end;break;case AdobePSDK.AdPolicy.PLAY_FROM_AD_BREAK_BEGIN:e=f.begin}}return e},_shouldPlayUpcomingAdBreak:function(a,b){if(a){var c=[];c.push(a);c=new AdobePSDK.AdPolicyInfo(c,null,this._mediaPlayer.getCurrentTime(),b,1,this._seekOrTrickPlay);return this._adPolicySelector.selectPolicyForAdBreakCallbackFunc(c)==AdobePSDK.AdBreakPolicy.PLAY}return!1},
_selectAdBreaksToPlayForSeek:function(a,b,c){return this._adPolicySelector&&a&&0<a.length?(a=new AdobePSDK.AdPolicyInfo(a,null,b,c,1,this._seekOrTrickPlay),this._adPolicySelector.selectAdBreaksToPlayCallbackFunc(a)):null},_getSeekIntoAd:function(a){var b=this._videoEngineTimeline.getTimelineItems();if(b&&0<b.length)for(var c=0;c<b.length;++c){var d=b[c];if(d&&d.virtualRange.contains(a.getTime()))return d}return null},_getSkippedAdBreaks:function(a,b){var c=a.getTime()>b,d=this._videoEngineTimeline.getAdBreakTimelineItems();
if(d){for(var e=[],f=0;f<d.length;++f){var g=d[f];if(g){var h=g.virtualRange;(c&&h.end>=b&&h.end<=a.getTime()||!c&&h.begin>=a.getTime()&&h.begin<b)&&e.push(g)}}if(e.length)return e}return null},_getNextAdBreaks:function(a){var b=this._videoEngineTimeline.getAdBreakTimelineItems();if(b){for(var c=[],d=0;d<b.length;++d){var e=b[d];e&&e.virtualRange.begin>=a&&c.push(e)}if(c.length)return c}return null},_setAdBreakWatched:function(a){a.watched=!0;this._videoEngineTimeline.virtualTimeline.sendTimelineUpdatedEvent()},
setAdBreakAsWatched:function(a,b){if(this._shouldIgnoreAdBehaviors(a))return!0;var c=AdobePSDK.AdBreakWatchedPolicy.WATCHED_ON_BEGIN;this._adPolicySelector&&(c=[],c.push(a),c=new AdobePSDK.AdPolicyInfo(c,null,this._mediaPlayer.getCurrentTime(),0,1,AdobePSDK.AdPolicyMode.PLAY),c=this._adPolicySelector.selectWatchedPolicyForAdBreakCallbackFunc(c),c!=b||a.watched||this._setAdBreakWatched(a))},_modifyAdBreakPlacements:function(a,b,c){this._firstPendingAdBreakPlacement&&(this._firstPendingAdBreakPlacement=
null);this._oldAdBreakPlacements={};c=[];var d=0;if(a&&0<a.length)for(var e=0;e<a.length;e++)d+=a[e].duration;e=this._videoEngineTimeline.convertToLocalTime(b.getTime());if(a&&0<a.length)for(var e=new AdobePSDK.Placement(AdobePSDK.PlacementType.MID_ROLL,e,0),f=0;f<a.length;f++){var g=a[f];if(g){var h=new AdobePSDK.AdBreakMove(g,e);this._placeTimelineLineOperation(h);h=g.localRange;h=new AdobePSDK.Placement(AdobePSDK.PlacementType.MID_ROLL,h.begin,h.duration);this._oldAdBreakPlacements[g.id]=h}}this._cachedSeekPosition=
b.getTime()-d;if(0<c.length)for(a=0;a<c.length;a++)this._videoEngineTimeline.process(c[a]);else this._beginSeek(this._cachedSeekPosition)},_isCustomAdMarker:function(a){return a?a.ad.isCustomAdMarker:!1},_prepareTimeline:function(){if(!this._mediaPlayer)return kECIllegalState;this._mediaPlayer.getPlaybackRange();this._registerSeekOrTrickPlayToTimeInternal()},_onTimelineReservationsUpdated:function(a){null!=a.getTimeline()&&(this._videoEngineTimeline.unsubscribe(Primetime.VideoEngineTimeline.eventList.TIMELINE_RESERVATION_UPDATED,
this),this._registerSeekOrTrickPlayToTimeInternal())},_onTimelineItemsMoved:function(a){null!=a.getTimeline()&&this._beginSeek(this._cachedSeekPosition)},_beginSeek:function(a){this._cachedSeekPosition=a;this._mediaPlayer&&this._mediaPlayer._delegate._nativeNotification("seekPositionAdjusted",{actualPosition:a,desiredPosition:a,local:!0})},_deleteAdBreak:function(a,b){if(a){b||this._seekThroughAdBreak(a);this._removeOldAdBreakPlacementForAdBreak(a);var c=new AdobePSDK.AdBreakRemoval(a);this._placeTimelineLineOperation(c)}},
onAdBreakDetected:function(a){if(this._shouldIgnoreAdBehaviors(a))return!0;var b=this._getAdBreakPolicyFor(a);if(void 0!=b&&null!=b){switch(b){case AdobePSDK.AdBreakPolicy.SKIP:this._seekThroughAdBreak(a)}if(b!=AdobePSDK.AdBreakPolicy.SKIP)return!0}},onAdBreakComplete:function(a){if(this._shouldIgnoreAdBehaviors(a))return!0;var b=this._deleteOnAdBreakExit.indexOf(a);-1==b?this._restoreAdBreak(a):(this._deleteOnAdBreakExit.splice(b,1),this._deleteAdBreak(a,!0))}}})();(function(){Primetime.AdInformation=function(a,b,c){this._ad=a;this._id=b;this._progress=c;return this};Primetime.AdInformation.prototype={constructor:Primetime.AdInformation,isValid:function(){return this._ad&&0!=this._id&&-1!=this._progress},setInvalid:function(){this._ad=null;this._adTimelineItemId=0;this._progress=-1}}})();(function(){var a={"application/x-mpegURL":"HLS","vnd.apple.mpegURL":"HLS","video/mp4":"MP4","application/dash+xml":"DASH"},b=function(b){var d=[],e;for(e in a)b===a[e]&&d.push(e);return d};Primetime.AuditudeHelper={getCurrentDate:function(){var a=new Date,b=a.getFullYear(),e=a.getMonth()+1,f=a.getDate(),g=a.getHours(),h=a.getMinutes(),a=a.getSeconds();10>e&&(e="0"+e);10>f&&(f="0"+f);10>g&&(g="0"+g);10>h&&(h="0"+h);10>a&&(a="0"+a);return b+e+f+g+h+a},toStringDictionary:function(a,b,e){a=a.split(b);
b={};for(var f=0;f<a.length;){for(var g=a[f++];f<a.length&&-1<a[f].indexOf(e);)g+=a[f++];-1!=g.indexOf(e)&&(g=g.split(e),b[g[0]]=g[1])}return b},getNodesWithAttributeValue:function(a,b,e){var f,g=[];for(f=0;f<a.length;++f){var h=a[f];if(h){var l=h.getAttribute(b);l&&l===e&&g.push(h)}}return g},getNodesWithValue:function(a,b){var e,f=[];for(e=0;e<a.childNodes.length;++e){var g=a.childNodes[e].tagName;g&&g===b&&f.push(a.childNodes[e])}return f},getValueOfAttributeInMetaNodeList:function(a,b){for(var e=
"",f,g=0;g<a.length;g++){var h=a[g];if((f=h.getAttribute("name"))&&f===b){if(f=h.getAttribute("content")){e=f;break}break}}return e},enumerateEntries:function(a,b,e){for(var f in a)if(!b(f,a[f],e))return!1;return!0},parseDuration:function(a){var b=0,e=0;if(!a)return 0;a=a.split(":");var f=0,e=a[f];if(f>=a.length)return parseInt(e);e=parseInt(e);b=3600*e;f++;e=a[f];e=parseInt(e);b+=60*e;f++;e=a[f];e=parseInt(e);return b+e},getNodeValue:function(a){a=a.textContent;return"<![CDATA["===a.substring(0,
9)?a.substring(9,a.length-3).trim():a.trim()},md5:function(a){function b(a,c){var d,e,f,g,l;f=a&2147483648;g=c&2147483648;d=a&1073741824;e=c&1073741824;l=(a&1073741823)+(c&1073741823);return d&e?l^2147483648^f^g:d|e?l&1073741824?l^3221225472^f^g:l^1073741824^f^g:l^f^g}function e(a,c,e,f,g,l,h){a=b(a,b(b(c&e|~c&f,g),h));return b(a<<l|a>>>32-l,c)}function f(a,c,e,f,g,l,h){a=b(a,b(b(c&f|e&~f,g),h));return b(a<<l|a>>>32-l,c)}function g(a,c,e,f,g,l,h){a=b(a,b(b(c^e^f,g),h));return b(a<<l|a>>>32-l,c)}function h(a,
c,e,f,g,l,h){a=b(a,b(b(e^(c|~f),g),h));return b(a<<l|a>>>32-l,c)}function l(a){var b="",c="",d;for(d=0;3>=d;d++)c=a>>>8*d&255,c="0"+c.toString(16),b+=c.substr(c.length-2,2);return b}var n=[],k,m,p,u,q,t,r,w;a=function(a){a=a.replace(/\r\n/g,"\n");var b="",c;for(c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):(127<d&&2048>d?b+=String.fromCharCode(d>>6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128)),b+=String.fromCharCode(d&63|128))}return b}(a);
n=function(a){var b,c=a.length;b=c+8;for(var d=16*((b-b%64)/64+1),e=Array(d-1),f=0,g=0;g<c;)b=(g-g%4)/4,f=g%4*8,e[b]|=a.charCodeAt(g)<<f,g++;b=(g-g%4)/4;e[b]|=128<<g%4*8;e[d-2]=c<<3;e[d-1]=c>>>29;return e}(a);q=1732584193;t=4023233417;r=2562383102;w=271733878;for(a=0;a<n.length;a+=16)k=q,m=t,p=r,u=w,q=e(q,t,r,w,n[a+0],7,3614090360),w=e(w,q,t,r,n[a+1],12,3905402710),r=e(r,w,q,t,n[a+2],17,606105819),t=e(t,r,w,q,n[a+3],22,3250441966),q=e(q,t,r,w,n[a+4],7,4118548399),w=e(w,q,t,r,n[a+5],12,1200080426),
r=e(r,w,q,t,n[a+6],17,2821735955),t=e(t,r,w,q,n[a+7],22,4249261313),q=e(q,t,r,w,n[a+8],7,1770035416),w=e(w,q,t,r,n[a+9],12,2336552879),r=e(r,w,q,t,n[a+10],17,4294925233),t=e(t,r,w,q,n[a+11],22,2304563134),q=e(q,t,r,w,n[a+12],7,1804603682),w=e(w,q,t,r,n[a+13],12,4254626195),r=e(r,w,q,t,n[a+14],17,2792965006),t=e(t,r,w,q,n[a+15],22,1236535329),q=f(q,t,r,w,n[a+1],5,4129170786),w=f(w,q,t,r,n[a+6],9,3225465664),r=f(r,w,q,t,n[a+11],14,643717713),t=f(t,r,w,q,n[a+0],20,3921069994),q=f(q,t,r,w,n[a+5],5,3593408605),
w=f(w,q,t,r,n[a+10],9,38016083),r=f(r,w,q,t,n[a+15],14,3634488961),t=f(t,r,w,q,n[a+4],20,3889429448),q=f(q,t,r,w,n[a+9],5,568446438),w=f(w,q,t,r,n[a+14],9,3275163606),r=f(r,w,q,t,n[a+3],14,4107603335),t=f(t,r,w,q,n[a+8],20,1163531501),q=f(q,t,r,w,n[a+13],5,2850285829),w=f(w,q,t,r,n[a+2],9,4243563512),r=f(r,w,q,t,n[a+7],14,1735328473),t=f(t,r,w,q,n[a+12],20,2368359562),q=g(q,t,r,w,n[a+5],4,4294588738),w=g(w,q,t,r,n[a+8],11,2272392833),r=g(r,w,q,t,n[a+11],16,1839030562),t=g(t,r,w,q,n[a+14],23,4259657740),
q=g(q,t,r,w,n[a+1],4,2763975236),w=g(w,q,t,r,n[a+4],11,1272893353),r=g(r,w,q,t,n[a+7],16,4139469664),t=g(t,r,w,q,n[a+10],23,3200236656),q=g(q,t,r,w,n[a+13],4,681279174),w=g(w,q,t,r,n[a+0],11,3936430074),r=g(r,w,q,t,n[a+3],16,3572445317),t=g(t,r,w,q,n[a+6],23,76029189),q=g(q,t,r,w,n[a+9],4,3654602809),w=g(w,q,t,r,n[a+12],11,3873151461),r=g(r,w,q,t,n[a+15],16,530742520),t=g(t,r,w,q,n[a+2],23,3299628645),q=h(q,t,r,w,n[a+0],6,4096336452),w=h(w,q,t,r,n[a+7],10,1126891415),r=h(r,w,q,t,n[a+14],15,2878612391),
t=h(t,r,w,q,n[a+5],21,4237533241),q=h(q,t,r,w,n[a+12],6,1700485571),w=h(w,q,t,r,n[a+3],10,2399980690),r=h(r,w,q,t,n[a+10],15,4293915773),t=h(t,r,w,q,n[a+1],21,2240044497),q=h(q,t,r,w,n[a+8],6,1873313359),w=h(w,q,t,r,n[a+15],10,4264355552),r=h(r,w,q,t,n[a+6],15,2734768916),t=h(t,r,w,q,n[a+13],21,1309151649),q=h(q,t,r,w,n[a+4],6,4149444226),w=h(w,q,t,r,n[a+11],10,3174756917),r=h(r,w,q,t,n[a+2],15,718787259),t=h(t,r,w,q,n[a+9],21,3951481745),q=b(q,k),t=b(t,m),r=b(r,p),w=b(w,u);return(l(q)+l(t)+l(r)+
l(w)).toLowerCase()},getMediaResourceTypeFromString:function(a){return"application/x-mpegURL"==a||"vnd.apple.mpegURL"==a?AdobePSDK.MediaResourceType.HLS:"application/dash+xml"==a?AdobePSDK.MediaResourceType.DASH:"image/jpeg"==a||"application/x-shockwave-flash"==a||"application/javascript"==a?AdobePSDK.MediaResourceType.CUSTOM:"video/mp4"==a?AdobePSDK.MediaResourceType.ISOBMFF:AdobePSDK.MediaResourceType.UNKNOWN},getMimeTypeStringFromMediaResourceType:function(a){switch(a){case AdobePSDK.MediaResourceType.HLS:return"application/x-mpegURL";
case AdobePSDK.MediaResourceType.DASH:return"application/dash+xml";case AdobePSDK.MediaResourceType.ISOBMFF:return"video/mp4";default:return null}},prioritizeMediaFiles:function(a,d,e,f){var g=[];if(f)g=g.concat(b("HLS")),g=g.concat(b("MP4"));else if(f=new Primetime.utils.Capabilities,!f.supportsMediaSource()||Primetime.BrowserExtensions.isIOS()||Primetime.BrowserExtensions.isSafari()||Primetime.BrowserExtensions.isAndroid()&&!Primetime.BindingsFactory.isAndroidMSESupported()||("application/dash+xml"===
e?(g=g.concat(b("DASH")),g=g.concat(b("HLS"))):(g=g.concat(b("HLS")),g=g.concat(b("DASH")))),e=document.createElement("video"),f.supportsVideo()&&(g=g.concat(b("MP4")),Primetime.BrowserExtensions.isAndroid443OrLess()||f.supportsCodec(e,Primetime.MimeTypeUtils.getCodec("HLS"))))g=g.concat(b("HLS"));if(0===g.length)return a;if(d&&0<d.length){e=[];for(f=0;f<g.length;++f)-1<d.indexOf(g[f])&&e.push(g[f]);g=e}else return null;a.sort(function(a,b){var c=g.indexOf(a._type),d=g.indexOf(b._type);return-1===
c&&-1===d?0:-1===c?1:-1===d?-1:c-d});return-1<g.indexOf(a[0]._type)?a:null},toAdBannerAsset:function(a){var b=null,e=null,f=null,g=null,h=null,l=null,n=null,b=new AdobePSDK.MediaResource(a._url,AdobePSDK.MediaResourceType.CUSTOM),f=a._url,g=a._width,h=a._height,l=a._resourceType;a._clickThroughUrl&&(e=new AdobePSDK.AdClick(null,null,a._clickThroughUrl));if(a._params){var n=new AdobePSDK.Metadata,k;for(k in a._params)n.setValue(k,a._params[k])}var m=[],p=[],u=a.getTrackingEventByType(Primetime.TrackingEventType.click,
!1);if(u)for(k=0;k<u._trackingInstances.length;++k)m.push(u._trackingInstances[k]._url);u=[Primetime.TrackingEventType.error,Primetime.TrackingEventType.playerdebug,Primetime.TrackingEventType.click,Primetime.TrackingEventType.vasterror,Primetime.TrackingEventType.skip];for(k=0;k<a._trackingEvents.length;++k){var q=a._trackingEvents[k];if(-1===u.indexOf(q._type)&&0<q._trackingInstances.length)for(var t=0;t<q._trackingInstances.length;++t)p.push(q._trackingInstances[t]._url)}return new AdobePSDK.AdBannerAsset(a._smilId,
null,b,f,e,g,h,l,n,m,p)}}})();(function(){Primetime.AdRequest=function(a,b,c,d){this._isMediaIdHashed=!1;this._completeListener=d;this._response=null;this._opportunity=b;this._placement=b.placement;var e=this;b={onComplete:function(a){e._completeListener.createdAdBreaks(a,e._opportunity,!0)},onError:function(){e._completeListener.notifyFailed(e._opportunity)}};if(this._auditudeSettings=a)this._mediaID=a.mediaId,this._defaultMediaID=a.defaultMediaId,this._zone=a.zoneId,this._domain=a.domain;switch(this._auditudeSettings.responseType){case "VMAP":this._parser=
new Primetime.VMAPXMLParser(b,!0,this._auditudeSettings.validMimeTypes,this._auditudeSettings.creativeRepackagingFormat);break;default:this._parser=new Primetime.AuditudeResponseParser(a)}return this};Primetime.AdRequest.prototype={constructor:Primetime.AdRequest,createURLRequest:function(){var a="",a="https:"!=window.location.protocol?a+"http://ad.":a+"https://ad.";switch(this._auditudeSettings.responseType){case "VMAP":a+=this._domain+"/adserver/vmap1?tm=15";break;default:a+=this._domain+"/adserver?tm=15&of=1.4"}this._mediaID&&
(a+="&u="+Primetime.AuditudeHelper.md5(this._mediaID));var a=a+("&l="+Primetime.AuditudeHelper.getCurrentDate()),a=a+("&z="+this._zone),a=a+"&g=1000002",b;this._placement&&this._placement.type!==AdobePSDK.PlacementType.SERVER_MAP?(b="&tl=l,",b=this._placement.duration&&-1!==this._placement.duration?b+(this._placement.duration+","):b+"*,",b+="*,",this._placement.type===AdobePSDK.PlacementType.PRE_ROLL?b+="p":this._placement.type===AdobePSDK.PlacementType.MID_ROLL&&(b+="m")):b="";b&&(a+=b);(new Primetime.AdRequestNetJob(this,
a,this._auditudeSettings.targetingInfo)).execute()},onRequestComplete:function(a){switch(this._auditudeSettings.responseType){case "VMAP":this._parser.parse(a);break;default:(new Primetime.AdResponse(this._auditudeSettings)).loadAdRequest(this._parser,this._completeListener,a,this._opportunity)}},onRequestFailed:function(){this._completeListener.notifyFailed(this._opportunity)}}})();(function(){Primetime.AdRequestNetJob=function(a,c,d){this._request=a;this._url=c;this._post=d;this.xhrs=[];this.hasLoaded=!1;return this};var a=function(b){var c=new XMLHttpRequest,d=this;this.xhrs.push(c);var e=[];if(this._post)if(this._post instanceof AdobePSDK.Metadata){var f=this._post.keySet,g;for(g in f)e.push(f[g]+"="+this._post.getValue(f[g]))}else{console.log("Post object is invalid. It should be of type AdobePSDK.Metadata.");d._request.onRequestFailed();return}0<e.length&&(e="k="+e.join(";"),
d._url+="&"+e);c.open("GET",d._url,!0);c.responseType="";c.onload=function(){if(!(200>c.status||299<c.status)){var a=c.responseXML;d.hasLoaded=!0;d._request.onRequestComplete(a)}};c.onloadend=c.onerror=function(){-1!==d.xhrs.indexOf(c)&&(d.xhrs.splice(d.xhrs.indexOf(c),1),d.hasLoaded||(0<b?(console.log("Failed loading ad response. retry in 500ms attempts: "+b),b--,setTimeout(function(){a.call(d,b)},500)):(console.log("Failed loading ad response. No retry attempts left"),d._request.onRequestFailed())))};
c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");c.send()};Primetime.AdRequestNetJob.prototype={constructor:Primetime.AdRequestNetJob,log:void 0,execute:function(){a.call(this,3)}}})();(function(){Primetime.VastAdLoader=function(){return this};var a=function(a){if(!a||!a._linearAd)return null;var d=new Primetime.LinearAsset(this._ad,"");d._errorUrl=a._errorUrl;var e=-1;a.skipOffset&&(e=-1<a.skipOffset.indexOf("%")?(e=parseInt(a.skipOffset))?1*e/100*a._linearAd._duration*1E3:-1:1E3*Primetime.AuditudeHelper.parseDuration(a.skipOffset));d._skipOffset=e;e=a._linearAd;d._duration=e._duration;d._id=e._id;d._apiFramework=e._apiFramework;d._adParams=e._adParameters;var f=e._mediaFiles;
if(f){var k=f[0];d._width=k._width;d._height=k._height;d._creativeType=k._type}for(k=0;k<f.length;k++){var m=f[k],p={};p._id=m._id;p._bitrate=m._bitrate;p._width=m._width;p._height=m._height;p._url=m._url;p._type=m._type;p._scalable=m._scalable;p._maintainAspectRatio=m._maintainAspectRatio;p._delivery=m._delivery;p._apiFramework=m._apiFramework;d._mediaFiles.push(p)}d._assetFormat=Primetime.AssetFormat.video;if(e._click){f=new Primetime.Click(d);f._url=e._click._url;if(p=e._click._trackingUrls)for(k=
0;k<p.length;k++)m=p[k],f.addClickTrackingUrl(m);if(p=e._click._customClickUrls)for(k=0;k<p.length;k++)m=p[k],f.addClickTrackingUrl(m);d._click=f}a=a._impressionUrls;b.call(this,d,a,Primetime.TrackingEventType.impression);a=e.getTrackingEventByType(Primetime.TrackingEventType.creativeView,!0);a=a._trackingUrls;b.call(this,d,a,Primetime.TrackingEventType.creativeView);a=e.getTrackingEventByType(Primetime.TrackingEventType.start,!0);c.call(this,d,0,a);a=e.getTrackingEventByType(Primetime.TrackingEventType.firstquartile,
!0);c.call(this,d,25,a);a=e.getTrackingEventByType(Primetime.TrackingEventType.midpoint,!0);c.call(this,d,50,a);a=e.getTrackingEventByType(Primetime.TrackingEventType.thirdquartile,!0);c.call(this,d,75,a);a=e.getTrackingEventByType(Primetime.TrackingEventType.complete,!0);c.call(this,d,100,a);(a=e.getTrackingEventByType(Primetime.TrackingEventType.progress,!0))&&b.call(this,d,a._trackingInstances,a._type);(a=e.getTrackingEventByType(Primetime.TrackingEventType.vasterror,!0))&&b.call(this,d,a._trackingInstances,
a._type);(a=e.getTrackingEventByType(Primetime.TrackingEventType.skip,!0))&&b.call(this,d,a._trackingInstances,a._type);return d},b=function(a,b,c){if(b&&0!==b.length&&(a=a.getTrackingEventByType(c,!0)))for(c=0;c<b.length;c++)a.addTrackingInstance(b[c])},c=function(a,b,c){if(c&&(c=c._trackingInstances)&&0!==c.length){var d=null;switch(b){case 0:d=a.getTrackingEventByType(Primetime.TrackingEventType.start,!0);break;case 25:d=a.getTrackingEventByType(Primetime.TrackingEventType.firstquartile,!0);break;
case 50:d=a.getTrackingEventByType(Primetime.TrackingEventType.midpoint,!0);break;case 75:d=a.getTrackingEventByType(Primetime.TrackingEventType.thirdquartile,!0);break;case 100:d=a.getTrackingEventByType(Primetime.TrackingEventType.complete,!0)}if(d)for(a=0;a<c.length;a++)d.addTrackingInstance(c[a])}},d=function(a){var c=[];if(!a)return c;var d=a._nonLinearAds;if(d&&0<d.length)for(var e=!1,k=0;k<d.length;k++){var m=d[k],p=new Primetime.NonLinearAsset(this._ad,"");p._assetFormat(Primetime.AssetFormat.overlay);
f.call(this,p,m);var u={};u._id=m._adId;u._url=m._url;u._apiFramework=m._apiFramework;u._width=m._width;u._height=m._height;u._type=m._creativeType;u._scalable=m._scalable;u._maintainAspectRatio=m._maintainAspectRatio;p._mediaFiles.push(u);m._clickThroughUrl&&(u=new Primetime.Click(p),u._url=m._clickThroughUrl,p._click=u);a._linearAd&&!e&&(b.call(this,p,a._impressionUrls,Primetime.TrackingEventType.creativeView),e=!0);c.push(p)}return c},e=function(a){var b=[];if(!a)return b;if((a=a._companionAds)&&
0<a.length){for(var c=0;c<a.length;c++){var d=a[c],e=new Primetime.OnPageAsset(this._ad,"");e._assetFormat=Primetime.AssetFormat.onpage;e._creativeType="companion";e._assetType="companion";f.call(this,e,d);var m={};m._id=d._adId;m._url=e._url=d._url;m._apiFramework=d._apiFramework;m._width=e._width=d._width;m._height=e._height=d._height;m._type=e._resourceType=d._resourceType;m._scalable=d._scalable;m._maintainAspectRatio=d._maintainAspectRatio;e._mediaFiles.push(m);d._clickThroughUrl&&(m=new Primetime.Click(e),
m._url=d._clickThroughUrl,e._click=m);if(d=d.getTrackingEventByType(Primetime.TrackingEventType.click,!1))for(d=d._trackingInstances,m=0;m<d.length;m++){var p=new Primetime.Tracking(d[m],Primetime.TrackingEventType.click);e.addTracking(p,Primetime.TrackingEventType.click)}b.push(e)}return b}return null},f=function(a,c){a._id=c._id;a._width=c._width;a._height=c._height;a._adParams=c._adParameters;var d=c.getTrackingEventByType(Primetime.TrackingEventType.creativeView,!1);d&&b.call(this,a,d._trackingInstances,
d._type)};Primetime.VastAdLoader.prototype={constructor:Primetime.VastAdLoader,parseVastDocument:function(b){var c=[];if(b){b=b.getAds();for(var f=0;b&&f<b.length;f++){var n=b[f],k=n.getInlineAds;if(n&&k)for(f=0;f<k.length;f++){var n=k[f],m=[],p=a.call(this,n);if(p){p.setNetworkAdId(n.getNetworkAdId());p.setCompanionRequired(n.companionRequired);m.push(p);if(p=d.call(this,n))for(f=0;f<p.length;f++)m.push(p[f]);if(p=e.call(this,n))for(f=0;f<p.length;f++)m.push(p[f]);m&&(c=c.concat(m))}}}}this._result=
c.length?c:null},parseVastAd:function(b){var c=[],f=null;b&&(f=b._inlineAds);if(f)for(b=0;b<f.length;b++){var n=f[b],k=[],m=a.call(this,n);if(m){m._networkAdId=n._networkAdId;m._companionRequired=n._companionRequired;k.push(m);if(m=d.call(this,n))for(var p=0;p<m.length;p++)k.push(m[p]);if(m=e.call(this,n))for(n=0;n<m.length;n++)k.push(m[n]);0!==k.length&&(c=c.concat(k))}}this._result=c.length?c:null}}})();(function(){Primetime.AdResponse=function(a){this._auditudeSettings=a;this._completeListener=this._parser=null;this._responseList=[];this._responseIndex=0;return this};Primetime.AdResponse.prototype={constructor:Primetime.AdResponse,loadAdRequest:function(a,c,d,e){this._parser=a;this._completeListener=c;this._opportunity=e;this._parser.parse(d)?(this.checkForDuplicateAds(),this.checkForRedirectAds(a),this.loadNextResponse()):this._completeListener.notifyFailed(e)},checkForDuplicateAds:function(){var a=
this._parser.getBreaks("linear");if(a&&0<a.length)for(var c=0;c<a.length;c++)for(var d=a[c]._sequences,e=0;e<d.length;e++)for(var f=d[e]._pars,g=0;g<f.length;g++)for(var h=f[g]._refList,l=0;l<h.length;l++){var n=h[l]._ad;n._wrapperSourceVastDoc&&(new Primetime.VastAdLoader).parseVastDocument(n._wrapperSourceVastDoc);n._isWrapper&&"VAST"===n._adSystem&&this.createNewAdsForSeq(n,c,e)}},createNewAdsForSeq:function(a,c,d){var e=this._parser.getBreaks("linear");if(e&&0<e.length)for(var f=c;f<e.length;f++){var g=
e[f]._sequences,h=0;for(f==c&&(h=d+1);h<g.length;h++)for(var l=g[h]._pars,n=0;n<l.length;n++)for(var k=l[n]._refList,m=0;m<k.length;m++){var p=k[m],u=p._ad;u._wrapperSourceVastDoc&&(new Primetime.VastAdLoader).parseVastDocument(u._wrapperSourceVastDoc);if(u._isWrapper&&"VAST"===u._adSystem&&u===a){var q=new Primetime.AuditudeAd;this.copyAd(u,q);p._ad=q}}}},copyAd:function(a,c){c._isWrapper=a._isWrapper;c._adSystem=a._adSystem;c._followWrappers=a._followWrappers;c._smilId=a._smilId;var d;d=a.getAssetForType("linear",
"");c.addTrackingAsset(d,"linear");c.addAsset(d);d=a.getAssetForType("nonlinear","");c.addTrackingAsset(d,"nonlinear");d=a.getAssetForType("companion","");c.addTrackingAsset(d,"companion");c.addAsset(d);a.copyTrackingEventsTo(c);c._wrapperSourceVastDoc=a._wrapperSourceVastDoc;c._wrapperSource=a._wrapperSource;d=c.getLinearAssetWithContentType("linear");a.getLinearAssetWithContentType("linear").copyTrackingEventsTo(d)},checkForRedirectAds:function(a){if((a=this._parser.getBreaks("linear"))&&0<a.length)for(var c=
0;c<a.length;c++)for(var d=a[c]._sequences,e=0;e<d.length;e++)for(var f=d[e],g=f._pars,h=0;h<g.length;h++)for(var l=g[h]._refList,n=0;n<l.length;n++){var k=l[n]._ad;k._wrapperSourceVastDoc&&(new Primetime.VastAdLoader).parseVastDocument(k._wrapperSourceVastDoc);if(k._isWrapper&&("VAST"===k._adSystem||"VMAP"===k._adSystem)){var m={};m._adNetworkType=k._adSystem;m._ad=k;m._sequence=f;this._responseList.push(m)}}},loadNextResponse:function(){if(this._responseIndex<this._responseList.length){this._responseIndex++;
var b=this._responseList[this._responseIndex-1];switch(b._adNetworkType){case "VMAP":if(b=b._ad._wrapperSource){var c=this;(new Primetime.DataLoaderNetJob({onRequestComplete:function(a){(new Primetime.VMAPXMLParser({onComplete:function(a){c._completeListener.createdAdBreaks(a,c._opportunity,!0)},onError:function(){c._completeListener.notifyFailed(c._opportunity)}},!0,c._auditudeSettings.validMimeTypes,c._auditudeSettings.creativeRepackagingFormat)).parse(a)},onRequestFailed:function(){c._completeListener.notifyFailed(c._opportunity)}},
b,null)).execute()}break;case "VAST":b=b._ad._wrapperSource;null!==b&&(new Primetime.DataLoaderNetJob(this,b,null)).execute();break;default:this.loadNextResponse()}}else this._completeListener&&!this._isWrapperBroken&&(b=[],this._parser&&(b=this._parser.getBreaks("linear"),a(b)?this.checkAdBreakDurationExceeded(b):console.log("Error - NETWORK_AD_RESPONSE_EMPTY")),this._completeListener.createdAdBreaks(b,this._opportunity))},checkAdBreakDurationExceeded:function(a){var c,d,e,f;for(c=0;c<a.length;++c){var g=
0,h=a[c]._sequences;for(d=0;d<h.length;++d){var l=h[d]._pars;for(e=0;e<l.length;++e){var n=l[e]._refList;for(f=0;f<n.length;++f){var k=n[f]._ad.getVideoAsset();k&&(g+=parseInt(k.duration));if(g>a[c]._duration)break}if(0===f){--e;break}else if(f<n.length){l[e]._refList=n.slice(0,f);break}}if(e<l.length){h[d]._pars=l.slice(0,e+1);break}}d<h.length&&(a[c]._sequences=h.slice(0,d+1))}},isValidParserForResponse:function(a){if(a&&(a=a._ads,0<a.length))for(var c=Object.keys(a),d=0;d<c.length;d++){var e=a[c[d]];
if(e._isWrapper&&"VMAP"===e._adSystem)return!0}return!1},onRequestComplete:function(a){var c=this._responseList[this._responseIndex-1];if(null!==c){var d=c._ad,e=this;(new Primetime.VastXMLParser({onComplete:function(a){e.onVastParseComplete(a,c,d)},onError:function(a){console.log("ERROR - "+a);e._completeListener.notifyFailed(e._opportunity)}})).parse(a)}},onRequestFailed:function(){this._completeListener.notifyFailed(this._opportunity)},parseVastResponse:function(a,c,d){var e=new Primetime.VastAdLoader,
f,g,h;a&&(f=a.getAds());if(f)for(var l=f.length-1;0<=l;l--){var n=f[l],k;if(!n._adParsed){0===l?k=c:(k=new Primetime.AuditudeAd(null),g=c.getAssetForType("linear",""),k.addTrackingAsset(g,"linear"),k.addAsset(g),k._smilId=c._smilId);var m=n._vastDocument;if(!m||m&&m==a){e.parseVastAd(n);if(!n._adParsed){h=e._result;var p;if(h&&(p=h))for(var u=0;u<p.length;u++)if(g=p[u],g._assetFormat===Primetime.AssetFormat.onpage&&null!==g._creativeType&&"companion"===g._creativeType)k.addAsset(g);else{h=k.getLinearAssetWithContentType("linear");
g.copyTo(h);h._click=g._click;h._mediaFiles||(h._mediaFiles=[]);for(var q=0;q<g._mediaFiles.length;++q)h._mediaFiles.push(g._mediaFiles[q]);h.duration=g._duration;h._networkAdId=g._networkAdId;h._height=g._height;h._width=g._width;h._assetFormat=g._assetFormat;h.apiFramework=g._apiFramework;h._creativeType=g._creativeType;h._adParams=g._adParams}}k._isVastDocumentProcessed=!0}if(0<l){h=k.getLinearAssetWithContentType("linear");if(g=c.getLinearAssetWithContentType("linear"))(p=g)&&h&&p.copyTrackingEventsTo(h),
p._click&&(h._click=p._click);c.copyTrackingEventsTo(k);k._isWrapper=!0;k._wrapperSourceVastDoc=a;h={_type:d._type,_refList:[]};p={_companions:[]};h._refList.push(p);p._ad=k;d._pars.push(h)}m&&m!=a?this.parseVastResponse(m,k,d):((m=a.getVastMediaFile(l))&&k.setMediaInfo(m._url,m._type,a.getVastAdId(l),m._width,m._height),n._adParsed=!0)}}},onVastParseComplete:function(a,c,d){if(a){var e=a.getAds();if(e&&0!==e.length){if(e&&1<=e.length){if(c=c._sequence,d._isWrapper&&"VAST"===d._adSystem&&a&&(this.parseVastResponse(a,
d,c),(c=c._pars)&&2<c.length))for(var e=1,f=c.length-1;e<f;e++,f--){var g=c[e];c[e]=c[f];c[f]=g}}else if(c=new Primetime.VastAdLoader,c.parseVastDocument(a),(c=c._result)&&c)for(e=0;e<c.length;e++)g=c[e],g._assetFormat===Primetime.AssetFormat.onpage&&null!==g._creativeType&&"companion"===g._creativeType?d.addAsset(g):(f=d.getTrackingAssetByType("linear"),g&&g.copyTo(f));d._wrapperSourceVastDoc=a;this._responseList[this._responseIndex-1]=null;this.loadNextResponse()}else this._completeListener.notifyFailed(this._opportunity)}else this._completeListener.notifyFailed(this._opportunity)}};
var a=function(a){if(a&&0<a.length)for(var c=0;c<a.length;c++)for(var d=a[c]._sequences,e=0;e<d.length;e++)for(var f=d[e]._pars,g=0;g<f.length;g++)for(var h=f[g]._refList,l=0;l<h.length;l++){var n=h[l]._ad;if(n&&(n._isWrapper&&n._mediaURL||!n._isWrapper&&(n=n.getVideoAsset())&&n._url))return!0}return!1}})();(function(){Primetime.DataLoaderNetJob=function(a,c,d){this._listener=a;this._url=c;this._post=d;return this};var a=function(b){var c=new XMLHttpRequest,d,e=this;c.open("GET",e._url,!0);c.responseType="";c.onload=function(){if(!(200>c.status||299<c.status)){var a=c.responseXML;d=!0;e._listener.onRequestComplete(a)}};c.onloadend=c.onerror=function(){d||(0<b?(console.log("Failed loading data. Retry in 500ms attempts: "+b),b--,setTimeout(function(){a.call(e,b)},500)):(console.log("Failed loading data. No retry attempts left"),
e._listener.onRequestFailed()))};d=!1;c.send()};Primetime.DataLoaderNetJob.prototype={constructor:Primetime.DataLoaderNetJob,execute:function(){a.call(this,3)}}})();(function(){Primetime.TrackingEventType={impression:0,podprogress:1,playererror:2,error:2,playerdebug:3,creativeView:4,creativeProgress:5,click:6,start:7,breakStart:7,firstquartile:8,firstQuartile:8,midpoint:9,thirdquartile:10,thirdQuartile:10,complete:11,breakEnd:11,progress:12,vasterror:13,skip:14};Primetime.AuditudeResponseParser=function(a){var b=this;this._auditudeSettings=a;this._refToAdId=[];this._breaks=[];this._chapters=[];this._submissions={submissions:[],state:{},getSubmissionById:function(a){if(!(a in
Primetime.TrackingEventType))return null;a=Primetime.TrackingEventType[a];for(var b=0;b<this.submissions.length;b++){var c=this.submissions[b];if(c._id===a)return c}return null},parse:function(a){a=Primetime.AuditudeHelper.getNodesWithValue(a,"head");if(0===a.length)return null;var c=a[0];a=Primetime.AuditudeHelper.getNodesWithValue(c,"state");if(0===a.length)return null;a=Primetime.AuditudeHelper.getNodesWithValue(a[0],"data");if(0===a.length)return null;var d=a[0].childNodes;for(a=0;a<d.length;a++){var e=
d[a],f=e.tagName,e=e.textContent;f&&e&&(f=f.toLowerCase(),b._auditudeSettings[f]=e,this.state[f]=e)}c=Primetime.AuditudeHelper.getNodesWithValue(c,"submission");for(a=0;a<c.length;a++){var d=c[a],p,u,q;(f=d.getAttribute("id"))&&(p=f);(f=d.getAttribute("action"))&&(u=f);(f=d.getAttribute("method"))&&(q=f);d=new Primetime.Submission(Primetime.TrackingEventType[p],u,q);this.submissions.push(d)}return!0}};this._ads={};return this};var a=function(a){if("undefined"==typeof a||null===a)return!1;var c=a.documentElement;
if("response"!==c.nodeName||"1.4"!==c.getAttribute("version")||0<Primetime.AuditudeHelper.getNodesWithValue(c,"error").length)return!1;a=Primetime.AuditudeHelper.getNodesWithValue(c,"smil");if(0===a.length)return!1;this._submissions.parse(a[0]);for(var c=Primetime.AuditudeHelper.getNodesWithValue(c,"ad"),d=0;d<c.length;d++){var e=new Primetime.AuditudeAd;e.parse(c[d]);var n=this._submissions.getSubmissionById("podprogress");e.addTracking(n,Primetime.TrackingEventType.podprogress);this._ads[e._smilId]=
e}return b.call(this,a[0])?!0:!1},b=function(a){var b=0,d=null;a=Primetime.AuditudeHelper.getNodesWithValue(a,"body");if(0===a.length)return!1;d=a[0];a=Primetime.AuditudeHelper.getNodesWithValue(d,"seq");if(0===a.length)return!0;for(var d=0,l=null,n=null,k=0;k<a.length;k++)if(n=c.call(this,a[k]))l&&l.type===n._type||(0===k&&"linear"!==n._type&&(l={_type:"linear",_index:b,_startTime:0},this._breaks.push(l)),l={_type:n._type,_index:b,_sequences:[],_maxDuration:0,_duration:0},l._startTime=d,this._breaks.push(l),
"linear"!==l._type&&b++),"linear"!==n._type&&(d+=n._duration),l.addSequence=function(a){if(!a)return null;this._sequences.push(a);0<=a._maxDuration&&(this._maxDuration+=a._maxDuration);0<=a._duration&&(this._duration+=a._duration);return!0},l.addSequence(n);e.call(this);return!0},c=function(a){if(!a)return null;var b=Primetime.AuditudeHelper.getNodesWithValue(a,"meta");if(0===b.length)return!1;var c=Primetime.AuditudeHelper.getValueOfAttributeInMetaNodeList(b,"ctype"),e;if("linear"===c||"nonlinear"===
c)e=c;else return!1;var c=Primetime.AuditudeHelper.getValueOfAttributeInMetaNodeList(b,"ptype"),n="unknown";"p"===c?n="preRoll":"m"===c?n="midRoll":"t"===c&&(n="postRoll");e={_type:e,_submissions:this._submissions,_pars:[]};"unknown"!==n&&(e._seqType=n);c=Primetime.AuditudeHelper.getValueOfAttributeInMetaNodeList(b,"dur");c=parseInt(c);e._duration=c;e._maxDuration=c;c=Primetime.AuditudeHelper.getValueOfAttributeInMetaNodeList(b,"max-dur");0<c.length&&(c=parseInt(c),e._maxDuration=c);c=Primetime.AuditudeHelper.getValueOfAttributeInMetaNodeList(b,
"count");c=parseInt(c);e._count=c;c=Primetime.AuditudeHelper.getValueOfAttributeInMetaNodeList(b,"max-count");0<c.length&&(c=parseInt(c),e._count=c);c=Primetime.AuditudeHelper.getValueOfAttributeInMetaNodeList(b,"creativemaxdur");0<c.length&&(c=parseInt(c),e._creativeMaxDuration=c);c=Primetime.AuditudeHelper.getValueOfAttributeInMetaNodeList(b,"creativemindur");0<c.length&&(b=parseInt(c),e._creativeMinDuration=b);b=Primetime.AuditudeHelper.getNodesWithValue(a,"setvalue");0!==b.length&&(c={},d.call(this,
b,c)&&(e._submissionData=c));b=Primetime.AuditudeHelper.getNodesWithValue(a,"send");if(0===b.length)return!1;if(b=b[0])if(b=b.getAttribute("submission"))e._submissionId=b;a=Primetime.AuditudeHelper.getNodesWithValue(a,"par");if(0!==a.length)for(b=0;b<a.length;b++){c={};var k=a[b],n=c;if(k){n._type=e._type;n._refList=[];var m=Primetime.AuditudeHelper.getNodesWithValue(k,"meta");if(0===m.length)n=!1;else{m=Primetime.AuditudeHelper.getValueOfAttributeInMetaNodeList(m,"priority");m=parseInt(m);n._priority=
m;m=Primetime.AuditudeHelper.getNodesWithValue(k,"setvalue");if(0!==m.length){var p={};d.call(this,m,p)&&(n._state=p)}k=Primetime.AuditudeHelper.getNodesWithValue(k,"ref");if(0!==k.length)for(m=0;m<k.length;m++){var p={},u;var q=k[m];u=p;if(q){if((q=q.getAttribute("src"))&&0===q.indexOf("urn:ad:")){var q=q.substring(7),t=void 0;0<q.indexOf("#")?(t=q.substring(0,q.indexOf("#")),u._id=q.substring(q.indexOf("#")+1)):t=q;this._refToAdId.push({adId:t,ref:u})}u=!0}else u=null;u&&n._refList.push(p)}n=!0}}else n=
null;n&&e._pars.push(c)}return e},d=function(a,b){for(var c,d,e=0;e<a.length;e++)if(d=a[e])c=d.getAttribute("ref"),d=d.getAttribute("value"),c&&d&&(b[c]=d);return!0},e=function(){Primetime.AuditudeHelper.enumerateEntries(this._refToAdId,function(a,b,c){a=b.adId;b=b.ref;a&&(c=c._ads[a])&&(b._ad=c,b._assets=c.getAssetsBySegment(b._id));return!0},this);this._refToAdId=[];return!0};Primetime.AuditudeResponseParser.prototype={constructor:Primetime.AuditudeResponseParser,parse:function(b){return a.call(this,
b)},getBreaks:function(a){for(var b=[],c=0;c<this._breaks.length;++c){var d=this._breaks[c];d._type==a&&b.push(d)}return b}}})();(function(){Primetime.BaseElement=function(a){this._trackingEvents=[];this._parent=a;return this};Primetime.BaseElement.prototype={constructor:Primetime.BaseElement,baseElementParse:function(a){var b=a.getAttribute("id");if(!b)return!1;this._smilId=b;a=Primetime.AuditudeHelper.getNodesWithValue(a,"submission");for(b=0;b<a.length;b++){var e=a[b],f,g,h,l;(l=e.getAttribute("id"))&&(f=l);(l=e.getAttribute("action"))&&(g=l);(l=e.getAttribute("method"))&&(h=l);e=new Primetime.Submission(Primetime.TrackingEventType[f],
g,h);0<e._id.length&&this.addTracking(e,e._id)}return!0},addTracking:function(a,b){a&&this.getTrackingEventByType(b,!0).addTrackingInstance(a)},getTrackingEventByType:function(a,b){"undefined"===typeof b&&(b=!0);for(var e,f=0;f<this._trackingEvents.length;f++)if(e=this._trackingEvents[f],e._type===a)return e;if(b)return e={_type:a,_trackingInstances:[],addTrackingInstance:function(a){this._trackingInstances.push(a)},track:function(a){for(var b=0;b<this._trackingInstances.length;++b)this._trackingInstances[b].track(a)}},
this._trackingEvents.push(e),e},copyTrackingEventsTo:function(a){if(this._trackingEvents&&0<this._trackingEvents.length)for(var b=0;b<this._trackingEvents.length;b++){var e=this._trackingEvents[b],f=e._trackingInstances;if(f)for(var g=0;g<f.length;g++){var h=f[g],h=new Primetime.Tracking(h._url,h._type,h._addDictionaryParameters);a.addTracking(h,e._type)}}}};var a=function(a){var d=this._url;if(this._addDictionaryParameters){var e=this._url,f=d=0,g=e;a&&(g=e,-1==e.lastIndexOf("?")&&(g+="?",d++),"&"!==
e[e.length-1]&&(g+="&",d++),f=g.length,e={url:g},Primetime.AuditudeHelper.enumerateEntries(a,b,e),g=e.url,g=f===g.length?g.substring(0,g.length-d):g.substring(0,g.length-1));d=g}a=Math.floor(32768*Math.random());a=d.replace("[random]",a+"");console.log("Sending tracking request : "+a);(new Image).src=a;return!0},b=function(a,b,e){var f=e.url,g;if(-1<f.indexOf("&"+a+"="))return!0;g=";"+a+"=";if(-1<f.indexOf(g))return!0;g="/"+a+"=";if(-1<f.indexOf(g))return!0;f=f+a+"=";for(a=0;a<b.length;a++)f=","==
b[a]?f+"%2c":":"==b[a]?f+"%3a":";"==b[a]?f+"%3b":"&"==b[a]?f+"%26":"="==b[a]?f+"%3d":"?"==b[a]?f+"%3f":f+b[a];f+="&";e.url=f;return!0};Primetime.Tracking=function(a,b,e,f,g){this._url=a;this._type=b;this._addDictionaryParameters=e;"undefined"===typeof e&&(this._addDictionaryParameters=!0);this._offset=f;"undefined"===typeof f&&(this._offset=0);this._offsetIsPercent=g;"undefined"===typeof g&&(this._offsetIsPercent=!1);return this};Primetime.Tracking.prototype={constructor:Primetime.Tracking,track:function(b){a.call(this,
b)}};Primetime.Submission=function(a,b,e,f,g){this._type=this._id=a;this._url=b;this._method=e;this._addDictionaryParameters=!0;this._offset=f;"undefined"===typeof f&&(this._offset=0);this._offsetIsPercent=g;"undefined"===typeof g&&(this._offsetIsPercent=!1);return this};Primetime.Submission.prototype={constructor:Primetime.Submission,track:function(b){a.call(this,b)}};Primetime.Click=function(a){Primetime.BaseElement.call(this,a);this._url=this._assetType=this._altText=this._target=this._title="";
return this};Primetime.Click.prototype=Object.create(Primetime.BaseElement.prototype);Primetime.Click.prototype.constructor=Primetime.Click;Primetime.Click.prototype.addClickTrackingUrl=function(a){this.addTracking(new Primetime.Tracking(a,Primetime.TrackingEventType.click),Primetime.TrackingEventType.click)}})();(function(){Primetime.AssetFormat={unknown:0,video:1,interstitial:2,skin:3,slate:4,pausead:5,adbug:6,overlay:7,onpage:8};Primetime.Asset=function(a,b){Primetime.BaseElement.call(this,a);this._creativeType=b;this._skipOffset=-1;this._clickUrls=[];this._customData={};this._auditudeParams={};this._clickUrls=[];this._mediaFiles=[];return this};Primetime.Asset.prototype=Object.create(Primetime.BaseElement.prototype);Primetime.Asset.prototype.constructor=Primetime.Asset;Primetime.Asset.prototype.parse=
function(a){this.baseElementParse(a);var b;if(b=a.getAttribute("contentType"))this.type=b;if(b=a.getAttribute("runtime"))this.duration=b;if(b=a.getAttribute("parameters"))this.auditudeParams=Primetime.AuditudeHelper.toStringDictionary(b,"&","=");if(b=a.getAttribute("apiFramework"))this.apiFramework=b;var c,d=Primetime.AuditudeHelper.getNodesWithValue(a,"click"),e,f,g;for(c=0;c<d.length;++c)if(b=d[c]){f={parse:function(a){this.url=a.getAttribute("href");this.title=a.getAttribute("title")}};f.parse(b);
this._clickUrls.push(f);var h;g=Primetime.AuditudeHelper.getNodesWithValue(b,"submission");for(h=0;h<g.length;++h){var l=g[c];f=e=null;(b=l.getAttribute("id"))&&(e=b);(b=l.getAttribute("action"))&&(f=b);e&&f&&"click"===e&&this.addTracking(new Primetime.Tracking(f,Primetime.TrackingEventType.click),Primetime.TrackingEventType.click)}}g=Primetime.AuditudeHelper.getNodesWithValue(a,"tracking");for(c=0;c<g.length;c++)d=g[c],e=f=null,(b=d.getAttribute("actuate"))&&(e=b),(b=d.getAttribute("action"))&&(f=
b),this.initializeTrackTime(e,f);b=Primetime.AuditudeHelper.getNodesWithValue(a,"mediaFile");for(c=0;c<b.length;c++)f=b[c],f.getAttribute("src")&&f.getAttribute("type")&&(g={parse:function(a){this._url=a.getAttribute("src");this._width=a.getAttribute("width")?parseInt(a.getAttribute("width")):0;this._height=a.getAttribute("height")?parseInt(a.getAttribute("height")):0;this._type=a.getAttribute("type")}},g.parse(f),this._mediaFiles.push(g));0<this._mediaFiles.length&&(this._url=this._mediaFiles[0]._url,
this._creativeType=this._mediaFiles[0]._type,this._width=this._mediaFiles[0]._width,this._height=this._mediaFiles[0]._height);g=Primetime.AuditudeHelper.getNodesWithValue(a,"submission");for(c=0;c<g.length;c++)a=g[c],d=f=e=null,(b=a.getAttribute("id"))&&(d=Primetime.TrackingEventType[b]),(b=a.getAttribute("action"))&&(f=b),(b=a.getAttribute("method"))&&(e=b),this.addTracking(new Primetime.Submission(d,f,e),d);return!0};Primetime.Asset.prototype.parseExtensions=function(){return!0};Primetime.Asset.prototype.initializeTrackTime=
function(a,b){if(a)if("click"===a)this.addTracking(new Primetime.Tracking(b,Primetime.TrackingEventType.click),Primetime.TrackingEventType.click);else{if("%"===a[a.length-1])switch(parseInt(a.substring(0,a.length-1))){case 0:this.addTracking(new Primetime.Tracking(b,Primetime.TrackingEventType.start),Primetime.TrackingEventType.start);break;case 25:this.addTracking(new Primetime.Tracking(b,Primetime.TrackingEventType.firstQuartile),Primetime.TrackingEventType.firstQuartile);break;case 50:this.addTracking(new Primetime.Tracking(b,
Primetime.TrackingEventType.midpoint),Primetime.TrackingEventType.midpoint);break;case 75:this.addTracking(new Primetime.Tracking(b,Primetime.TrackingEventType.thirdQuartile),Primetime.TrackingEventType.thirdQuartile);break;case 100:this.addTracking(new Primetime.Tracking(b,Primetime.TrackingEventType.complete),Primetime.TrackingEventType.complete)}}else this.addTracking(new Primetime.Tracking(b,Primetime.TrackingEventType.creativeView),Primetime.TrackingEventType.creativeView)};Primetime.Asset.prototype.addCustomData=
function(a){Primetime.AuditudeHelper.enumerateEntries(this._customData,function(a,c,d){d._customData[a]=c;return!0},this);return!0};Primetime.Asset.prototype.copyTo=function(a){this.copyTrackingEventsTo(a)};Primetime.LinearAsset=function(a,b){Primetime.Asset.call(this,a,b);return this};Primetime.LinearAsset.prototype=Object.create(Primetime.Asset.prototype);Primetime.LinearAsset.prototype.constructor=Primetime.LinearAsset;Primetime.NonLinearAsset=function(a,b){Primetime.Asset.call(this,a,b);return this};
Primetime.NonLinearAsset.prototype=Object.create(Primetime.Asset.prototype);Primetime.NonLinearAsset.prototype.constructor=Primetime.NonLinearAsset;Primetime.OnPageAsset=function(a,b){Primetime.Asset.call(this,a,b);return this};Primetime.OnPageAsset.prototype=Object.create(Primetime.Asset.prototype);Primetime.OnPageAsset.prototype.constructor=Primetime.OnPageAsset;Primetime.MetaAsset=function(a,b){Primetime.Asset.call(this,a,b);return this};Primetime.MetaAsset.prototype=Object.create(Primetime.Asset.prototype);
Primetime.MetaAsset.prototype.constructor=Primetime.MetaAsset})();(function(){Primetime.AuditudeAd=function(a){Primetime.BaseElement.call(this,a);this._bannerTrackingAsset=this._nonLinearTrackingAsset=this._linearTrackingAsset=null;this._wrapperSource=this._adSystem="";this._wrapperSourceVastDoc=null;this._followWrappers=this._allowPod="";this._isWrapper=!1;this._nextSegmentIndex=0;this._auditudeAdID="";this._followWrappers=this._dispatchError=this._allowMultipleAds=this._isVastDocumentProcessed=this._crEnabled=!1;this._auditudeParams={};this._segmentsById={};this._assetsBySmilId=
{};this._assets=[];this._segments=[];return this};Primetime.AuditudeAd.prototype=Object.create(Primetime.BaseElement.prototype);Primetime.AuditudeAd.prototype.constructor=Primetime.AuditudeAd;Primetime.AuditudeAd.prototype.parse=function(a){if("undefined"==typeof a||null===a)return null;this.baseElementParse(a);var b;b=Primetime.AuditudeHelper.getNodesWithValue(a,"wrapper");if(0<b.length){var c=b[0];if(b=c.getAttribute("adTagURI"))this._wrapperSource=b;if(b=c.getAttribute("adSystem"))this._adSystem=
b,this._isWrapper=!0}var d;b={};c=Primetime.AuditudeHelper.getNodesWithValue(a,"Extensions");if(0<c.length){var e=Primetime.AuditudeHelper.getNodesWithValue(c[0],"Extension");if(!this.parseExtensions(e,function(a){d=a},b))return!1}e=Primetime.AuditudeHelper.getNodesWithValue(a,"asset");if(0<e.length&&!this.parseAssets(e,d,b,c))return!1;this._linearTrackingAsset?this._auditudeParams=this._linearTrackingAsset._auditudeParams:this._nonLinearTrackingAsset&&(this._auditudeParams=this._nonLinearTrackingAsset._auditudeParams);
b=Primetime.AuditudeHelper.getNodesWithValue(a,"smil");0<b.length?this.parseSmil(b[0]):this.parseSmil(null);a=Primetime.AuditudeHelper.getNodesWithValue(a,"submission");for(c=0;c<a.length;c++){var e=a[c],f,g,h;(b=e.getAttribute("id"))&&(f=Primetime.TrackingEventType[b]);(b=e.getAttribute("action"))&&(g=b);(b=e.getAttribute("method"))&&(h=b);this.addTracking(new Primetime.Submission(f,g,h),f)}return!0};Primetime.AuditudeAd.prototype.parseExtensions=function(a,b,c){a=Primetime.AuditudeHelper.getNodesWithAttributeValue(a,
"type","Behavior")[0];var d=Primetime.AuditudeHelper.getNodesWithValue(a,"Behavior");for(a=0;a<d.length;++a){var e=d[a].getAttribute("type");if(e){var f=d[a].textContent;f&&("scr"===e?b(f):"crenabled"===e?this._crEnabled="true"===f:"thirdPartyAdServer"===e?this._thirdPartyAdServer=f:(f=Primetime.AuditudeHelper.toStringDictionary(f,"&","="),c[e]=f))}}return!0};Primetime.AuditudeAd.prototype.parseAssets=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=f.getAttribute("id"),h="",l="",n;g&&g in
c&&(l=g,n=c[l],h=!n||"format"in n?n.format:"");var g=f.getAttribute("contentType"),k;g&&(k=g);if(g=this.getAssetForType(k,h))g.parse(f),g.parseExtensions(d),g.addCustomData(n),g.addCustomData({scr:b}),h in Primetime.AssetFormat&&(g._assetFormat=Primetime.AssetFormat[h]),"meta"===h?this._metaAssets.push(g):(this.addAsset(g),this._isWrapper&&("linear"===k&&(this._linearTrackingAsset=g),"nonlinear"===k&&(this._nonLinearTrackingAsset=g),"companion"===k&&(this._bannerTrackingAsset=g)))}return!0};Primetime.AuditudeAd.prototype.getVideoAsset=
function(){for(var a=null,b=0;b<this._assets.length;b++){var c=this._assets[b];"VPAID"==c.apiFramework?"application/javascript"===c._creativeType&&(a=c):c._assetFormat===Primetime.AssetFormat.video&&(a=c);if(null!=a)break}return a};Primetime.AuditudeAd.prototype.getAssetForType=function(a,b){return"linear"===a?new Primetime.LinearAsset(this,a):"nonlinear"===a?new Primetime.NonLinearAsset(this,a):"companion"===a?new Primetime.OnPageAsset(this,a):"meta"===a?new Primetime.MetaAsset(this,a):null};Primetime.AuditudeAd.prototype.addAsset=
function(a){return a?(this._assetsBySmilId[a._smilId]=a,this._assets.push(a),!0):!1};Primetime.AuditudeAd.prototype.parseSmil=function(a){if(a){a=a.childNodes;for(var b=0;b<a.length;b++){var c=a[b];if(c)for(c=Primetime.AuditudeHelper.getNodesWithValue(c,"par"),b=0;b<c.length;b++){for(var b=c[b],d=b.getAttribute("id"),e,f=[],g=Primetime.AuditudeHelper.getNodesWithValue(b,"ref"),b=0;b<g.length;b++)e=g[b].getAttribute("asset"),(e=this.getAssetById(e))&&f.push(e);this.addAdSegment({_id:d,_assets:f})}}}};
Primetime.AuditudeAd.prototype.getAssetById=function(a){if(0===a.length)return null;a=a.split(".");var b=null;1===a.length?b=this._assetsBySmilId[a[0]]:2===a.length&&a[0]===this._smilId&&(b=this._assetsBySmilId[a[1]]);return b};Primetime.AuditudeAd.prototype.addAdSegment=function(a){a&&0<a._id.length&&(this._segmentsById[a._id]=a,this._segments.push(a))};Primetime.AuditudeAd.prototype.getAssetsBySegment=function(a){if((a=this._segmentsById[a])&&0<a._assets.length)return a._assets};Primetime.AuditudeAd.prototype.addTrackingAsset=
function(a,b){return a?("linear"===b?this._linearTrackingAsset=a:"nonlinear"===b?this._nonLinearTrackingAsset=a:"companion"===b&&(this._bannerTrackingAsset=a),!0):null};Primetime.AuditudeAd.prototype.getLinearAssetWithContentType=function(a){if(this._linearTrackingAsset&&"linear"===a)return this._linearTrackingAsset};Primetime.AuditudeAd.prototype.setMediaInfo=function(a,b,c,d,e){this._mediaURL=a;this._mediaType=b;this._mediaId=c;this._mediaWidth=d;this._mediaHeight=e}})();(function(){Primetime.AuditudeConstants={MAX_PLACEMENTS_PER_REQUEST:1,HLS_MIME_TYPE:"application/x-mpegURL",MINIMUM_AD_DURATION:5,MINIMUM_AD_LOTS:1,REQUEST_TIMEOUT:10,TIMELINE_PARAMETER_TYPE:"type",TIMELINE_PARAMETER_LOTS:"lots",TIMELINE_PARAMETER_DURATION:"duration",TIMELINE_PARAMETER_POSITION:"position",PRE_ROLL_TYPE:"p",MID_ROLL_TYPE:"m",POST_ROLL_TYPE:"t",AUDITUDE_POD_KEY:"pod",AUDITUDE_POD_TYPE_KEY:"ptype:"}})();(function(){Primetime.VastAdCreativeBase=function(){this._expandedHeight=this._expandedWidth=this._height=this._width=0;this._trackingEvents=[];this._clickTrackingUrls=[];return this};Primetime.VastAdCreativeBase.prototype={constructor:Primetime.VastAdCreativeBase,addTrackingEvent:function(a){if(!a)return null;var b=this.getTrackingEventByType(a._type);if(b){a=a._trackingInstances;for(var c=0;c<a.length;c++)b.addTrackingInstance(a[c])}else this._trackingEvents.push(a);return!0},getTrackingEventByType:function(a,
b){"undefined"===typeof b&&(b=!1);if(!this._trackingEvents)return null;for(var c=0;c<this._trackingEvents.length;c++){var d=this._trackingEvents[c];if(d._type==a)return d}return b?(c=new Primetime.VastTrackingEvent(a,[]),this._trackingEvents.push(c),c):!1}};Primetime.VastNonLinearCreative=function(){Primetime.VastAdCreativeBase.call(this);return this};Primetime.VastNonLinearCreative.prototype=Object.create(Primetime.VastAdCreativeBase.prototype);Primetime.VastCompanionCreative=function(){Primetime.VastAdCreativeBase.call(this);
return this};Primetime.VastCompanionCreative.prototype=Object.create(Primetime.VastAdCreativeBase.prototype);Primetime.VastLinearCreative=function(){Primetime.VastAdCreativeBase.call(this);this._mediaFiles=[];this._click=null;return this};Primetime.VastLinearCreative.prototype=Object.create(Primetime.VastAdCreativeBase.prototype)})();(function(){Primetime.VastDocument=function(a){this._version="2.0";this._reachedMaxWrapper=!1;this._parentAd=a;this._ads=[];this._podAds=[];this._standAloneAds=[];this._unusedAds=this._usedAds=null;return this};Primetime.VastDocument.prototype={constructor:Primetime.VastDocument,addVastAd:function(a){if(a){var b=a._wrapperAd;if(b&&this._parentAd){var c=this._parentAd._wrapperAd;if(c&&!1===c.followAdditionalWrappers)return;c&&"false"===c.allowMultipleAds&&(b.allowMultipleAds="false")}a._vastDocument=
this;this._ads.push(a);if(0<=a._sequence){b=!1;for(c=0;c<this._podAds.length;c++)if(this._podAds[c]._sequence>a._sequence){b=!0;this._podAds[c]=a;break}b||this._podAds.push(a)}else this._standAloneAds.push(a)}},getAds:function(){this._parentAd||this._ads.slice(0);var a=this._parentAd._wrapperAd;if(!a||0===this._ads.length)return this._ads.slice(0);if(this._usedAds)return this._usedAds.slice(0);this._usedAds=[];this._unusedAds=[];"false"===a._allowMultipleAds?0===this._standAloneAds.length?0<this._podAds.length&&
this._usedAds.push(this._podAds[0]):this._usedAds.push(this._standAloneAds[0]):"true"===a._allowMultipleAds?0<this._podAds.length?this._usedAds=this._usedAds.concat(this._podAds):0<this._standAloneAds.length&&this._usedAds.push(this._standAloneAds[0]):this._usedAds=this._usedAds.concat(this._ads);for(a=0;a<this._standAloneAds.length;a++)0>this._usedAds.indexOf(this._standAloneAds[a])&&this._unusedAds.push(this._standAloneAds[a]);return this._usedAds.slice(0)},getVastMediaFile:function(a){"undefined"===
typeof a&&(a=-1);var b,c;c=this._usedAds;this._usedAds&&0!==this._usedAds.length||(c=this._ads);if(0<=a&&c&&c.length>a){if(b=c[a],(b=b._inlineAds)&&0<b.length&&b[0]._linearAd)return c=b[0]._linearAd._mediaFiles,c[0]}else if(c)for(a=0;a<c.length;a++)if(b=c[a],(b=b._inlineAds)&&0<b.length){if(b[0]._linearAd)return c=b[0]._linearAd._mediaFiles,c[0];break}return!1},getVastAdId:function(a){"undefined"===typeof a&&(a=-1);var b,c=this._usedAds;this._usedAds&&0!==this._usedAds.length||(c=this._ads);if(0<=
a&&c&&c.length>a){if(b=c[a],(b=b._inlineAds)&&0<b.length)return b[0]._networkAdId}else if(c)for(a=0;a<c.length;a++)if(b=c[a],(b=b._inlineAds)&&0<b.length)return b[0]._networkAdId;return null},getNextUnusedAd:function(){return this._unusedAds&&0!==this._unusedAds.length?this._unusedAds.shift():null},replaceAd:function(a,b){if(this._unusedAds){var c=this._usedAds.indexOf(a);0<=c&&(this._usedAds[c]=b)}}}})();(function(){var a=function(a,b){var c=b.substring(b.indexOf("//")+2),c=c.substring(0,c.indexOf("/")),d;for(d=0;d<a.length&&!(-1<a[d]._domains.indexOf(c));++d);return d<a.length?b.replace(new RegExp(a[d]._find),a[d]._replace):b},b=function(a){a=a.documentElement;if("Rules"!==a.tagName)this._listener.onRequestFailed();var b=Primetime.AuditudeHelper.getNodesWithValue(a,"Rule");for(a=0;a<b.length;++a){for(var c={_domains:[],_find:null,_replace:null},d=Primetime.AuditudeHelper.getNodesWithValue(b[a],"Criteria"),
e=Primetime.AuditudeHelper.getNodesWithValue(d[0],"Domain"),d=0;d<e.length;++d)c._domains.push(Primetime.AuditudeHelper.getNodeValue(e[d]));d=Primetime.AuditudeHelper.getNodesWithValue(b[a],"Find");c._find=Primetime.AuditudeHelper.getNodeValue(d[0]);d=Primetime.AuditudeHelper.getNodesWithValue(b[a],"Replace");c._replace=Primetime.AuditudeHelper.getNodeValue(d[0]);this._rules.push(c)}};Primetime.CreativeRepackager=function(a,b,c,d){this._repackageAds=a;this._listener=b;this._params=c;this._videoUrls=
[];this._hasFailed=!1;this._rules=[];this._timeoutReached=!1;"undefined"!==typeof d&&(this._timeout=setTimeout(function(){this._timeoutReached=!0;this._listener.notifyFailed()},d));return this};Primetime.CreativeRepackager.prototype={constructor:Primetime.CreativeRepackager,repackage:function(){var a=this;(new Primetime.DataLoaderNetJob({onRequestComplete:function(d){b.call(a,d);c.call(a)},onRequestFailed:function(){a._listener.onRequestFailed()}},"http://cdn2.auditude.com/crs/rules.xml")).execute()},
checkCompletion:function(){if(0===this._repackagingCount){this._timeout&&clearTimeout(this._timeout);for(var a=0;a<this._videoUrls.length;++a){var b=this._repackageAds[a];b.setUrl(this._videoUrls[a]);this._params.creativeRepackagingFormat?b.setType(this._params.creativeRepackagingFormat):b.setType("application/x-mpegURL");b.addTrackingEvent(new Primetime.Tracking(d(this._params,1403,b.getId(),b.getExternalId(),b.getUrl(),b.getWidth(),b.getHeight()),Primetime.TrackingEventType.creativeView))}if(!this._timeoutReached)this._listener.onRepackagingComplete()}}};
Primetime.CreativeRepackagingNetJob=function(a,b,c,d,e,k){this._listener=a;this._videoUrl=b;this._index=c;this._ad=d;this._params=e;this._rules=k;return this};Primetime.CreativeRepackagingNetJob.prototype={execute:function(){var a=this,b=new XMLHttpRequest;b.onload=function(){404===b.status?(this._loaded=!0,console.log("Video does not exist in required format. Sending a Start Transcoding Request."),(new Image).src=d(a._params,1401,a._ad.getId(),a._ad.getExternalId(),a._ad.getUrl(),a._ad.getWidth(),
a._ad.getHeight()),a._listener.onRequestFailed()):200<=b.status&&299>=b.status&&(this._loaded=!0,a._listener.onRequestComplete(a._index,a._videoUrl))};b.onloadend=b.onerror=function(){if(!this._loaded)if(0===this._attempts)this._listener.onError();else console.log("Failed loading data. Retry in 500ms attempts: "+this._attempts),this._attempts--,setTimeout(this.execute,500)};b.open("GET",this._videoUrl,!0);b.send()}};var c=function(){var b;this._repackagingCount=this._repackageAds.length;for(b=0;b<
this._repackageAds.length;++b){if(this._timeoutReached)return;var c="",d=this._repackageAds[b].getUrl(),d=a(this._rules,d),l=e(d),d=Primetime.AuditudeHelper.md5(d),l=Primetime.AuditudeHelper.md5(l),c=this._params.getCRSDomain?c+this._params.getCRSDomain():c+"http://cdn2.auditude.com/assets/3p/v",c=c+1,c=c+"/",c=c+d.substring(0,10),c=c+"/",c=c+d,c=c+"_",c=c+l;if(this._params.creativeRepackagingFormat)switch(this._params.creativeRepackagingFormat){case "application/dash+xml":c+=".mpd";break;case "application/x-mpegURL":c+=
".m3u8";break;default:console.log("Only HLS and DASH are supported as repackaged creatives format.");this._listener.notifyFailed();return}else c+=".m3u8";var n=this;(new Primetime.CreativeRepackagingNetJob({onRequestComplete:function(a,b){n._hasFailed||(n._videoUrls[a]=b,n._repackagingCount--,n.checkCompletion())},onRequestFailed:function(){n._hasFailed||(n._hasFailed=!0,n._listener.notifyFailed())}},c,b,this._repackageAds[b],this._params,this._rules)).execute()}0===this._repackageAds.length&&this.checkCompletion()},
d=function(a,b,c,d,e,k,m){var p;a.domain&&0<a.domain.length?(p="http://ad."+a.domain,p+="/adserver/e?type=playererror"):p="http://ad.auditude.com/adserver/e?type=playererror";p=""+p;p=p+"&errorId="+b;p+="&z=";p+=a.zoneId;p+="&a=";p+=c;p+="&f=";if(a.creativeRepackagingFormat)switch(a.creativeRepackagingFormat){case "application/dash+xml":p+="dash";break;case "application/x-mpegURL":p+="m3u8";break;default:console.log("Only HLS and DASH are supported as repackaged creatives format.")}else p+="m3u8";
p+="&tp=";p+=d;p+="&tv=";p+=1;p+="&url=";p+=encodeURI(e);p+="&vw=";p+=k;p+="&vh=";return p+=m},e=function(a){for(var b="",c=a.length-1;0<=c;c--)b+=a[c];return b}})();(function(){Primetime.AuditudeContentTracker=function(a,c){this._ad=a;this._asset=a.getVideoAsset();this._thirdQuartileTracked=this._midPointTracked=this._firstQuartileTracked=!1;this._data=c;return this};Primetime.AuditudeContentTracker.prototype={constructor:Primetime.AuditudeContentTracker,addTrackingEvent:function(a){this._asset.addTracking(a,a._type)},trackAsset:function(a,c){if(this._asset){var d=this._asset.getTrackingEventByType(a);d&&d.track(c);a==Primetime.TrackingEventType.click&&(d=this._asset._click)&&
(d=d.getTrackingEventByType(a))&&d.track(null)}},trackAd:function(a,c){var d=this._ad.getTrackingEventByType(a);d&&d.track(c)},getProgressData:function(b,c,d){"undefined"===typeof c&&(c=!0);"undefined"===typeof d&&(d=!0);b||(b={});var e=null;this._data.submissions&&(e=this._data.submissions.state);e&&Primetime.AuditudeHelper.enumerateEntries(e,a,b);this._data.parSubmissionData&&c&&Primetime.AuditudeHelper.enumerateEntries(this._data.parSubmissionData,a,b);this._data.seqSubmissionData&&d&&Primetime.AuditudeHelper.enumerateEntries(this._data.seqSubmissionData,
a,b);b.l=Primetime.AuditudeHelper.getCurrentDate().toString()},onAdStartCallbackFunc:function(a){a={};this.getProgressData(a);this.trackAsset(Primetime.TrackingEventType.impression,null);this.trackAsset(Primetime.TrackingEventType.creativeView,a);this.trackAsset(Primetime.TrackingEventType.start,null);a.unit="percent";a.progress="0";this.trackAsset(Primetime.TrackingEventType.creativeProgress,a)},onAdCompleteCallbackFunc:function(a){a={};this.trackAsset(Primetime.TrackingEventType.complete,a);a.unit=
"percent";a.progress="100";this.getProgressData(a);this.trackAsset(Primetime.TrackingEventType.creativeProgress,a)},onAdProgressCallbackFunc:function(a,c){var d,e;25<=c&&!this._firstQuartileTracked&&(this._firstQuartileTracked=!0,e="25",this.trackAsset(Primetime.TrackingEventType.firstQuartile,d),d={unit:"percent"},d.progress=e,this.getProgressData(d),this.trackAsset(Primetime.TrackingEventType.creativeProgress,d));50<=c&&!this._midPointTracked&&(this._midPointTracked=!0,e="50",this.trackAsset(Primetime.TrackingEventType.midpoint,
d),d={unit:"percent"},d.progress=e,this.getProgressData(d),this.trackAsset(Primetime.TrackingEventType.creativeProgress,d));75<=c&&!this._thirdQuartileTracked&&(this._thirdQuartileTracked=!0,e="75",this.trackAsset(Primetime.TrackingEventType.thirdQuartile,d),d={unit:"percent"},d.progress=e,this.getProgressData(d),this.trackAsset(Primetime.TrackingEventType.creativeProgress,d))},onAdClickCallbackFunc:function(a){a={};this.getProgressData(a);this.trackAsset(Primetime.TrackingEventType.click,a)},onAdBreakStartCallbackFunc:function(a){a=
{event:"start",advancepattern:"0"};this.getProgressData(a,!1);this.trackAd(Primetime.TrackingEventType.podprogress,a);this.trackAd(Primetime.TrackingEventType.start,null)},onAdBreakCompleteCallbackFunc:function(a){a={event:"complete",advancepattern:"1"};this.getProgressData(a,!1);this.trackAd(Primetime.TrackingEventType.podprogress,a);this.trackAd(Primetime.TrackingEventType.complete,null)}};var a=function(a,c,d){d[a]=c;return!0}})();(function(){Primetime.AuditudePlugin=function(a){this._auditudeContentResolver=a;this._adRequest=!1;return this};Primetime.AuditudePlugin.POST_ROLL_DEFAULT_TIME=Number.MAX_VALUE;Primetime.AuditudePlugin.prototype={constructor:Primetime.AuditudePlugin,resolveAds:function(a,b){this._auditudeSettings=a;this._adRequest=new Primetime.AdRequest(a,b,null,this);this._adRequest.createURLRequest()},toPSDKAsset:function(a){var b=null,c=null,d=null,e=null;if(!a)return null;if(a._mediaFiles&&0<a._mediaFiles.length){e=
a._mediaFiles;"VPAID"===a.apiFramework===!1&&Primetime.AuditudeHelper.prioritizeMediaFiles(a._mediaFiles,this._auditudeSettings.validMimeTypes,this._auditudeSettings.creativeRepackagingFormat,!1);if(!e)return null;0<e.length&&(b=new AdobePSDK.MediaResource(e[0]._url,Primetime.AuditudeHelper.getMediaResourceTypeFromString(e[0]._type)),d=new AdobePSDK.Metadata,d.setValue("width",e[0]._width),d.setValue("height",e[0]._height),d.setValue("format",e[0]._type))}e=a._adParams;a._clickUrls&&0<a._clickUrls.length&&
(c=new AdobePSDK.AdClick(null,a._clickUrls[0].title,a._clickUrls[0].url));return new AdobePSDK.AdAsset(a._smilId,1E3*a.duration,b,c,d,e)},toAdBannerAsset:function(a){var b=a._mediaFiles;if(b&&0<b.length){if(null===a._resourceType||void 0===a._resourceType)switch(a._creativeType){case "image/gif":case "image/jpeg":case "image/png":a._resourceType=Primetime.AD_BANNER_TYPE.STATIC;break;case "text/html":a._resourceType=Primetime.AD_BANNER_TYPE.IFRAME;break;default:return null}(b=a._clickUrls)&&0<b.length&&
(a._clickThroughUrl=b[0].url);a._params=a.auditudeParams;return Primetime.AuditudeHelper.toAdBannerAsset(a)}return null},toPSDKAd:function(a,b,c){b=a.getVideoAsset();var d=this.toPSDKAsset(b),e=[];if(!d)return null;for(var f=0;f<a._assets.length;++f){var g=a._assets[f];g._assetFormat===Primetime.AssetFormat.onpage&&(g=this.toAdBannerAsset(g))&&e.push(g)}f="VPAID"==b.apiFramework;g=1E3*parseInt(b.duration);f&&(g=0);return new AdobePSDK.Ad(a._smilId,AdobePSDK.AdType.LINEAR,g,!1,d,e,new Primetime.AuditudeContentTracker(a,
c),AdobePSDK.AdInsertionType.CLIENT_INSERTED,b._clickUrls&&0<b._clickUrls.length,f)},convertToPSDKType:function(a,b){for(var c=[],d=0,e=a._sequences,d=1E3*a._startTime,f,g=0;g<e.length;g++){var h=e[g];f||(f=h._submissions);for(var l=h._submissionData,n=1E3*h._duration,k=0,m=h._seqType,p=[],h=h._pars,u=0;u<h.length;u++)for(var q=h[u],t=q._state,q=q._refList,r=0;r<q.length;r++){var w=q[r]._ad,z=null;w&&(z={},z.submissions=f,z.seqSubmissionData=l,z.parSubmissionData=t,z=this.toPSDKAd(w,n,z));z&&p.push(z)}if(0<
p.length){l=AdobePSDK.PlacementType.PRE_ROLL;switch(m){case "preRoll":k=0;l=AdobePSDK.PlacementType.PRE_ROLL;break;case "postRoll":k=Primetime.AuditudePlugin.POST_ROLL_DEFAULT_TIME;l=AdobePSDK.PlacementType.POST_ROLL;break;case "midRoll":k=d,l=AdobePSDK.PlacementType.MID_ROLL}k=new AdobePSDK.Placement(l,k,0);m=b.placement;p=new AdobePSDK.AdBreak(p);m.type!=AdobePSDK.PlacementType.SERVER_MAP&&(k=m);p=new AdobePSDK.AdBreakPlacement(p,k);c.push(p)}}return c},createdAdBreaks:function(a,b,c){if(c)this.timelineOps=
a;else{c=[];for(var d=0;d<a.length;d++){var e=this.convertToPSDKType(a[d],b);0<e.length&&c.push.apply(c,e)}this.timelineOps=c}if(this._auditudeSettings.creativeRepackagingEnabled){var f=this;(new Primetime.CreativeRepackager(this._getRepackageAds(),{onRepackagingComplete:function(){f._auditudeContentResolver.onComplete(f.timelineOps,b)},notifyFailed:function(){f._auditudeContentResolver.onComplete(f.timelineOps,b)}},this._auditudeSettings)).repackage()}else this._auditudeContentResolver.onComplete(this.timelineOps,
b)},notifyFailed:function(a){this._auditudeContentResolver.notifyFailed(a)},_getRepackageAds:function(){var a,b=[];for(a=0;a<this.timelineOps.length;++a){var c,d=this.timelineOps[a].adBreak.ads;for(c=0;c<d.length;++c){var e=null;d[c]&&d[c].primaryAsset&&d[c].primaryAsset.resource&&d[c].primaryAsset.resource.type&&(e=d[c].primaryAsset.resource.type);e===AdobePSDK.MediaResourceType.ISOBMFF&&"video/mp4"!==this._auditudeSettings.creativeRepackagingFormat&&b.push({ad:d[c],asset:d[c].primaryAsset,getId:function(){return this.ad.id},
getExternalId:function(){return 0},getUrl:function(){return this.asset.resource.url},getWidth:function(){return this.asset.metadata.getValue("width")},getHeight:function(){return this.asset.metadata.getValue("height")},setUrl:function(a){this.asset.resource.url=a},setType:function(a){this.asset.resource.type=Primetime.AuditudeHelper.getMediaResourceTypeFromString(a)},addTrackingEvent:function(a){this.ad.tracker.addTrackingEvent(a)}})}}return b}}})();(function(){Primetime.AuditudeRequest=function(a,b,c){this._metadata=a;this._maxPlacements=c;this._placementType=b.placement.type;this._opportunities=[];this._placements=[];this._maximumPlacementDuration=-1;this.add(b);var d=this;Object.defineProperty(this,"metadata",{get:function(){return d.getMetadata()}});Object.defineProperty(this,"opportunties",{get:function(){return d.getOpportunties()}});Object.defineProperty(this,"placements",{get:function(){return d.getPlacements()}});Object.defineProperty(this,
"maximumPlacementDuration",{get:function(){return d.getMaximumPlacementDuration()}});Object.defineProperty(this,"placementType",{get:function(){return d.getPlacementType()}});return this};Primetime.AuditudeRequest.prototype={constructor:Primetime.AuditudeRequest,getMetadata:function(){return this._metadata},getOpportunties:function(){return this._opportunities},getPlacements:function(){return this._placements},getMaximumPlacementDuration:function(){return this._maximumPlacementDuration},getPlacementType:function(){return this._placementType},
add:function(a){this._opportunities.push(a);this._placements.push(a.placement)}}})();(function(){Primetime.AuditudeResolver=function(a){this._auditudePlugin=this._config=this._item=this._client=null;this.auditudeSettings=a;return this};Primetime.AuditudeResolver.prototype={constructor:Primetime.AuditudeResolver,configureCallbackFunc:function(a,b){this._client=b;this._item=a;this._config=a.config},canResolveCallbackFunc:function(a){return!0},resolveCallbackFunc:function(a){(new Primetime.AuditudePlugin(this)).resolveAds(this.auditudeSettings,a)},onComplete:function(a,b){a&&a.length?
(this._client.process(a,b),this._client.notifyCompleted(b)):this.notifyFailed(b)},notifyFailed:function(a){this._client.notifyFailed(a)},cleanupCallbackFunc:function(){}}})();(function(){Primetime.VastXmlNetJob=function(a,c,d,e){this._listener=a;this._index=c;this._url=d;this._post=e;return this};var a=function(b){var c=new XMLHttpRequest,d,e=this;c.open("GET",e._url,!0);c.responseType="";c.onload=function(){if(!(200>c.status||299<c.status)){var a=c.responseXML;d=!0;e._listener.onRequestComplete(a,e._index)}};c.onloadend=c.onerror=function(){d||(0<b?(console.log("Failed loading data. Retry in 500ms attempts: "+b),b--,setTimeout(function(){a.call(e,b)},500)):(console.log("Failed loading data. No retry attempts left"),
e._listener.onRequestFailed()))};d=!1;c.send()};Primetime.VastXmlNetJob.prototype={constructor:Primetime.VastXmlNetJob,execute:function(){a.call(this,3)}}})();(function(){var a=function(a,b){"undefined"===typeof b&&(b=0);if(!a)return b;var c=parseInt(a);return isNaN(c)?b:c};Primetime.VastXMLParser=function(a,b,c){this._listener=a;this._parentAd=b;"undefined"===typeof b&&(this._parentAd={_sequence:-1,_fallbackOnNoAd:!1,_adParsed:!1,_vastDocument:null,_isFromVmapDoc:!1,_isRepackageCheckPending:!0,_isRepackageSuccessful:!1,_inlineAds:[]});this._redirectionCount=c;"undefined"===typeof c&&(this._redirectionCount=6);this._wrapperCount=0;return this};var b=function(b,
h,l,n){l._networkAdId=h._id;var k;n&&(l=Object.create(l),l._followAdditionalWrappers=!0,l._fallbackOnNoAd=!1,l._allowMultipleAds="",l._source=c.call(this,b,"VASTAdTagURI"));l._adSystem=c.call(this,b,"AdSystem");l._adTitle=c.call(this,b,"AdTitle");l._description=c.call(this,b,"Description");l._surveyUrl=c.call(this,b,"Survey");l._errorUrl=c.call(this,b,"Error");var m=Primetime.AuditudeHelper.getNodesWithValue(b,"Impression");if(0===m.length)return null;for(k=0;k<m.length;k++){var p=Primetime.AuditudeHelper.getNodeValue(m[k]);
p&&(p=new Primetime.Tracking(p,Primetime.TrackingEventType.creativeView,!1,0,!1),l._impressionUrls.push(p))}m=Primetime.AuditudeHelper.getNodesWithValue(b,"Creatives");if(0===m.length)return null;for(k=0;k<m.length;k++)for(var p=l,u=n,q=Primetime.AuditudeHelper.getNodesWithValue(m[k],"Creative"),t=0;t<q.length;t++){var r=q[t],w=p,z=u,G=void 0,E="",I=0,N="",E=r.getAttribute("id");(G=r.getAttribute("sequence"))&&(I=parseInt(G));var N=r.getAttribute("AdID"),L=Primetime.AuditudeHelper.getNodesWithValue(r,
"Linear");if(0!==L.length)for(G=0;G<L.length;G++){var x=L[G],A=w,H=E,y=I,F=N,D=z,J=void 0,S=new Primetime.VastLinearCreative;S._id=H;S._sequence=y;S._adId=F;if(J=x.getAttribute("skipoffset"))A._skipOffset=J;H=Primetime.AuditudeHelper.getNodesWithValue(x,"TrackingEvents");if(0!==H.length)for(J=0;J<H.length;J++)f.call(this,H[J],S);if(J=c.call(this,x,"Duration"))S._duration=Primetime.AuditudeHelper.parseDuration(J);S._adParameters=c.call(this,x,"AdParameters");H=Primetime.AuditudeHelper.getNodesWithValue(x,
"VideoClicks");if(0!==H.length)for(J=0;J<H.length;J++){var y=H[J],F=S,O=void 0,B=void 0,K={_trackingUrls:[],_customClickUrls:[]};K._url=c.call(this,y,"ClickThrough");var B=void 0,P=Primetime.AuditudeHelper.getNodesWithValue(y,"ClickTracking");if(0!==P.length)for(O=0;O<P.length;O++)B=P[O],(B=Primetime.AuditudeHelper.getNodeValue(B))&&K._trackingUrls.push(B);P=Primetime.AuditudeHelper.getNodesWithValue(y,"CustomClick");if(0!==P.length)for(O=0;O<P.length;O++)B=P[O],(B=Primetime.AuditudeHelper.getNodeValue(B))&&
K._customClickUrls.push(B);F._click=K}x=Primetime.AuditudeHelper.getNodesWithValue(x,"MediaFiles");if(0!==x.length)for(J=0;J<x.length;J++)if(H=S,y=Primetime.AuditudeHelper.getNodesWithValue(x[J],"MediaFile"),0!==y.length)for(F=0;F<y.length;F++)O=y[F],K=H,P={},P._id=O.getAttribute("id"),P._bitrate=a(O.getAttribute("bitrate"),0),P._width=a(O.getAttribute("width"),0),P._height=a(O.getAttribute("height"),0),B=O.getAttribute("delivery"),P._delivery="streaming"===B?"STREAMING":"progressive"===B?"PROGRESSIVE":
"INVALID",P._type=O.getAttribute("type"),P._scalable=0===a(O.getAttribute("scalable"),1)?!1:!0,P._maintainAspectRatio=0===a(O.getAttribute("maintainAspectRatio"),1)?!1:!0,P._apiFramework=O.getAttribute("apiFramework"),P._url=Primetime.AuditudeHelper.getNodeValue(O),K._mediaFiles.push(P);(J=S._mediaFiles)&&0!==J.length&&(S._apiFramework=J[0]._apiFramework);A._linearAd=S;D||(A._linearAd?0>=A._linearAd._duration?A._asInvalidXml=!0:(D=A._linearAd._mediaFiles,D&&0!==D.length||(A._asInvalidXml=!0)):A._asInvalidXml=
!0)}z=Primetime.AuditudeHelper.getNodesWithValue(r,"NonLinearAds");if(0!==z.length)for(G=0;G<z.length;G++)if(L=E,A=I,D=N,S=Primetime.AuditudeHelper.getNodesWithValue(z[G],"NonLinear"))for(J=0;J<S.length;J++)x=S[J],H=L,y=A,F=D,O=new Primetime.VastNonLinearCreative,O._id=H,O._sequence=y,O._adId=F,d.call(this,x,O),-1!==O._width&&-1!==O._height&&(O._scalable=0===a(x.getAttribute("scalable"),1)?!1:!0,O._maintainAspectRatio=0===a(x.getAttribute("maintainAspectRatio"),1)?!1:!0,O._minSuggestedDuration=x.getAttribute("minSuggestedDuration"),
e.call(this,x,O),1<Primetime.AuditudeHelper.getNodesWithValue(x,"NonLinearClickThrough").length||(O._clickThroughUrl=c.call(this,x,"NonLinearClickThrough"),1<Primetime.AuditudeHelper.getNodesWithValue(x,"AdParameters").length||(O._adParameters=c.call(this,x,"AdParameters"))));r=Primetime.AuditudeHelper.getNodesWithValue(r,"CompanionAds");if(0!==r.length)for(G=0;G<r.length;G++)if(z=w,L=E,A=I,D=N,S=Primetime.AuditudeHelper.getNodesWithValue(r[G],"Companion"),0!==S.length)for(J=0;J<S.length;J++){x=S[J];
H=z;F=L;O=A;K=D;y=new Primetime.VastCompanionCreative;y._id=F;y._sequence=O;y._adId=K;d.call(this,x,y);e.call(this,x,y);F=Primetime.AuditudeHelper.getNodesWithValue(x,"TrackingEvents");if(0!==F.length)for(O=0;O<F.length;O++)f.call(this,F[O],y);1<Primetime.AuditudeHelper.getNodesWithValue(x,"CompanionClickThrough").length||(y._clickThroughUrl=c.call(this,x,"CompanionClickThrough"),1<Primetime.AuditudeHelper.getNodesWithValue(x,"AdParameters").length||(y._adParameters=c.call(this,x,"AdParameters"),
H._companionAds.push(y)))}}b=Primetime.AuditudeHelper.getNodesWithValue(b,"Extensions");if(0!==b.length)for(k=0;k<b.length;k++)if(m=l,p=Primetime.AuditudeHelper.getNodesWithValue(b[k],"Extension"),0!==p.length&&(p=Primetime.AuditudeHelper.getNodesWithAttributeValue(p,"type","Behavior"),null!==p&&0!==p.length))for(p=Primetime.AuditudeHelper.getNodesWithValue(p[0],"Behavior"),m._extensions={},u=0;u<p.length;++u)(q=p[u].getAttribute("type"))&&(t=Primetime.AuditudeHelper.getNodeValue(p[u]))&&(m._extensions[q]=
t);l._linearAd&&0<l._errorUrl.length&&(k=l._linearAd.getTrackingEventByType(Primetime.TrackingEventType.vasterror),k||(k=new Primetime.VastTrackingEvent(Primetime.TrackingEventType.vasterror,[]),l._linearAd.addTrackingEvent(k)),b=new Primetime.Tracking(l._errorUrl,Primetime.TrackingEventType.vasterror),k.addTrackingInstance(b));if(n)h._wrapperAd=l;else{if(l._asInvalidXml)return!1;h._inlineAds.push(l)}return!0},c=function(a,b){var c=null,d=Primetime.AuditudeHelper.getNodesWithValue(a,b);0<d.length&&
(c=Primetime.AuditudeHelper.getNodeValue(d[0]));return c?c:""},d=function(b,c){c._id=b.getAttribute("id");c._width=a(b.getAttribute("width"),0);c._height=a(b.getAttribute("height"),0);c._expandedWidth=a(b.getAttribute("expandedWidth"),0);c._expandedHeight=a(b.getAttribute("expandedHeight"),0);c._apiFramework=b.getAttribute("apiFramework")},e=function(a,b){var c=Primetime.AuditudeHelper.getNodesWithValue(a,"StaticResource");0!==c.length&&(b._creativeType=b._resourceType=Primetime.AD_BANNER_TYPE.STATIC,
b._url=Primetime.AuditudeHelper.getNodeValue(c[0]));c=Primetime.AuditudeHelper.getNodesWithValue(a,"IFrameResource");0!==c.length&&(b._creativeType=b._resourceType=Primetime.AD_BANNER_TYPE.IFRAME,b._url=Primetime.AuditudeHelper.getNodeValue(c[0]));c=Primetime.AuditudeHelper.getNodesWithValue(a,"HTMLResource");0!==c.length&&(b._creativeType=b._resourceType=Primetime.AD_BANNER_TYPE.HTML,b._url=Primetime.AuditudeHelper.getNodeValue(c[0]))},f=function(b,c){var d=Primetime.AuditudeHelper.getNodesWithValue(b,
"Tracking");if(0!==d.length)for(var e=0;e<d.length;e++){var f=d[e],m=c,p=f.getAttribute("event");if(p){var u=Primetime.TrackingEventType[p],q=m.getTrackingEventByType(u);q||(q=new Primetime.VastTrackingEvent(u,[]),m.addTrackingEvent(q));m=f.getAttribute("offset");f=new Primetime.Tracking(Primetime.AuditudeHelper.getNodeValue(f),u,!1,0,!1);u=void 0;"progress"===p&&m&&(-1!==m.indexOf("%")?(u=a(m.substring(0,m.indexOf("%"))),f._offset=u,f._offsetIsPercent=!0):(-1!==m.indexOf(":")?f._offset=Primetime.AuditudeHelper.parseDuration(m):
(u=parseInt(m),f._offset=u),f._offsetIsPercent=!1));q.addTrackingInstance(f)}}};Primetime.VastXMLParser.prototype={constructor:Primetime.VastXMLParser,parse:function(a){a:{var c="";if(0>=this._redirectionCount)this._listener.onError("REDIRECTION LIMIT REACHED!!");else if(a)if(this._rootNode=a.documentElement,null===this._rootNode)this._listener.onError("Root Element NULL.");else if("VAST"!==this._rootNode.nodeName)this._listener.onError("Root Node is NOT VAST.");else if(a=this._rootNode.getAttribute("version"),
"2.0"!==a&&"2.0.0"!==a&&"2.0.1"!==a&&"3.0"!==a)this._listener.onError("Invalid Version.");else if(a=Primetime.AuditudeHelper.getNodesWithValue(this._rootNode,"Ad"),0===a.length)this._listener.onError("No Ad nodes.");else{this._document=new Primetime.VastDocument(this._parentAd);for(c=0;c<a.length;c++){var d={},e=a[c],f=d,m=!1,p=e.getAttribute("id");f._sequence=-1;f._fallbackOnNoAd=!1;f._adParsed=!1;f._vastDocument=null;f._isFromVmapDoc=!1;f._id=p;f._inlineAds=[];f._isFromVmapDoc=this._parentAd._isFromVmapDoc;
p=e.getAttribute("sequence");m=parseInt(p);isNaN(m)&&(m=-1);f._sequence=m;p=Primetime.AuditudeHelper.getNodesWithValue(e,"InLine");for(m=0;m<p.length;m++)b.call(this,p[m],f,{_asInvalidXml:!1,_companionRequired:"none",_impressionUrls:[],_extensions:[],_companionAds:[],_nonLinearAds:[]},!1);e=Primetime.AuditudeHelper.getNodesWithValue(e,"Wrapper");for(m=0;m<e.length;m++){this._wrapperCount++;var u={_followAdditionalWrappers:!0,_fallbackOnNoAd:!1,_allowMultipleAds:""},q=e[m],p=q.getAttribute("followAdditionalWrappers");
u._followAdditionalWrappers="false"===p;p=q.getAttribute("fallbackOnNoAd");u._fallbackOnNoAd="true"===p;p=q.getAttribute("allowMultipleAds");u._allowMultipleAds=p;p=Object.create(u);p._asInvalidXml=!1;p._companionRequired="none";p._impressionUrls=[];p._extensions=[];p._companionAds=[];b.call(this,q,f,p,!0)}m=!0;if(!m){c="Failed while parsing ad.";this._listener.onError(c);break a}this._document.addVastAd(d)}if(0<this._wrapperCount)for(this._ads=this._document.getAds(),a=0;a<this._ads.length;a++)c=
this._ads[a],c._wrapperAd&&(c._wrapperAd._followAdditionalWrappers?(new Primetime.VastXmlNetJob(this,a,c._wrapperAd._source)).execute():this._wrapperCount--);else this._listener.onComplete(this._document)}else this._listener.onError("Invalid Document.")}},onRequestComplete:function(a,b){var c=this;(new Primetime.VastXMLParser({onComplete:function(a){c.onParseComplete(a,b)},onError:function(a){c._listener.onError(a)}},this._ads[b],this._redirectionCount-1)).parse(a)},onParseComplete:function(a,b){var c=
this._ads[b];if(a){if(c){var d=c._vastDocument;d&&(d.reachedMaxWrapper=a.reachedMaxWrapper)}var d=c._wrapperAd,e,f,p;if(e=a.getAds())for(var u=0;u<e.length;u++)if(f=e[u],p=null,f&&(p=f._inlineAds),p)for(var q=0;q<p.length;q++){var t=f=p[q],r=d;if(r){var w=void 0,z=r._impressionUrls;if(z)for(w=0;w<z.length;w++)t._impressionUrls.push(z[w]);if(r._linearAd){if(z=r._linearAd._trackingEvents)for(w=0;w<z.length;w++)t._linearAd.addTrackingEvent(z[w]);w=r._linearAd._click;if(t=t._linearAd._click)if(r=w._trackingUrls)for(w=
0;w<r.length;w++)t._trackingUrls.push(r[w])}}c._inlineAds.push(f)}c._wrapperAd=null}else c&&(c=c._wrapperAd)&&(c._isWrapperEmpty=!0);this._wrapperCount--;if(0===this._wrapperCount){if(this._document&&(c=this._document.getAds()))for(d=0;d<c.length;d++)if(e=c[d],p=e._inlineAds,(!p||0>=p.length)&&e._fallbackOnNoAd&&this._document){if(p=this._document.getNextUnusedAd())this._document.replaceAd(e,p),p._fallbackOnNoAd=e._fallbackOnNoAd;p&&p._wrapperAd&&!p._wrapperAd._followAdditionalWrappers&&(new Primetime.VastXmlNetJob(this,
d,p._wrapperAd._source)).execute()}this._listener.onComplete(this._document)}},onRequestFailed:function(){}};Primetime.VastTrackingEvent=function(a,b){this._type=a;this._trackingInstances=b;this.addTrackingInstance=function(a){this._trackingInstances.push(a)};this.track=function(a){for(var b=0;b<this._trackingInstances.length;++b)this._trackingInstances[b].track(a)};return this}})();(function(){Primetime.VMAPXMLParser=function(a,b,c,d){this._adBreakCount=0;this._listener=a;this._adBreaks=[];this._callbackCompleted=!1;this._convertToPsdkAds=b;"undefined"===typeof b&&(this._convertToPsdkAds=!1);this._validMimeTypes=c;"undefined"===typeof c&&(this._validMimeTypes=[]);this._crsFormat=d;"undefined"===typeof d&&(this._crsFormat="m3u8");return this};Primetime.VMAPXMLParser.prototype={constructor:Primetime.VMAPXMLParser,parse:function(b){b=b.documentElement;if("vmap:VMAP"!==n(b))this._listener.onError("Invalid Response. RootNode is not VMAP.");
else if("1.0"!==b.getAttribute("version"))this._listener.onError("Invalid Version. Only 1.0 is supported.");else{var c,d=Primetime.AuditudeHelper.getNodesWithValue(b,"vmap:AdBreak");this._adBreakCount=d.length;for(c=0;c<d.length;++c){var k=d[c],h=c,m=void 0;this._adBreaks[h]={};if(m=g(k.getAttribute("timeOffset")))if(this._adBreaks[h]._timeOffset=m,(m=k.getAttribute("breakType"))&&""!==m){this._adBreaks[h]._breakType=m;m=k.getAttribute("breakId");""!==m&&(this._adBreaks[h]._breakId=m);m=void 0;var z=
Primetime.AuditudeHelper.getNodesWithValue(k,"vmap:TrackingEvents");if(1<z.length)m=null;else if(1===z.length){for(var m=void 0,z=Primetime.AuditudeHelper.getNodesWithValue(z[0],"vmap:Tracking"),G=[],m=0;m<z.length;++m){var E=G,I=z[m],N=Primetime.TrackingEventType[I.getAttribute("event")],I=Primetime.AuditudeHelper.getNodeValue(I),I=new Primetime.Tracking(I,N);e(E,N).addTrackingInstance(I)}m=G}else m=null;m&&(this._adBreaks[h]._trackingEvents=m);k.getAttribute("repeatAfter");f.call(this,k);k=Primetime.AuditudeHelper.getNodesWithValue(k,
"vmap:AdSource");1<k.length||(1===k.length?a.call(this,k[0],h):0===k.length&&this._adBreakCount--)}}f.call(this,b);l.call(this)}}};var a=function(a,e){a.getAttribute("id");a.getAttribute("allowMultipleAds");a.getAttribute("followRedirects");var f=this,g=function(a){f._adBreakCount--;f._adBreaks[e]._ads=a;l.call(f)},k={onComplete:function(a){g(a.getAds())},onError:function(){g([])}},m=h(a);if(1!==m.length)return null;switch(n(m[0])){case "vmap:VASTAdData":return b.call(this,a,k);case "vmap:CustomAdData":return c.call(this,
a,k);case "vmap:AdTagURI":return d.call(this,a,k);default:return null}},b=function(a,b){var c=Primetime.AuditudeHelper.getNodesWithValue(a,"vmap:VASTAdData");if(1<c.length||1>c.length)return null;var d=new Primetime.VastXMLParser(b),c={documentElement:Primetime.AuditudeHelper.getNodesWithValue(c[0],"VAST")[0]};d.parse(c);return!0},c=function(a,b){var c=Primetime.AuditudeHelper.getNodesWithValue(a,"vmap:CustomAdData");if(1<c.length||1>c.length)return null;switch(c[0].getAttribute("templateType")){case "vast1":return null;
case "vast":case "vast2":return c=Primetime.AuditudeHelper.getNodeValue(c[0]),c=(new DOMParser).parseFromString(c,"text/xml"),(new Primetime.VastXMLParser(b)).parse(c),!0;default:return null}},d=function(a,b){var c=Primetime.AuditudeHelper.getNodesWithValue(a,"vmap:AdTagURI");if(1<c.length||1>c.length)return null;var d;switch(c[0].getAttribute("templateType")){case "vast1":return null;case "vast":case "vast2":case "vast3":var e=this,c=Primetime.AuditudeHelper.getNodeValue(c[0]);(new Primetime.DataLoaderNetJob({onRequestComplete:function(a){d=
new Primetime.VastXMLParser(b);d.parse(a)},onRequestFailed:function(){e._listener.onError("Could not fetch data from URI.")}},c,null)).execute();return!0;default:return null}},e=function(a,b,c){"undefined"===typeof c&&(c=!0);for(var d,e=0;e<a.length;e++)if(d=a[e],d._type===b)return d;if(c)return d={_type:b,_trackingInstances:[],addTrackingInstance:function(a){this._trackingInstances.push(a)},track:function(a){for(var b=0;b<this._trackingInstances.length;++b)this._trackingInstances[b].track(a)}},a.push(d),
d},f=function(a){var b=Primetime.AuditudeHelper.getNodesWithValue(a,"vmap:Extensions");for(a=0;a<b.length;++a);},g=function(a){if(a&&""!==a){if(-1<a.indexOf(":")){var b={};a=a.split(":");b.h=parseInt(a[0]);b.m=parseInt(a[1]);b.s=a[2];0<b.s.indexOf(".")?(a=b.s.split("."),b.s=parseInt(a[0]),b.ms=parseInt(a[1])):b.s=parseInt(b.s);return b}if("start"===a||"end"===a)return a;if("%"===a[a.length-1])return b=parseInt(a.substring(0,a.length-1)),!isNaN(b)&&0<=b&&100>=b?b:null;if("#"===a[0])return b=parseInt(a.substring(1)),
!isNaN(b)&&0<b?b:null}return null},h=function(a){var b,c=[];for(b=0;b<a.childNodes.length;++b)a.childNodes[b].tagName&&c.push(a.childNodes[b]);return c},l=function(){if(0===this._adBreakCount&&!this._callbackCompleted){var a=[];if(this._convertToPsdkAds)for(var b=0;b<this._adBreaks.length;++b){var c;c=this._adBreaks[b];var d=this._validMimeTypes,e=this._crsFormat,f=void 0,g=[],l=0;if(c._ads)for(f=0;f<c._ads.length;++f)for(var n=c._ads[f],h=0;h<n._inlineAds.length;++h){var m;m=n._inlineAds[h];var L=
c,x=void 0;c:if(x=m._linearAd){var A=null,H=null,y=null,F="VPAID"===x._apiFramework;if(x._mediaFiles&&0<x._mediaFiles.length){var D=x._mediaFiles;!1===F&&(D=Primetime.AuditudeHelper.prioritizeMediaFiles(x._mediaFiles,d,e,!1));if(!D){x=null;break c}0<D.length&&(A=new AdobePSDK.MediaResource(D[0]._url,Primetime.AuditudeHelper.getMediaResourceTypeFromString(D[0]._type)),y={_width:D[0]._width,_height:D[0]._height,_format:D[0]._type})}x._click&&(H=new AdobePSDK.AdClick(null,null,x._click._url));x=new AdobePSDK.AdAsset(x._id,
1E3*x._duration,A,H,y)}else x=null;A=[];if(x){for(H=0;H<m._companionAds.length;++H)y=m._companionAds[H],y._url&&null!==y._resourceType&&void 0!==y._resourceType?(y._adParameters&&(y._params=Primetime.AuditudeHelper.toStringDictionary(y._adParameters,"&","=")),y=Primetime.AuditudeHelper.toAdBannerAsset(y)):y=null,y&&A.push(y);H="VPAID"==m._linearAd._apiFramework;y=1E3*m._linearAd._duration;H&&(y=0);m=new AdobePSDK.Ad(m._networkAdId,AdobePSDK.AdType.LINEAR,y,!1,x,A,new Primetime.VMAPTracker(m,L),AdobePSDK.AdInsertionType.CLIENT_INSERTED,
null!==m._linearAd._click&&void 0!==m._linearAd._click,H)}else m=null;m&&(g.push(m),l+=m.duration)}if(0<g.length){d=AdobePSDK.PlacementType.PRE_ROLL;e=void 0;f=c._timeOffset;f="start"===f||0===f||0===k(f)?"preRoll":"end"===f||100===f?"postRoll":0<k(f)?"midRoll":void 0;switch(f){case "preRoll":e=0;d=AdobePSDK.PlacementType.PRE_ROLL;break;case "postRoll":e=Primetime.AuditudePlugin.POST_ROLL_DEFAULT_TIME;d=AdobePSDK.PlacementType.POST_ROLL;break;case "midRoll":e=k(c._timeOffset),d=AdobePSDK.PlacementType.MID_ROLL}c=
new AdobePSDK.AdBreakPlacement(new AdobePSDK.AdBreak(g),new AdobePSDK.Placement(d,e,l))}else c=null;c&&a.push(c)}else a=this._adBreaks;if(0===a.length)this._listener.onError("No Ad Breaks");else this._callbackCompleted=!0,this._listener.onComplete(a)}},n=function(a){return(a=a.tagName)?a:null},k=function(a){if("start"===a||0===a)return 0;if("end"===a||100===a)return-1;if("undefined"!==typeof a.h&&"undefined"!==typeof a.m&&"undefined"!==typeof a.s){var b=1E3*(3600*a.h+60*a.m+a.s);a.ms&&(b+=a.ms);return b}},
m=function(a,b){if(a){var c=a.getTrackingEventByType(b);c&&c.track(null)}};Primetime.VMAPTracker=function(a,b){this._thirdQuartileTracked=this._midPointTracked=this._firstQuartileTracked=!1;this._inlineAd=a;this._adBreak=b;this.addTrackingEvent=function(a){var b=new Primetime.VastTrackingEvent(a._type,[]);b.addTrackingInstance(a);this._inlineAd._linearAd.addTrackingEvent(b)};this.onAdStartCallbackFunc=function(){var a=this._inlineAd._linearAd;m(a,Primetime.TrackingEventType.impression);m(a,Primetime.TrackingEventType.creativeView);
m(a,Primetime.TrackingEventType.start);m(a,Primetime.TrackingEventType.creativeProgress)};this.onAdProgressCallbackFunc=function(a,b){var c=this._inlineAd._linearAd;25<=b&&!this._firstQuartileTracked&&(this._firstQuartileTracked=!0,m(c,Primetime.TrackingEventType.firstQuartile),m(c,Primetime.TrackingEventType.creativeProgress));50<=b&&!this._midPointTracked&&(this._midPointTracked=!0,m(c,Primetime.TrackingEventType.midpoint),m(c,Primetime.TrackingEventType.creativeProgress));75<=b&&!this._thirdQuartileTracked&&
(this._thirdQuartileTracked=!0,m(c,Primetime.TrackingEventType.thirdQuartile),m(c,Primetime.TrackingEventType.creativeProgress))};this.onAdCompleteCallbackFunc=function(){var a=this._inlineAd._linearAd;m(a,Primetime.TrackingEventType.complete);m(a,Primetime.TrackingEventType.creativeProgress)};this.onAdClickCallbackFunc=function(){m(this._inlineAd._linearAd,Primetime.TrackingEventType.click)};this.onAdBreakStartCallbackFunc=function(){var a,b=this._adBreak._trackingEvents;if(b)for(a=0;a<b.length;++a)b[a]._type===
Primetime.TrackingEventType.breakStart&&b[a].track(null);b=this._inlineAd._impressionUrls;for(a=0;a<b.length;++a)b[a].track(null)};this.onAdBreakCompleteCallbackFunc=function(){var a,b=this._adBreak._trackingEvents;if(b)for(a=0;a<b.length;++a)b[a]._type===Primetime.TrackingEventType.breakEnd&&b[a].track(null)};return this}})();(function(){Primetime.AdSignalingModeOpportunityGenerator=function(){this._initialOpportunity=this._adSignalingMode=this._item=this._client=null;var a=this;Object.defineProperty(this,"client",{get:function(){return a.getClient()}});Object.defineProperty(this,"item",{get:function(){return a.getItem()}});Object.defineProperty(this,"adSignalingMode",{get:function(){return a.getAdSignalingMode()}});return this};Primetime.AdSignalingModeOpportunityGenerator.INITIAL_OPPORTUNITY_ID="initial_opportunity";
Primetime.AdSignalingModeOpportunityGenerator.prototype={constructor:Primetime.AdSignalingModeOpportunityGenerator,getClient:function(){return this._client},getItem:function(){return this._item},getAdSignalingMode:function(){return this._adSignalingMode},configureCallbackFunc:function(a,b,c,d,e){if(a&&b&&e){this._client=b;this._item=a;if(this._item.isLive){var f;if(b=this._item.config)if(b=b.advertisingMetadata)f=b.livePreroll;if(void 0===f||null===f)f=!0;if(!f){console.log("Live pre roll is disabled.");
return}}AdobePSDK.AdSignalingMode.isValidMode(c)?this._adSignalingMode=c:this._adSignalingMode=AdobePSDK.AdSignalingMode.DEFAULT;this._adSignalingMode==AdobePSDK.AdSignalingMode.DEFAULT&&(this._adSignalingMode=a.isLive?AdobePSDK.AdSignalingMode.MANIFEST_CUES:AdobePSDK.AdSignalingMode.SERVER_MAP);a=new AdobePSDK.Placement(this.mode==AdobePSDK.AdSignalingMode.MANIFEST_CUES?AdobePSDK.PlacementType.PRE_ROLL:AdobePSDK.PlacementType.SERVER_MAP,this.mode==AdobePSDK.AdSignalingMode.MANIFEST_CUES?d:AdobePSDK.Placement.UNKNOWN_TIME,
AdobePSDK.Placement.UNKNOWN_DURATION,AdobePSDK.PlacementMode.DEFAULT);this._initialOpportunity=new AdobePSDK.Opportunity(Primetime.AdSignalingModeOpportunityGenerator.INITIAL_OPPORTUNITY_ID,a,this._item.resource.metadata,null);this._client.resolve(this._initialOpportunity)}else console.log("AdSignalingModeOpportunityGenerator#configureCallbackFunc: Invalid arguments")},updateCallbackFunc:function(a,b){},cleanupCallbackFunc:function(){}}})();(function(){Primetime.TimedMetadataOpportunityGenerator=function(){return this};var a=function(a,c){return a.time-c.time};Primetime.TimedMetadataOpportunityGenerator.prototype={constructor:Primetime.TimedMetadataOpportunityGenerator,_item:null,_client:null,_adSignalingMode:null,_advertisingMetadata:null,_playbackTime:-1,_processingTime:-1,_skippedTimedMetadatas:[],_processedTimedMetadatas:[],configureCallbackFunc:function(a,c,d,e,f){this._item=a;this._client=c;this._adSignalingMode=d;this._adSignalingMode!=
AdobePSDK.AdSignalingMode.MANIFEST_CUES?console.log("#configure Unsupported advertisement signaling mode."):(a=this._item.config)?(this._advertisingMetadata=a.advertisingMetadata)?(this._playbackTime=this._processingTime=e,this.processMetadata(this._item.timedMetadata,f)):console.log("#configure Unable to retrieve the advertising metadata from item config"):console.log("failed to get item config")},processMetadata:function(b,c){console.log("#processMetadata processing timedMetadatas.");for(var d=
0;d<b.length;d++){var e=b[d];this.isAlreadyProcessed(e)||(this.isSkippable(e)?(console.log("processMetadata Timed metadata skipped. "),this._skippedTimedMetadatas.push(e)):(this._processedTimedMetadatas.push(e),this._processingTime<e.time&&(this._processingTime=e.time),this.isPlacementOpportunity(e)&&(e=this.createPlacementOpportunity(e,this._advertisingMetadata))&&this._client.resolve(e)))}this._skippedTimedMetadatas.sort(a);this._processedTimedMetadatas.sort(a);console.log("#processMetadata Currently processed metadata : "+
this._processedTimedMetadatas.length);console.log("#processMetadata Currently skipped metadata : ",this._skippedTimedMetadatas.length)},isAlreadyProcessed:function(a){for(var c=this._processedTimedMetadatas.length,d=0;d<c;d++)if(this._processedTimedMetadatas[d].time==a.time)return!0;return!1},isSkippable:function(a){return a.time<this._processingTime},isPlacementOpportunity:function(a){},createPlacementOpportunity:function(a,c){},updateCallbackFunc:function(b,c){if(this._adSignalingMode!=ExtCueOutOpportunityGenerator.MANIFEST_CUE_MODE)return console.log("#update Unsupported advertisement signaling mode.\n"),
!0;console.log("#update Playback range : "+c.begin+c.end);this.removeObsoleteMetadata(this._skippedTimedMetadatas,c);this.removeObsoleteMetadata(this._processedTimedMetadatas,c);var d=[];b<this._playbackTime&&(d.push.apply(d,this._skippedTimedMetadatas),this._skippedTimedMetadatas=[],this._processingTime=b);var e=this.retrieveNewTimedMetadata(this._item);e&&e.length&&d.push.apply(d,e);if(d.length)return d.sort(a),console.log("#processMetadata Timed metadata to be processed : ",d.length),this._playbackTime=
b,this.processMetadata(d,c)},retrieveNewTimedMetadata:function(a){var c=[];a=a.timedMetadata;var d=a.length;if(d)for(--d;0<=d;d--){var e=a[d];if(e.time>=this._processingTime&&!this.isAlreadyProcessed(e))c.push(e);else break}return c},removeObsoleteMetadata:function(a,c){for(;0<a.length&&!(a[0].time>=c.begin);)a.shift()},cleanupCallbackFunc:function(){this._item=null;this._processingTime=this._playbackTime=-1;this._skippedTimedMetadatas=[];this._processedTimedMetadatas=[]}}})();Primetime.dependencies.protection.KeySystem={};Primetime.dependencies.protection.KeySystem.eventList=Primetime.helper.extend(MediaPlayer.dependencies.protection.KeySystem.eventList,{ENAME_BOOTSTRAP_INITDATA_AVAILABLE:"bootstrapInitDataAvailable"});Primetime.dependencies.protection.KeySystem_Access=function(){var a=Primetime.dependencies.protection.KeySystem_Access.prototype.baseConstructor.call(this),b=function(a,b,c){a[c+3]=b&255;a[c+2]=(b&65280)>>8;a[c+1]=(b&16711680)>>16;a[c]=(b&4278190080)>>24},c=function(a){var c=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]),d=new Uint8Array(0),h=36+a.length,l=0;0<d.length&&(h+=d.length,l=1);var n=new Uint8Array(h),k=0;b(n,h,k);k+=4;n[k]=97;n[k+1]=109;n[k+2]=101;n[k+
3]=116;k+=4;b(n,l,k);k+=4;b(n,1,k);k+=4;n.set(c,k);k+=c.length;0<d.length&&(n.set(d,k),k+=d.length);b(n,a.length,k);n.set(a,k+4);d=32+n.length;a=0;c=new Uint8Array(d);b(c,d,a);c[4]=112;c[5]=115;c[6]=115;c[7]=104;a=a+4+4;b(c,0,a);a+=4;d=new Uint8Array([242,57,231,105,239,163,72,80,156,22,169,3,198,147,46,251]);c.set(d,a);a+=d.length;b(c,n.length,a);a+=4;c.set(n,a);this.notify(Primetime.dependencies.protection.KeySystem.eventList.ENAME_BOOTSTRAP_INITDATA_AVAILABLE,{initData:c.buffer})},d=function(a){a=
"Failed to read bootstrap metadata, XHR status is "+a.statusText+" "+a.status+". ReadyState is "+a.readyState;this.log(a);this.notify(Primetime.dependencies.protection.KeySystem.eventList.ENAME_BOOTSTRAP_INITDATA_AVAILABLE,null,a)};return Primetime.helper.extend(a,{log:void 0,embeddedMetadataURL:"DRM-ProductionPKI-EmbeddedLicense.metadata",getBootstrapInitData:function(){var a=new XMLHttpRequest,b=this,g=Primetime.defaults.getDRMMetadataPath()+this.embeddedMetadataURL;a.open("GET",g,!0);a.responseType=
"arraybuffer";a.onload=function(){200==this.status?c.call(b,new Uint8Array(this.response)):d.call(b,a)};a.onabort=function(){d.call(b,a)};a.onerror=function(){d.call(b,a)};a.send()}})};Primetime.dependencies.protection.KeySystem_Access.prototype=Primetime.helper.extend(MediaPlayer.dependencies.protection.KeySystem_Access.prototype,{constructor:Primetime.dependencies.protection.KeySystem_Access,baseConstructor:MediaPlayer.dependencies.protection.KeySystem_Access.prototype.constructor});Primetime.dependencies.protection.KeySystem_FairPlay=function(){var a,b=function(b){if("undefined"===typeof b||null===b||!a)return null;var c;c=new Uint16Array(b.buffer);c=String.fromCharCode.apply(null,c);var d=document.createElement("a");d.href=c;var h=c=d.hostname,d=a;if("string"==typeof h){for(var l=new ArrayBuffer(2*h.length),l=new Uint16Array(l),n=0,k=h.length;n<k;n++)l[n]=h.charCodeAt(n);h=l}l=0;n=new ArrayBuffer(b.byteLength+4+h.byteLength+4+d.byteLength);k=new DataView(n);(new Uint8Array(n,
l,b.byteLength)).set(b);l+=b.byteLength;k.setUint32(l,h.byteLength,!0);var l=l+4,m=new Uint16Array(n,l,h.length);m.set(h);l+=m.byteLength;k.setUint32(l,d.byteLength,!0);(new Uint8Array(n,l+4,d.byteLength)).set(d);d=new Uint8Array(n,0,n.byteLength);return new Primetime.dependencies.protection.vo.InitDataInfo(b,d,this.systemString,c)},c=function(c,d){a=c;var g=b.call(this,d),g=new MediaPlayer.vo.protection.InitRequestComplete(g,d,this);this.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_INIT_REQUEST_COMPLETE,
g)},d=function(a,b){var c="DRM: Failed to retrieve the server certificate, XHR status is "+a.statusText+" "+a.status+". ReadyState is "+a.readyState;this.log(c);var d=new MediaPlayer.vo.protection.InitRequestComplete(null,b,this);this.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_INIT_REQUEST_COMPLETE,d,Error(c))};return{log:void 0,schemeIdURI:"urn:uuid:com.apple.fps.1_0",systemString:"com.apple.fps.1_0",uuid:"com.apple.fps.1_0",certificateURI:"fps_certificate.der",notify:void 0,
subscribe:void 0,unsubscribe:void 0,system:void 0,getInitData:function(e,f){if(a)return b.call(this,e);var g=Primetime.defaults.getDRMMetadataPath(),h=g+this.certificateURI,l=new XMLHttpRequest,n=this;"undefined"!==typeof f&&null!==f&&f.certificateURL&&(h=-1===f.certificateURL.indexOf("http:")?g+f.certificateURL:f.certificateURL);l.open("GET",h,!0);l.responseType="arraybuffer";l.setRequestHeader("Pragma","Cache-Control: no-cache");l.setRequestHeader("Cache-Control","max-age=0");l.onload=function(){200==
this.status?c.call(n,new Uint8Array(this.response),e):d.call(n,l,e)};l.onabort=function(){d.call(n,l,e)};l.onerror=function(){d.call(n,l,e)};l.send();return new Primetime.dependencies.protection.vo.InitDataInfo(e,"pending",this.systemString,null)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(a){return new Uint8Array(a)},getLicenseServerURLFromInitData:function(){return null},isSessionTypeSupported:function(a){return"undefined"!==typeof a&&null!==a&&"temporary"===
a?!0:!1}}};Primetime.dependencies.protection.KeySystem_FairPlay.prototype={constructor:Primetime.dependencies.protection.KeySystem_FairPlay};Primetime.dependencies.protection.servers.Access=function(){var a=Primetime.dependencies.protection.servers.Access.prototype.baseConstructor.call(this);return Primetime.helper.extend(a,{})};Primetime.dependencies.protection.servers.Access.prototype=Primetime.helper.extend(MediaPlayer.dependencies.protection.servers.Access.prototype,{constructor:Primetime.dependencies.protection.servers.Access,baseConstructor:MediaPlayer.dependencies.protection.servers.Access.prototype.constructor});Primetime.dependencies.protection.servers.FairPlay=function(){return{getServerURLFromMessage:function(a,b,c,d){-1<a.indexOf("?")&&(b=new Uint16Array(d.initDataInfo.rawInitData.buffer),b=String.fromCharCode.apply(null,b),c=b.indexOf("?"),a+=b.substring(c+1));return a},getHTTPMethod:function(){return"POST"},getResponseType:function(a,b,c){var d;"undefined"!==typeof c&&null!==c&&(d=c.licenseResponseType);d||(d="arraybuffer");return d},getLicenseMessage:function(a,b,c,d){if("undefined"!==typeof d&&null!==
d&&"arraybuffer"!==d&&"text"===d){a=a.trim();a=JSON.parse(a).ckc;a=window.atob(a);b=a.length;c=new Uint8Array(new ArrayBuffer(b));for(d=0;d<b;d++)c[d]=a.charCodeAt(d);return c}return new Uint8Array(a)},getErrorResponse:function(a){return String.fromCharCode.apply(null,new Uint8Array(a))},isMessageTypeSupported:function(a){return"license-request"===a?!0:!1}}};Primetime.dependencies.protection.servers.FairPlay.prototype={constructor:Primetime.dependencies.protection.servers.FairPlay};(function(){var a=[],b={},c,d=[],e=[],f=function(a){return c&&"undefined"!==typeof a&&null!==a&&this.protectionExt.initDataEquals(a,c)?!0:!1},g=function(b,c){this.bootstrapMode=!1;"undefined"!==typeof b&&null!==b&&this.protectionModel.resetKeySystem();this.keySystem=void 0;a=[];e=[];c.error?this.eventBus.dispatchEvent({type:Primetime.dependencies.ProtectionController.events.ENAME_DRM_INITIALIZATION_COMPLETE,data:null,error:c.error}):this.eventBus.dispatchEvent({type:Primetime.dependencies.ProtectionController.events.ENAME_DRM_INITIALIZATION_COMPLETE,
data:{}});if(0<d.length)for(var f=0;f<d.length;f++)d[f].func.apply(this,d[f].args);d=[]},h=function(a){var b=!!document.createElement("video").canPlayType('video/mp4; codecs="avc1.42c01f, mp4a.40.2"');this.log("DRM: canPlay "+b,"INFO");this.isProtected=!0;this.needKeyParentHandler(a)},l=function(){var b,d;for(b=0;b<e.length;b++){for(d=0;d<e[b].length;d++)if(this.keySystem===e[b][d].ks){if(this.bootstrapMode)c=e[b][d].initData,this.createKeySession(c);else{var f=e[b][d].initData,g=e[b][d].initDataInfo;
if("undefined"!==typeof f&&null!==f&&0!==f.length){var l=void 0;a:{for(var l=a,k=0;k<l.length;k++)if(this.protectionExt.initDataEquals(f,l[k])){l=!0;break a}l=!1}if(!l){if("undefined"===typeof g||null===g)g=new Primetime.dependencies.protection.vo.InitDataInfo(f,f);if(l=this.system.getObject("mediaPlayer"))l.onDRMMetadataAvailable(this.keySystem,[g]),a.push(f)}}}break}d<e[b].length&&e[b].splice(d)}},n=function(a,b,c,d){a.error?(this.log("DRM: onKeySystemSelected error "+a.error,"INFO"),this.keySystem=
void 0,c||this.bootstrapMode?this.bootstrapMode&&this.eventBus.dispatchEvent({type:Primetime.dependencies.ProtectionController.events.ENAME_DRM_INITIALIZATION_COMPLETE,data:null,error:a.error}):this.eventBus.dispatchEvent({type:MediaPlayer.dependencies.ProtectionController.events.KEY_SYSTEM_SELECTED,error:"DRM: Error selecting key system! -- "+a.error})):(this.keySystem=this.protectionModel.keySystem,this.eventBus.dispatchEvent({type:MediaPlayer.dependencies.ProtectionController.events.KEY_SYSTEM_SELECTED,
data:d}),l.call(this))},k=function(a){f.call(this,a.data.sessionToken.initData)?g.call(this,null,a):(b[a.data.sessionToken.getSessionID()]=void 0,this.eventBus.dispatchEvent({type:Primetime.dependencies.ProtectionController.events.ENAME_ACQUIRE_LICENSE_COMPLETE,data:{initData:a.data.sessionToken.initData},error:a.data.error}),this.keyErrorParentHandler(a))},m=function(a){this.log("DRM: key session created","INFO");a.error&&(this.log("DRM: key session created error "+a.error,"INFO"),f.call(this,a.data.initData)?
g.call(this,a.data,a):this.eventBus.dispatchEvent({type:Primetime.dependencies.ProtectionController.events.ENAME_ACQUIRE_LICENSE_COMPLETE,data:{initData:a.data.initData},error:a.error}));this.log("DRM: onKeySessionCreated parent handler","INFO");this.keySessionCreatedParentHandler(a)},p=function(a){if(f.call(this,a.initData))g.call(this,a,{});else{this.log("DRM: notifyAcquireLicenseComplete","INFO");var c=b[a.getSessionID()];b[a.getSessionID()]=void 0;this.eventBus.dispatchEvent({type:Primetime.dependencies.ProtectionController.events.ENAME_ACQUIRE_LICENSE_COMPLETE,
data:{initData:a.initData,message:c,sessionToken:a}})}},u=function(a){Primetime.BrowserExtensions.isFirefox()||p.call(this,a.data);this.keyAddedParentHandler(a)},q=function(a){a.error?this.eventBus.dispatchEvent({type:Primetime.dependencies.ProtectionController.events.ENAME_ACQUIRE_LICENSE_COMPLETE,data:{initData:a.data.sessionToken.initData},error:a.error}):a.data.messageType&&"license-request"!==a.data.messageType||(b[a.data.sessionToken.getSessionID()]=a.data.message)},t=function(a){if(Primetime.BrowserExtensions.isFirefox()){this.log("DRM: onKeyStatusesChanged",
"INFO");for(var b=a.data.getKeyStatuses().entries(),c=b.next();c;){if("usable"===c.value[1]){this.log("DRM: onKeyStatusesChanged notify","INFO");p.call(this,a.data);break}c=b.next()}}this.keyStatusesChangedParentHandler(a)},r=function(a,b,c){a.error?(this.log("DRM: onKeySystemAccessComplete error "+a.error,"INFO"),this.keySystem&&(this.reset(),this.protectionModel.resetKeySystem(),this.keySystem=void 0),this.keySystem=void 0,this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,
b),c||this.bootstrapMode?this.bootstrapMode&&this.eventBus.dispatchEvent({type:Primetime.dependencies.ProtectionController.events.ENAME_DRM_INITIALIZATION_COMPLETE,data:null,error:a.error}):this.eventBus.dispatchEvent({type:MediaPlayer.dependencies.ProtectionController.events.KEY_SYSTEM_SELECTED,error:"DRM: KeySystem Access Denied! -- "+a.error})):(this.log("KeySystem Access Granted","INFO"),this.keySystem?(this.eventBus.dispatchEvent({type:MediaPlayer.dependencies.ProtectionController.events.KEY_SYSTEM_SELECTED,
data:a.data}),l.call(this)):(a=a.data,this.log("KeySystem Access Granted ("+a.keySystem.systemString+")!  Selecting key system...","INFO"),this.protectionModel.selectKeySystem(a)))},w=function(a,b,c,d){var f=this,g=[],l=[];if("undefined"===typeof c||null===c)c=f.getVideoInfo();c&&l.push(new MediaPlayer.vo.protection.MediaCapability(c.codec));if("undefined"===typeof d||null===d)d=f.getAudioInfo();d&&g.push(new MediaPlayer.vo.protection.MediaCapability(d.codec));c=this.sessionType;var k=[],h;if(this.keySystem){for(h=
0;h<a.length;h++)if(this.keySystem===a[h].ks){c=this.getSessionType(this.keySystem);d=new MediaPlayer.vo.protection.KeySystemConfiguration(g,l,"optional","temporary"===c?"optional":"required",[c]);f.log("DRM: sessionType "+c,"INFO");k.push({ks:a[h].ks,configs:[d]});e.push([a[h]]);var m={};m[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE]=function(a){r.call(f,a,m,b)};this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,
m,void 0,!0);this.protectionModel.requestKeySystemAccess(k);break}0===k.length&&(this.reset(),this.protectionModel.resetKeySystem(),this.keySystem=void 0)}if(void 0===this.keySystem){this.keySystem=null;e.push(a);for(h=0;h<a.length;h++)c=this.getSessionType(a[h].ks),d=new MediaPlayer.vo.protection.KeySystemConfiguration(g,l,"optional","temporary"===c?"optional":"required",[c]),this.log("DRM: sessionType "+c,"INFO"),k.push({ks:a[h].ks,configs:[d]});var p={};p[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE]=
function(a){r.call(f,a,p,b)};p[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED]=function(a){n.call(f,a,p,b)};this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,p,void 0,!0);this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,p,void 0,!0);this.protectionModel.requestKeySystemAccess(k)}else e.push(a)};Primetime.dependencies.ProtectionController=function(){Primetime.dependencies.ProtectionController.prototype.baseConstructor.call(this);
this.keyStatusesChangedParentHandler=this.keySessionCreatedParentHandler=this.keyErrorParentHandler=this.keyAddedParentHandler=this.needKeyParentHandler=null;this.isProtected=this.bootstrapMode=!1;this.licenseRequestComplete=q.bind(this);this.setup=function(){Primetime.dependencies.ProtectionController.prototype.setup.call(this);this.needKeyParentHandler=this[MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY];this[MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY]=h.bind(this);
this.keyAddedParentHandler=this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ADDED];this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ADDED]=u.bind(this);this.keyErrorParentHandler=this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR];this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR]=k.bind(this);this.keySessionCreatedParentHandler=this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED];this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED]=
m.bind(this);this.keyStatusesChangedParentHandler=this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED];this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED]=t.bind(this)};this.initListeners=function(){this.addEventListener(MediaPlayer.dependencies.ProtectionController.events.LICENSE_REQUEST_COMPLETE,this.licenseRequestComplete);Primetime.dependencies.ProtectionController.prototype.initListeners.call(this)};this.selectKeySystem=function(a,b){this.isProtected=
!0;this.bootstrapMode?(this.log("DRM: In Boostrap mode. Process Supported KeySystems for Content Init Data After boostrap","INFO"),d.push({func:w,args:arguments})):w.call(this,a,b)};this.acquireLicense=function(a,b,c){if("undefined"!==typeof a&&null!==a&&"undefined"!==typeof b&&null!==b&&(this.log("DRM: acquireLicense","INFO"),this.keySystem&&b===this.keySystem.systemString))for(b=0;b<a.length;b++)this.createKeySession(a[b].initData,a[b],c)};this.bootstrapBegin=function(){this.bootstrapMode=!0};this.bootstrapEnd=
function(a,b){g.call(this,a,b)};this.getBootstrapMode=function(){return this.bootstrapMode};this.bootstrapKeySystem=function(a,b,c){this.keySystem?this.eventBus.dispatchEvent({type:Primetime.dependencies.ProtectionController.events.ENAME_DRM_INITIALIZATION_COMPLETE,data:{}}):0<d.length?g.call(this,null,{error:"It's too late to initialize DRM!"}):"undefined"===typeof a||null===a||0>=a.length?g.call(this,null,{error:"No supported KeySystems for bootstrap!"}):w.call(this,a,!1,b,c)};this.returnLicense=
function(a){this.removeKeySession(a)};this.isContentProtected=function(){return this.isProtected};this.licenseMessageCallback=function(a,b){if("undefined"!==typeof b&&null!==b&&b.initDataInfo&&b.onLicenseMessageCallback){var c=new AdobePSDK.DRMLicenseRequest(a,b.initDataInfo.keySystemString,b.initDataInfo.rawInitData,b.initDataInfo.initData,b.initDataInfo.assetId);return b.onLicenseMessageCallback(c)}return a};this.reset=function(){var c=this,e={};e[MediaPlayer.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE]=
function(){c.protectionModel&&c.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE,e);c.keySystem=void 0;c.bootstrapMode=!1;c.isProtected=!1;a=[];b={};d=[];c.eventBus.dispatchEvent({type:Primetime.dependencies.ProtectionController.events.ENAME_RESET_COMPLETE,data:{}})};if(this.protectionModel)this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE,e,void 0,!0),this.protectionModel.resetKeySystem();else e[MediaPlayer.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE]()}};
Primetime.dependencies.ProtectionController.prototype=new MediaPlayer.dependencies.ProtectionController;Primetime.dependencies.ProtectionController.prototype.baseConstructor=Primetime.dependencies.ProtectionController.prototype.constructor;Primetime.dependencies.ProtectionController.prototype.constructor=Primetime.dependencies.ProtectionController;Primetime.dependencies.ProtectionController.events=Primetime.helper.extend(MediaPlayer.dependencies.ProtectionController.events,{ENAME_ACQUIRE_LICENSE_COMPLETE:"acquireLicenseComplete",
ENAME_DRM_INITIALIZATION_COMPLETE:"drmInitializationComplete",ENAME_RESET_COMPLETE:"protectionResetComplete"})})();(function(){Primetime.dependencies.ProtectionExtensions=function(){Primetime.dependencies.ProtectionExtensions.prototype.baseConstructor.call(this)};Primetime.dependencies.ProtectionExtensions.prototype=Primetime.helper.extend(MediaPlayer.dependencies.ProtectionExtensions.prototype,{baseConstructor:MediaPlayer.dependencies.ProtectionExtensions.prototype.constructor,constructor:Primetime.dependencies.ProtectionExtensions,setup:function(){MediaPlayer.dependencies.ProtectionExtensions.prototype.setup.call(this)},
getSupportedKeySystem:function(a,b){if("undefined"!==typeof a&&null!==a&&"undefined"!==typeof b&&null!==b)for(var c=0;c<a.length;c++)if(a[c].ks.schemeIdURI===b.schemeIdURI)return a[c]}})})();MediaPlayer.models.ProtectionModel_FairPlay_1_0=function(){var a=null,b=null,c=null,d=[],e=[],f=function(a,b,d,f,g){var h=this;b={session:a,initData:b,initDataInfo:f,onLicenseMessageCallback:g,handleEvent:function(a){h.log("DRM: event received: "+a.type,"INFO");switch(a.type){case c.keyadded:h.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,this);break;case c.keymessage:h.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,new MediaPlayer.vo.protection.KeyMessage(this,
a.message,void 0,a.messageType));break;case c.keyerror:h.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR,new MediaPlayer.vo.protection.KeyError(this,"DRM Session Error! "+a.systemCode))}},getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return this.session.expiration},getKeyStatuses:function(){return this.session.keyStatuses},getSessionType:function(){return d}};a.addEventListener(c.keyadded,b);a.addEventListener(c.keymessage,b);a.addEventListener(c.keyerror,
b);e.push(b);return b},g=function(){var a=this;return{handleEvent:function(b){switch(b.type){case c.needkey:a.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY,new MediaPlayer.vo.protection.NeedKey(b.initData,"cenc"))}}}},h=null;return{system:void 0,log:void 0,errHandler:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,protectionExt:void 0,keySystem:null,setup:function(){h=g.call(this)},init:function(){var a=document.createElement("video");c=MediaPlayer.models.ProtectionModel_FairPlay_1_0.detect(a)},
teardown:function(){a&&a.removeEventListener(c.needkey,h);this.closeKeySessions();this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE)},getAllInitData:function(){var a,b=[];for(a=0;a<d.length;a++)b.push(d[a].initData);for(a=0;a<e.length;a++)b.push(e[a].initData);return b},requestKeySystemAccess:function(b){a||document.createElement("video");for(var d=!1,e=0;e<b.length;e++)for(var f=b[e].ks.systemString,g=b[e].configs,h=null,q=0;q<g.length;q++){var t=g[q].videoCapabilities;
if(t&&0!==t.length)for(var h=[],r=0;r<t.length;r++)window[c.MediaKeys].isTypeSupported(f,t[r].contentType)&&h.push(t[r]);if(h&&(!h||0!==h.length)){d=!0;g=new MediaPlayer.vo.protection.KeySystemConfiguration(null,h);f=this.protectionExt.getKeySystemBySystemString(f);f=new MediaPlayer.vo.protection.KeySystemAccess(f,g);this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,f);break}}d||this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,
null,"Key system access denied! -- No valid audio/video content configurations detected!")},selectKeySystem:function(d){var e=d.keySystem;try{if(b=new window[c.MediaKeys](e.systemString),a)a[c.setMediaKeys](b),this.keySystem=e,this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED);else throw"Video element not found";}catch(f){this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,null,"Error selecting keys system ("+d.keySystem.systemString+
")! Could not create MediaKeys: "+f.message)}},setMediaElement:function(b){a!==b&&(a&&(a.removeEventListener(c.needkey,h),a[c.setMediaKeys](null)),(a=b)&&a.addEventListener(c.needkey,h))},createKeySession:function(a,c,d,e){if(!this.keySystem||!b)throw Error("Can not create sessions until you have selected a key system");try{var g=b.createSession("video/mp4",a);if(!g)throw"Could not create key session";var h=f.call(this,g,a,c,d,e);this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,
h)}catch(q){this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,null,"Error generating key request -- "+q.name+" : "+q)}},updateKeySession:function(a,b){var c=a.session;this.protectionExt.isClearKey(this.keySystem)&&(b=b.toJWK());try{c.update(b),this.log("DRM: on updateKeySession success","INFO"),this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ADDED,a)}catch(d){this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR,new MediaPlayer.vo.protection.KeyError(a,
"Error sending update() message! "+d.name+" : "+d))}},closeKeySession:function(a){var b=a.session;b.removeEventListener(c.keyadded,a);b.removeEventListener(c.keymessage,a);this.log("DRM: closekeySession called: "+a.getSessionID(),"INFO");b.close();for(b=0;b<e.length;b++)if(e[b]===a){e.splice(b,1);break}this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,a.getSessionID())},setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},resetKeySystem:function(){this.closeKeySessions();
b=this.keySystem=null;this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE)},closeKeySessions:function(){for(;0<e.length;)this.closeKeySession(e[0]);e=[]}}};MediaPlayer.models.ProtectionModel_FairPlay_1_0.prototype={constructor:MediaPlayer.models.ProtectionModel_FairPlay_1_0};
MediaPlayer.models.ProtectionModel_FairPlay_1_0.APIs=[{MediaKeys:"MediaKeys",setMediaKeys:"setMediaKeys",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{MediaKeys:"WebKitMediaKeys",setMediaKeys:"webkitSetMediaKeys",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}];
MediaPlayer.models.ProtectionModel_FairPlay_1_0.detect=function(a){for(var b=MediaPlayer.models.ProtectionModel_FairPlay_1_0.APIs,c=0;c<b.length;c++){var d=b[c];if("function"===typeof a[d.setMediaKeys]&&("object"===typeof window[d.MediaKeys]||"function"===typeof window[d.MediaKeys]))return d}return null};Primetime.dependencies.protection.vo.InitDataInfo=function(a,b,c,d){this.rawInitData=a;this.initData=b;this.keySystemString=c;this.assetId=d};Primetime.dependencies.protection.vo.InitDataInfo.prototype={constructor:Primetime.dependencies.protection.vo.InitDataInfo};(function(){var a=function(a){console.log("DRM: onBootstrapInitDataAvailable");a.sender.unsubscribe(Primetime.dependencies.protection.KeySystem.eventList.ENAME_BOOTSTRAP_INITDATA_AVAILABLE,this);var c,d=new MediaPlayer.vo.MediaInfo,e=new MediaPlayer.vo.MediaInfo;a.error||(c=this.protectionControllerImpl.protectionExt.getSupportedKeySystems(a.data.initData));a.error||!c||0===c.length?this.protectionControllerImpl.eventBus.dispatchEvent({type:Primetime.dependencies.ProtectionController.events.ENAME_DRM_INITIALIZATION_COMPLETE,
data:null,error:a.error||"Invalid init data"}):(e.type="audio",e.codec="audio/mp4;codecs=mp4a.40.2",e.mimeType="audio/mp4",d.type="video",d.codec="video/mp4;codecs=avc1.42c01f",d.mimeType="video/mp4",this.protectionControllerImpl.bootstrapKeySystem(c,d,e))};Primetime.dependencies.DRMManagerImpl=function(){this.protectionControllerImpl=this.mediaPlayerImpl=this._delegate=null};Primetime.dependencies.DRMManagerImpl.prototype={system:void 0,constructor:Primetime.dependencies.DRMManagerImpl,log:void 0,
keySystemAccessSystemStr:"com.adobe.primetime",setup:function(){},initialize:function(b,c){this.mediaPlayerImpl=b;this.protectionControllerImpl=c;this[Primetime.dependencies.protection.KeySystem.eventList.ENAME_BOOTSTRAP_INITDATA_AVAILABLE]=a.bind(this)},setDelegate:function(a){this._delegate=a},acquireLicense:function(a,c,d,e){var f=this;if(this.protectionControllerImpl){var g=function(c){var e=!1;if(c.data.initData)for(var n=a.initData||[],k=0;k<n.length;k++)if(f.protectionControllerImpl.protectionExt.initDataEquals(c.data.initData,
n[k].initData)){e=!0;break}if(e&&(f.protectionControllerImpl.removeEventListener(Primetime.dependencies.ProtectionController.events.ENAME_ACQUIRE_LICENSE_COMPLETE,g),d))if(c.error)d.onDRMError(null,null,c.error,null);else c=new AdobePSDK.DRMLicense(c.data.sessionToken,c.data.message),d.onLicenseAcquired(c)};d&&this.protectionControllerImpl.addEventListener(Primetime.dependencies.ProtectionController.events.ENAME_ACQUIRE_LICENSE_COMPLETE,g);this.protectionControllerImpl.acquireLicense(a.initData,a.systemString,
e)}},initializeDRM:function(a){console.log("DRM: initializeDRM");var c=this,d=function(e){c.protectionControllerImpl.removeEventListener(Primetime.dependencies.ProtectionController.events.ENAME_DRM_INITIALIZATION_COMPLETE,d);if(a)if(e.error)a.onDRMError(null,null,e.error,null);else a.onDRMOperationComplete()},e=this.protectionControllerImpl.protectionExt.getKeySystemBySystemString(this.keySystemAccessSystemStr);e&&!this.protectionControllerImpl.getBootstrapMode()?(a&&this.protectionControllerImpl.addEventListener(Primetime.dependencies.ProtectionController.events.ENAME_DRM_INITIALIZATION_COMPLETE,
d),this.protectionControllerImpl.bootstrapBegin(),e.subscribe(Primetime.dependencies.protection.KeySystem.eventList.ENAME_BOOTSTRAP_INITDATA_AVAILABLE,this),e.getBootstrapInitData()):e?d.call(this,{error:"Bootstrap in progress"}):d.call(this,{error:"KeySystem not available: "+this.keySystemAccessSystemStr})},setProtectionData:function(a){this.protectionControllerImpl.setProtectionData(a);return AdobePSDK.PSDKErrorCode.kECSuccess},returnLicense:function(a,c,d,e,f,g){var h=this,l=f.getSessionID();if(this.protectionControllerImpl){var n=
function(a){if(a.data===l&&(h.protectionControllerImpl.removeEventListener(MediaPlayer.dependencies.ProtectionController.events.KEY_SESSION_REMOVED,n),g))if(a.error)g.onDRMError(null,null,a.error,null);else g.onLicenseReturnComplete(1)};g&&this.protectionControllerImpl.addEventListener(MediaPlayer.dependencies.ProtectionController.events.KEY_SESSION_REMOVED,n);this.protectionControllerImpl.returnLicense(f)}},setEMESessionType:function(a){"undefined"!==typeof a&&null!==a&&this.protectionControllerImpl&&
this.protectionControllerImpl.setSessionType(a)}}})();(function(){var a,b=function(){this._item=this.system.getObject("mediaPlayerItemImpl");this._item.setNativePlayer(this)};Primetime.me.MediaPlayerImpl=function(a){this._context=a};Primetime.me.MediaPlayerImpl.prototype=Primetime.helper.extend(Primetime.MediaPlayerImpl.prototype,{baseConstructor:Primetime.MediaPlayerImpl.prototype.constructor,constructor:Primetime.me.MediaPlayerImpl.prototype,notifier:void 0,debug:void 0,log:void 0,uriQueryFragModel:void 0,eventBus:void 0,metricsExt:void 0,_videoModel:null,
_initialized:!1,_context:null,_visibility:AdobePSDK.MediaPlayer.VISIBLE,_emptyMainContent:!1,_playingAd:!1,startup:function(b,d){Primetime.MediaPlayerImpl.prototype.startup.call(this,b,d);a=new dijon.System;a.mapValue("system",a);a.mapOutlet("system");a.mapValue("eventBus",new MediaPlayer.utils.EventBus);a.mapOutlet("eventBus");var e=new MediaPlayer.utils.Debug;a.mapValue("debug",e);a.mapOutlet("debug");a.injectInto(e);e.setup();a.injectInto(this._context);a.injectInto(this);this.registerAdEvents(b._delegate);
this._context=null},meAdBreakStarted:function(){this._playingAd=!0},meAdBreakCompleted:function(){this._playingAd=!1},registerAdEvents:function(a){a.addEventListener(AdobePSDK.MediaPlayer.Events.AdBreakStartedEvent,this.meAdBreakStarted.bind(this));a.addEventListener(AdobePSDK.MediaPlayer.Events.AdBreakCompletedEvent,this.meAdBreakCompleted.bind(this))},setup:function(){this._initialized||(this._initialized=!0,Primetime.MediaPlayerImpl.prototype.setup.call(this),this.system.mapValue("mediaPlayer",
this))},seekStream:function(a){return Primetime.MediaPlayerImpl.prototype.seekStream.call(this,a)?(this._videoModel.getElement().currentTime=this._seekExpected,!0):!1},liveSeek:function(a){var b=this.getPlaybackRange();if(b){if(a+b.start>=b.end)return this.seekToLivePoint();this._seekExpected=a+b.start;return!0}return!1},seekToLivePoint:function(){var a=this.getPlaybackRange();return a?(this._seekExpected=a.end,!0):!1},time:function(){return this.getStreamController()?this.getStreamController().getCurrentTime():
0},haveCurrentStreamTime:function(){return null!==this.getStreamController()&&null!==this.getStreamController().playbackController&&null!==this.getStreamController().playbackController.videoModel},duration:function(){if(this.getStreamController())return this.getStreamController().getDuration()},addSource:function(a,b,e){this._isAdOnly&&!this.getStreamController()&&this.attachSource("",null,null,a.type,!0);b/=1E3;e/=1E3;return this.getStreamController().addSource(a.url,b,e)},attachSource:function(a,
b,e,f,g){Primetime.MediaPlayerImpl.prototype.attachSource.call(this,a,b,e,f);this.doReset();this.uriQueryFragModel.reset();var h;"string"===typeof a&&(h=this.uriQueryFragModel.parseURI(a));h=h||"";""!==h||"undefined"!==typeof g&&null!==g&&g||(this._emptyMainContent=!0);this._videoModel&&(a=h,"undefined"===typeof a||null===a?this.log("Invalid Source URL","INFO"):(f=this.system.getObject("streamController"),this.setStreamController(f),f.subscribe(Primetime.me.dependencies.StreamController.eventList.ENAME_COMPLETED_PLAYING,
this),f.initialize(b,e),f.load(a,g)))},getCurrentStreamTime:function(){return this.time()},getLocalStreamTime:function(){return this.time()},getVirtualTimeForLocalTime:function(a){return a},getStreamPlaybackRange:function(){if(this.getStreamController())return this.getStreamController().getPlaybackRange()},getSeekableRange:function(){return this.getPlaybackRange()},doReset:function(){this.getStreamController()&&(this.getStreamController().reset(),this.getStreamController().unsubscribe(Primetime.me.dependencies.StreamController.eventList.ENAME_COMPLETED_PLAYING,
this),this.setStreamController(null))},attachView:function(b){this._videoModel=null;b&&(this._videoModel=a.getObject("videoModel"),this._videoModel.setElement(b),b.poster||(b.poster="data:image/gif;base64,R0lGODlhEAAJAIAAAP///wAAACwAAAAAEAAJAAACCoyPqcvtD6OclBUAOw=="));this.doReset()},addEventListener:function(a,b,e){a=a.toLowerCase();this.eventBus.addEventListener(a,b,e)},removeEventListener:function(a,b,e){a=a.toLowerCase();this.eventBus.removeEventListener(a,b,e)},onStreamUpdated:function(){this.createOrUpdateVirtualTimelineItems()},
onStreamsComposed:function(){this.getCurrentItem()||(b.call(this),this._delegate&&this._delegate._nativeNotification("streamCreated"));this.createOrUpdateVirtualTimelineItems();this.getCurrentItem().update(this.getTimeline());this.setCCVisibility(this._visibility);this._delegate&&this._delegate._nativeNotification("streamsComposed")},onManifestUpdated:function(){this.getCurrentItem()||b.call(this);this.getCurrentItem().update(this.getTimeline());this.setCCVisibility(this._visibility);this._delegate&&
this._delegate._nativeNotification("manifestUpdated")},onPlaybackTrackUpdated:function(){this.getCurrentItem()&&(this.getCurrentItem().update(this.getTimeline()),this._delegate&&this._delegate._nativeNotification("streamsComposed"))},onBufferLevelStateChanged:function(a,b){a?(this._playbackWaiting=!1,this._delegate&&this._delegate._nativeNotification("bufferEnd",b)):(this._delegate&&this._delegate._nativeNotification("bufferBegin",b),null!==this._seekExpected&&null!==this._streamController&&this._streamController.isPaused()&&
(this._playbackWaiting=!0,this._delegate&&this._delegate._nativeNotification("pause")))},onQualityChanged:function(){},reset:function(){this._videoModel&&this._videoModel.getElement()&&this._videoModel.pause();this.attachView(null);this.attachSource(null);this._emptyMainContent=!1;return Primetime.MediaPlayerImpl.prototype.reset.call(this)},getStreamBufferedRange:function(){if(this.getStreamController()){var a=this.getCurrentStreamTime(),b=this.metricsExt.getCurrentBufferLevel(),e=0;if(b)return b.level>
a&&(e=b.level-a),{begin:a,end:b.level,duration:e}}return AdobePSDK.PSDKErrorCode.kECElementNotFound},getCribbedMetrics:function(){var a=this.metricsExt.getCurrentBufferLevel(),b=this.metricsExt.getCurrentDroppedFrames(),e=0,f=0,g=this.getCurrentStreamTime();a&&a.level>g&&(e=(1E3*(a.level-g)).toPrecision(5));b&&(f=b.droppedFrames);return{bandwidthValue:0,bitrateIndexValue:1,pendingIndex:"",numBitratesValue:1,bufferLengthValue:e,droppedFramesValue:f,movingLatency:0,movingDownload:0,movingRatio:0}},
getStreamAdditionalPlaybackInformationMetrics:function(){var a=this.getStreamBufferedRange();a===AdobePSDK.PSDKErrorCode.kECElementNotFound&&(a={duration:0});return{timeToFirstByte:0,frameRate:this.getFps(),perceivedBandwidth:0,bufferTime:0,bufferLength:a.duration}},completedPlaying:function(){this.onCompletedPlaying()},playStream:function(a,b){if("undefined"===typeof b||null===b)b=!1;if(this._emptyMainContent)return this.notify(Primetime.MediaPlayerImpl.Events.ENAME_VIRTUAL_TIMELINE_ITEM_COMPLETED_PLAYING),
this.onPlaybackStopped(),!0;if(b){if(!this._streamController)return!1;this.deactivate();this._streamController.playStream(a);return!0}return Primetime.MediaPlayerImpl.prototype.playStream.call(this,a)},deactivate:function(){this._streamController&&this._streamController.deactivateActiveStream()},playbackMetaDataLoaded:function(){this._delegate&&this.getStreamController()&&this.getStreamController().getActiveStreamInfo()&&!this.getStreamController().getActiveStreamInfo().isMPAd&&this._delegate._nativeNotification("initialized")},
setCCVisibility:function(a){this._visibility=a;this.getCurrentItem()&&this.getCurrentItem().setCCVisibility(a)},getPreBuffering:function(){return!1},setPreBuffering:function(a){},getQualitySwitchBasedOnPDT:function(){return!1},setQualitySwitchBasedOnPDT:function(a){},setCCStyle:function(){},getPlaybackQuality:function(){return this._streamController&&this._streamController.videoExt&&this._streamController.videoModel&&this._streamController.videoModel.getElement()?this._streamController.videoExt.getPlaybackQuality(this._streamController.videoModel.getElement()):
null},convertToLocalTimeMapping:function(a){return{time:a}},setHoldAt:function(a){},seek:function(a){if(this._playingAd)return!0;var b=this.virtualTimelineManager.getActiveItem();if(!b)return!0;var e=!0;AdobePSDK.MediaPlayerStatus.PAUSED==this._delegate.getStatus()&&(e=!1);var f=a;a!==AdobePSDK.MediaPlayer.LIVE_POINT&&(f=a/1E3);a=b._mediaPlayerImpl.seekStream(f);e&&this._delegate.play();return a},seekToLocal:function(a){return this.seek(a)}})})();(function(){Primetime.me.dependencies.MediaElementAdapter=function(){};Primetime.me.dependencies.MediaElementAdapter.prototype={constructor:Primetime.me.dependencies.MediaElementAdapter,getStreamInfo:function(a,b,c,d,e,f,g){var h=new Primetime.me.vo.StreamInfo;h.id=a;h.index=b;h.url=c;h.isMPAd=f;h.isLast=g;h.start=d;h.duration=e;h.virtualStart=d;return h},getMediaInfo:function(a){var b=new Primetime.me.vo.MediaInfo;b.id=a.id;b.type="video";b.streamInfo=a;b.lang=null;a=a.url.split("?")[0];var c="";
0<=a.lastIndexOf(".")&&(c=a.substr(a.lastIndexOf(".")+1));a=Primetime.MimeTypeUtils.extensionToMimeType(c);b.mimeType=a?a[0]:"unknown";b.contentProtection=null;return b}}})();(function(){var a=function(){this._closedCaptionsTracks=[];var a=this._selectedClosedCaptionsTrack=null,d,e,f,g=null;if(this.videoModel&&this.videoModel.getElement())for(e=this.videoModel.getElement(),d=0;d<e.textTracks.length;d++)(a=e.textTracks[d].language)&&0!==a.length||(a="captions"===e.textTracks[d].kind?"":"Unknown"),g="captions"===e.textTracks[d].kind?"text/608":"text/vtt",a=new AdobePSDK.ClosedCaptionsTrack(d,d,e.textTracks[d].label,a,e.textTracks[d].default,!1,g,!1),!this._selectedClosedCaptionsTrack&&
e.textTracks[d].default&&(f=a),this._closedCaptionsTracks.push(a);!this._selectedClosedCaptionsTrack&&0<this._closedCaptionsTracks.length&&(d=f||this._closedCaptionsTracks[0],this._ccVisibility===AdobePSDK.MediaPlayer.VISIBLE&&b.call(this,d),this._selectedClosedCaptionsTrack=d)},b=function(a){if("undefined"===typeof a||null===a)return AdobePSDK.PSDKErrorCode.kECInvalidArgument;if(!this.videoModel||!this.videoModel.getElement())return AdobePSDK.PSDKErrorCode.kECIllegalState;var b=this.system.getObject("mediaPlayer");
if(b&&b.isTrickPlayMode())return AdobePSDK.PSDKErrorCode.kECUnsupportedOperation;var e="showing",f=this.videoModel.getElement();this._selectedClosedCaptionsTrack&&f.textTracks.length>this._selectedClosedCaptionsTrack._mediaInfoIndex&&(e=f.textTracks[this._selectedClosedCaptionsTrack._mediaInfoIndex].mode,f.textTracks[this._selectedClosedCaptionsTrack._mediaInfoIndex].mode="hidden");for(b=0;b<this._closedCaptionsTracks.length;b++)if(a===this._closedCaptionsTracks[b]&&a._mediaInfoIndex===b&&f.textTracks.length>
b){this._selectedClosedCaptionsTrack=a;f.textTracks[b].mode=e;break}};Primetime.me.dependencies.MediaPlayerItemImpl=function(){Primetime.me.dependencies.MediaPlayerItemImpl.prototype.baseConstructor.call(this);this._drmMetadataInfos=[];this._nativePlayer=this._delegate=null;this._resourceType=AdobePSDK.MediaResourceType.UNKNOWN;this._ccVisibility=null;this._audioTracks=[];this._closedCaptionsTracks=[];this._selectedClosedCaptionsTrack=this._selectedAudioTrack=null;var a=this;Object.defineProperty(this,
"resource",{get:function(){return a.getResource()}})};Primetime.me.dependencies.MediaPlayerItemImpl.prototype=Primetime.helper.extend(Primetime.MediaPlayerItemImpl.prototype,{baseConstructor:Primetime.MediaPlayerItemImpl.prototype.constructor,constructor:Primetime.dependencies.MediaPlayerItemImpl,setup:function(){},setDelegate:function(a){this._delegate=a;this._resourceType=this.getResource().type},setNativePlayer:function(a){this._nativePlayer=a},getResource:function(){return this._delegate.resource},
update:function(){a.call(this)},getAudioTracks:function(){return this._audioTracks},getClosedCaptionsTracks:function(){return this._closedCaptionsTracks},getSelectedAudioTrack:function(){},getSelectedClosedCaptionsTrack:function(){return this._selectedClosedCaptionsTrack},selectAudioTrack:function(){},selectClosedCaptionsTrack:function(a){b.call(this,a)},getProfiles:function(){},getSelectedProfile:function(){},getProfileForQuality:function(){},isLive:function(){if(this._nativePlayer){if(this._nativePlayer._emptyMainContent)return!1;
var a=this._nativePlayer.duration();if(!isFinite(a))return!0}return!1},isProtected:function(){return!1},isDynamic:function(){return!1},addDRMMetadataInfo:function(a){"undefined"!==typeof a&&null!==a&&this._drmMetadataInfos.push(a)},getDRMMetadataInfos:function(){return this._drmMetadataInfos},isTrickPlaySupported:function(){return!0},setClosedCaptionsTracks:function(b){if("undefined"!==typeof b&&null!==b){var d;for(d=this.videoModel.getElement();d.firstChild;)d.removeChild(d.firstChild);for(i=0;i<
b.length;i++){var e=document.createElement("track");e.setAttribute("kind","subtitles");e.setAttribute("label",b[i].name);e.setAttribute("src",b[i].serviceType);e.setAttribute("srclang",b[i].language);e.setAttribute("default","");d.appendChild(e)}a()}},setCCVisibility:function(a){this._ccVisibility=a;if(this.videoModel&&this.videoModel.getElement()){var b="hidden",e=this.videoModel.getElement();a===AdobePSDK.MediaPlayer.VISIBLE&&(b="showing");for(a=0;a<e.textTracks.length;a++)e.textTracks[a].mode=
this._selectedClosedCaptionsTrack&&this._selectedClosedCaptionsTrack._mediaInfoIndex===a?b:"hidden"}},getAvailablePlaybackRates:function(){var a=[];if(this.isTrickPlaySupported()){for(var b=Primetime.defaults.DEFAULT_MAX_PLAYOUT_RATE_WITHOUT_TRICK_PLAY_PROFILES,e=128;e>b;)e/=2;b=e;if(Primetime.BrowserExtensions.isSafari()&&this._resourceType===AdobePSDK.MediaResourceType.ISOBMFF){for(;2<=e;)a.push(-1*e),e/=2;a.push(-.75);a.push(-.5);a.push(-.25)}a.push(0);a.push(.25);a.push(.5);a.push(.75);a.push(1);
for(e=2;e<=b;)a.push(e),e*=2}return a}})})();(function(){Primetime.me.dependencies.TimelineImpl=function(){this._delegate=null};Primetime.me.dependencies.TimelineImpl.prototype={system:void 0,constructor:Primetime.dependencies.TimelineImpl,setDelegate:function(a){this._delegate=a},reset:function(){}}})();(function(){var a=function(a){this._updated&&this._streamInfo.duration===a||(this._streamInfo.duration=a,this._updated=!0,this.notify(Primetime.me.dependencies.Stream.eventList.ENAME_STREAM_UPDATED,{}))},b=function(){var b=this,c=document.createElement("video"),f=function(){c.removeEventListener("loadedmetadata",f);a.call(b,c.duration);Primetime.BrowserExtensions.isSafari()&&document.body.removeChild(c);if(b._metadataLoaded)b.onLoad()};c.addEventListener("loadedmetadata",f);c.autoplay=!1;Primetime.BrowserExtensions.isSafari()?
(c.style.visibility="hidden",document.body.appendChild(c),c.preload="auto"):c.preload="metadata";c.src=this._streamInfo.url},c=function(){if(this._streamInfo){var c=this;this._mediaInfo=this.adapter.getMediaInfo(this._streamInfo);this._streamInfo.url&&""!==this._streamInfo.url||this._streamInfo.isMPAd?(Primetime.BrowserExtensions.isIOS7orLess()&&Primetime.BrowserExtensions.isSafari()||b.call(this),this._streamInfo.isMPAd&&setTimeout(function(){a.call(c,0)},0)):a.call(c,0)}};Primetime.me.dependencies.Stream=
function(){};Primetime.me.dependencies.Stream.prototype={system:void 0,log:void 0,adapter:void 0,videoModel:void 0,playbackController:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,_protectionController:void 0,_protectionData:void 0,_streamInfo:void 0,_mediaInfo:void 0,_updated:!1,_metadataLoaded:!1,_isActive:!1,_initializingPlayer:!1,_playbackRate:null,setup:function(){this.playbackMetaDataLoaded=this.onLoad;this.playbackDurationChange=this.onDurationChange},initialize:function(a,b,f){this._streamInfo=
a;this._protectionController=b;this._protectionData=f;this.playbackController.subscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_METADATA_LOADED,this);this.playbackController.subscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_DURATION_CHANGE,this);c.call(this)},reset:function(){this.playbackController.unsubscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_METADATA_LOADED,this);this.playbackController.unsubscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_DURATION_CHANGE,
this);this._mediaInfo=this._streamInfo=this._protectionData=this._protectionController=null;this._initializingPlayer=this._metadataLoaded=this._isActive=this._updated=!1;this._playbackRate=null},onLoad:function(){this._isActive&&(a.call(this,this.videoModel.getElement().duration),this.updated()?this._streamInfo.isMPAd||this.system.getObject("mediaPlayer").playbackMetaDataLoaded():this._metadataLoaded=!0)},onDurationChange:function(){this._isActive&&a.call(this,this.videoModel.getElement().duration)},
updated:function(){return this._updated},getStreamInfo:function(){return this._streamInfo},getStreamIndex:function(){return this._streamInfo.index},getId:function(){return this._streamInfo.id},setRate:function(a){this._playbackRate=a;this.system.getObject("mediaPlayer").playbackRateSelected(a);0===a?this.videoModel.pause():this.videoModel.setPlaybackRate(a);1===a&&(this.videoModel.getElement().muted="")},getRate:function(){return null!==this._playbackRate&&void 0!==this._playbackRate?this._playbackRate:
this.videoModel.getPlaybackRate()},activate:function(a){if(!this._isActive)if(this._isActive=!0,this._initializingPlayer=a,this._streamInfo.url&&""!==this._streamInfo.url||this._streamInfo.isMPAd)this.videoModel.getElement().preload="auto",this.videoModel.setSource(this._streamInfo.url),this._initializingPlayer&&Primetime.BrowserExtensions.isIOS7orLess()&&Primetime.BrowserExtensions.isSafari()?4!==this.videoModel.getElement().readyState&&this.videoModel.getElement().load():this._initializingPlayer=
!1;else this.onLoad()},deactivate:function(){this._isActive&&(this._isActive=!1)},isActivated:function(){return this._isActive}};Primetime.me.dependencies.Stream.eventList={ENAME_STREAM_UPDATED:"streamUpdated"}})();Primetime.me.dependencies.ErrorHandler=function(){var a=Primetime.MediaPlayerImpl.Events.ERROR;return{eventBus:void 0,capabilityError:function(b){this.eventBus.dispatchEvent({type:a,error:"capability",event:b})},closedCaptionsError:function(b,c,d){this.eventBus.dispatchEvent({type:a,error:"cc",event:{message:b,id:c,cc:d}})},mediaSourceError:function(b){this.eventBus.dispatchEvent({type:a,error:"mediasource",event:b})},mediaKeySessionError:function(b){this.eventBus.dispatchEvent({type:a,error:"key_session",
event:b})},mediaKeyMessageError:function(b){this.eventBus.dispatchEvent({type:a,error:"key_message",event:b})},mediaKeySystemSelectionError:function(b){this.eventBus.dispatchEvent({type:a,error:"key_system_selection",event:b})}}};Primetime.me.dependencies.ErrorHandler.prototype={constructor:Primetime.me.dependencies.ErrorHandler};Primetime.me.models.VideoModel=function(){var a=new MediaPlayer.models.VideoModel;return Primetime.helper.extend(a,{})};Primetime.me.models.MetricsModel=function(){return{system:void 0,eventBus:void 0,adapter:void 0,streamMetrics:{},metricsList:{BUFFER_LEVEL:"BufferLevel",BUFFER_STATE:"BufferState",DVR_INFO:"DVRInfo",DROPPED_FRAMES:"DroppedFrames",PLAY_LIST:"PlayList"},metricsChanged:function(){this.eventBus.dispatchEvent({type:MediaPlayer.events.METRICS_CHANGED,data:{}})},metricChanged:function(a){this.eventBus.dispatchEvent({type:MediaPlayer.events.METRIC_CHANGED,data:{stream:a}});this.metricsChanged()},metricUpdated:function(a,
b,c){this.eventBus.dispatchEvent({type:MediaPlayer.events.METRIC_UPDATED,data:{stream:a,metric:b,value:c}});this.metricChanged(a)},metricAdded:function(a,b,c){this.eventBus.dispatchEvent({type:MediaPlayer.events.METRIC_ADDED,data:{stream:a,metric:b,value:c}});this.metricChanged(a)},clearCurrentMetricsForType:function(a){delete this.streamMetrics[a];this.metricChanged(a)},clearAllCurrentMetrics:function(){this.streamMetrics={};this.metricsChanged.call(this)},getReadOnlyMetricsFor:function(a){return this.streamMetrics.hasOwnProperty(a)?
this.streamMetrics[a]:null},getMetricsFor:function(a){var b;this.streamMetrics.hasOwnProperty(a)?b=this.streamMetrics[a]:(b=this.system.getObject("metrics"),this.streamMetrics[a]=b);return b},addBufferLevel:function(a,b,c){var d=new MediaPlayer.vo.metrics.BufferLevel;d.t=b;d.level=c;this.getMetricsFor(a).BufferLevel.push(d);this.metricAdded(a,this.metricsList.BUFFER_LEVEL,d);return d},addBufferState:function(a,b,c){var d=new MediaPlayer.vo.metrics.BufferState;d.target=c;d.state=b;this.getMetricsFor(a).BufferState.push(d);
this.metricAdded(a,this.metricsList.BUFFER_STATE,d);return d},addDVRInfo:function(a,b,c,d){var e=new MediaPlayer.vo.metrics.DVRInfo;e.time=b;e.range=d;e.manifestInfo=c;this.getMetricsFor(a).DVRInfo.push(e);this.metricAdded(a,this.metricsList.DVR_INFO,e);return e},addDroppedFrames:function(a,b){var c=new MediaPlayer.vo.metrics.DroppedFrames,d=this.getMetricsFor(a).DroppedFrames;c.time=b.creationTime;c.droppedFrames=b.droppedVideoFrames;if(0<d.length&&d[d.length-1]==c)return d[d.length-1];d.push(c);
this.metricAdded(a,this.metricsList.DROPPED_FRAMES,c);return c},addPlayList:function(a,b,c,d){var e=new MediaPlayer.vo.metrics.PlayList;e.stream=a;e.start=b;e.mstart=c;e.starttype=d;this.getMetricsFor(a).PlayList.push(e);this.metricAdded(a,this.metricsList.PLAY_LIST,e);return e}}};Primetime.me.models.MetricsModel.prototype={constructor:Primetime.me.models.MetricsModel};Primetime.me.models.MetricsList=function(){return{BufferLevel:[],BufferState:[],PlayList:[],DroppedFrames:[],DVRInfo:[]}};Primetime.me.models.MetricsList.prototype={constructor:Primetime.me.models.MetricsList};(function(){var a=1,b=function(){var a=this.system.getObject("mediaPlayer");if(a)a.onPlaybackSeeking()},c=function(){var a=this.system.getObject("mediaPlayer");if(a)a.onPlaybackSeeked()},d=function(){var a=this.system.getObject("mediaPlayer");if(a)a.onPlaybackStarted()},e=function(){var a=this.system.getObject("mediaPlayer");if(a)a.onPlaybackPaused()},f=function(){var a=this.system.getObject("mediaPlayer");if(a)a.onPlaybackStopped()},g=function(){this.system.getObject("mediaPlayer").playbackRateChanged()},
h=function(a){a=a.data.bufferedRanges;var b;a&&a.length&&(b=a.length-1,a=a.end(b),this.metricsModel.addBufferLevel("video",new Date,a))},l=function(){var a=this.metricsExt.getCurrentBufferState(),b=0;this._activeStream&&(b=this._activeStream.getStreamInfo().duration);this.metricsModel.addBufferState("video","bufferEmpty",b);if(!a||"bufferLoaded"===a.state)this.system.getObject("mediaPlayer").onBufferLevelStateChanged(!1,"video")},n=function(){this._canPlay=!0;var a=this.metricsExt.getCurrentBufferState(),
b=0;this._activeStream&&(b=this._activeStream.getStreamInfo().duration);this.metricsModel.addBufferState("video","bufferLoaded",b);if(!a||"bufferEmpty"===a.state)this.system.getObject("mediaPlayer").onBufferLevelStateChanged(!0,"video")},k=function(a){var b=a.data.error.code,c="";if(-1!==b){switch(b){case 1:c="MEDIA_ERR_ABORTED";break;case 2:c="MEDIA_ERR_NETWORK";break;case 3:c="MEDIA_ERR_DECODE";break;case 4:c="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:c="MEDIA_ERR_ENCRYPTED"}this.log("Video Element Error: "+
c,"INFO");this.log(a.error,"INFO");this.errHandler.mediaSourceError(c);this.reset()}},m=function(){var a=this.system.getObject("mediaPlayer");if(a)a.onPlaybackTrackUpdated()},p=function(a){a=this.system.getObject("mediaPlayer");var b=this.videoExt.getPlaybackQuality(this.videoModel.getElement());if(a)a.onPlaybackTimeUpdated();b&&this.metricsModel.addDroppedFrames("video",b)},u=function(){var a=this.system.getObject("mediaPlayer");if(a)a.onStreamUpdated();for(a=0;a<this._streams.length;a++)if(!this._streams[a].updated())return;
if(a=this.system.getObject("mediaPlayer"))a.onStreamsComposed();this.notify(Primetime.me.dependencies.StreamController.eventList.ENAME_STREAMS_COMPOSED)},q=function(a,b){var c=this.system.getObject("stream");this.addStream(c,b);c.subscribe(Primetime.me.dependencies.Stream.eventList.ENAME_STREAM_UPDATED,this);c.initialize(a);return c},t=function(a){var b=0,c=null,d=this.getStreams().length;0<d&&(b+=this.getStreams()[0].getStreamInfo().start);a=Number(a.toFixed(4));for(var e=0;e<d;e++)if(c=this.getStreams()[e],
b+=c.getStreamInfo().duration,b=Number(b.toFixed(4)),a<b)return c;return a<=b+NEXT_STREAM_THRESHOLD&&c.getStreamInfo().manifestInfo.isDynamic?c:null},r=function(a){if("undefined"!==typeof a&&null!==a&&(this.videoModel.getElement().style.visibility="visible",!this.isStreamActive(a)&&(a=this.getStreamById(a.id)))){var b=this.getActiveStream();"undefined"!==typeof a&&null!==a&&("undefined"!==typeof b&&null!==b&&b.deactivate(),this._activeStream=a,this.playbackController.initialize(this._activeStream.getStreamInfo()),
this._activeStream.activate())}};Primetime.me.dependencies.StreamController=function(){return{system:void 0,log:void 0,eventBus:void 0,videoModel:void 0,playbackController:void 0,adapter:void 0,metricsModel:void 0,metricsExt:void 0,videoExt:void 0,errHandler:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,capabilities:void 0,_protectionController:void 0,_protectionData:void 0,_mediaUrl:null,_setRatePending:!1,_playbackRate:null,_streams:[],_activeStream:null,setup:function(){this.playbackSeeked=
c;this.playbackStarted=d;this.playbackStopped=f;this.playbackPaused=e;this.playbackSeeking=b;this.playbackTimeUpdated=p;this.playbackRateChanged=g;this.playbackProgress=h;this.playbackWaiting=l;this.streamUpdated=u;this.playbackError=k;this.canPlay=n;this.playbackRemoveTrack=this.playbackAddTrack=m;this.getStreamForTime=t},initialize:function(a,b){this._protectionController=a;this._protectionData=b;this.playbackController.subscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,
this);this.playbackController.subscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED,this);this.playbackController.subscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_CAN_PLAY,this);this.playbackController.subscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_ERROR,this);this.playbackController.subscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS,this);this.playbackController.subscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_WAITING,
this);this.playbackController.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED,this);this.playbackController.subscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED,this);this.playbackController.subscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PAUSED,this);this.playbackController.subscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STOPPED,this);this.playbackController.subscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKED,
this);this.playbackController.subscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_ADDTRACK,this);this.playbackController.subscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_REMOVETRACK,this)},load:function(b,c){this._mediaUrl=b;if(this._mediaUrl&&""!==this._mediaUrl||"undefined"===typeof c||null===c||!0!==c){this.capabilities.supportsEncryptedMedia()&&this._protectionController&&(this._protectionController.setMediaElement(this.videoModel.getElement()),
this._protectionData&&this._protectionController.setProtectionData(this._protectionData));var d;d=this._mediaUrl;d=this.adapter.getStreamInfo(a++,1,d,0,0,!1);q.call(this,d);this._activeStream||(this._activeStream=this._streams[0],this.playbackController.initialize(this._activeStream.getStreamInfo()));this._activeStream.activate(!0);this.videoModel.getElement().style.visibility="hidden"}},reset:function(){this.playbackController.unsubscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,
this);this.playbackController.unsubscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED,this);this.playbackController.unsubscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_CAN_PLAY,this);this.playbackController.unsubscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_ERROR,this);this.playbackController.unsubscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS,this);this.playbackController.unsubscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_WAITING,
this);this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED,this);this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED,this);this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PAUSED,this);this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STOPPED,this);this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKED,
this);this.playbackController.unsubscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_ADDTRACK,this);this.playbackController.unsubscribe(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_REMOVETRACK,this);this._protectionController&&(this._protectionController.setMediaElement(null),this._protectionData=this._protectionController=null);for(var a=0;a<this._streams.length;a++)this._streams[a].reset();this._streams=[];this.playbackController.reset();this.metricsModel.clearAllCurrentMetrics();
this._mediaUrl=null;this._setRatePending=!1;this._activeStream=this._playbackRate=null},addSource:function(b,c,d){for(var e=0,f,g=0,k,e=0;e<this._streams.length;e++){var h=this._streams[e].getStreamInfo();if(c<=g||c<=h.virtualStart){f=b;g=e+1;k=d;f=this.adapter.getStreamInfo(a++,g,f,0,k,!0);k=q.call(this,f,e);break}g=h.virtualStart+h.duration}if(k)for(e+=1;e<this._streams.length;e++)this._streams[e].getStreamInfo().index=e+1;else f=this.adapter.getStreamInfo(a++,e+1,b,0,d,!0),q.call(this,f,e);f.virtualStart=
c;return f},addStream:function(a,b){"undefined"!==typeof a&&null!==a&&("undefined"!==typeof b&&null!==b?this._streams.splice(b,0,a):this._streams.push(a),this._setRatePending&&this.setRateOnActiveStream())},removeStream:function(a){if("undefined"!==typeof a&&null!==a)for(var b=0;b<this._streams.length;b++)if(this._streams[b]===a){this._streams.splice(b,1);break}},getActiveStreamInfo:function(){return this._activeStream?this._activeStream.getStreamInfo():null},isStreamActive:function(a){return null!==
this._activeStream&&this._activeStream.getId()===a.id&&this._activeStream.isActivated()},getActiveStream:function(){return this._activeStream},playStream:function(a){r.call(this,a);a.seekTimeBeforePlay&&(this.playbackController.seek(a.seekTimeBeforePlay),a.seekTimeBeforePlay=void 0);this.playbackController.isPaused()&&this.playbackController.start()},deactivateActiveStream:function(){this._activeStream&&(this.playbackController.reset(),this._activeStream.deactivate())},activateStream:function(a){r.call(this,
a)},getNextStream:function(){var a=this.getActiveStream();return a?this.getStream(a.getStreamIndex()+1):null},getStreams:function(){return this._streams},getStream:function(a){if("undefined"===typeof a||null===a)return null;if(this._streams.length>a)for(var b=0;b<this._streams.length;b++)if(this._streams[b].getStreamIndex()===a)return this._streams[b];return null},getStreamById:function(a){if(("undefined"===typeof a||null===a)&&1<this._streams.length)return null;for(var b=0;b<this._streams.length;b++)if(this._streams[b].getId()===
a)return this._streams[b];return null},setRate:function(a){this._playbackRate=a;this.setRateOnActiveStream()},getRate:function(){var a=this.getActiveStream();return null===a?void 0:a.getRate()},isPaused:function(){return this.playbackController?this.playbackController.isPaused():null},setRateOnActiveStream:function(){var a=this.getActiveStream();null===a?this._setRatePending=!0:(this._setRatePending=!1,a.setRate(this._playbackRate))},getCurrentTime:function(){return this.playbackController?this.playbackController.getTime():
0},getDuration:function(){return this._activeStream?this._activeStream.getStreamInfo().duration:0},getPlaybackRange:function(){var a={start:0,end:0};this._activeStream&&(!isFinite(this._activeStream.getStreamInfo().duration)&&0<this.videoModel.getElement().seekable.length?(a.start=this.videoModel.getElement().seekable.start(0),a.end=this.videoModel.getElement().seekable.end(this.videoModel.getElement().seekable.length-1)):(a.start=this._activeStream.getStreamInfo().start,a.end=this._activeStream.getStreamInfo().duration));
return a}}};Primetime.me.dependencies.StreamController.eventList={ENAME_STREAMS_COMPOSED:"streamsComposed",ENAME_COMPLETED_PLAYING:"completedPlaying"}})();(function(){var a=function(a){var b=parseInt(this.uriQueryFragModel.getURIFragmentData().s);return!isNaN(b)&&b<a.duration&&0<=b?b:a.start},b=function(){this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_CAN_PLAY)},c=function(){this.log("<video> play","INFO");this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED,{startTime:this.getTime()})},d=function(){this.log("<video> playing","INFO");this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PLAYING,
{playingTime:this.getTime()})},e=function(){this.log("<video> pause","INFO");this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PAUSED)},f=function(){this.log("<video> seek","INFO");this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,{seekTime:this.getTime()})},g=function(){this.log("<video> seeked","INFO");this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKED)},h=function(){var a=this.getTime();
a!==this._currentTime&&(this._currentTime=a,this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED,{timeToEnd:this.getTimeToStreamEnd()}))},l=function(){var b=this.videoModel.getElement().buffered,c;b.length&&(c=b.length-1,b=b.end(c),c=a.call(this,this._streamInfo)+this._streamInfo.duration-b);this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS,{bufferedRanges:this.videoModel.getElement().buffered,remainingUnbufferedDuration:c})},
n=function(){this.log("<video> ratechange: ",this.getPlaybackRate(),"INFO");this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED)},k=function(){this.log("<video> loadedmetadata","INFO");if(!this.isSeeking()){var b=a.call(this,this._streamInfo);this.log("Starting playback at offset: "+b,"INFO");this.seek(b)}this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_METADATA_LOADED)},m=function(){this.log("<video> waiting","INFO");this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_WAITING)},
p=function(){this.log("<video> duration change","INFO");this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_DURATION_CHANGE)},u=function(a){a=this.system.getObject("mediaPlayer");this.log("<video> ended","INFO");this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STOPPED);a.notify(Primetime.MediaPlayerImpl.Events.ENAME_VIRTUAL_TIMELINE_ITEM_COMPLETED_PLAYING)},q=function(a){this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_ERROR,
{error:a.srcElement.error})},t=function(){this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_ADDTRACK)},r=function(){this.notify(Primetime.me.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_REMOVETRACK)},w=function(){if(this.videoModel&&(this.videoModel.unlisten("canplay",this._onCanPlay),this.videoModel.unlisten("play",this._onPlaybackStart),this.videoModel.unlisten("playing",this._onPlaybackPlaying),this.videoModel.unlisten("pause",this._onPlaybackPaused),
this.videoModel.unlisten("error",this._onPlaybackError),this.videoModel.unlisten("seeking",this._onPlaybackSeeking),this.videoModel.unlisten("seeked",this._onPlaybackSeeked),this.videoModel.unlisten("timeupdate",this._onPlaybackTimeUpdated),this.videoModel.unlisten("progress",this._onPlaybackProgress),this.videoModel.unlisten("ratechange",this._onPlaybackRateChanged),this.videoModel.unlisten("loadedmetadata",this._onPlaybackMetaDataLoaded),this.videoModel.unlisten("waiting",this._onPlaybackWaiting),
this.videoModel.unlisten("ended",this._onPlaybackEnded),this.videoModel.unlisten("durationchange",this._onPlaybackDurationChange),this.videoModel.getElement()&&this.videoModel.getElement().textTracks)){var a=this.videoModel.getElement().textTracks;"function"===typeof a.removeEventListener&&(a.removeEventListener("addtrack",this._onPlaybackAddTrack),a.removeEventListener("removetrack",this._onPlaybackRemoveTrack))}};Primetime.me.dependencies.PlaybackController=function(){return{system:void 0,log:void 0,
uriQueryFragModel:void 0,videoModel:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,_streamInfo:void 0,_currentTime:0,_onCanPlay:null,_onPlaybackStart:null,_onPlaybackPlaying:null,_onPlaybackPaused:null,_onPlaybackError:null,_onPlaybackSeeking:null,_onPlaybackSeeked:null,_onPlaybackTimeUpdated:null,_onPlaybackProgress:null,_onPlaybackRateChanged:null,_onPlaybackMetaDataLoaded:null,_onPlaybackWaiting:null,_onPlaybackDurationChange:null,_onPlaybackEnded:null,_onPlaybackAddTrack:null,_onPlaybackRemoveTrack:null,
setup:function(){this._onCanPlay=b.bind(this);this._onPlaybackStart=c.bind(this);this._onPlaybackPlaying=d.bind(this);this._onPlaybackPaused=e.bind(this);this._onPlaybackError=q.bind(this);this._onPlaybackSeeking=f.bind(this);this._onPlaybackSeeked=g.bind(this);this._onPlaybackTimeUpdated=h.bind(this);this._onPlaybackProgress=l.bind(this);this._onPlaybackRateChanged=n.bind(this);this._onPlaybackMetaDataLoaded=k.bind(this);this._onPlaybackWaiting=m.bind(this);this._onPlaybackDurationChange=p.bind(this);
this._onPlaybackEnded=u.bind(this);this._onPlaybackAddTrack=t.bind(this);this._onPlaybackRemoveTrack=r.bind(this)},initialize:function(a){this.videoModel||(this.videoModel=this.system.getObject("videoModel"));this._streamInfo=a;w.call(this);this.videoModel&&(this.videoModel.listen("canplay",this._onCanPlay),this.videoModel.listen("play",this._onPlaybackStart),this.videoModel.listen("playing",this._onPlaybackPlaying),this.videoModel.listen("pause",this._onPlaybackPaused),this.videoModel.listen("error",
this._onPlaybackError),this.videoModel.listen("seeking",this._onPlaybackSeeking),this.videoModel.listen("seeked",this._onPlaybackSeeked),this.videoModel.listen("timeupdate",this._onPlaybackTimeUpdated),this.videoModel.listen("progress",this._onPlaybackProgress),this.videoModel.listen("ratechange",this._onPlaybackRateChanged),this.videoModel.listen("loadedmetadata",this._onPlaybackMetaDataLoaded),this.videoModel.listen("waiting",this._onPlaybackWaiting),this.videoModel.listen("ended",this._onPlaybackEnded),
this.videoModel.listen("durationchange",this._onPlaybackDurationChange),this.videoModel.getElement()&&this.videoModel.getElement().textTracks&&(a=this.videoModel.getElement().textTracks,"function"===typeof a.removeEventListener&&(a.addEventListener("addtrack",this._onPlaybackAddTrack),a.addEventListener("removetrack",this._onPlaybackRemoveTrack))))},getStreamStartTime:a,getTimeToStreamEnd:function(){var b=this.videoModel.getCurrentTime();return a.call(this,this._streamInfo)+this._streamInfo.duration-
b},getStreamId:function(){return this._streamInfo.id},getStreamDuration:function(){return this._streamInfo.duration},getTime:function(){return this.videoModel?this.videoModel.getCurrentTime():0},getPlaybackRate:function(){return this.videoModel.getPlaybackRate()},getPlayedRanges:function(){return this.videoModel.getElement().played},start:function(){this.videoModel.play()},isPaused:function(){return this.videoModel.isPaused()},pause:function(){this.videoModel.pause()},isSeeking:function(){return this.videoModel?
this.videoModel.getElement().seeking:!1},seek:function(a){this.videoModel&&a!==this.getTime()&&(this.log("Do seek: "+a,"INFO"),this.videoModel.setCurrentTime(a))},reset:function(){w.call(this);this._streamInfo=this.videoModel=null;this._currentTime=0}}};Primetime.me.dependencies.PlaybackController.eventList={ENAME_CAN_PLAY:"canPlay",ENAME_PLAYBACK_STARTED:"playbackStarted",ENAME_PLAYBACK_PLAYING:"playbackPlaying",ENAME_PLAYBACK_STOPPED:"playbackStopped",ENAME_PLAYBACK_PAUSED:"playbackPaused",ENAME_PLAYBACK_SEEKING:"playbackSeeking",
ENAME_PLAYBACK_SEEKED:"playbackSeeked",ENAME_PLAYBACK_TIME_UPDATED:"playbackTimeUpdated",ENAME_PLAYBACK_PROGRESS:"playbackProgress",ENAME_PLAYBACK_RATE_CHANGED:"playbackRateChanged",ENAME_PLAYBACK_METADATA_LOADED:"playbackMetaDataLoaded",ENAME_PLAYBACK_WAITING:"playbackWaiting",ENAME_PLAYBACK_ERROR:"playbackError",ENAME_PLAYBACK_DURATION_CHANGE:"playbackDurationChange",ENAME_PLAYBACK_ADDTRACK:"playbackAddTrack",ENAME_PLAYBACK_REMOVETRACK:"playbackRemoveTrack"}})();(function(){var a=function(a){var b=this,e={};e[MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_INIT_REQUEST_COMPLETE]=function(f){for(var g=0,n=!1;g<a.length;){if(f.data.keySystem.schemeIdURI.toLowerCase()===a[g].ks.schemeIdURI){if(f.error){b.log("DRM: Could not download Init data for keysystem : "+a[g].ks.schemeIdURI,"INFO");a.splice(g);continue}else a[g].initDataInfo=f.data.responseData,a[g].initData=f.data.responseData.initData;a[g].ks.unsubscribe(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_INIT_REQUEST_COMPLETE,
e)}else"pending"===a[g].initData&&(n=!0);g++}n||b.selectKeySystem(a,!1)};if(a&&0<a.length){for(var f=0,g=!1,f=0;f<a.length;++f)"pending"===a[f].initData&&(a[f].ks.subscribe(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_INIT_REQUEST_COMPLETE,e),g=!0);g||b.selectKeySystem.call(this,a)}},b=function(b){var d=!!document.createElement("video").canPlayType("video/mp4");this.log("DRM: canPlay "+d,"INFO");this.isProtected=!0;b=this.protectionExt.getSupportedKeySystems(b.data.initData,this.getProtectionData());
0===b.length?this.log("Received needkey event with initData, but we don't support any of the key systems!","INFO"):a.call(this,b)};Primetime.me.dependencies.HlsProtectionController=function(){Primetime.me.dependencies.HlsProtectionController.prototype.baseConstructor.call(this);this.needKeyParentHandler=null;this.setup=function(){Primetime.me.dependencies.HlsProtectionController.prototype.setup.call(this);this.needKeyParentHandler=this[MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY];
this[MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY]=b.bind(this)};this.init=function(){};this.createKeySession=function(a,b,e){if("undefined"!==typeof a&&null!==a){this.protectionModel.getAllInitData();try{this.protectionModel.createKeySession(a,this.sessionType,b,e)}catch(f){this.eventBus.dispatchEvent({type:MediaPlayer.dependencies.ProtectionController.events.KEY_SESSION_CREATED,data:null,error:"Error creating key session! "+f.message})}}else this.eventBus.dispatchEvent({type:MediaPlayer.dependencies.ProtectionController.events.KEY_SESSION_CREATED,
data:null,error:"Selected key system is "+this.keySystem.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!"})};this.getAudioInfo=function(){return null};this.getVideoInfo=function(){var a=new MediaPlayer.vo.MediaInfo;a.mimeType="video/mp4";a.codec=a.mimeType;return a};this.log=void 0};Primetime.me.dependencies.HlsProtectionController.prototype=new Primetime.dependencies.ProtectionController;Primetime.me.dependencies.HlsProtectionController.prototype.baseConstructor=
Primetime.dependencies.ProtectionController.prototype.constructor;Primetime.me.dependencies.HlsProtectionController.prototype.constructor=Primetime.me.dependencies.HlsProtectionController})();Primetime.me.vo.StreamInfo=function(){this.index=this.id=null;this.duration=this.virtualStart=this.start=NaN;this.isMPAd=!1;this.isLast=!0;this.url=null};MediaPlayer.vo.StreamInfo.prototype={constructor:MediaPlayer.vo.StreamInfo};Primetime.me.vo.MediaInfo=function(){this.contentProtection=this.mimeType=this.lang=this.streamInfo=this.type=this.id=null};MediaPlayer.vo.MediaInfo.prototype={constructor:MediaPlayer.vo.MediaInfo};Primetime.me.dependencies.MediaElementMetricsExtensions=function(){return{system:void 0,metricsModel:void 0,getCurrentBufferLevel:function(){var a=this.metricsModel.getReadOnlyMetricsFor("video");if(null===a)return null;a=a.BufferLevel;return null===a||0>=a.length?null:a[a.length-1]},getCurrentDroppedFrames:function(){var a=this.metricsModel.getReadOnlyMetricsFor("video");if(null===a)return null;a=a.DroppedFrames;return null===a||0>=a.length?null:a[a.length-1]},getCurrentBufferState:function(){var a=
this.metricsModel.getReadOnlyMetricsFor("video");if(null===a)return null;a=a.BufferState;return null===a||0>=a.length?null:a[a.length-1]}}};Primetime.me.dependencies.MediaElementMetricsExtensions.prototype={constructor:Primetime.me.dependencies.MediaElementMetricsExtensions};Primetime.me.dependencies.VideoModelExtensions=function(){return{getPlaybackQuality:function(a){var b=null;"getVideoPlaybackQuality"in a?b=a.getVideoPlaybackQuality():(b={creationTime:new Date,droppedVideoFrames:0,totalVideoFrames:0},"webkitDroppedFrameCount"in a&&(b.droppedVideoFrames=a.webkitDroppedFrameCount),"webkitDecodedFrameCount"in a&&(b.totalVideoFrames=a.webkitDecodedFrameCount+b.droppedVideoFrames));return b}}};Primetime.me.dependencies.VideoModelExtensions.prototype={constructor:Primetime.me.dependencies.VideoModelExtensions};Primetime.me.di.CommonContext=function(){return{system:void 0,setup:function(){this.system.autoMapOutlets=!0;this.system.mapSingleton("debug",MediaPlayer.utils.Debug);this.system.mapSingleton("uriQueryFragModel",MediaPlayer.models.URIQueryAndFragmentModel);this.system.mapClass("eventBusCl",MediaPlayer.utils.EventBus);this.system.mapSingleton("notifier",MediaPlayer.dependencies.Notifier);this.system.mapSingleton("streamController",Primetime.me.dependencies.StreamController);this.system.mapClass("stream",
Primetime.me.dependencies.Stream);this.system.mapSingleton("playbackController",Primetime.me.dependencies.PlaybackController);this.system.mapClass("mediaPlayerItemImpl",Primetime.me.dependencies.MediaPlayerItemImpl);this.system.mapSingleton("timelineImpl",Primetime.me.dependencies.TimelineImpl);this.system.mapSingleton("videoModel",Primetime.me.models.VideoModel);this.system.mapSingleton("videoExt",Primetime.me.dependencies.VideoModelExtensions);this.system.mapSingleton("adapter",Primetime.me.dependencies.MediaElementAdapter);
this.system.mapSingleton("errHandler",Primetime.me.dependencies.ErrorHandler);this.system.mapSingleton("metricsModel",Primetime.me.models.MetricsModel);this.system.mapClass("metrics",Primetime.me.models.MetricsList);this.system.mapSingleton("metricsExt",Primetime.me.dependencies.MediaElementMetricsExtensions);this.system.mapSingleton("capabilities",Primetime.utils.Capabilities);this.system.mapSingleton("virtualTimeline",Primetime.VirtualTimeline);this.system.mapSingleton("timelineMonitor",Primetime.TimelineMonitor);
this.system.mapClass("mediaPlayerClient",Primetime.MediaPlayerClient);this.system.mapClass("videoEngineTimeline",Primetime.VideoEngineTimeline);this.system.mapSingleton("id3Controller",Primetime.dependencies.ID3MetadataController);this.system.mapClass("drmManagerImpl",Primetime.dependencies.DRMManagerImpl);this.system.mapClass("protectionController",Primetime.dependencies.ProtectionController);this.system.mapSingleton("protectionExt",Primetime.dependencies.ProtectionExtensions);this.system.mapSingleton("ksPlayReady",
MediaPlayer.dependencies.protection.KeySystem_PlayReady);this.system.mapSingleton("ksWidevine",MediaPlayer.dependencies.protection.KeySystem_Widevine);this.system.mapSingleton("ksClearKey",MediaPlayer.dependencies.protection.KeySystem_ClearKey);this.system.mapSingleton("ksAccess",Primetime.dependencies.protection.KeySystem_Access);this.system.mapSingleton("serverPlayReady",MediaPlayer.dependencies.protection.servers.PlayReady);this.system.mapSingleton("serverWidevine",MediaPlayer.dependencies.protection.servers.Widevine);
this.system.mapSingleton("serverClearKey",MediaPlayer.dependencies.protection.servers.ClearKey);this.system.mapSingleton("serverDRMToday",MediaPlayer.dependencies.protection.servers.DRMToday);this.system.mapSingleton("serverAccess",Primetime.dependencies.protection.servers.Access)}}};Primetime.me.di.CommonContext.getContextInstance=function(a){var b=null;return b=a===AdobePSDK.MediaResourceType.HLS&&Primetime.BrowserExtensions.isSafari()?new Primetime.me.di.HlsContext:new Primetime.me.di.CommonContext};(function(){Primetime.me.dependencies.HlsProtectionExtensions=function(){Primetime.me.dependencies.HlsProtectionExtensions.prototype.baseConstructor.call(this)};Primetime.me.dependencies.HlsProtectionExtensions.prototype=Primetime.helper.extend(Primetime.dependencies.ProtectionExtensions.prototype,{baseConstructor:Primetime.dependencies.ProtectionExtensions.prototype.constructor,constructor:Primetime.me.dependencies.HlsProtectionExtensions,setup:function(){Primetime.dependencies.ProtectionExtensions.prototype.setup.call(this);
var a;a=this.system.getObject("ksFairPlay");this.keySystems.push(a)},getSupportedKeySystemsFromContentProtection:function(){return[]},getSupportedKeySystems:function(a,b){var c=[];if(Primetime.BrowserExtensions.isSafari()){var d=this.getKeySystemBySystemString("com.apple.fps.1_0"),e=null;d&&("undefined"!==typeof b&&null!==b&&(e=d.systemString in b?b[d.systemString]:null),e=d.getInitData(a,e),c.push({ks:d,initDataInfo:e,initData:e.initData}))}return c},getLicenseServer:function(a,b,c){var d=null;"com.apple.fps.1_0"===
a.systemString&&(d=this.system.getObject("serverFairPlay"));d||(d=Primetime.dependencies.ProtectionExtensions.prototype.getLicenseServer.call(this,a,b,c));return d},initDataEquals:function(){return!1}})})();Primetime.me.di.HlsContext=function(){return{system:void 0,debug:void 0,log:void 0,setup:function(){Primetime.me.di.HlsContext.prototype.setup.call(this);var a=document.createElement("video");MediaPlayer.models.ProtectionModel_FairPlay_1_0.detect(a)?this.system.mapClass("protectionModel",MediaPlayer.models.ProtectionModel_FairPlay_1_0):(this.log("No supported version of EME detected on this user agent!","INFO"),this.log("Attempts to play encrypted content will fail!","INFO"));this.system.mapClass("protectionController",
Primetime.me.dependencies.HlsProtectionController);this.system.mapSingleton("protectionExt",Primetime.me.dependencies.HlsProtectionExtensions);this.system.mapSingleton("ksFairPlay",Primetime.dependencies.protection.KeySystem_FairPlay);this.system.mapSingleton("serverFairPlay",Primetime.dependencies.protection.servers.FairPlay)}}};Primetime.me.di.HlsContext.prototype=new Primetime.me.di.CommonContext;Primetime.me.di.HlsContext.prototype.constructor=Primetime.me.di.HlsContext;(function(){Primetime.dependencies.ID3MetadataController=function(){return this};Primetime.dependencies.ID3MetadataController.prototype={constructor:Primetime.dependencies.ID3MetadataController,system:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,_id:0,setup:function(){this.id3Parser=new Primetime.ID3Parser},addMetadata:function(a){var b=[];if("undefined"!==typeof a&&null!==a&&a.length){for(var c=0,d=0,e=0;e<a.length;e++){var f=a[e];f.start?(c<e&&(c=this.makeTimedMetadata(a,c,e,d),null!==
c&&void 0!==c&&b.push(c)),c=e,d=f.data.length):d+=f.data.length}c<a.length&&(c=this.makeTimedMetadata(a,c,a.length,d),null!==c&&void 0!==c&&b.push(c));(a=this.system.getObject("mediaPlayer"))&&a.getCurrentItem().updateID3Metadata(b,a)}},makeTimedMetadata:function(a,b,c,d){d=new Uint8Array(d);for(var e=0,f=b;f<c;f++)d.set(a[f].data,e),e+=a[f].data.length;c=new AdobePSDK.Metadata;if((d=this.id3Parser.parse(d))&&d.length){e=new Uint8Array([73,68,51]);c.setByteArray("_dictionaryType",e);for(e=0;e<d.length;e++)c.setByteArray(d[e].id,
d[e].data);return new AdobePSDK.TimedMetadata(AdobePSDK.TimedMetadataType.ID3,a[b].time,this._id++,"ID3",null,c)}return null}};Primetime.dependencies.ID3MetadataController.eventList={ID3_METADATA_ADDED:"id3MetadataAdded"}})();(function(){Primetime.mse.MediaPlayerClient=function(){Primetime.mse.MediaPlayerClient.prototype.baseConstructor.call(this);return this};Primetime.mse.MediaPlayerClient.prototype=Primetime.helper.extend(Primetime.MediaPlayerClient.prototype,{baseConstructor:Primetime.MediaPlayerClient.prototype.constructor,constructor:Primetime.mse.MediaPlayerClient,log:void 0,registerOpportunity:function(a){this._queuedOpportunities.push(a);var b=a.placement.range,c=this.hold(b);c?this._reservations[a.id]=c:this.log("#registerOpportunity Fail to obtain a reservation at ",
b.begin,"INFO")},unregisterOpportunity:function(a){for(var b=-1,c=0;c<this._queuedOpportunities.length;c++)if(this._queuedOpportunities[c]==a){b=c;break}if(-1!=b){a=a.id;if(c=this._reservations[a])this._reservations[a]=void 0,this._veTimeline.cancel(c);this._queuedOpportunities.splice(b,1)}},update:function(a,b,c){if(0>a)return this.log("#update Ignoring update - method was called with negative time.","INFO"),!1;if(c!=AdobePSDK.MediaPlayerStatus.PLAYING&&c!=AdobePSDK.MediaPlayerStatus.SEEKING)return this.log("#update Specified player status is not supported.",
"INFO"),!1;if(!this._generators)return this.log("#update The list of opportunity generators is invalid. Ignoring the update.","INFO"),!1;var d=this._generators.length;if(0==d)return!0;c==AdobePSDK.MediaPlayerStatus.SEEKING&&(this._minimumOpportunityTime=a);for(c=0;c<d;c++)this._generators[c].updateCallbackFunc(a,b);this._itemIsLive&&(this._minimumOpportunityTime=a,this.notify(Primetime.MediaPlayerClient.eventList.TIMELINE_RESERVATION_LIVE_HOLD_UPDATE,{playbackRange:b}));return!0},timelineReservationLiveHoldUpdated:function(a){a=
a.data.playbackRange;a=a.end>Primetime.MediaPlayerClient.LIVE_HOLD_DELAY?a.end-Primetime.MediaPlayerClient.LIVE_HOLD_DELAY:a.end;a>(this._liveReservation?this._liveReservation.hold:0)&&(a=new AdobePSDK.TimeRange(a,1),a=this.hold(a),this._liveReservation&&this.cancel(this._liveReservation),this._liveReservation=a)}})})();Primetime.dependencies.ErrorHandler=function(){return Primetime.helper.extend(Primetime.dependencies.ErrorHandler.prototype,{system:void 0,mediaKeySessionError:function(a){Primetime.dependencies.ErrorHandler.prototype.mediaKeySessionError.call(this,a);this.system.getObject("mediaPlayer").onMediaKeySessionError(a)}})};Primetime.dependencies.ErrorHandler.prototype=new MediaPlayer.dependencies.ErrorHandler;Primetime.dependencies.ErrorHandler.prototype.baseConstructor=Primetime.dependencies.ErrorHandler.prototype.constructor;
Primetime.dependencies.ErrorHandler.prototype.constructor=Primetime.dependencies.ErrorHandler;Primetime.dependencies.BufferController=function(){var a=!1,b=new MediaPlayer.dependencies.BufferController,c=function(b){if(this.getBuffer()===b.data.buffer&&(this._parentOnRemoved(b),a)){b=this.streamProcessor;var c=b.abrController.getQualityFor(b.getType(),b.getStreamInfo());b.abrController.setPlaybackQuality(b.getType(),b.getStreamInfo(),c);b.abrController.setAutoSwitchBitrate(!0);this.playbackController.seek(this.playbackController.getTime()+.5);a=!1;this.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_INIT_REQUESTED,
{requiredQuality:c})}};return Primetime.helper.extend(b,{_parentOnRemoved:null,setup:function(){b.setup.call(this);a=!1;this._parentOnRemoved=this[MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_REMOVE_COMPLETED];this[MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_REMOVE_COMPLETED]=c;c.bind(this);this.sourceBufferExt.subscribe(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_REMOVE_COMPLETED,this);this[Primetime.dependencies.StreamProcessor.eventList.ENAME_MEDIAINFO_CHANGED]=
this.onMediaInfoChanged},stopListening:function(){},startListening:function(){this.stopListening()},getMediaSource:function(){if(b.getMediaSource)return b.getMediaSource.call(this)},onMediaInfoChanged:function(b){if(b.data.currentMediaInfo!==b.data.newMediaInfo||b.data.forced)b=this.streamProcessor,b.getFragmentModel().abortRequests(),b.getFragmentModel().cancelPendingRequests(),this.sourceBufferExt.removeAll(this.getBuffer(),this.getMediaSource()),b.getFragmentModel().removeAllExecutedRequests(),
this.virtualBuffer.reset(),this.resetCurrentQuality(),this.adapter.setIndexHandlerTime(b,this.playbackController.getTime()),a=!0},reset:function(a){"undefined"!==typeof a&&a||this.streamProcessor&&!this.streamProcessor.ownsSourceBuffer()&&(a=!0);b.reset.call(this,a)}})};
Primetime.dependencies.BufferController.overrideConstants=function(a){MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME=Primetime.defaults.DEFAULT_MIN_BUFFER_TIME/1E3;MediaPlayer.dependencies.BufferController.BUFFER_TIME_AT_TOP_QUALITY=a.playBufferTime/1E3;MediaPlayer.dependencies.BufferController.BUFFER_TIME_AT_TOP_QUALITY_LONG_FORM=Primetime.defaults.BUFFER_TIME_AT_TOP_QUALITY_LONG_FORM/1E3;MediaPlayer.dependencies.BufferController.LONG_FORM_CONTENT_DURATION_THRESHOLD=Primetime.defaults.LONG_FORM_CONTENT_DURATION_THRESHOLD/
1E3};Primetime.dependencies.BufferController.overrideConstants(Primetime.defaults.getBufferControlParameters());Primetime.dependencies.BufferController.updateParameters=function(a){if("undefined"!==typeof a&&null!==a){if(0>a.initialBufferTime||void 0==a.initialBufferTime||0>a.playBufferTime||void 0==a.playBufferTime||a.initialBufferTime>a.playBufferTime)return!1;Primetime.dependencies.BufferController.overrideConstants(a);return!0}};(function(){Primetime.dependencies.AbrController=function(){this.streamController=this.rulesController=this.abrRulesCollection=this.capabilities=this.adapter=this.debug=this.unsubscribe=this.subscribe=this.notify=this.log=this.system=void 0;this.streamProcessorDict={};this.processorCount=0;this.autoSwitchBitrate=!0;this.qualityIndexForInit=-1};Primetime.dependencies.AbrController.prototype={constructor:Primetime.dependencies.AbrController,setup:function(){},initialize:function(){},getAutoSwitchBitrate:function(){return this.autoSwitchBitrate},
setAutoSwitchBitrate:function(a){this.autoSwitchBitrate=a},setInitialBitrateFor:function(){},getInitialBitrateFor:function(){var a,b=this.system.getObject("mediaPlayer");b&&(a=b.getABRControlParameters());if(a)return a.initialBitRate/1E3},setMaxAllowedBitrateFor:function(){},getMaxAllowedBitrateFor:function(){var a,b=this.system.getObject("mediaPlayer");b&&(a=b.getABRControlParameters());if(a)return b.isTrickPlayMode()?a.maxTrickPlayBitRate:a.maxBitRate},getQualityForBitrate:function(a,b){var c=this.system.getObject("mediaPlayer"),
d=a.getMediaInfo(),e=a.getStreamProcessor().getAllRepresentations(),f;c&&(f=c.getABRControlParameters());c=d.representationCount-1;d=1;for(f.abrPolicy===Primetime.dependencies.AbrController.ABRPolicy.ABR_POLICY_MODERATE?d=1.2:f.abrPolicy===Primetime.dependencies.AbrController.ABRPolicy.ABR_POLICY_CONSERVATIVE&&(d=1.5);c&&e[c].bandwidth*d>b;)c--;return c},getIndexForBitrate:function(a,b){for(var c=this.getBitrateList(a),d=c.length,e,f=0;f<d;f+=1)if(e=c[f],1E3*b<=e.bitrate)return f;return d-1},setQualityIndexForInit:function(a){this.qualityIndexForInit=
a},getQualityIndexForInit:function(){return this.qualityIndexForInit},enforceAbrParams:function(a,b,c){var d=this.system.getObject("mediaPlayer"),e;d&&(e=d.getABRControlParameters());if(!d.timeline.isHLS()&&"audio"===c)return a;if(1===b.length)b=0;else{var d=this.system.getObject("mediaPlayer"),f=e.minBitRate,g=e.maxBitRate;"undefined"!==typeof c&&null!==c&&d.isTrickPlayMode()&&(f=e.minTrickPlayBitRate,g=e.maxTrickPlayBitRate);for(0>d.getRate()&&(a=0);0<a&&(b[a].bandwidth>g||void 0!==b[a].blackListed&&
b[a].blackListed);)a--;for(;a+1<b.length&&(b[a].bandwidth<f||void 0!==b[a].blackListed&&b[a].blackListed);)a++;b=a}return b},getBitrateList:function(a){if(!a||!a.bitrateList)return null;var b=a.bitrateList;a=a.type;for(var c=[],d,e=0,f=b.length;e<f;e+=1)d=new MediaPlayer.vo.BitrateInfo,d.mediaType=a,d.qualityIndex=e,d.bitrate=b[e],c.push(d);return c},reset:function(){var a=this.abrRulesCollection.getRules(MediaPlayer.rules.ABRRulesCollection.prototype.QUALITY_SWITCH_RULES),b,c=a.length,d=0;for(d;d<
c;d+=1)b=a[d],"function"===typeof b.reset&&b.reset();this.processorCount=0;this.streamProcessorDict={};this.autoSwitchBitrate=!0;this.setQualityIndexForInit(-1)}};Primetime.dependencies.AbrController.ABRPolicy={ABR_POLICY_CONSERVATIVE:0,ABR_POLICY_MODERATE:1,ABR_POLICY_AGGRESSIVE:2,ABR_POLICY_AUTO_OFF:3};Primetime.dependencies.AbrController.ABANDON_LOAD="abandonload";Primetime.dependencies.AbrController.ALLOW_LOAD="allowload";Primetime.dependencies.AbrController.ABANDON_TIMEOUT=1E4;Primetime.dependencies.AbrController.eventList=
{ENAME_QUALITY_CHANGED:"qualityChanged",ENAME_TOP_QUALITY_INDEX_CHANGED:"topQualityIndexChanged",ENAME_PROCESS_QUALITY_CHANGE:"processQualityChange"}})();(function(){Primetime.dependencies.Timeline=function(){this.timelineView=this.unsubscribe=this.timelineConverter=this.log=this.subscribe=this.notify=this.system=void 0;this.SNAP_THRESHHOLD=2;this.fullDVRWindowGone=!1;this.lastPeriodId=void 0};Primetime.dependencies.Timeline.prototype={constructor:Primetime.dependencies.Timeline,setup:function(){},reset:function(){this.timelineView=void 0;this.setFullDVRWindowGone(!1)},isDynamic:function(a){var b=!1;a.hasOwnProperty("type")&&(b="dynamic"===a.type);
return b},setFullDVRWindowGone:function(a){this.fullDVRWindowGone=a},getFullDVRWindowGone:function(){return this.fullDVRWindowGone},getStreamIndexForId:function(a){for(var b=0,c=this.timelineView.Period_asArray,d=0;d<c.length;d++)if(c[d].id===a){b=d;break}return b},getPeriodForId:function(a){for(var b=null,c=this.timelineView.Period_asArray,d=0;d<c.length;d++)if(c[d].id===a){b=c[d];break}return b},updateLocalStartTimes:function(a){for(var b=null,c=this.isDynamic(a),d=0;d<a.Period_asArray.length;d++)b=
a.Period_asArray[d],b.hasOwnProperty("localStartTime")||this.isDynamic(a)&&!b.isAd||(b.localStartTime=0),c&&!b.isAd&&(b.localStartTime=b.start)},addIndexes:function(a){for(var b=0;b<a.representations.length;b++)a.representations[b].index=b,a.representations[b].period=a},updateManifest:function(a){void 0===this.timelineView||this.isDynamic(a)&&this.getFullDVRWindowGone()?(this.setFullDVRWindowGone(!1),this.timelineConverter.setExpectedLiveEdge(NaN),this.system.getObject("liveEdgeFinder").abortSearch(),
this.addPeriods.call(this,a),this.lastPeriodId=a.Period_asArray[a.Period_asArray.length-1].id,a.representations=void 0,a.renditions=void 0,a.updatedRepIndex=void 0,this.updatePeriodStartTimes(a),this.timelineView=a):this.timelineView!==a&&this.isDynamic(a)&&(a.representations=void 0,a.renditions=void 0,a.updatedRepIndex=void 0)},getManifest:function(){return this.timelineView},clampTime:function(a,b,c){return a<b?b:a>c?c:a},eraseByLocalTime:function(a,b,c){var d=a.localStartTime+a.duration,e=a.localStartTime;
return b>=d||c<e?Primetime.dependencies.MediaErrorCode.kECRangeError:b<=e?(a.duration=d-c,a.start=c,Primetime.dependencies.MediaErrorCode.kECSuccess):c>=d?(a.duration=b-e,Primetime.dependencies.MediaErrorCode.kECSuccess):Primetime.dependencies.MediaErrorCode.kECCannotEraseTimeline},removePeriod:function(a,b,c){var d=this.timelineView.Period_asArray,e=this.isDynamic(this.timelineView),f=this.system.getObject("streamController").getActiveStream(),f=this.getStreamIndexForId(f.getId());if(1>=d.length)return Primetime.dependencies.MediaErrorCode.kECRangeError;
if(f===a)return 0;if(e&&a===d.length-1)return Primetime.dependencies.MediaErrorCode.kECRangeError;0===a&&!c&&1<d.length&&(d[1].start=d[0].start);d.splice(a,1);this.updatePeriodStartTimes();b&&a&&a<d.length&&d[a-1].localStartTime+d[a-1].duration===d[a].localStartTime&&(d[a-1].duration+=d[a].duration,d[a-1].periodEndBehavior=d[a].periodEndBehavior,d.splice(a,1),this.updatePeriodStartTimes());for(a=0;a<d.length;a++)d[a].index=a;return Primetime.dependencies.MediaErrorCode.kECSuccess},split:function(a,
b){var c=this.timelineView.Period_asArray,d=this.splitPeriod(c[a],b);if(!d)return Primetime.dependencies.MediaErrorCode.kECCannotSplitTimeline;d.parent=c[a].id;c[a].parent=d.parent;d.id=d.parent+"_"+d.start;this.timelineView.Period_asArray.splice(a+1,0,d);d.index=a+1;return Primetime.dependencies.MediaErrorCode.kECSuccess},mapLocalTime:function(a){a>Number.MAX_VALUE&&(a=Number.MAX_VALUE);for(var b=-1,c=-1,d=-1,e=-2,f=this.timelineView.Period_asArray[this.timelineView.Period_asArray.length-1].index+
1,g=this.timelineView.Period_asArray[0].index;g<f;g++){var h=this.timelineView.Period_asArray[g];if(null!==h&&!h.isAd){var l=h.localStartTime,h=l+h.duration;if(l>a&&-1===d){if(l<e||-1===c)c=g,e=l}else if(l<=a&&a<h){d=g;e=a;break}else h<=a&&-1===d&&(h>e||-1===b)&&(b=g,e=h)}}-1===d&&(d=-1!==c?c:b);return[d,e]},splitAt:function(a,b){var c=this.mapLocalTime(a),d=c[0];this.split(d,c[1]);c=this.getPeriodInfo(d);d=this.getPeriodInfo(d+1);c.isLast=b;this.notify(Primetime.dependencies.Timeline.eventList.ENAME_TIMELINE_UPDATED,
{manifest:this.timelineView});return[c,d]},insertByLocalTime:function(a,b,c,d,e){var f,g;f=[];if(b){var h=this.timelineView.Period_asArray;if(!(0>a||a>=h.length)){g=h[a];var l=g.localStartTime+g.duration;c=this.clampTime(c,g.localStartTime,l);var n=this.isDynamic(this.timelineView)&&g.isLast,k=this.system.getObject("playbackController"),m=this.system.getObject("streamController").getActiveStream(),k=k.getTime();this.addPeriods(b);this.updatePeriodStartTimes(b);this.updateLocalStartTimes(b);d&&(d=
this.calculateDuration(b.representations[b.updatedRepIndex]));var p=this.getPeriodForId(m.getId()),u=p.index;if(c<=g.localStartTime+this.SNAP_THRESHHOLD){if(this.log("Ad slot inserted as a pre-roll at period: "+a+" Current= "+m.getId(),"INFO"),u===a&&d&&e&&k<d+g.localStartTime){this.log("Live: error: kECRangeSpansReadHead: currTime < replaceDuration + period.localStartTime","INFO");return}}else if(l<=c+(n?0:this.SNAP_THRESHHOLD)){if(n){this.log("Post-roll in live stream not allowed.\n","INFO");return}if(d&&
a===h.length-1){this.log("ReplaceDuration with Post-roll is invalid.","INFO");return}a++;this.log("Ad slot inserted as a post-roll at period "+a+" Current= "+u,"INFO");if(u===a&&d&&e&&k<d+p.localStartTime){this.log("HLSLive: error: kECRangeSpansReadHead: currTime < replaceDuration + period.localStartTime","INFO");return}}else{if(u===a&&d&&e&&k>c){this.log("HLSLive: error: kECRangeSpansReadHead: currTime > insertionTime && currTime < insertionTime + replaceDuration","INFO");return}g=this.split(a,c,
e);if(u>a||u===a&&m.getStreamInfo()&&m.getStreamInfo().start>=c)u+=1;if(g!==Primetime.dependencies.MediaErrorCode.kECSuccess)return;a++}u>=a&&(e||u>a||k&&k>=d)&&this.log("INSERTION BEFORE READ-HEAD","INFO");b=b.Period_asArray;for(c=a;a<h.length;a++)if(h[a].isAd)c++;else break;for(e=0;e<b.length;e++)this.lastPeriodId+=1,b[e].id=this.lastPeriodId,b[e].isAd=!0,h.splice(c++,0,b[e]),f.push(b[e].id);a=c-1;for(e=0;e<h.length;e++)h[e].index=e;g=Primetime.dependencies.MediaErrorCode.kECSuccess;if(d){e=Primetime.dependencies.MediaErrorCode.kECReplacementFailed;
b=d;for(c=a+1;c<h.length&&(h[c].isAd||(e=h[c].localStartTime,m=Math.min(h[c].duration,b),b-=m,this.isDynamic(this.timelineView)&&c+1===h.length&&(h[c].replaceDuration||(h[c].replaceDuration=0),h[c].replaceDuration+=b,b=0),e=this.eraseByLocalTime(h[c],e,e+m),!(0>=b||e!==Primetime.dependencies.MediaErrorCode.kECSuccess)));c++);for(c=a+1;c<h.length;c++)if(0===h[c].duration&&(!this.isDynamic(this.timelineView)||c!==h.length-1)){if(this.removePeriod.call(this,c)!==Primetime.dependencies.MediaErrorCode.kECSuccess){this.log("RemovePeriod failed.",
"INFO");break}c=Math.min(a+1,h.length-1)}b&&b<d&&(e=Primetime.dependencies.MediaErrorCode.kECPartialReplacement);g=e}this.updatePeriodStartTimes(this.timelineView);this.updateLocalStartTimes(this.timelineView);this.timelineView.hasOwnProperty("mediaPresentationDuration")&&this.updateMediaPresentationDuration(this.timelineView);this.notify(Primetime.dependencies.Timeline.eventList.ENAME_TIMELINE_UPDATED,{manifest:this.timelineView});return{periodIds:f,status:g}}}},updateMediaPresentationDuration:function(a){for(var b=
0,c=0;c<a.Period_asArray.length;c++)a.Period_asArray[c].hasOwnProperty("duration")&&(b+=a.Period_asArray[c].duration);a.mediaPresentationDuration=b},insertByVirtualTime:function(a,b,c,d){this.log("inserting mid-roll for live at: "+b,"INFO");for(var e=0;e<this.timelineView.Period_asArray.length;e++)if(b>this.timelineView.Period_asArray[e].start&&this.timelineView.Period_asArray[e].start+this.timelineView.Period_asArray[e].duration>=b){if(this.timelineView.Period_asArray[e].start+this.timelineView.Period_asArray[e].duration<=
b+this.SNAP_THRESHHOLD&&e+1!==this.timelineView.Period_asArray.length){for(e+=1;e<this.timelineView.Period_asArray.length&&this.timelineView.Period_asArray[e].isAd;e++);b=this.timelineView.Period_asArray[e].localStartTime}else if(this.timelineView.Period_asArray[e].isAd){for(e+=1;e<this.timelineView.Period_asArray.length&&this.timelineView.Period_asArray[e].isAd;e++);b=this.timelineView.Period_asArray[e].localStartTime}else b=b-this.timelineView.Period_asArray[e].start+this.timelineView.Period_asArray[e].localStartTime;
return this.insertByLocalTime.call(this,e,a,b,c,d)}return this.insertByLocalTime.call(this,this.timelineView.Period_asArray.length-1,a,Number.MAX_VALUE,c,d)},isFirstLoad:function(a){var b=!1;if(null===this.timelineView||void 0===this.timelineView||this.timelineView.url!==a||this.getFullDVRWindowGone())b=!0;return b},getFirstPeriodIndex:function(){var a=0;this.timelineView.Period_asArray&&this.timelineView.Period_asArray.length&&(a=this.timelineView.Period_asArray[0].index);return a},getLastPeriodIndex:function(){var a=
-1;this.timelineView.Period_asArray&&this.timelineView.Period_asArray.length&&(a=this.timelineView.Period_asArray[this.timelineView.Period_asArray.length-1].index);return a},getCurrentPeriodIndex:function(){var a=this.system.getObject("streamController").getActiveStream();if(null!==a&&void 0!==a)return this.getStreamIndexForId(a.getId())},getPeriodInfo:function(a){if(this.timelineView.Period_asArray&&this.timelineView.Period_asArray.length)return this.timelineView.Period_asArray[a]},getVirtualTimeForPeriod:function(a){var b=
-1,c=null;if(this.timelineView.Period_asArray&&this.timelineView.Period_asArray.length){for(var d=0;d<this.timelineView.Period_asArray.length;d++)if(this.timelineView.Period_asArray[d].id===a){b=d;break}-1!==b&&(a=this.timelineView.Period_asArray[b],c={start:a.start,end:a.start+a.duration})}return c},removePeriodById:function(a,b,c){var d=-1;if(this.timelineView.Period_asArray&&this.timelineView.Period_asArray.length){for(var e=0;e<this.timelineView.Period_asArray.length;e++)if(this.timelineView.Period_asArray[e].id===
a){d=e;break}if(-1!==d){a=this.timelineView.Period_asArray;var e=this.isDynamic(this.timelineView),f=this.system.getObject("streamController").getActiveStream(),f=this.getStreamIndexForId(f.getId());if(1>=a.length||f===d||e&&d==a.length-1)return Primetime.dependencies.MediaErrorCode.kECRangeError;0===d&&!c&&1<a.length&&(a[1].start=a[0].start);a.splice(d,1);this.updatePeriodStartTimes(this.timelineView);b&&d&&d<a.length&&a[d-1].localStartTime+a[d-1].duration===a[d].localStartTime&&(a[d-1].duration+=
a[d].duration,a[d-1].periodEndBehavior=a[d].periodEndBehavior,a.splice(d,1),this.updatePeriodStartTimes(this.timelineView));for(b=0;b<a.length;b++)a[b].index=b;this.notify(Primetime.dependencies.Timeline.eventList.ENAME_TIMELINE_UPDATED,{manifest:this.timelineView});return Primetime.dependencies.MediaErrorCode.kECSuccess}return Primetime.dependencies.MediaErrorCode.kECRangeError}},mapToLocalTime:function(a){if(!this.timelineView.Period_asArray.length)return{time:0,periodIndex:0};if(a<this.timelineView.Period_asArray[0].start)return a=
this.timelineView.Period_asArray[0].start,{time:a,periodIndex:0};for(var b=0;b<this.timelineView.Period_asArray.length;b++)if(a<this.timelineView.Period_asArray[b].start+this.timelineView.Period_asArray[b].duration)return a=this.timelineView.Period_asArray[b].isAd?this.timelineView.Period_asArray[b].localStartTime:a-this.timelineView.Period_asArray[b].start+this.timelineView.Period_asArray[b].localStartTime,{time:a,periodIndex:b};a=this.timelineView.Period_asArray[this.timelineView.Period_asArray.length-
1].start+this.timelineView.Period_asArray[this.timelineView.Period_asArray.length-1].duration;return{time:a,periodIndex:this.timelineView.Period_asArray.length-1}},mapToVirtualTime:function(a,b){b=this.clampTime(b,this.timelineView.Period_asArray[a].localStartTime,this.timelineView.Period_asArray[a].localStartTime+this.timelineView.Period_asArray[a].duration);return this.timelineView.Period_asArray[a].start+(b-this.timelineView.Period_asArray[a].localStartTime)},isComplete:function(){return!this.isDynamic(this.timelineView)},
isHLS:function(){},treatPeriodIndex:function(a){var b=this.timelineView.Period_asArray;a=-1==a?this.getCurrentPeriodIndex():a-this.getFirstPeriodIndex();return 0>a||a>=b.length?-1:a},setPauseAtPeriodEnd:function(a,b){var c=this.timelineView.Period_asArray;a=this.treatPeriodIndex(a);if(-1==a)return AdobePSDK.PSDKErrorCode.kECRangeError;c[a].periodEndBehavior={};c[a].periodEndBehavior.pauseAtPeriodEnd=!0;c[a].periodEndBehavior.userData=b;return AdobePSDK.PSDKErrorCode.kECSuccess},clearPauseAtPeriodEnd:function(a){var b=
this.timelineView.Period_asArray;a=this.treatPeriodIndex(a);if(-1==a)return AdobePSDK.PSDKErrorCode.kECRangeError;b[a].periodEndBehavior.pauseAtPeriodEnd=!1;b[a].periodEndBehavior.userData=null;return AdobePSDK.PSDKErrorCode.kECSuccess},getPeriodEndBehavior:function(a){var b=this.timelineView.Period_asArray;a=this.treatPeriodIndex(a);return-1==a?null:b[a].periodEndBehavior},onDataUpdateCompleted:function(){this.log("OnDataUpdateCompleted","INFO")}};Primetime.dependencies.Timeline.eventList={ENAME_TIMELINE_UPDATED:"manifestUpdated"}})();Primetime.dependencies.SourceBufferExtensions=function(){Primetime.dependencies.SourceBufferExtensions.prototype.baseConstructor.call(this);this.log=void 0;this.createSourceBuffer=function(a,b){this.log("Extensions are working","INFO");return Primetime.dependencies.SourceBufferExtensions.prototype.createSourceBuffer.call(this,a,b)};this.removeAll=function(a,b){var c=this.getAllRanges(a),d=0,e=0;c&&0<c.length&&(d=c.start(0),e=c.end(c.length-1),this.remove(a,d,e,b))};this.updateBufferTimestampOffset=
function(a,b){try{this.waitForUpdateEnd(a,function(){a&&a.timestampOffset!==b&&!isNaN(b)&&(a.timestampOffset=b)}),this.waitForUpdateEnd(a,function(){})}catch(c){}}};Primetime.dependencies.SourceBufferExtensions.prototype=new MediaPlayer.dependencies.SourceBufferExtensions;Primetime.dependencies.SourceBufferExtensions.prototype.baseConstructor=Primetime.dependencies.SourceBufferExtensions.prototype.constructor;Primetime.dependencies.SourceBufferExtensions.prototype.constructor=Primetime.dependencies.SourceBufferExtensions;(function(){Primetime.dependencies.SingleSourceStream=function(){this._streams=[];this._activeStream=null};Primetime.dependencies.SingleSourceStream.prototype={constructor:Primetime.dependencies.SingleSourceStream,addStream:function(a){if("undefined"!==typeof a&&null!==a){for(var b=0;b<this._streams.length;b++)if(a===this._streams[b])return;this._streams.push(a)}},removeStream:function(a){if("undefined"!==typeof a&&null!==a){for(var b=0;b<this._streams.length;b++)if(this._streams[b]===a){this._streams.splice(b,
1);break}this.getActiveStream()&&a.getStreamIndex()===this.getActiveStream().getStreamIndex()&&this.setActiveStream(null)}},setActiveStream:function(a){"undefined"!==typeof a&&(this._activeStream=a)},getActiveStream:function(){return this._activeStream},getLength:function(){return this._streams.length}}})();(function(){Primetime.dependencies.Stream=function(){var a=new MediaPlayer.dependencies.Stream;return Primetime.helper.extend(a,{captionator:void 0,log:void 0,_setRatePending:!1,_playbackRate:null,revTrickPlayTimeoutId:void 0,_revTrickPlayListeners:null,_prevPlaybackRate:null,_currentVideoTrack:null,_lastSeekTime:0,_manifest:null,_initialized:!1,_parentBufferingCompletedHandler:null,_parentOnLoadHandler:null,_captions:!1,_ignoreSeekEvents:!1,setup:function(){a.setup.call(this);this._parentBufferingCompletedHandler=
this.bufferingCompleted;this.bufferingCompleted=this.onBufferingCompleted},activate:function(b,c){a.activate.call(this,b,c);this.getStreamProcessor("text")||!0===this._captions?this.captionator.setHasCaptions(!0):this.captionator.setHasCaptions(!1);this.videoModel.getElement().style.visibility="visible"},deactivate:function(){a.deactivate.call(this);this.captionator.setHasCaptions(!1)},initialize:function(b,c,d,e){"undefined"!==typeof e&&e||(e=this.system.getObject("streamController"))&&e.addStream(this);
this.playbackController.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,this.abrController.abrRulesCollection.bufferLengthBasedRule);this._initialized=!0;a.initialize.call(this,b,c,d);this._manifest=this.manifestModel.getValue()},reload:function(){var a=this.getStreamInfo(),c=this.system.getObject("streamController");c&&c.reload(this,a)},resetIgnoreSeekEvent:function(){this._ignoreSeekEvents=!1},getIgnoreSeekEvent:function(){return this._ignoreSeekEvents},reset:function(b){this.captionator.setHasCaptions(!1);
this._initialized=!1;this._playbackRate=this._manifest=null;this.revTrickPlayTimeoutId=void 0;this._currentVideoTrack=this._prevPlaybackRate=this._revTrickPlayListeners=null;this._lastSeekTime=0;this._ignoreSeekEvents=!1;this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,this.abrController.abrRulesCollection.bufferLengthBasedRule);a.reset.call(this);"undefined"!==typeof b&&b||(b=this.system.getObject("streamController"))&&b.removeStream(this);
this.videoModel&&this.videoModel.getElement().muted&&(this.videoModel.getElement().muted="")},setHasCaptions:function(a){this._captions=a;this.isActivated()&&this.captionator&&this.captionator.setHasCaptions(this._captions)},onBufferingCompleted:function(a){this._parentBufferingCompletedHandler(a);a=this.getStreamProcessors();var c=a.length,d;for(d=0;d<c&&("video"!==a[d].getType()&&"audio"!==a[d].getType()||a[d].isBufferingCompleted());d+=1);},setRate:function(a){0>a&&!Primetime.BrowserExtensions.isChrome()?
this.log("rewind only supported for Chrome","INFO"):(this._prevPlaybackRate=this._playbackRate,this._playbackRate=a,this.system.getObject("mediaPlayer").playbackRateSelected(a),a!==this._prevPlaybackRate&&(this.isActivated()?this.setRateInternal():this._setRatePending=!0))},getRate:function(){return null!==this._playbackRate&&void 0!==this._playbackRate?this._playbackRate:this.videoModel.getPlaybackRate()},isReversePlay:function(){return this.revTrickPlayTimeoutId?!0:!1},clearReversePlay:function(){this.revTrickPlayTimeoutId&&
(clearTimeout(this.revTrickPlayTimeoutId),this.revTrickPlayTimeoutId=void 0);this._revTrickPlayListeners&&(this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKED,this._revTrickPlayListeners),this._revTrickPlayListeners=null,this._lastSeekTime=0)},setRevTrickPlayListeners:function(){var a=this;this._revTrickPlayListeners={playbackSeeked:function(){a.playbackController.isPaused()||a.playbackController.pause();a._lastSeekedTime=a._lastSeekTime}}},
reverseTrickPlay:function(){var a=this.playbackController.getTime();if(.5>a)this.clearReversePlay(),this.playbackController.pause();else if(0>this._playbackRate){this.revTrickPlayTimeoutId||(this._lastSeekedTime=this._newSeekTime=this._lastSeekTime=a,this.setRevTrickPlayListeners(),this.playbackController.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKED,this._revTrickPlayListeners));var c=500/Math.abs(this._playbackRate);this.playbackController.isPaused()||this.playbackController.pause();
a=Math.min(a,this._newSeekTime);this._newSeekTime=a-.5;this._lastSeekedTime===this._lastSeekTime&&(this._lastSeekTime=this._newSeekTime,this.playbackController.seek(this._newSeekTime));this.revTrickPlayTimeoutId=setTimeout(this.reverseTrickPlay.bind(this),c)}else this.clearReversePlay()},setTrickPlayTrack:function(a){var c=this.system.getObject("mediaPlayer");c.setTrackSwitchModeFor("video",MediaPlayer.dependencies.MediaController.trackSwitchModes.ALWAYS_REPLACE);c.setCurrentTrack(a);this._ignoreSeekEvents=
!0},resetTrickPlayTrack:function(){var a=this.system.getObject("mediaPlayer"),c=a.getCurrentTrackFor("video")||a.getCurrentTrackFor("muxed");a.setCurrentTrack(this._currentVideoTrack);return c!==this._currentVideoTrack?!0:!1},setRateInternal:function(){this._setRatePending=!1;var a=this.system.getObject("mediaPlayer"),c=a.getABRControlParameters(),d=this.getStreamProcessor("video")||this.getStreamProcessor("muxed"),e=this.getStreamProcessor("audio")||this.getStreamProcessor("muxed"),f=null,g=null,
h=null,l=null,n=null,k=!1,m=this;if(d){f=d.getBufferController();g=d.getIndexHandler();e&&(h=e.getBufferController(),l=e.getIndexHandler());if(1===this._prevPlaybackRate||null===this._prevPlaybackRate)this._currentVideoTrack=a.getCurrentTrackFor("video")||a.getCurrentTrackFor("muxed");Primetime.BrowserExtensions.isChrome()&&(0>this._playbackRate||this._playbackRate>c.maxPlayoutRate)&&(n=a.getTrickPlayTrackFor(this._currentVideoTrack));if(!n&&0>this._playbackRate)this.log("rewind not supported for non trick play streams",
"INFO");else{this.notify(Primetime.dependencies.Stream.eventList.ENAME_PLAYBACK_RATE_CHANGING,{currentPlaybackRate:this._prevPlaybackRate,newPlaybackRate:this._playbackRate});1==this._playbackRate&&1!==this._prevPlaybackRate?k=this.resetTrickPlayTrack():1!==this._playbackRate&&(n?this.setTrickPlayTrack(n):k=this.resetTrickPlayTrack());if(d=this.getStreamProcessor("video")||this.getStreamProcessor("muxed"))f=d.getBufferController(),g=d.getIndexHandler();if(k){var p={bufferCleared:function(){f.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_CLEARED,
p);m.playbackController.seek(m.playbackController.getTime()+.005)}};f.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_CLEARED,p)}0>this._playbackRate?(g&&f&&(g.setReverseTrickPlay(!0),f.setReverseTrickPlay(!0),d.setIndexHandlerTime(this.playbackController.getTime()+3)),l&&h&&(l.setReverseTrickPlay(!0),h.setReverseTrickPlay(!0)),this.reverseTrickPlay(),a.playbackRateChanged()):(g&&f&&(g.setReverseTrickPlay(!1),f.setReverseTrickPlay(!1)),l&&h&&(l.setReverseTrickPlay(!1),h.setReverseTrickPlay(!1)),
this.clearReversePlay(),this.playbackController.isPaused()&&0>this._prevPlaybackRate&&this.playbackController.start());this.videoModel?(1!=this._playbackRate&&n?this.videoModel.getElement().muted="muted":this.videoModel.getElement().muted="",0<=this._playbackRate?this.videoModel.setPlaybackRate(this._playbackRate):0>this._playbackRate&&this.videoModel.resetPrevRate()):this.log("error setting rate; no video model","INFO")}}},getVideoStreamProcessor:function(){return this.getStreamProcessor("video")},
getAudioStreamProcessor:function(){return this.getStreamProcessor("audio")},getStreamProcessor:function(a){var c=this.getStreamProcessors();if(c&&"undefined"!==typeof a&&null!==a){a="text"!==a?new RegExp(a):/(text|vtt|ttml)/;for(var d=0;d<c.length;d++)if(a.test(c[d].getType()))return c[d]}return null},getFragmentController:function(){return this.fragmentController},getPrevStream:function(){var a=this.system.getObject("streamController");return a?a.getStream(this.getStreamIndex()-1):null},getNextStream:function(){var a=
this.system.getObject("streamController");return a?a.getStream(this.getStreamIndex()+1):null},play:function(){a.play.call(this)},seek:function(b){a.seek.call(this,b)},setEventController:function(b){a.setEventController&&a.setEventController.call(this,b)},getEventController:function(){if(a.getEventController)return a.getEventController.call(this)},mediaSourceInitialized:function(){this._initialized||(this._initialized=!0,a.mediaSourceInitialized&&a.mediaSourceInitialized.call(this))},addStreamProcessor:function(b){if(a.addStreamProcessor)return a.addStreamProcessor.call(this,
b)},setMediaduration:function(a){this.mediaSourceExt.setDuration(this.getMediaSource(),a);this.log("Duration successfully set to: "+a,"INFO")},startBuffering:function(){for(var a=this.getStreamProcessors(),c=0;c<a.length;c++)"text/vtt"!==a[c].getType()&&a[c].startBuffering()},addDVRMetric:function(){for(var a=this.getStreamProcessors(),c=0;c<a.length;c++)a[c].addDVRMetric()}})};Primetime.dependencies.Stream.eventList=Primetime.helper.extend(MediaPlayer.dependencies.Stream.eventList,{ENAME_INIT_BYTES_RECEIVE_COMPLETE:"initBytesReceiveCompleted",
ENAME_PLAYBACK_RATE_CHANGING:"playbackRateChanging"})})();(function(){var a=function(a){if(!this.getActiveStream()||!this.getActiveStream().isReversePlay())if(this.getActiveStream()&&this.getActiveStream().getIgnoreSeekEvent())this.getActiveStream().resetIgnoreSeekEvent();else if(this._parentPlaybackSeekingHandler(a),a=this.system.getObject("mediaPlayer"))a.onPlaybackSeeking()},b=function(){if(!this.getActiveStream()||!this.getActiveStream().isReversePlay()){var a=this.system.getObject("mediaPlayer");if(a)a.onPlaybackSeeked()}},c=function(){if(!this.getActiveStream()||
!this.getActiveStream().isReversePlay()){var a=this.system.getObject("mediaPlayer");if(a)a.onPlaybackStarted()}},d=function(){if(!this.getActiveStream()||!this.getActiveStream().isReversePlay()){var a=this.system.getObject("mediaPlayer");if(a&&(a.onPlaybackPaused(),a._playbackStopped))this.manifestUpdater.onPlaybackStopped()}},e=function(){if(this.getStreams()&&(1===this.getStreams().length||this.getActiveStream().getStreamInfo().isLast)){var a=this.system.getObject("mediaPlayer");if(a)a.onPlaybackStopped()}},
f=function(){var a=this.system.getObject("mediaPlayer");a&&a.playbackRateChanged()},g=function(a){this._parentPlaybackTimeUpdated(a);if((a=this.system.getObject("mediaPlayer"))&&a.getStreamController())a.onPlaybackTimeUpdated()},h=function(a){this.adapter.reset();this._parentManifestUpdatedHandler(a);if(!a.error&&(a=this.system.getObject("mediaPlayer")))a.onManifestUpdated()},l=function(a){if(!a.error&&(a=this.system.getObject("mediaPlayer")))a.onStreamsComposed()},n=function(a){this.system.getObject("mediaPlayer").onStreamUpdated();
this.isUpdating()||this._parentStreamUpdatedHandler(a)};Primetime.dependencies.StreamController=function(){var k=new MediaPlayer.dependencies.StreamController;return Primetime.helper.extend(k,{eventBus:void 0,log:void 0,timeline:void 0,_mediaUrl:null,_setRatePending:!1,_playbackRate:null,_parentPlaybackSeekingHandler:null,_parentManifestLoadedHandler:null,_parentStreamUpdatedHandler:null,_STREAM_BUFFER_END_THRESHOLD:6,setup:function(){k.setup.call(this);this.playbackSeeked=b;this.playbackStarted=
c;this.playbackStopped=e;this.playbackPaused=d;this.playbackRateChanged=f;this._parentPlaybackSeekingHandler=this.playbackSeeking;this.playbackSeeking=a;this._parentPlaybackTimeUpdated=this.playbackTimeUpdated;this.playbackTimeUpdated=g;this._parentManifestUpdatedHandler=this.manifestUpdated;this.manifestUpdated=h;this._parentStreamUpdatedHandler=this.streamUpdated;this.streamUpdated=n},initialize:function(a,b,c){this.playbackController.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED,
this);this.playbackController.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PAUSED,this);this.playbackController.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STOPPED,this);this.playbackController.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKED,this);this.playbackController.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED,this);this[MediaPlayer.dependencies.StreamController.eventList.ENAME_STREAMS_COMPOSED]=
l;this.subscribe(MediaPlayer.dependencies.StreamController.eventList.ENAME_STREAMS_COMPOSED,this);this.timeline.subscribe(Primetime.dependencies.Timeline.eventList.ENAME_TIMELINE_UPDATED,this);k.initialize.call(this,a,b,c)},load:function(a){this._mediaUrl=a;k.load.call(this,a);(a=this.system.getObject("mediaPlayer"))&&a.setStreamController(this)},reload:function(a,b){"undefined"!==typeof a&&null!==a&&(a.reset(!0),this.system.injectInto(a),a.setStreamInfo(b),this.playbackController.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_ERROR,
a),this.playbackController.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_METADATA_LOADED,a),a.initProtection(),a.load(!0))},reset:function(){k.reset.call(this);var a=this.system.getObject("mediaPlayer");a&&a.setStreamController(null);this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED,this);this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PAUSED,this);
this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STOPPED,this);this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKED,this);this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED,this)},addStream:function(){},removeStream:function(){},getActiveStream:function(){var a=k.getActiveStreamInfo.call(this),b=this.getStreams();if(a)for(var c=
0;c<b.length;c++)if(b[c].getStreamInfo().id===a.id)return b[c];return null},addDVRMetric:function(){var a=this.getActiveStream();a&&a.addDVRMetric()},getStreams:function(){return k.getStreams.call(this)},getStream:function(a){if("undefined"===typeof a||null===a)return null;var b=this.getStreams();if(b.length>a)for(var c=0;c<b.length;c++)if(b[c].getStreamIndex()===a)return b[c];return null},getStreamById:function(a){var b=this.getStreams();if(("undefined"===typeof a||null===a)&&1<b.length)return null;
for(var c=0;c<b.length;c++)if(b[c].getId()===a)return b[c];return null},setRate:function(a){this._playbackRate=a;this.setRateOnActiveStream()},getRate:function(){var a=this.getActiveStream();return null===a?void 0:a.getRate()},isPaused:function(){return this.playbackController.isPaused()},setRateOnActiveStream:function(){var a=this.getActiveStream();null===a?this._setRatePending=!0:(this._setRatePending=!1,a.setRate(this._playbackRate))},setHoldAt:function(a){for(var b=this.getStreams(),c=0;c<b.length;c++){var d=
b[c];null==d||void 0==d||d.getStreamInfo().isAd||d.setHoldAt(a)}}})}})();(function(){Primetime.dependencies.StreamProcessor=function(){var a=new MediaPlayer.dependencies.StreamProcessor;return Primetime.helper.extend(a,{system:void 0,subscribe:void 0,log:void 0,unsubscribe:void 0,notify:void 0,_streamObj:void 0,_representationController:null,_ownsSourceBuffer:!0,_mediaSource:void 0,_timedMetadataController:null,setup:function(){a.setup&&a.setup.call(this);this.dataUpdateCompleted=this.onDataUpdateCompleted},onDataUpdateCompleted:function(){},initialize:function(b,c,d,
e,f){this._streamObj=e;this._type=b;this._mediaSource=d;this.abrController.resetForType(this._type);a.initialize.call(this,b,c,d,e,f);c.streamObj=e;this.subscribe(Primetime.dependencies.StreamProcessor.eventList.ENAME_MEDIAINFO_CHANGED,this.bufferController);this.subscribe(Primetime.dependencies.StreamProcessor.eventList.ENAME_MEDIAINFO_CHANGED,this.abrController.abrRulesCollection.bufferLengthBasedRule);this.subscribe(Primetime.dependencies.StreamProcessor.eventList.ENAME_PLAYBACK_RATE_CHANGING,
this.abrController.abrRulesCollection.bufferLengthBasedRule);"text/vtt"===b&&void 0!==this.bufferController[MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADED]&&c.subscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADED,this.bufferController);e.getStreamInfo().manifestInfo.isHls&&(this.representationController.subscribe(Dash.dependencies.RepresentationController.eventList.ENAME_QUALITY_PROCESSED,this.abrController),this.abrController.subscribe(Primetime.dependencies.AbrController.eventList.ENAME_PROCESS_QUALITY_CHANGE,
this.representationController))},reset:function(b){this.unsubscribe(Primetime.dependencies.StreamProcessor.eventList.ENAME_MEDIAINFO_CHANGED,this.bufferController);this.unsubscribe(Primetime.dependencies.StreamProcessor.eventList.ENAME_MEDIAINFO_CHANGED,this.abrController.abrRulesCollection.bufferLengthBasedRule);this.unsubscribe(Primetime.dependencies.StreamProcessor.eventList.ENAME_PLAYBACK_RATE_CHANGING,this.abrController.abrRulesCollection.bufferLengthBasedRule);this._streamObj.getStreamInfo().manifestInfo.isHls&&
(this.representationController.unsubscribe(Dash.dependencies.RepresentationController.eventList.ENAME_QUALITY_PROCESSED,this.abrController),this.abrController.unsubscribe(Primetime.dependencies.AbrController.eventList.ENAME_PROCESS_QUALITY_CHANGE,this.representationController));this.abrController.resetForType(this._type,this);a.reset.call(this,b);this._streamObj=this._representationController=null},setTrackController:function(a){this._representationController=a;this._representationController.subscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,
this)},getStream:function(){return this._streamObj},getIndexHandler:function(){return this.indexHandler},getFragmentController:function(){return this.fragmentController},getBufferController:function(){return this.bufferController},getScheduleController:function(){return this.scheduleController},getPlaybackController:function(){return this.playbackController},hasInitBytes:function(){return this.getStream().usesPrevMediaSource()||!this.getStream().canUsePrevMediaSource()&&this.getFragmentModel()&&this.getFragmentModel().getInitBytes()&&
this.getFragmentModel().getInitBytes().bytes?!0:!1},getTracksList:function(){var a=null,c=this.getFragmentModel();c&&c.getInitBytes()&&(a=c.getInitBytes(),c=this.system.getObject("segmentExt"),c.parseInitSegment(this.getMediaInfo(),a.bytes.buffer),a=c.getTracks());return a},updateMediaInfo:function(b,c){this.system.getObject("abrController").setMaxPlaybackQuality(c.type,c.streamInfo.id,c.representationCount-1);a.updateMediaInfo.call(this,b,c)},switchMediaInfo:function(a,c){if("undefined"!==typeof a&&
null!==a){var d=this.manifestModel.getValue(),e=this.getMediaInfo(),f=null;e&&(e.index!==a||e.name&&e.name!=c)&&(this.getStream().setUpdating(!0),f=this.adapter.getMediaInfoForType(d,this.getStream().getStreamInfo(),this.getType(),a,c),this.updateMediaInfo(d,f),this.notify(Primetime.dependencies.StreamProcessor.eventList.ENAME_MEDIAINFO_CHANGED,{currentMediaInfo:e,newMediaInfo:f}))}},setOwnsSourceBuffer:function(a){"undefined"!==typeof a&&(this._ownsSourceBuffer=a)},ownsSourceBuffer:function(){return this._ownsSourceBuffer},
getCurrentRepresentationInfo:function(){var b=this.manifestModel.getValue();return this.adapter.getCurrentRepresentationInfo(b,this.representationController,a.getType.call(this))},getRepresentationForQuality:function(b){var c=this.manifestModel.getValue();return this.adapter.getRepresentationInfoForQuality(c,this.representationController,b,a.getType.call(this))},getAllRepresentations:function(){this.getStream()||this.log("StreamProcessor: ","INFO");var a=this.manifestModel.getValue();return this.adapter.getTrackInfosforMediaInfo(a,
this.getMediaInfo())},startBuffering:function(){this.scheduleController.startBuffering()},addDVRMetric:function(){this._representationController&&this._representationController.addDVRMetric()}})};Primetime.dependencies.StreamProcessor.eventList={ENAME_MEDIAINFO_CHANGED:"mediaInfoChanged"}})();(function(){Primetime.dependencies.ScheduleController=function(){var a=new MediaPlayer.dependencies.ScheduleController;return Primetime.helper.extend(a,{_parentBytesAppendedHandler:null,_parentBufferLevelUpdatedHandler:null,_parentBufferLevelStateChangedHandler:null,_parentQualityChangedHandler:null,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){a.setup.call(this);this._parentBytesAppendedHandler=this.bytesAppended;this.bytesAppended=this.onBytesAppended;this._parentBufferLevelUpdatedHandler=
this.bufferLevelUpdated;this.bufferLevelUpdated=this.onBufferLevelUpdated;this._parentBufferLevelStateChangedHandler=this.bufferLevelStateChanged;this.bufferLevelStateChanged=this.onBufferLevelStateChanged;this._parentQualityChangedHandler=this.qualityChanged;this.qualityChanged=this.onQualityChanged},onBytesAppended:function(a){isNaN(a.data.index)&&this.notify(Primetime.dependencies.ScheduleController.eventList.ENAME_INIT_BYTES_APPENDED,{quality:a.data.quality});this._parentBytesAppendedHandler(a)},
onBufferLevelUpdated:function(a){this.system.getObject("mediaPlayer").onBufferLevelUpdated(a)},onBufferLevelStateChanged:function(a){var c=this.streamProcessor,d=this.system.getObject("streamController");c&&c.getStream()&&d&&d.isStreamActive(c.getStream().getStreamInfo())&&(this._parentBufferLevelStateChangedHandler(a),this.system.getObject("mediaPlayer").onBufferLevelStateChanged(a.data.hasSufficientBuffer,this.streamProcessor.getType()))},onQualityChanged:function(a){var c=a.data.mediaType,d=a.data.streamInfo,
e=a.data.oldQuality,f=a.data.newQuality;if(this.streamProcessor.getType()===c&&this.streamProcessor.getStreamInfo().id===d.id){if(a.data.confidence===MediaPlayer.rules.SwitchRequest.prototype.STRONG&&f<e){c=this.getFragmentModel().abortRequests();d=this.streamProcessor.getRepresentationForQuality(a.data.newQuality);if(null===d||void 0===d)throw Error("Unexpected error!");var g=c.length,h,l;for(l=0;l<g;l+=1)h=c[l],h=h.startTime+h.duration/2+.1,h=this.adapter.getFragmentRequestForTime(this.streamProcessor,
d,h,{timeThreshold:0}),this.fragmentController.prepareFragmentForLoading(this.getFragmentModel(),h)}this._parentQualityChangedHandler(a);this.system.getObject("mediaPlayer").onQualityChanged(e,f,this.streamProcessor.getType())}}})};Primetime.dependencies.ScheduleController.eventList={ENAME_INIT_BYTES_APPENDED:"initBytesAppended"}})();Primetime.dependencies.MediaController=function(){var a=new MediaPlayer.dependencies.MediaController;return Primetime.helper.extend(a,{resetForStream:function(a,c){var d=this.getTracksFor(a,c);d&&(d.length=0)},isMultiTrackSupportedByType:function(b){return"muxed"===b?!0:a.isMultiTrackSupportedByType(b)},isTracksEqual:function(b,c){if(!a.isTracksEqual(b,c))return!1;var d=void 0===b.name&&void 0===c.name?!0:b.name===c.name;return(void 0===b.isTrickPlayTrack&&void 0===c.isTrickPlayTrack?!0:b.isTrickPlayTrack===
c.isTrickPlayTrack)&&d}})};(function(){Primetime.dependencies.PlaybackController=function(){var a=new MediaPlayer.dependencies.PlaybackController;return Primetime.helper.extend(a,{_isActive:!0,setActive:function(a){"undefined"!==typeof a&&a!==this._isActive&&((this._isActive=a)?this.startListening():this.stopListening())},getActive:function(){return this._isActive},start:function(){this._isActive&&a.start.call(this)},pause:function(){this._isActive&&a.pause.call(this)},seek:function(b){this._isActive&&(b===AdobePSDK.MediaPlayer.LIVE_POINT?
a.getIsDynamic()?a.seek.call(this,a.getLiveStartTime()):a.seek.call(this,0):a.seek.call(this,b))},stopListening:function(){a.stopListening&&a.stopListening.call(this)},startListening:function(){a.startListening&&a.startListening.call(this)}})}})();(function(){var a=function(a){a.data.fromStreamInfo&&this._streamController.getActiveStream()&&(a=this._streamController.getActiveStream().getRate(),(1>a&&0!==a||1<a)&&this._streamController.getActiveStream().setRate(1))},b=function(a){(a.data.toStreamInfo&&(a.data.toStreamInfo.isInlineAd||a.data.toStreamInfo.isAd)||a.data.fromStreamInfo&&(a.data.fromStreamInfo.isInlineAd||a.data.fromStreamInfo.isAd))&&this.getTimelineMonitor().updateContent(a.data.toStreamInfo,null);this.system.getObject("manifestUpdater").onStreamSwitch(a)},
c=function(a){if(!this._isDeactivated){var b=this.baseObject.getMetricsFor(a);a=this.baseObject.getMetricsExt();var c,d,l,n=0,k=0;if(b&&a){c=a.getCurrentRepresentationSwitch(b);d=a.getCurrentBufferLevel(b);var b=a.getCurrentDroppedFrames(b),m=this._streamController.getActiveStreamInfo().index;null!==c&&(l=a.getBandwidthForRepresentation(c.to,m));null!==d&&(n=(1E3*d.level).toPrecision(5));null!==b&&(k=b.droppedFrames);if(isNaN(l)||void 0===l)l=0;if(isNaN(n)||void 0===n)n=0;return{bandwidthValue:l,
bufferLengthValue:n,droppedFramesValue:k}}return null}},d=function(a){var b=null;if(!a.hasOwnProperty("url")||!a.hasOwnProperty("type"))return null;var b=a.url,c=-1,d=a.type;if(d===AdobePSDK.LoadInformationType.MANIFEST)return a.hasOwnProperty("periodIndex")&&(c=parseInt(a.periodIndex)),this.log("Manifest load info parsed for url: "+b+" periodIndex: "+c,"INFO"),b=new AdobePSDK.LoadInformation(AdobePSDK.LoadInformationType.MANIFEST,b,c,0,0,0,null,null,-1);var l=c=0,n=0,k=0;a.hasOwnProperty("sizeBytes")&&
(l=parseInt(a.sizeBytes));a.hasOwnProperty("downloadTime")&&(n=parseInt(a.downloadTime));a.hasOwnProperty("periodIndex")&&(c=parseInt(a.periodIndex));a.hasOwnProperty("mediaDuration")&&(k=parseInt(a.mediaDuration));if(d===AdobePSDK.LoadInformationType.FRAGMENT)return this.log("Video load info parsed for url: "+b+" periodIndex: "+c,"INFO"),b=new AdobePSDK.LoadInformation(AdobePSDK.LoadInformationType.FRAGMENT,b,c,l,k,n,null,null,-1);if(d===AdobePSDK.LoadInformationType.TRACK){var d=0,m="",p="";a.hasOwnProperty("trackIndex")&&
(d=parseInt(a.trackIndex));a.hasOwnProperty("trackName")&&null!==a.trackName&&(m=parseInt(a.trackName));a.hasOwnProperty("trackType")&&(p=parseInt(a.trackType));this.log("Audio load info parsed for url: "+b+" periodIndex: "+c,"INFO");return b=new AdobePSDK.LoadInformation(AdobePSDK.LoadInformationType.TRACK,b,c,l,k,n,m,p,d)}};Primetime.mse.MediaPlayerImpl=function(a){Primetime.mse.MediaPlayerImpl.prototype.baseConstructor.call(this);this.baseObject=new MediaPlayer(a);this.baseObject.setAutoPlay(!1);
this.baseObject.setScheduleControllerStartEnabled(!1);return Primetime.helper.extend(this.baseObject,Primetime.mse.MediaPlayerImpl.prototype,this)};Primetime.mse.MediaPlayerImpl.prototype=Primetime.helper.extend(Primetime.MediaPlayerImpl.prototype,{baseConstructor:Primetime.MediaPlayerImpl.prototype.constructor,constructor:Primetime.mse.MediaPlayerImpl,_initialized:!1,_bufferControlParameters:Primetime.defaults.getBufferControlParameters(),_adMediaResource:null,_didStartReplaceCurrentResource:!1,
_shouldPlayStreamWhenReady:!1,_playOnComposed:!1,_isDeactivated:!1,videoExt:void 0,eventBus:void 0,captionator:void 0,debug:void 0,log:void 0,_qualitySwitchBasedOnPDT:!0,_seekPositionCompletedFunc:null,setup:function(){this._initialized||(this._initialized=!0,this.baseObject.setup.call(this),Primetime.MediaPlayerImpl.prototype.setup.call(this),this.system.mapValue("mediaPlayer",this),this._ssaiController=this.system.getObject("ssaiController"),this.eventBus.addEventListener(MediaPlayer.events.STREAM_SWITCH_STARTED,
a.bind(this)),this.eventBus.addEventListener(MediaPlayer.events.STREAM_SWITCH_COMPLETED,b.bind(this)))},replaceCurrentResource:function(a,b){a.type===AdobePSDK.MediaResourceType.HLS&&(this.baseObject.useSuggestedPresentationDelay(!1),this.baseObject.setLiveDelayFragmentCount(2));this.baseObject.setScheduleWhilePaused(!0);Primetime.MediaPlayerImpl.prototype.replaceCurrentResource.call(this,a,b);this._ssaiController.init()},onProgressUpdate:function(){Primetime.MediaPlayerImpl.prototype.onProgressUpdate.call(this);
if(this.haveCurrentStreamTime())this._ssaiController.onProgressUpdate(this.getCurrentStreamTime())},getSSAIController:function(){return this._ssaiController},startup:function(a,b){Primetime.MediaPlayerImpl.prototype.startup.call(this,a,b);this.baseObject.startup.call(this)},setStreamController:function(a){Primetime.MediaPlayerImpl.prototype.setStreamController.call(this,a)},attachView:function(a){this.baseObject.attachView.call(this,a)},addEventListener:function(a,b,c){this.baseObject.addEventListener.call(this,
a,b,c)},removeEventListener:function(a,b,c){this.baseObject.removeEventListener.call(this,a,b,c)},seekStream:function(a){return Primetime.MediaPlayerImpl.prototype.seekStream.call(this,a)?(this._item&&this._item.isLive()||this.baseObject.seek.call(this,a),!0):!1},liveSeek:function(a){var b=this.getSeekableRange(),c;this._streamController&&this._streamController.getActiveStreamInfo()&&(c=this._streamController.getActiveStreamInfo().manifestInfo);if(b&&b.start+a>=b.end)return this.seekToLivePoint();
c&&0===a&&(a=Math.min(2*c.minBufferTime,c.DVRWindowSize/2));this._seekExpected=a;this.baseObject.seek.call(this,a);return!0},getLiveEdgeTime:function(a){a=a.end-a.start;for(var b=this._streamController.getActiveStream().getStreamProcessors(),c=0,d,l=0;l<b.length;l++)if("muxed"===b[l]._type||"video"===b[l]._type||"audio"===b[l]._type)d=b[l].getCurrentRepresentationInfo().fragmentDuration,c<d&&(c=d);b=this._streamController.playbackController.getLiveDelay(c,a);return a-b},seekToLivePoint:function(){if(this._item&&
this._item.isLive()){var a=this.getPlaybackRange();if(a){var b=this.getLiveEdgeTime(a);this._streamController.playbackController.getTime()-a.start<b&&(this._seekExpected=b,this.baseObject.seek.call(this,b))}}else this._seekExpected=0,this.baseObject.seek.call(this,0);return!0},playStream:function(a){this._isAdOnly?this._didStartReplaceCurrentResource||(this._didStartReplaceCurrentResource=!0,this.replaceCurrentResource(this._adMediaResource,null)):this._isDeactivated&&(this._streamController?(this._isDeactivated=
!1,this.baseObject.setScheduleControllerStartEnabled(!0),this._streamController.activateStreamController(a)):(this.baseObject.attachView(this._view),this.attachSource(this._mediaResource.url,this.getProtectionController(),this.getProtectionController().getProtectionData(),this._mediaResource.type),this._isDeactivated=!1));return null!==this._streamController?(this.playStreamWhenReady(),!0):!1},playStreamWhenReady:function(){this._shouldPlayStreamWhenReady=!0;this.playStreamIfNeeded()},onBufferLevelUpdated:function(){var a=
this;setTimeout(function(){a.playStreamIfNeeded()},0)},playStreamIfNeeded:function(){if(this._shouldPlayStreamWhenReady&&this._isComposed&&this._streamController&&this._streamController.playbackController){if(this._bufferControlParameters){var a=this._streamController.getActiveStream(),b;if(a)for(var c=a.getStreamProcessors(),d=0;d<c.length&&(b=a.getStreamProcessors()[d].getType(),"text/vtt"==b);d++);a=this.getStreamBufferedRange(b);if(a==AdobePSDK.PSDKErrorCode.kECElementNotFound||a.duration<this._bufferControlParameters.initialBufferTime/
1E3)return}this._shouldPlayStreamWhenReady=!1;this._streamController.getActiveStream()&&this._streamController.getActiveStream().getStreamInfo()&&void 0!=this._streamController.getActiveStream().getStreamInfo().seekTimeBeforePlay&&(this._streamController.playbackController.seek(this._streamController.getActiveStream().getStreamInfo().seekTimeBeforePlay),this._streamController.getActiveStream().getStreamInfo().seekTimeBeforePlay=void 0);this._streamController.playbackController.start();return!0}},
isBufferingBeforeInitialPlay:function(){return this._shouldPlayStreamWhenReady},addSource:function(a){return this._isAdOnly?(this._adMediaResource=a,{id:0}):null},addedAdStreamObj:function(){this.getTimelineMonitor().getVirtualTimeline()||this.getTimelineMonitor().setVirtualTimeline(this.getVirtualTimeline())},addVirtualTimelineItem:function(a){if(this._isAdOnly){var b=this;this.baseObject.setScheduleControllerStartEnabled(!0);setTimeout(function(){b._virtualTimeline&&(a.setUpdating(!1),b._virtualTimeline.updateItem(b,
a.getStartTime(),a.getDuration(),a.getStreamInfo()))},0)}},attachSource:function(a,b,c,d){var l=this.system.getObject("manifestExt");this._config?(l.subscribedTags=this._config.subscribeTags,l.adTags=this._config.adTags):(l.subscribedTags=[],l.adTags=[]);Primetime.MediaPlayerImpl.prototype.attachSource.call(this,a,b,c,d);this.baseObject.attachSource.call(this,a,b,c)},getCurrentStreamTime:function(){var a=this.baseObject.time.call(this);return this._item&&this._item.isLive()&&0<this.baseObject.getDVRWindowSize.call(this)?
this.baseObject.getDVRSeekOffset.call(this,a):a},haveCurrentStreamTime:function(){return null!==this.getStreamController()&&null!==this.playbackController&&null!==this.getVideoModel()},getLocalStreamTime:function(){var a=this.baseObject.time.call(this);if(this._delegate&&this._delegate.getTimeline()){var b=this._delegate.getTimeline();b&&(a=b.convertToLocalTime(1E3*a)/1E3)}return a},getStreamPlaybackRange:function(){var a=this.baseObject.getMetricsFor("video")||this.baseObject.getMetricsFor("muxed"),
b=this.baseObject.getMetricsExt(),c=null;return b&&(a&&(c=b.getCurrentDVRInfo(a))||(a=this.baseObject.getMetricsFor("audio"))&&(c=b.getCurrentDVRInfo(a)))?c.range:!1},getBufferControlParameters:function(){return this._bufferControlParameters},setBufferControlParameters:function(a){if("undefined"!==typeof a&&null!==a){var b=Primetime.dependencies.BufferController.updateParameters(a);1==b&&(this._bufferControlParameters=a);return b}},setCCVisibility:function(a){this.captionator&&(a===AdobePSDK.MediaPlayer.VISIBLE?
this.captionator.enableCaptions():this.captionator.disableCaptions())},getPreBuffering:function(){if(this.getStreamController())return this.getStreamController().getPreBuffering()},setPreBuffering:function(a){this.getStreamController()&&this.getStreamController().setPreBuffering(a)},getQualitySwitchBasedOnPDT:function(){return this._qualitySwitchBasedOnPDT},setQualitySwitchBasedOnPDT:function(a){this._qualitySwitchBasedOnPDT=a},setView:function(a){Primetime.MediaPlayerImpl.prototype.setView.call(this,
a);this.captionator&&this.captionator.setModel(a)},setCCStyle:function(a){this.captionator&&this.captionator.setStyling(a)},onStreamUpdated:function(){this.onStreamsComposed()},onStreamsComposed:function(){this._isComposed||this.createOrUpdateVirtualTimelineItems();this.getCurrentItem().update(this.getTimeline());this._delegate&&this._delegate._nativeNotification("streamsComposed");if(this._isComposed&&this._mediaPlayerClient&&this._delegate&&this._delegate._delegate){var a=this._delegate._delegate.playbackRange,
b=this._delegate._delegate.currentTime;if(0>=b){var c=this.getLiveStartTime();isNaN(c)||(b=Math.max(b,c))}this._mediaPlayerClient.update(b,a,this._delegate._delegate.status)}this._isComposed||this._delegate&&(!this.getStreamController()||!this.getStreamController().getActiveStreamInfo()||this.getStreamController().getActiveStreamInfo().isAd||this.getStreamController().getActiveStreamInfo().isMPAd||this.getCurrentItem().isLive()||this._delegate._nativeNotification("initialized"));this._isComposed=
!0;this._playOnComposed&&(this._playOnComposed=!1,this._streamController.playbackController.start())},setLiveStartTime:function(){this._delegate&&this._delegate._nativeNotification("initialized")},onManifestUpdated:function(){this.getCurrentItem()||(this._item=this.system.getObject("mediaPlayerItemImpl"));this._delegate&&this._delegate._nativeNotification("manifestUpdated")},onMediaKeySessionError:function(a){this._delegate&&this._delegate._nativeNotification("drmLicenseError",{license:this._currentLicense,
message:null,errorMessage:a})},onQualityChanged:function(a,b,c){this.getCurrentItem()&&(a=this.getCurrentItem().getProfileForQuality(b,c))&&this._delegate&&this._delegate._nativeNotification("profileChanged",a)},reset:function(){this.baseObject.reset.call(this);this.baseObject.setScheduleControllerStartEnabled(!1);this._adMediaResource=null;this._isDeactivated=this.shouldPlayStreamWhenReady=this._isComposed=this._didStartReplaceCurrentResource=!1;var a=this.system.getObject("parser");a&&a.reset();
this._ssaiController.reset();(a=this.system.getObject("ccDecoder"))&&a.reset();this.captionator&&this._view&&this.captionator.reset(this._view);return Primetime.MediaPlayerImpl.prototype.reset.call(this)},getStreamBufferedRange:function(a){var b=null;"undefined"!==typeof a?b=this.baseObject.getMetricsFor(a):((b=this.baseObject.getMetricsFor("video"))||(b=this.baseObject.getMetricsFor("muxed")),b||(b=this.baseObject.getMetricsFor("audio")));a=this.baseObject.getMetricsExt();return b&&a&&(b=a.getCurrentBufferLevel(b),
a=this.getCurrentStreamTime(),b)?{begin:a,end:a+b.level,duration:b.level}:AdobePSDK.PSDKErrorCode.kECElementNotFound},getCribbedMetrics:function(){var a=c.call(this,"muxed");return{video:c.call(this,"video")||a,audio:c.call(this,"audio")||a}},getStreamAdditionalPlaybackInformationMetrics:function(){var a=this.getStreamBufferedRange();a===AdobePSDK.PSDKErrorCode.kECElementNotFound&&(a={duration:0});return{timeToFirstByte:0,frameRate:this.getFps(),perceivedBandwidth:0,bufferTime:0,bufferLength:a.duration}},
deactivate:function(){this._isDeactivated=!0;if(!this._isAdOnly&&this._streamController){this._streamController.deactivateStreamController();var a=this.system.getObject("abrController");a&&a.reset()}else this.baseObject.reset()},onFirstVirtualTimelineItemActivating:function(a){a.getMediaPlayerImpl()===this&&this.baseObject.setScheduleControllerStartEnabled(!0);Primetime.MediaPlayerImpl.prototype.onFirstVirtualTimelineItemActivating.call(this,a)},getPlaybackQuality:function(){return this.baseObject.getVideoModel()&&
this.baseObject.getVideoModel().getElement()?this.videoExt.getPlaybackQuality(this.baseObject.getVideoModel().getElement()):null},getTrickPlayTrackFor:function(a){var b=this.getTracksFor(a.type),c,d;if(b)for(c=0;c<b.length;c++)if(b[c].isTrickPlayTrack&&b[c].trickPlayAdaptationIds)for(d=0;d<b[c].trickPlayAdaptationIds.length;d++)if(b[c].trickPlayAdaptationIds[d]===a.id)return b[c]},switchTextTrack:function(a){var b={subtitle:"subtitles",caption:"captions"},c=this.system.getObject("textSourceBuffer");
if(c.isFragmented||"application/ttml+xml"===c.sp.getType()){var d=this.system.getObject("textTrackExtensions"),l=0<a.roles.length?b[a.roles[0]]:b.caption,b=l=l!==b.caption||l!==b.subtitle?b.caption:l,l=this.system.getObject("videoModel").getElement();d.switchTrack(l,b,void 0!==a.label?a.label:a.lang,a.lang);c.isFragmented&&c.setTextTrack()}else c.setTextTrack(a)},getVirtualTimeForLocalTime:function(a){var b=this._item,c=this.getTimeline().timeline;if(b&&b.isLive())return a;a/=1E3;for(b=c.getFirstPeriodIndex();b<=
c.getLastPeriodIndex();b++){var d=c.getPeriodInfo(b);if(null!=d){var l=d.localStartTime,n=l+d.duration;if(l<=a&&a<=n&&!d.isAd)return 1E3*(d.start+(a-l))}}return 0},convertToLocalTimeMapping:function(a){if(this._item.isLive())return a;var b=a/1E3;a=-1;var c=b,d=this.getTimeline().timeline;if(!d)return{period:a,time:1E3*c};var l=d.mapToLocalTime(b),b=l.periodIndex;if(0>b)return{period:a,time:1E3*c};var n=l.time+.5,k=d.getPeriodInfo(b);null!=k&&(n<k.localStartTime+k.duration?(a=b,c=l.time):b==d.getLastPeriodIndex()?
(a=b,c=l.time):(d=d.getPeriodInfo(b+1),null!=d&&(a=b+1,c=d.localStartTime)));return{period:a,time:1E3*c}},setHoldAt:function(a){null!==this._streamController&&this._streamController.setHoldAt(a)},getCurrentPlaybackTime:function(a){return 1E3*a.system.getObject("playbackController").getTime()},getLiveStartTime:function(){return this._streamController&&this._streamController.playbackController?1E3*this._streamController.playbackController.getLiveStartTime():AdobePSDK.MediaPlayer.LIVE_POINT},preventSeekAtClientLivePoint:function(a,
b){var c=this.getCurrentPlaybackTime(a);return this._item.isLive()&&b.time==c?!0:!1},adjustSeek:function(a){if(this._item.isLive())return this.actualSeek(a);var b=this.getTimeline().timeline;if(!this.preventSeekAtClientLivePoint(b,a)){var c=a.time,d=a.period;-1!=d?b&&(a=b.getPeriodInfo(d),d=b.mapToVirtualTime(d,a.localStartTime),c=c-1E3*a.localStartTime+1E3*d):b.mapToLocalTime(c/1E3);b&&this.actualSeek(c)}},actualSeek:function(a){var b=this.virtualTimelineManager.getActiveItem();if(!b)return!0;var c=
a;-2!=a&&(c/=1E3);return b._mediaPlayerImpl.seekStream(c)},adjustSeekPositionToSeekableRange:function(a,b){if(a===AdobePSDK.MediaPlayer.LIVE_POINT&&!this._item.isLive())return b.begin;var c=a;this._item.isLive()&&(c=a+b.begin);if(c<b.begin||c>b.end){var d;if(this._item.isLive()){var l=this._streamController.getActiveStreamInfo().manifestInfo;a===AdobePSDK.MediaPlayer.LIVE_POINT?d=b.end:0===a?d=b.begin+Math.min(2*l.minBufferTime,l.DVRWindowSize/2):c>=b.end&&(d=b.end);d-=b.begin}else d=a>b.end?b.end:
b.begin;return d}return a},adjustDesiredSeekPosition:function(a,b){var c=!1;if(a==AdobePSDK.MediaPlayer.LIVE_POINT&&this._item.isLive())return new AdobePSDK.TimeMapping(AdobePSDK.TimeMapping.INVALID_PERIOD,AdobePSDK.MediaPlayer.LIVE_POINT);var d=new AdobePSDK.TimeMapping(AdobePSDK.TimeMapping.INVALID_PERIOD,a);if(this._mediaPlayerClient&&this._mediaPlayerClient._timelineMonitor&&this.getPlaybackMetrics()&&!this._mediaPlayerClient._adPolicyProxy._shouldIgnoreAdBehaviors()){c=!0;this._seekMode=b;var l=
this.getCurrentPlaybackTime(this.getTimeline().timeline);this._seekMode==AdobePSDK.AdPolicyMode.PLAY&&(l=this._initialTrickPlayPosition);this._mediaPlayerClient&&this._mediaPlayerClient._adPolicyProxy.registerSeekOrTrickPlayToTime(d,l,b)}return{desiredSeekPosition:d,changed:c}},seekInternal:function(a,b,c){var d=this._delegate.getStatus(),l=this._delegate.getRate();if(d==AdobePSDK.MediaPlayerStatus.PREPARED||d==AdobePSDK.MediaPlayerStatus.SEEKING||d==AdobePSDK.MediaPlayerStatus.PLAYING||d==AdobePSDK.MediaPlayerStatus.PAUSED||
d==AdobePSDK.MediaPlayerStatus.COMPLETE)if(1==l||0==l||-1==l)return b&&(a=this.getVirtualTimeForLocalTime(a)),b=this._delegate.getSeekableRange(),b=this.adjustSeekPositionToSeekableRange(a,b),0==this.adjustDesiredSeekPosition(b,c).changed&&this.actualSeek(a),!0},seekAdjustCompleted:function(a){this._delegate._eventDispatcher.removeListener(AdobePSDK.MediaPlayer.Events.SeekPositionAdjustedEvent,this._seekPositionCompletedFunc);a=this.convertToLocalTimeMapping(a.actualPosition);var b=!0;this._seekMode==
AdobePSDK.AdPolicyMode.SEEK&&AdobePSDK.MediaPlayerStatus.PAUSED==this._delegate.getStatus()&&(b=!1);this.adjustSeek(a);this._seekMode==AdobePSDK.AdPolicyMode.SEEK?b&&this._delegate.play():(0==this._delegate.getRate()?(this._delegate._delegate._status=AdobePSDK.MediaPlayerStatus.PAUSED,this._delegate.setRate(0)):(this._delegate.play(),this._delegate._delegate._status=AdobePSDK.MediaPlayerStatus.PLAYING,this._delegate.setRate(1)),this._returningFromTrickPlay=!1,this._initialTrickPlayPosition=-1)},seekCommon:function(a,
b){null==this._seekPositionCompletedFunc&&(this._seekPositionCompletedFunc=this.seekAdjustCompleted.bind(this));this._delegate._eventDispatcher.addListener(AdobePSDK.MediaPlayer.Events.SeekPositionAdjustedEvent,this._seekPositionCompletedFunc);return this.seekInternal(a,b,AdobePSDK.AdPolicyMode.SEEK)},seek:function(a){return this.seekCommon(a,!1)},seekToLocal:function(a){return this.seekCommon(a,!0)},timelineUpdating:function(){this.system.getObject("manifestUpdater").pauseRefresh(!0)},timelineUpdated:function(){this.system.getObject("manifestUpdater").pauseRefresh(!1)},
notifyLoadInfo:function(a){(a=d.call(this,a))&&this._delegate&&this._delegate._nativeNotification("loadInformationAvailable",{loadInfo:a})}})})();(function(){var a=function(a){return a.contentDescriptors?a.contentDescriptors.join("-"):a.name?a.name:""},b=function(b,c){var d=this.system.getObject("mediaPlayer"),e=[],f;for(f=0;f<b.length;f++)e=e.concat(d.getTracksFor(b[f]));e.length||(e=d.getTracksFor("fragmentedText"));if(e&&0<e.length){var g=null;for(f=0;f<e.length&&!g;f++){var h;h=e[f];var t=c;h=h.lang===t.language&&a(h)===t.name?!0:!1;h&&(g=e[f])}if(!g)for(f=0;f<e.length&&!g;f++)e[f].index===c._mediaInfoIndex&&(g=e[f]);g||(g=e[0]);g&&("text"===
g.type||"fragmentedText"===g.type||"608"===g.type?d.switchTextTrack(g):d.setCurrentTrack(g))}},c=function(b,c){var d,e,f,g=[],h,t=this.system.getObject("mediaPlayer");if((f=t.getTracksFor("audio"))&&0<f.length){d=0;for(e=f.length;d<e;d++){h=f[d];var r=a(h),w=void 0===h.isAutoSelect?!1:h.isAutoSelect;if(h.roles&&0<h.roles.length)for(var z=0,G=h.roles.length;z<G;z+=1)"main"===h.roles[z]&&(h.isDefault=!0);h=new AdobePSDK.AudioTrack(h.id,h.index,r,h.lang,h.isDefault,w,!1);g.push(h)}1!==g.length||g[0]._default||
(g[0]._default=!0)}this._audioTracks=g;if(!this._selectedAudioTrack){if((e=t.getCurrentTrackFor("audio"))&&this._audioTracks)for(d=0;d<this._audioTracks.length;d++)if(this._audioTracks[d]._mediaInfoIndex===e.index){this._selectedAudioTrack=this._audioTracks[d];break}!this._selectedAudioTrack&&this._audioTracks&&0<this._audioTracks.length&&(this._selectedAudioTrack=this._audioTracks[0])}},d=function(a){var b=null,c=this.getStreamController(),d=null,e=null,f=null;c&&(d=c.getActiveStream());d&&(e=d.getStreamProcessor(a));
e&&(b=e.getCurrentRepresentationInfo());b&&(f=new AdobePSDK.Profile(b.width,b.height,b.bandwidth,void 0,a));return f},e=function(a,b,c,d){var e=null,f=null,g=!1,g=a.isTrickPlayTrack;if((e=b.getABRTrackInfo(c,a.streamInfo.index,a.index))&&0<e.length)for(a=0,b=e.length;a<b;a++)f=new AdobePSDK.Profile(e[a].width,e[a].height,e[a].bandwidth,g,c),d.push(f)},f=function(a,b){var c=[],d=null,d=0,f=this.system.getObject("mediaPlayer"),g=f.getTracksFor(b);if(g)for(d=0;d<g.length;d++)if("video"!==b||!g[d].isTrickPlayTrack){e.call(this,
g[d],a,b,c);"video"===b&&(d=f.getTrickPlayTrackFor(g[d]))&&e.call(this,d,a,b,c);break}return c},g=function(){var a=this.system.getObject("mediaPlayer"),b=null,c=a.getCurrentTrackFor("video")||a.getCurrentTrackFor("muxed");if(!Primetime.BrowserExtensions.isChrome())return!1;c&&(b=c.isTrickPlayTrack?c:a.getTrickPlayTrackFor(c));return b?!0:!1},h=function(){var a=this.getStreamController(),b=null;a&&(b=a.getActiveStreamInfo());return b?b.manifestInfo.isDynamic:!1};Primetime.dependencies.MediaPlayerItemImpl=
function(){Primetime.dependencies.MediaPlayerItemImpl.prototype.baseConstructor.call(this);this._streamInfoIndexUsed=null;this._audioTracks=[];this._closedCaptionsTracks=[];this._selectedClosedCaptionsTrack=this._selectedAudioTrack=null;this._audioProfiles=[];this._videoProfiles=[];this._drmMetadataInfos=[];this._delegate=null;this._resourceType=AdobePSDK.MediaResourceType.UNKNOWN;var a=this;Object.defineProperty(this,"resource",{get:function(){return a.getResource()}})};Primetime.dependencies.MediaPlayerItemImpl.prototype=
Primetime.helper.extend(Primetime.MediaPlayerItemImpl.prototype,{baseConstructor:Primetime.MediaPlayerItemImpl.prototype.constructor,constructor:Primetime.dependencies.MediaPlayerItemImpl,setDelegate:function(a){this._delegate=a;this._resourceType=this.getResource().type},update:function(b){if("undefined"!==typeof b&&null!==b){this._streamInfoIndexUsed=b.getLastMainStreamIndex();c.call(this,b,this._streamInfoIndexUsed);var d,e,g,h=[],u;b.timeline.getManifest();var q=this.system.getObject("mediaPlayer");
g=q.getTracksFor("text");g=g.concat(q.getTracksFor("608"));g.length||(g=q.getTracksFor("fragmentedText"));if(g&&0<g.length){d=0;for(e=g.length;d<e;d++){u=g[d];var t=a(u),r=void 0===u.isAutoSelect?!1:u.isAutoSelect;if(u.roles&&0<u.roles.length)for(var w=0,z=u.roles.length;w<z;w+=1)"main"===u.roles[w]&&(u.isDefault=!0);u=new AdobePSDK.ClosedCaptionsTrack(u.id,u.index,t,u.lang,u.isDefault,r,u.mimeType,!1);h.push(u)}1!==h.length||h[0].isDefault||(h[0].isDefault=!0)}this._closedCaptionsTracks=h;if(!this._selectedClosedCaptionsTrack){(e=
q.getCurrentTrackFor("text"))||(e=q.getCurrentTrackFor("fragmentedText"));e||(e=q.getCurrentTrackFor("608"));if(e&&this._closedCaptionsTracks)for(d=0;d<this._closedCaptionsTracks.length;d++)if(this._closedCaptionsTracks[d]._mediaInfoIndex===e.index){this._selectedClosedCaptionsTrack=this._closedCaptionsTracks[d];break}!this._selectedClosedCaptionsTrack&&this._closedCaptionsTracks&&0<this._closedCaptionsTracks.length&&(this._selectedClosedCaptionsTrack=this._closedCaptionsTracks[0])}d=this.system.getObject("mediaPlayer")._delegate;
d._eventDispatcher.dispatchEvent(new AdobePSDK.MediaPlayerItemEvent(d._currentItem,AdobePSDK.MediaPlayer.Events.CaptionsUpdatedEvent,d._delegate));this._audioProfiles=f.call(this,b,"audio");this._videoProfiles=f.call(this,b,"video");d=this.system.getObject("mediaPlayer");d._isAdOnly||this.updateTimedMetadata(b,d)}},getAudioTracks:function(){c.call(this);return this._audioTracks},getClosedCaptionsTracks:function(){return this._closedCaptionsTracks},getSelectedAudioTrack:function(){return this._selectedAudioTrack},
getSelectedClosedCaptionsTrack:function(){return this._selectedClosedCaptionsTrack},selectAudioTrack:function(a){if("undefined"===typeof a||null===a)return AdobePSDK.PSDKErrorCode.kECInvalidArgument;var c=this.system.getObject("mediaPlayer");if(c&&c.isTrickPlayMode())return AdobePSDK.PSDKErrorCode.kECUnsupportedOperation;var d,e=!1,c=0;for(d=this._audioTracks.length;c<d&&!e;c++)this._audioTracks[c]===a&&(e=!0);e&&(this._selectedAudioTrack=a)&&void 0!==this._streamInfoIndexUsed&&null!==this._streamInfoIndexUsed&&
b.call(this,["audio"],this._selectedAudioTrack)},selectClosedCaptionsTrack:function(a){if("undefined"!==typeof a&&null!==a){var c=this.system.getObject("mediaPlayer");if(!c||!c.isTrickPlayMode()){var d,e=!1,c=0;for(d=this._closedCaptionsTracks.length;c<d&&!e;c++)this._closedCaptionsTracks[c]===a&&(e=!0);e&&(this._selectedClosedCaptionsTrack=a)&&void 0!==this._streamInfoIndexUsed&&null!==this._streamInfoIndexUsed&&b.call(this,["text","608"],this._selectedClosedCaptionsTrack)}}},getProfiles:function(){return this._resourceType===
AdobePSDK.MediaResourceType.HLS?this._videoProfiles.length?this._videoProfiles:this._audioProfiles:this._audioProfiles.concat(this._videoProfiles)},getSelectedProfile:function(){var a=[];a.push(d.call(this,"audio"));a.push(d.call(this,"video"));return a},getProfileForQuality:function(a,b){var c=null,d=this.getStreamController(),e=null,f=null,g=null;d&&(e=d.getActiveStream());e&&(f=e.getStreamProcessor(b));f&&(c=f.getRepresentationForQuality(a));c&&(g=new AdobePSDK.Profile(c.width,c.height,c.bandwidth,
void 0,b));return g},isLive:function(){return h.call(this,"video")||h.call(this,"muxed")},isProtected:function(){var a=this.system.getObject("mediaPlayer");return a?a.getProtectionController().isContentProtected():!1},isDynamic:function(){return this._videoProfiles&&0<this._videoProfiles.length||this._audioProfiles&&0<this._audioProfiles.length?!0:!1},addDRMMetadataInfo:function(a){"undefined"!==typeof a&&null!==a&&this._drmMetadataInfos.push(a)},getDRMMetadataInfos:function(){return this._drmMetadataInfos},
isTrickPlaySupported:function(){var a;var b=this.system.getObject("mediaPlayer");a=this.getStreamController();var c=null,b=b.getCurrentTrackFor("video")||b.getCurrentTrackFor("muxed");a&&(c=a.getActiveStreamInfo());a=b&&!c.isAd?!0:!1;return a},getAvailablePlaybackRates:function(){var a=[];if(this.isTrickPlaySupported()){var b=g.call(this),c=Primetime.defaults.DEFAULT_MAX_PLAYOUT_RATE_TRICKPLAY_STREAM;b||(c=Primetime.defaults.DEFAULT_MAX_PLAYOUT_RATE_WITHOUT_TRICK_PLAY_PROFILES);for(b=128;b>c;)b/=
2;c=b;if(g.call(this)){for(;2<=b;)a.push(-1*b),b/=2;a.push(-.75);a.push(-.5);a.push(-.25)}a.push(0);a.push(.25);a.push(.5);a.push(.75);a.push(1);for(b=2;b<=c;)a.push(b),b*=2}return a},getResource:function(){return this._delegate.resource}})})();(function(){Primetime.dependencies.TimelineImpl=function(){this._delegate=null};Primetime.dependencies.TimelineImpl.prototype={system:void 0,timeline:void 0,adapter:void 0,constructor:Primetime.dependencies.TimelineImpl,setDelegate:function(a){this._delegate=a},getLastMainStreamIndex:function(){var a=this.timeline.getManifest();return this.adapter.getLastMainStreamIndex(a)},getABRTrackInfo:function(a,b,c){var d=this.timeline.getManifest(),e=null,f=null;b=this.adapter.getStreamInfo(d,b);var g=this.system.getObject("mediaController").getDOMSettings("audio"),
h=void 0;null!=g&&void 0!=g&&(h=g.name);b&&(e=this.adapter.getMediaInfoForType(d,b,a,c,h));e&&(f=this.adapter.getTrackInfosforMediaInfo(d,e));return f},reset:function(){this.timeline.reset()}}})();Primetime.dependencies.ManifestModel=function(){var a=new MediaPlayer.models.ManifestModel;return Primetime.helper.extend(a,{system:void 0,timeline:void 0,setup:function(){var a=this.setValue;this.getValue=function(){return this.timeline.getManifest()};this.setValue=function(c){"undefined"!==typeof c&&null!==c&&this.timeline.update(c);c=this.timeline.getManifest();a.call(this,c)}}})};Primetime.dependencies.MediaErrorCode={kECSuccess:0,kECEOF:2,kECRangeError:24,kECInvalidParameter:18,kECReplacementFailed:48,kECRangeSpansReadHead:59,kECPostrollWithLiveNotAllowed:60,kECPartialReplacement:63,kECCannotSplitTimeline:71,kECCannotEraseTimeline:72};Primetime.dependencies.VideoModelExtensions=function(){Primetime.dependencies.VideoModelExtensions.prototype.baseConstructor.call(this)};Primetime.dependencies.VideoModelExtensions.prototype=new MediaPlayer.dependencies.VideoModelExtensions;Primetime.dependencies.VideoModelExtensions.prototype.baseConstructor=Primetime.dependencies.VideoModelExtensions.prototype.constructor;Primetime.dependencies.VideoModelExtensions.prototype.constructor=Primetime.dependencies.VideoModelExtensions;(function(){var a=0,b=function(a){var b;"muxed"===a?b="muxed":"video"===a||"muxed"===a?b="video":("audio"===a||"muxed"===a)&&(b="audio");a=this._fragmentModels.length;for(var c=0;c<a;c++)if(this._fragmentModels[c].getContext().streamProcessor.getType()==b)return this._fragmentModels[c]},c=function(a){if("undefined"!==typeof a&&null!==a)for(var b=0;b<this._fragmentModels.length;b++)if(this._fragmentModels[b]===a)return b;return-1},d=function(a,c,d,f,g){a.data.request.isEncrypted=!1;a.data.response=
f;a.data.request.keyData=g;f=b.call(this,a.data.request.mediaType);void 0!==f&&null!==f&&e.call(this,a,c,d)},e=function(c,e,g){var k=c.data.request,m=c.data.response,p=k.mediaType,u="video"===p||"muxed"===p,q="audio"===p||"muxed"===p,t=new MediaPlayer.vo.Event,r=e?1:k.duration,w=!1;t.type="fragmentLoadingCompleted";t.data={};t.data.request=k;if(1==c.data.request.isEncrypted)this.segmentDecryption.decrypt(m,k.url,k.keyUri,k.IV,k.encryptionMethod,d.bind(this,c,e,g));else{if(k.insertAudio){w=k.audioSampleInfo;
c=Primetime.utils.TSUtils.filterVideo(m);c=new Uint8Array(c);var z=new Uint8Array(w.buffer),w=w.sampleRate*r/1024+a,m=Math.floor(w);a=w-m;for(var w=new Uint8Array(c.length+z.length*m),G=0;G<m;G++)w.set(z,z.length*G);w.set(c,z.length*m);m=w.buffer;w=!0}else a=0;G=e?this.system.getObject("initGenerator"):new Primetime.dependencies.HlsConverter;t.sender=b.call(this,p);var E=0;e||(E=k.MSETimeOffset);z=null;z=b.call(this,p).getContext().streamProcessor;c=z.representationController;z.isDynamic()&&(k.mediaTime=
k.startTime-120);e||"video"!==p&&"audio"!==p||!c||(p=c.getRepresentationForQuality(k.quality),p.audio&&p.video&&(void 0===k.timeOffset&&z.isDynamic()?k.timeOffset=p.audTimeOffset||p.vidTimeOffset:z.isDynamic()||isNaN(p.audTimeOffset)||isNaN(p.vidTimeOffset)||(k.timeOffset=Math.min(p.audTimeOffset,p.vidTimeOffset))));z=G.doWork(k,m,q,u,g,E,this.streamObj,this.seiParser,this.ccDecoder,this.id3Controller,r,w);e&&z?(t.data.request.startTime=z.firstDts,t.data.response=z.buff,m=z.audCodec,g=z.audioSampleInfo,
q="video/mp4",u=r=k.mediaType,p="","muxed"===r?z.vidCodec&&m?p=Hls.defaults.VIDEO_CODEC+","+m:m?(q="audio/mp4",p=m,u="audio"):(q="video/mp4",p=Hls.defaults.VIDEO_CODEC,u="video"):"audio"===r?(q="audio/mp4",p=m):p=Hls.defaults.VIDEO_CODEC,z=k.mediaType,m=k.mediaInfo,m.type=u,m.mimeType=q,m.codecStr=p,m.codec=q+';codecs="'+p+'"',k.mediaInfo=m,q=b.call(this,r).getContext().streamProcessor,z!=u&&q.updateType(u),q.setNewMediaInfo(m,k.quality,g)):z&&(t.data.response=z.buff,k.parsedDuration=z.dur/9E4,k.vidBaseDecodeTime=
z.vidBaseDecodeTime,k.audBaseDecodeTime=z.audBaseDecodeTime,k.timeOffset=z.baseOffset);!e&&k&&c&&c.updateTimeOffsets(k);t.data.fragmentModel=t.sender;f.call(this,t,!0)}},f=function(a,b){var c=a.data.request,d=this.isInitializationRequest(c),e=this.process(a.data.response);if(null===e)this.log("No "+c.mediaType+" bytes to push.","INFO");else{var f=this.system.getObject("isobmffParser");d?(a.sender.setInitBytes({bytes:e,quality:c.quality}),f.parseInitSegment(e.buffer)):"video"!==c.mediaType||b||void 0!==
e&&0<e.byteLength&&f.parseVideoSegment(e.buffer);this._parentFragmentLoadingCompletedHandler(a)}},g=function(a){var c=a.data.request,d=c.extension;if(null!==a.error&&void 0!=a.error)b.call(this,c.mediaType).getContext().streamProcessor.representationController.onSegmentFailed(a);else d===Primetime.MimeTypeUtils.Extension.TS||d===Primetime.MimeTypeUtils.Extension.AAC?(c=this.isInitializationRequest(c),e.call(this,a,c,d)):f.call(this,a)};Primetime.dependencies.FragmentController=function(){var a=new MediaPlayer.dependencies.FragmentController;
return Primetime.helper.extend(a,{_parentFragmentLoadingCompletedHandler:void 0,_parentProcessBytesHandler:void 0,_fragmentModels:[],_executedRequestsList:[],segmentDecryption:void 0,seiParser:void 0,ccDecoder:void 0,id3Controller:void 0,log:void 0,setup:function(){a.setup.call(this);this._parentFragmentLoadingCompletedHandler=this.fragmentLoadingCompleted;this.fragmentLoadingCompleted=g;this._parentProcessBytesHandler=this.process},getModel:function(b){(b=a.getModel.call(this,b))&&-1===c.call(this,
b)&&this._fragmentModels.push(b);return b},detachModel:function(b){var d=c.call(this,b);-1<d&&this._fragmentModels.splice(d,1);a.detachModel.call(this,b)},getFragmentModels:function(){return this._fragmentModels},notifyInitBytes:function(){var a,b=null,c=this.getFragmentModels().length,d=this.getFragmentModels()||[];for(a=0;a<c;a++)(b=d[a].getInitBytes())&&!b.notified&&(b.notified=!0,this.notify(MediaPlayer.dependencies.FragmentController.eventList.ENAME_INIT_FRAGMENT_LOADED,{bytes:b.bytes,quality:b.quality,
fragmentModel:d[a]}))}})}})();Primetime.dependencies.HlsFragmentModel=function(){var a=new Primetime.dependencies.FragmentModel;return Primetime.helper.extend(a,{log:void 0,isFragmentLoaded:function(b){var c=a.getRequests.call(this,{state:MediaPlayer.dependencies.FragmentModel.states.LOADING}),d=a.getRequests.call(this,{state:MediaPlayer.dependencies.FragmentModel.states.EXECUTED}),e=function(a){var c,d=!1,e=a.length,n;for(n=0;n<e;n+=1){c=a[n];var k;if(!(k=b.url===c.url&&b.type===c.type&&b.index===c.index)){k=b;var m=c;k=isNaN(k.index)&&
isNaN(m.index)&&k.quality===m.quality&&k.type===m.type&&k.url===m.url}if(k||"complete"===b.action&&b.action===c.action){d=!0;break}}return d};return e(c)||e(d)}})};Primetime.dependencies.FragmentModel=function(){var a=new MediaPlayer.dependencies.FragmentModel;return Primetime.helper.extend(a,{_initBytes:null,log:void 0,getInitBytes:function(){return this._initBytes},setInitBytes:function(a){this._initBytes=a},isFragmentLoaded:function(b){var c=a.getRequests.call(this,{state:MediaPlayer.dependencies.FragmentModel.states.LOADING}),d=a.getRequests.call(this,{state:MediaPlayer.dependencies.FragmentModel.states.EXECUTED}),e=function(a){var c,d=!1,e=a.length,n;for(n=
0;n<e;n+=1){c=a[n];var k;if(!(k=b.url===c.url&&b.startTime===c.startTime&&b.type===c.type)){k=b;var m=c;k=isNaN(k.index)&&isNaN(m.index)&&k.quality===m.quality&&k.type===m.type&&k.url===m.url}if(k||"complete"===b.action&&b.action===c.action){d=!0;break}}return d};return e(c)||e(d)},removeAllExecutedRequests:function(){var b,c=a.getRequests.call(this,{state:MediaPlayer.dependencies.FragmentModel.states.EXECUTED});if(c&&0<c.length)for(b=0;b<c.length;b++)a.removeExecutedRequest.call(this,c[b])}})};(function(){Primetime.dependencies.SSAIController=function(){var a=[],b=[],c=null,d=null,e=function(a){var b;window.DOMParser?b=(new window.DOMParser).parseFromString(a,"text/xml"):(0===a.indexOf("<?")&&(a=a.substr(a.indexOf("?>")+2)),b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a));return b},f=function(a){var b="";if(a.hasChildNodes)for(var c=0;c<a.childNodes.length;c++)b+=a.childNodes[c].nodeValue.replace(/^\s+|\s+$/g,"").replace(/(\r\n|\n|\r)/gm,"");else b=a.firstChild.nodeValue;
return b},g=function(a){c=new AdobePSDK.AdBreak([],null);d=this.virtualTimeline.registerInlineAdBreak(c,1E3*a)},h=function(a){var b={};a=a.split(",");for(var c=0;c<a.length;c++){var d=a[c].trim(),e=d.indexOf("=");if(-1!=e){var f=d.substring(0,e).trim().toUpperCase(),d=d.substring(e+1);0===d.indexOf('"')&&(d=d.substring(1));-1!==d.indexOf('"',d.length-1)&&(d=d.substring(0,d.length-1));b[f]=d}}return b},l=function(a){a=a.getElementsByTagName("Tracking");for(var b=[],c=0;c<a.length;c++){var d=a[c].attributes.getNamedItem("event").nodeValue.toLowerCase();
if(null===b[d]||void 0===b[d])b[d]=[];b[d].push({action:f(a[c]),actuate:d,method:"get"})}return b},n=function(a){a=a.split(":");return 3600*parseInt(a[0])+60*parseInt(a[1])+parseInt(a[2])},k=function(a,k,m){if(a&&0!==a.length)for(var t=0;t<a.length;t++){var r=a[t];if(0===r.indexOf("#EXT-X-MARKER")){var w=r.indexOf(":");if(-1==w)break;var r=r.substring(w+1).trim(),z=h(r),G=z.TYPE,E;if(-1!==G.toUpperCase().indexOf("BEGIN")){var I=null,r=BASE64.decode(z.DATA),N=e(r),r=!1,L="breakstart",w="breakend";
-1!==G.toUpperCase().indexOf("PODBEGIN")?(g.call(this,k),z.DURATION&&!isNaN(z.DURATION)&&0<z.DURATION&&(E=z.DURATION,r=!0)):-1!==G.toUpperCase().indexOf("ADBEGIN")&&(E=1E3*n(f(N.getElementsByTagName("Duration")[0])),L="adstart",w="adend",I=new AdobePSDK.MediaResource(null,AdobePSDK.MediaResourceType.HLS,null),I=new AdobePSDK.AdAsset(z.ID,E,I,null,null),I=new AdobePSDK.Ad(z.ID,AdobePSDK.AdType.LINEAR,E,!0,I,null,null,"",""),c||g.call(this,k),c.ads.push(I),this.virtualTimeline.registerInlineAd(d,c,
I,m,1E3*k));z=l(N);G=z.breakstart||z.start;N=z.breakend||z.complete;G&&b.push({events:G,time:k,type:L,adbreak:c,ad:I});E&&(L=k+E/4,z.firstquartile&&b.push({events:z.firstquartile,time:L,type:"progress",adbreak:c,ad:I}),L+=E/4,z.midpoint&&b.push({events:z.midpoint,time:L,type:"progress",adbreak:c,ad:I}),L+=E/4,z.thirdquartile&&b.push({events:z.thirdquartile,time:L,type:"progress",adbreak:c,ad:I}),L+=E/4,N&&(w={events:N,time:L,type:w,adbreak:c,ad:I},r&&(c.breakEndEvents=w),b.push(w)));b.sort(function(a,
b){return a.time-b.time})}else-1!==G.toUpperCase().indexOf("PODEND")&&(c&&c.breakEndEvents||(r=BASE64.decode(z.DATA),N=e(r),z=l(N),N=z.breakend,b.push({events:N,time:k,type:"breakend",adbreak:c,ad:null}),b.sort(function(a,b){return a.time-b.time})),d=c=null)}}},m=function(b,c,d,e){if(!(0>c||c>=b.length))for(;c<b.length;c++)b[c].metadata&&0<b[c].metadata.length&&a.push({time:d+b[c].startTime,metadata:b[c].metadata,streamId:e})};return{system:void 0,virtualTimeline:void 0,init:function(){a=[];b=[];
d=c=null},reset:function(){a=[];b=[];d=c=null},updateRepresentation:function(b,c,d){d=a.length;var e=b.period.start;b=b.period.id;if(0==a.length)m(c,0,e,b);else{var f;b:{for(f=0;f<c.length;f++)if(c[f].startTime>a[a.length-1].time-e)break b;f=-1}m(c,f,e,b)}if(a.length>d)for(c=d;c<a.length;c++)d=a[c],k.call(this,d.metadata,d.time,d.streamId)},onProgressUpdate:function(a){if(b)for(;0<b.length;){var c=b[0];if(c.time<=a){if(b.splice(0,1),c=c.events)for(var d=0;d<c.length;d++){var e=c[d].action;e&&((new Image).src=
e)}}else break}}}};Primetime.dependencies.SSAIController.prototype={constructor:Primetime.dependencies.SSAIController}})();Primetime.dependencies.CustomTextSourceBuffer=function(){var a=new MediaPlayer.dependencies.TextSourceBuffer;return Primetime.helper.extend(a,{adapter:void 0,captionator:void 0,eventBus:void 0,initialize:function(b,c){a.initialize.call(this,b,c)},append:function(b,c){var d={},e=c.mediaInfo,f=e.type;try{if("fragmentedText"===f||"application/ttml+xml"===e.mimeType)a.append.call(this,b,c);else{var g=UTF8.decode(new Uint8Array(b));d.mimeType=e.mimeType;d.lang=e.lang;d.label=e.name;var h;f=!1;e.streamInfo.manifestInfo.isHls&&
(f=!0);h=f?e.isDefault:e.index===this.mediaInfos[0].index;d.isDefault=h;this.captionator.captionify(g,d)}this.eventBus.dispatchEvent({type:"updateend"})}catch(l){this.errHandler.closedCaptionsError(l,"parse",g)}},appendBuffer:function(a,c){return this.append(a,c)},setTextTrack:function(b){this.isFragmented?a.setTextTrack.call(this):this.captionator.switchTrack(this.videoModel.getElement(),b.lang,b.name)}})};Primetime.dependencies.TextTrackExtensions=function(){Primetime.dependencies.TextTrackExtensions.prototype.baseConstructor.call(this);this.switchTrack=function(a,b,c,d){if("undefined"!==typeof a&&null!==a&&a.textTracks){var e;for(e=0;e<a.textTracks.length;e++)a.textTracks[e].kind===b&&a.textTracks[e].label===c&&a.textTracks[e].language===d?"showing"!==a.textTracks[e].mode&&(a.textTracks[e].mode="showing"):"showing"===a.textTracks[e].mode&&(a.textTracks[e].mode="hidden")}}};
Primetime.dependencies.TextTrackExtensions.prototype=new MediaPlayer.utils.TextTrackExtensions;Primetime.dependencies.TextTrackExtensions.prototype.baseConstructor=Primetime.dependencies.TextTrackExtensions.prototype.constructor;Primetime.dependencies.TextTrackExtensions.prototype.constructor=Primetime.dependencies.TextTrackExtensions;var captionator=function(){var a=10,b=a,c=16,d=4.5,e=1.3,f=[0,0,0,.5],g=!1,h=[255,255,255,.5],l="initial",n="initial",k="monospace, sans-serif;monospace, serif;serif;monospace, sans-serif;casual;cursive".split(";"),m,p,u=0,q=0,t=!0,r=!1,w=[[0,0,0,.5],[128,128,128,.5],[200,200,200,.5],[255,255,255,.5],[128,0,0,.5],[200,0,0,.5],[255,0,0,.5],[0,128,0,.5],[0,200,0,.5],[0,255,0,.5],[0,0,128,.5],[0,0,200,.5],[0,0,255,.5],[128,128,0,.5],[200,200,0,.5],[255,255,0,.5],[128,0,128,.5],[200,0,200,.5],[255,0,
255,.5],[0,128,128,.5],[0,200,200,.5],[0,255,255,.5],[224,255,255,.5]],z=[[0,0,0,.5],[0,0,0,.5],[128,128,128,.5],[255,255,255,.5],[255,255,255,.5],[139,0,0,.5],[255,0,0,.5],[205,92,92,.5],[0,100,0,.5],[0,128,0,.5],[144,238,144,.5],[0,0,139,.5],[0,0,255,.5],[135,206,250,.5],[255,215,0,.5],[255,255,0,.5],[240,230,140,.5],[139,0,139,.5],[255,0,255,.5],[186,85,211,.5],[0,139,139,.5],[0,255,255,.5],[224,255,255,.5]],G,E,I,N=function(){return Primetime&&Primetime.DOMHelper&&!0===Primetime.DOMHelper.isFullscreen()},
L=function(a){a=a.linePosition;!1===N()&&(a=10+65*(a-10)/80);return a},x=function(){var a=y.base.streamController;return t&&a&&a.getActiveStreamInfo()&&(void 0===a.getActiveStreamInfo().isAd||!a.getActiveStreamInfo().isAd)&&(void 0===a.getActiveStreamInfo().isInlineAd||!a.getActiveStreamInfo().isInlineAd)},A=function(a){if(isNaN(a))return a;var b=y.base.timeline;return b&&b.mapToLocalTime?b.mapToLocalTime(a).time:a},H=function(a){var b=[],c,d;if(0!=a.length)for(var e=0;e<a.length;e++)if(c=a[e],void 0==
c.invalid){for(var f=e+1;f<a.length;f++)d=a[f],d.startTime===c.startTime&&d.endTime===c.endTime&&d.text.cueSource.replace(/^\s+|\s+$/g,"")===c.text.cueSource.replace(/^\s+|\s+$/g,"")&&d.styleData===c.styleData&&(d.invalid=!0);b.push(c)}return b},y={initializeCuesClearedTillTime:function(){var a=y.base.metricsModel,b=y.base.metricsExt,a=a.getReadOnlyMetricsFor("video")||a.getReadOnlyMetricsFor("audio")||a.getReadOnlyMetricsFor("muxed"),b=b.getCurrentDVRInfo(a),a=0;b&&(a=b.range.start);return a},cuesClearedTillTime:void 0,
setHasCaptions:function(a){r=a;if(!r&&0<document.getElementsByClassName("captionator-cue").length)for(a=0;a<document.getElementsByClassName("captionator-cue").length;a++)document.getElementsByClassName("captionator-cue")[a].innerHTML="",document.getElementsByClassName("captionator-cue")[a].style.display="none"},enableCaptions:function(){t=!0},disableCaptions:function(){t=!1;if(0<document.getElementsByClassName("captionator-cue").length)for(var a=0;a<document.getElementsByClassName("captionator-cue").length;a++)document.getElementsByClassName("captionator-cue")[a].innerHTML=
"",document.getElementsByClassName("captionator-cue")[a].style.display="none"},setModel:function(a){p=a},switchTrack:function(a,b,c){a=a.tracks||[];for(var d=0;d<a.length;d++){var e=a[d];if(e.language===b&&e.label===c){if(e.mode!==y.TextTrack.SHOWING){e.mode=y.TextTrack.SHOWING;var f=e.videoNode._captionatorOptions||{};e.readyState!==y.TextTrack.ERROR&&e.cueSource&&(f=y.parseCaptions(e.cueSource,f),e.cues.loadCues(f));e.cueSource=""}}else e.mode!==y.TextTrack.HIDDEN&&(e.mode=y.TextTrack.HIDDEN)}},
setStyling:function(a){m=a;void 0!==m&&null!==m&&(null!==m.fontColor&&-1<m.fontColor&&m.fontColor<w.length&&(h=w[m.fontColor]),m.size&&(q=5*(m.size-1)),null!==m.backgroundColor&&-1<m.backgroundColor&&m.backgroundColor<z.length&&(f=z[m.backgroundColor]),m.fontOpacity&&0<=m.fontOpacity&&100>=m.fontOpacity&&(h[3]=1*m.fontOpacity/100),m.backgroundOpacity&&0<=m.backgroundOpacity&&100>=m.backgroundOpacity&&(f[3]=1*m.backgroundOpacity/100),null!==m.font&&(m.font<k.length?l=k[m.font]:n="small-caps"))},setCaptionCheck:function(){},
createDOMException:function(a,b,c){try{document.querySelectorAll("div/[]")}catch(d){var e=function(a,b,c){this.code=a;this.message=b;this.name=c};e.prototype=d;return new e(a,b,c)}},compareArray:function(a,b){if(!(a instanceof Array&&b instanceof Array)||a.length!==b.length)return!1;for(var c in a)if(a.hasOwnProperty(c)&&a[c]!==b[c])return!1;return!0},generateID:function(a){var b="";for(a=a?a:10;b.length<a;)b+=String.fromCharCode(65+Math.floor(26*Math.random()));return b},deleteInvalidCues:function(a){if(!(0>
a)&&p&&p.tracks){a/=1E3;for(var b=0;b<p.tracks.length;b++)"text/608"===p.tracks[b].type&&p.tracks[b].cues.deleteInvalidCues(a)}},captionify:function(b,k){void 0===y.cuesClearedTillTime&&(y.cuesClearedTillTime=y.initializeCuesClearedTillTime());k=k instanceof Object?k:{};k.appendCueCanvasTo=p.parentElement;k.minimumFontSize&&"number"===typeof k.minimumFontSize&&(a=k.minimumFontSize);k.minimumLineHeight&&"number"===typeof k.minimumLineHeight&&(c=k.minimumLineHeight);k.fontSizeVerticalPercentage&&"number"===
typeof k.fontSizeVerticalPercentage&&(d=k.fontSizeVerticalPercentage);k.lineHeightRatio&&"number"!==typeof k.lineHeightRatio&&(e=k.lineHeightRatio);k.cueBackgroundColour&&k.cueBackgroundColour instanceof Array&&(f=k.cueBackgroundColour);if(!HTMLVideoElement)return!1;g||(y.TextTrack=function(a,b,c,d,e,f,g,k){this.onload=function(){};this.onerror=function(){};this.oncuechange=function(){};this.id=a||"";this.type=f;this.cuesCount=0;this.cues=new y.TextTrackCueList(this);this.activeCues=new y.ActiveTextTrackCueList(this.cues,
this);this.kind=b||"subtitles";this.label=c||"";this.language=d||"";this.src=e||"";this.readyState=y.TextTrack.NONE;this.internalMode=(this.internalDefault=g||!1)?y.TextTrack.SHOWING:y.TextTrack.OFF;this.getMode=function(){return this.internalMode};this.setMode=function(a){if(-1!==[y.TextTrack.OFF,y.TextTrack.HIDDEN,y.TextTrack.SHOWING].indexOf(a))a!==this.internalMode&&(this.internalMode=a);else throw Error("Illegal mode value for track: "+a);};this.getDefault=function(){return this.internalDefault};
Object.prototype.__defineGetter__?(this.__defineGetter__("mode",this.getMode),this.__defineSetter__("mode",this.setMode),this.__defineGetter__("default",this.getDefault)):Object.defineProperty&&(Object.defineProperty(this,"mode",{get:this.getMode,set:this.setMode}),Object.defineProperty(this,"default",{get:this.getDefault}))},y.TextTrack.NONE=0,y.TextTrack.LOADING=1,y.TextTrack.LOADED=2,y.TextTrack.ERROR=3,y.TextTrack.OFF=0,y.TextTrack.HIDDEN=1,y.TextTrack.SHOWING=2,y.TextTrackCueList=function(a){this.mapping=
[];this.track=a instanceof y.TextTrack?a:null;this.getCueById=function(a){return this.filter(function(b){return b.id===a})[0]};this.loadCues=function(a){for(var b=0;b<a.length;b++)a[b].track=this.track,void 0===a[b].id&&(a[b].id=this.track.cuesCount),this.track.cuesCount+=1,this.addCueToMapping(a[b])};this.addCueToMapping=function(a){for(var b=Math.floor(a.endTime),c=Math.floor(a.startTime);c<=b;c++)this.mapping[c]||(this.mapping[c]=[]),this.mapping[c].push(a)};this.removeCues=function(a,b){a=Math.floor(a);
b=Math.floor(b);for(var c=a;c<b;c++)this.mapping[c]=void 0};this.toString=function(){return"[TextTrackCueList]"};this.deleteInvalidCues=function(a){for(a=Math.floor(a);a<this.mapping.length;++a)this.mapping[a]=void 0}},y.TextTrackCueList.prototype=[],y.ActiveTextTrackCueList=function(a,b,c){this.refreshCues=function(b){if(void 0!==b){this.length=0;b=A(b);var c=a.mapping[Math.floor(b)];if(c)for(var d=0;d<c.length;d++)b=c[d],b.active&&this.push(b)}};this.toString=function(){return"[ActiveTextTrackCueList]"};
this.refreshCues(c)},y.ActiveTextTrackCueList.prototype=new y.TextTrackCueList(null),y.TextTrackCue=function(a,b,c,d,e,f,g){this.id=a;this.track=g instanceof y.TextTrack?g:null;this.startTime=parseFloat(b);this.endTime=parseFloat(c);this.text="string"===typeof d||d instanceof y.CaptionatorCueStructure?d:"";this.settings="string"===typeof e?e:"";this.intSettings={};this.pauseOnExit=!!f;this.wasActive=!1;this.direction="horizontal";this.snapToLines=!0;this.linePosition="auto";this.textPosition=50;this.size=
0;this.alignment="middle";if(this.settings.length){var k=this.intSettings,h=this;e=e.split(/\s+/).filter(function(a){return 0<a.length});if(e instanceof Array){var m=this;e.forEach(function(a){var b={D:"direction",line:"linePosition",position:"textPosition",align:"alignment",size:"size"};a=a.split(":");"position"===a[0]&&(m.alignment="start");b[a[0]]&&(k[b[a[0]]]=a[1]);b[a[0]]in h&&(h[b[a[0]]]=a[1])})}}this.linePosition.match(/\%/)&&(this.snapToLines=!1);this.getCueAsSource=function(){return String(this.text)};
this.getCueAsHTML=function(){var a=document.createDocumentFragment(),b=document.createElement("div");b.innerHTML=String(this.text);Array.prototype.forEach.call(b.childNodes,function(b){a.appendChild(b.cloneNode(!0))});return a};this.isActive=function(){var a=0;if(this.track instanceof y.TextTrack)try{if(a=A(this.track.videoNode.currentTime),this.startTime<=a&&this.endTime>=a)return!0}catch(b){}return!1};Object.prototype.__defineGetter__?this.__defineGetter__("active",this.isActive):Object.defineProperty&&
Object.defineProperty(this,"active",{get:this.isActive});this.toString=function(){return"TextTrackCue:"+this.id+"\n"+String(this.text)};this.onenter=function(){};this.onexit=function(){}},y.CaptionatorCueStructure=function(a,b){var c=this;this.isTimeDependent=!1;this.cueSource=a;this.options=b;this.processedCue=null;this.toString=function(d){if(!1!==b.processCueHTML){var e=function(a,b){if(null===c.processedCue){var f="",g,k;for(g in a)if(g.match(/^\d+$/)&&a.hasOwnProperty(g))if(k=a[g],k instanceof
Object&&k.children&&k.children.length)if("v"===k.token)f+='<q data-voice="'+k.voice.replace(/[\"]/g,"")+"\" class='voice speaker-"+k.voice.replace(/[^a-z0-9]+/ig,"-").toLowerCase()+"' title=\""+k.voice.replace(/[\"]/g,"")+'">'+e(k.children,b+1)+"</q>";else if("c"===k.token)f+="<span class='webvtt-class-span'>"+e(k.children,b+1)+"</span>";else if(0<k.timeIn){if(null===d||void 0===d||0<d&&d>=k.timeIn)f+="<span class='webvtt-timestamp-span' data-timestamp='"+k.token+"' data-timestamp-seconds='"+k.timeIn+
"'>"+e(k.children,b+1)+"</span>"}else f+=k.rawToken+e(k.children,b+1)+"</"+k.token+">";else if(k instanceof String||"string"===typeof k||"number"===typeof k)f+=k;c.isTimeDependent||0!==b||(c.processedCue=f);return f}return c.processedCue};return e(this,0)}return a}},y.CaptionatorCueStructure.prototype=[],k.exportObjects&&(window.TextTrack=y.TextTrack,window.TextTrackCueList=y.TextTrackCueList,window.ActiveTextTrackCueList=y.ActiveTextTrackCueList,window.TextTrackCue=y.TextTrackCue,window.MediaTrack=
y.MediaTrack),g=!0);G=p.addTextTrack;p.addTextTrack=function(a,c,d,e,f,g,k){var h="subtitles captions descriptions captions metadata chapters karaoke lyrics tickertext audiodescription commentary alternate signlanguage".split(" "),m=h.slice(0,7);a="string"===typeof a?a:"";d="string"===typeof d?d:"";e="string"===typeof e?e:"";k="boolean"===typeof k?k:!1;if(!h.filter(function(a){return c===a?!0:!1}).length)throw y.createDOMException(12,"DOMException 12: SYNTAX_ERR: You must use a valid kind when creating a TimedTextTrack.",
"SYNTAX_ERR");if(m.filter(function(a){return c===a?!0:!1}).length){if(a=new y.TextTrack(a,c,d,e,f,g,k,b))return p.tracks instanceof Array||(p.tracks=[]),p.tracks.push(a),a}else if(a=new y.MediaTrack(a,c,d,e,f,g,k))return p.mediaTracks instanceof Array||(p.mediaTracks=[]),p.mediaTracks.push(a),a;return!1};y.processVideoElement(p,b,k)},processVideoElement:function(a,b,c){c=c instanceof Object?c:{};for(var d=c.lang?c.lang:"",e=c.label?c.label:"",f=c.mimeType?c.mimeType:"",g=void 0!=c.isDefault?c.isDefault:
!0,k=!1,h,m=0;a.tracks&&m<a.tracks.length;m++)if(a.tracks[m].id===d+e+f){h=a.tracks[m];k=!0;break}if(!k&&c.is608){for(m=0;a.tracks&&m<a.tracks.length;m++)if(a.tracks[m].default){g=!1;break}y.base.timeline.getManifest().has608=!0;var m=y.base.streamController.getActiveStream(),l=(m.getStreamProcessor("video")||m.getStreamProcessor("muxed")||m.getStreamProcessor("audio")).getMediaSource();m.add608Track(l)}a._captionatorOptions=c;void 0==a.captioned&&(E=a.className,a.className+=(a.className.length?" ":
"")+"captioned",a.captioned=!0,0===a.id.length&&(a.id=y.generateID()));k?h.cueSource=h.cueSource+"\n"+b:(h=a.addTextTrack(d+e+f,"captions",e,d,null,f,g),h.videoNode=a,h.cueSource=b);!0===(h.internalMode===y.TextTrack.SHOWING?!0:!1)&&(b=h.videoNode._captionatorOptions||{},h.readyState!==y.TextTrack.ERROR&&h.cueSource&&(b=y.parseCaptions(h.cueSource,b),h.cues.loadCues(b)),h.cueSource="");setInterval(function(){var b=y.base.metricsModel,c=y.base.metricsExt,b=b.getReadOnlyMetricsFor("video")||b.getReadOnlyMetricsFor("audio")||
b.getReadOnlyMetricsFor("muxed"),c=c.getCurrentDVRInfo(b),d;c&&(d=c.range.start);if(d&&0<d)for(b=0;b<a.tracks.length;b++)c=a.tracks[b].cues,c.removeCues(y.cuesClearedTillTime,d),y.cuesClearedTillTime=d}.bind(this),5E3);a.addEventListener("timeupdate",function(a){var b=a.target;if(3==u){u=0;try{b.tracks.forEach(function(a){a.activeCues.refreshCues.apply(a.activeCues,[b.currentTime])})}catch(d){}x()&&(c.renderer instanceof Function?c.renderer.call(y,b):y.rebuildCaptions(b))}else u++},!1);var n;window.addEventListener("resize",
function(a){clearTimeout(n);n=setTimeout(p,10)},!1);var p=function(){a._captionator_dirtyBit=!0;y.rebuildCaptions(a)};return a},rebuildCaptions:function(a){var b=a.currentTime,c=[],d=!1,e=[],f=[];(a.tracks||[]).forEach(function(a,b){a.mode===y.TextTrack.SHOWING&&(f=[].slice.call(a.activeCues,0),f=f.sort(function(a,b){return a.startTime>b.startTime?-1:1}),c=c.concat(f))});e=c.map(function(a){return a.track.id+"."+a.id+":"+a.text.toString(b).length});d=!y.compareArray(e,a._captionator_previousActiveCues);
if(x()&&(d||a._captionator_dirtyBit)){a._captionator_dirtyBit=!1;a._captionator_availableCueArea=null;a._captionator_previousActiveCues=e;y.styleCueCanvas(a);a._containerObject.innerHTML="";var c=H(c),g=0,k=640;c.forEach(function(c){var d=document.createElement("div");d.id=String(c.id).length?c.id:y.generateID();d.className="captionator-cue";d.innerHTML=c.text.toString(b);a._containerObject.appendChild(d);"horizontal"===c.direction&&(y.applyStyles(d,{width:"auto",position:"static",display:"inline-block",
padding:"1em"}),d=parseInt(d.offsetWidth,10),c=parseFloat(String(c.textPosition).replace(/[^\d\.]/ig,"")),g<d&&(g=d),k>c&&(k=c))});c.forEach(function(a){"horizontal"===a.direction&&(a.maxWidth=g,a.minTextPosition=k)});var h=0;c.forEach(function(b){var c=a._containerObject.childNodes[h];h++;y.styleCue(c,b,a)})}},getNodeMetrics:function(a){for(var b=window.getComputedStyle(a,null),c=a,d=a.offsetTop,e=a.offsetLeft,f=a,g=0,k=0,f=parseInt(b.getPropertyValue("width"),10),g=parseInt(b.getPropertyValue("height"),
10);c=c.offsetParent;)d+=c.offsetTop,e+=c.offsetLeft;a.hasAttribute("controls")?(a=navigator.userAgent.toLowerCase(),-1!==a.indexOf("chrome")?k=32:-1!==a.indexOf("opera")?k=25:-1!==a.indexOf("firefox")?k=28:-1!==a.indexOf("ie 9")||-1!==a.indexOf("ipad")?k=44:-1!==a.indexOf("safari")&&(k=25)):a._captionatorOptions&&(a=a._captionatorOptions,a.controlHeight&&(k=parseInt(a.controlHeight,10)));return{left:e,top:d,width:f,height:g,controlHeight:k}},applyStyles:function(a,b){for(var c in b)({}).hasOwnProperty.call(b,
c)&&(a.style[c]=b[c])},checkDirection:function(a){var b=/^[^\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]*[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u2c00-\ufb1c\ufdfe-\ufe6f\ufefd-\uffff]/;return/^[^A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u2c00-\ufb1c\ufdfe-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]/.test(a)?"rtl":b.test(a)?"ltr":""},styleCue:function(a,g,k){var h=0,m=0,n=0,p=0,r,x,u=0,w=0,z,t,A,E,H,G,ba,la=0,qa=r=m=0,ja=
0,fa=0,da,ca,ma=0,sa=k._captionatorOptions||{},W,m=50,h=u=0,m=!0;document.getElementsByClassName("captionator-cue")&&(document.getElementsByClassName("captionator-cue")[0].style.display="block");var ta=function(a){var b=function(a){return!!a.length},c,d,e,f,g=0,k=function(a){g++;y.applyStyles(a,{display:"block",lineHeight:"auto",height:t+"px",width:ba+"px",textAlign:"center"})};for(c in a.childNodes)a.childNodes.hasOwnProperty(c)&&(d=a.childNodes[c],3===d.nodeType?(f=document.createDocumentFragment(),
e=d.nodeValue,f.appendChild(document.createElement("span")),f.childNodes[0].innerHTML="<span class='captionator-cue-character'>"+e.split(/(.)/).filter(b).join("</span><span class='captionator-cue-character'>")+"</span>",[].slice.call(f.querySelectorAll("span.captionator-cue-character"),0).forEach(k),d.parentNode.replaceChild(f,d)):1===a.childNodes[c].nodeType&&(g+=ta(a.childNodes[c])));return g},oa=function(a){var b=function(a){return!!a.length},c,d,e,f,g=0,k=function(a){g++};for(c in a.childNodes)a.childNodes.hasOwnProperty(c)&&
(d=a.childNodes[c],3===d.nodeType?(f=document.createDocumentFragment(),e=d.nodeValue,f.appendChild(document.createElement("span")),f.childNodes[0].innerHTML="<span class='captionator-cue-character'>"+e.split(/(.)/).filter(b).join("</span><span class='captionator-cue-character'>")+"</span>",[].slice.call(f.querySelectorAll("span.captionator-cue-character"),0).forEach(k),d.parentNode.replaceChild(f,d)):1===a.childNodes[c].nodeType&&(g+=oa(a.childNodes[c])));return g};W=y.getNodeMetrics(k);k._captionator_availableCueArea||
(k._captionator_availableCueArea={bottom:W.height-W.controlHeight,right:W.width,top:0,left:0,height:W.height-W.controlHeight,width:W.width});"horizontal"===g.direction&&(y.applyStyles(a,{width:"auto",position:"static",display:"inline-block",padding:"1em"}),u=parseInt(a.offsetWidth,10),h=Math.floor(u/k._captionator_availableCueArea.width*100),h=100>=h?h:100);z=d/100*W.height/96*72;z=z>=b?z:b;z+=q;t=Math.floor(z/72*96);A=Math.floor(z*e);A=A>c?A:c;ba=G=Math.ceil(A/72*96);A=Math.floor(W.height*(!0===
N()?80/15:65/15)/100);A>z*e&&(A=z*e);z=A/e;G*Math.floor(W.height/G)<W.height&&(G=Math.floor(W.height/Math.floor(W.height/G)));G*Math.floor(W.width/G)<W.width&&(ba=Math.ceil(W.width/Math.floor(W.width/G)));E=Math.floor(k._captionator_availableCueArea.height/G);H=Math.floor(k._captionator_availableCueArea.width/ba);0===parseFloat(String(g.size).replace(/[^\d\.]/ig,""))?r=h:(m=!1,r=parseFloat(String(g.size).replace(/[^\d\.]/ig,"")),r=100>=r?r:100);u="horizontal"===g.direction?Math.floor(.005*W.width):
0;w="horizontal"===g.direction?0:Math.floor(.005*W.height);"auto"===g.linePosition?g.linePosition="horizontal"===g.direction?E:H:String(g.linePosition).match(/\%/)&&(g.snapToLines=!1,g.linePosition=parseFloat(String(g.linePosition).replace(/\%/ig,"")));"horizontal"===g.direction?(p=G,"auto"!==g.textPosition&&m&&(m=parseFloat(String(g.textPosition).replace(/[^\d\.]/ig,"")),r=r-m>h?r-m:h),n=!0===g.snapToLines?r/100*k._captionator_availableCueArea.width:r/100*W.width,"auto"===g.textPosition?h=(k._captionator_availableCueArea.right-
n)/2+k._captionator_availableCueArea.left:(m=parseFloat(String(g.textPosition).replace(/[^\d\.]/ig,"")),h=0,h=30>g.minTextPosition?0:30<=g.minTextPosition&&50>g.minTextPosition?20:30,h=(g.minTextPosition+h)/100*(k._captionator_availableCueArea.right-g.maxWidth)+(m-g.minTextPosition)/100*g.maxWidth+k._captionator_availableCueArea.left),m=!0===g.snapToLines?(E-1)*G+k._captionator_availableCueArea.top:W.height*(L(g)/100)):(m=k._captionator_availableCueArea.top,h=k._captionator_availableCueArea.right-
ba,n=ba,p=r/100*k._captionator_availableCueArea.height,m=ta(a),r=[].slice.call(a.querySelectorAll("span.captionator-cue-character"),0),la=Math.floor((p-2*w)/t),n=Math.ceil(m/la)*ba,qa=Math.ceil(m/la),ja=(m-la*(qa-1))*t,!0===g.snapToLines?h="vertical-lr"===g.direction?k._captionator_availableCueArea.left:k._captionator_availableCueArea.right-n:(m=n+2*u,h="vertical-lr"===g.direction?(W.width-m)*(L(g)/100):W.width-m-(W.width-m)*(L(g)/100)),"auto"===g.textPosition?m=(k._captionator_availableCueArea.bottom-
p)/2+k._captionator_availableCueArea.top:(g.textPosition=parseFloat(String(g.textPosition).replace(/[^\d\.]/ig,"")),m=g.textPosition/100*(k._captionator_availableCueArea.bottom-p)+k._captionator_availableCueArea.top),ca=da=ma=fa=0,r.forEach(function(a,b){da="vertical-lr"===g.direction?ba*fa:n-ba*(fa+1);"start"===g.alignment||"start"!==g.alignment&&fa<qa-1?ca=ma*t+w:"end"===g.alignment?ca=ma*t-t+(p+2*w-ja):"middle"===g.alignment&&(ca=(p-2*w-ja)/2+ma*t);y.applyStyles(a,{position:"absolute",top:ca+"px",
left:da+"px"});ma>=la-1?(ma=0,fa++):ma++}));"horizontal"===g.direction&&(x="rtl"===y.checkDirection(String(g.text))?{start:"right",middle:"center",end:"left"}[g.alignment]:{start:"left",middle:"center",end:"right"}[g.alignment]);var Q=1;if(g.track&&"text/608"===g.track.type){h=parseFloat(g.textPosition)/32*80+10;h=k._captionator_availableCueArea.width*h/100;r=oa(a)/32*.8*k._captionator_availableCueArea.width;if(null===I||void 0===I)I=document.createElement("canvas");Q=I.getContext("2d");Q.font=z+
"pt "+l;z=Q.measureText(a.textContent).width;Q=r/z;h+=(r-z)/2}y.applyStyles(a,{position:"absolute",overflow:"hidden",height:A+"px",top:m+"px",left:h+"px",padding:w+"px "+u+"px",textAlign:x,backgroundColor:"rgba("+f.join(",")+")",direction:y.checkDirection(String(g.text)),lineHeight:A+"pt",boxSizing:"border-box","-webkit-transform":"scale("+Q+",1)"});if("vertical"===g.direction||"vertical-lr"===g.direction)h-k._captionator_availableCueArea.left-k._captionator_availableCueArea.left>=k._captionator_availableCueArea.right-
(h+n)?k._captionator_availableCueArea.right=h:k._captionator_availableCueArea.left=h+n,k._captionator_availableCueArea.width=k._captionator_availableCueArea.right-k._captionator_availableCueArea.left;else{if(a.scrollHeight>1.2*a.offsetHeight){if(g.snapToLines){for(x=0;a.scrollHeight>1.2*a.offsetHeight;)p+=G,a.style.height=p+"px",x++;m-=x*G}else p=a.scrollHeight+w,m=W.height*(L(g)/100),a.style.height=p+"px";a.style.top=m+"px"}m-k._captionator_availableCueArea.top-k._captionator_availableCueArea.top>=
k._captionator_availableCueArea.bottom-(m+p)&&k._captionator_availableCueArea.bottom>m?k._captionator_availableCueArea.bottom=m:k._captionator_availableCueArea.top<m+p&&(k._captionator_availableCueArea.top=m+p);k._captionator_availableCueArea.height=k._captionator_availableCueArea.bottom-k._captionator_availableCueArea.top}if(sa.debugMode){var U,C,R=function(){U||(k._captionatorDebugCanvas?(U=k._captionatorDebugCanvas,C=k._captionatorDebugContext):(U=document.createElement("canvas"),U.setAttribute("width",
W.width),U.setAttribute("height",W.height-W.controlHeight),document.body.appendChild(U),y.applyStyles(U,{position:"absolute",top:W.top+"px",left:W.left+"px",width:W.width+"px",height:W.height-W.controlHeight+"px",zIndex:3E3}),C=U.getContext("2d"),k._captionatorDebugCanvas=U,k._captionatorDebugContext=C))};R();U.setAttribute("width",W.width);R();C.fillStyle="rgba(100,100,255,0.5)";C.fillRect(k._captionator_availableCueArea.left,k._captionator_availableCueArea.top,k._captionator_availableCueArea.right,
k._captionator_availableCueArea.bottom);C.stroke();(function(){var a;R();C.strokeStyle="rgba(255,0,0,0.5)";C.lineWidth=1;C.beginPath();for(a=0;a<E;a++)C.moveTo(.5,a*G+.5),C.lineTo(W.width,a*G+.5);C.closePath();C.stroke();C.beginPath();C.strokeStyle="rgba(0,255,0,0.5)";for(a=H;0<=a;a--)C.moveTo(W.width-a*ba-.5,-.5),C.lineTo(W.width-a*ba-.5,W.height);C.closePath();C.stroke();C.beginPath();C.strokeStyle="rgba(255,255,0,0.5)";for(a=0;a<=H;a++)C.moveTo(a*ba+.5,-.5),C.lineTo(a*ba+.5,W.height);C.stroke();
k.linesDrawn=!0})()}},styleCueCanvas:function(a){var c,f,g=a._captionatorOptions instanceof Object?a._captionatorOptions:{};if(!(a instanceof HTMLVideoElement))throw Error("Cannot style a cue canvas for a non-video node!");a._containerObject&&(f=a._containerObject,c=f.id);if(f)f.parentNode||document.body.appendChild(f);else{f=document.createElement("div");f.className="captionator-cue-canvas";c=y.generateID();f.id=c;if(g.appendCueCanvasTo){var k=null;if(g.appendCueCanvasTo instanceof HTMLElement)k=
g.appendCueCanvasTo;else if("string"===typeof g.appendCueCanvasTo)try{var m=document.querySelectorAll(g.appendCueCanvasTo);if(0<m.length)k=m[0];else throw null;}catch(p){k=document.body,g.appendCueCanvasTo=!1}else k=document.body,g.appendCueCanvasTo=!1;k.appendChild(f)}else document.body.appendChild(f);a._containerObject=f;f.setAttribute("aria-live","polite");f.setAttribute("aria-atomic","true")}-1===String(a.getAttribute("aria-describedby")).indexOf(c)&&(k=a.hasAttribute("aria-describedby")?a.getAttribute("aria-describedby")+
" ":"",a.setAttribute("aria-describedby",k+c));k=y.getNodeMetrics(a);a=d/100*k.height/96*72;a=a>=b?a:b;a+=q;c=Math.floor(k.height*(!0===N()?80/15:65/15)/100);c>a*e&&(c=a*e);a=c/e;y.applyStyles(f,{position:"absolute",overflow:"hidden",zIndex:100,height:k.height-k.controlHeight+"px",width:k.width+"px",top:(g.appendCueCanvasTo?0:k.top)+"px",left:(g.appendCueCanvasTo?0:k.left)+"px",color:"rgba("+h.join(",")+")",fontFamily:l,fontVariant:n,fontSize:a+"pt",lineHeight:c+"pt",boxSizing:"border-box"});-1<window.navigator.userAgent.toLowerCase().indexOf("chrome/10")&&
(f.style.backgroundColor="rgba(0,0,0,0.01"+Math.random().toString().replace(".","")+")")},reset:function(a){a.tracks=[];u=0;G&&(a.addTextTrack=G);E&&(a.className=E)},parseCaptions:function(a,b){b=b instanceof Object?b:{};var c="",d=[],e="",f=[],g=/^(\d{2})?:?(\d{2}):(\d{2})\.(\d+)\,(\d{2})?:?(\d{2}):(\d{2})\.(\d+)\s*(.*)/,k=/^(\d+)?:?(\d{2}):(\d{2})\.(\d+)\,(\d+)?:?(\d{2}):(\d{2})\.(\d+)\s*(.*)/,h=/^(\d{2})?:?(\d{2}):(\d{2})[\.\,](\d+)\s+\-\-\>\s+(\d{2})?:?(\d{2}):(\d{2})[\.\,](\d+)\s*(.*)/,m=/(\d{2})?:?(\d{2}):(\d{2})[\.\,](\d+)/,
n=/^([\d\.]+)\s+\+([\d\.]+)\s*(.*)/,l=/^\[(\d{2})?:?(\d{2})\:(\d{2})\.(\d{2})\]\s*(.*?)$/i,p=/^(DEFAULTS|DEFAULT)\s+\-\-\>\s+(.*)/g,r=/^(STYLE|STYLES)\s+\-\-\>\s*\n([\s\S]*)/g,x=/^(COMMENT|COMMENTS)\s+\-\-\>\s+(.*)/g;if(a){var u=function(a){var c=new y.CaptionatorCueStructure(a,b),d=[],e,f,g,k=[];g=0;var h=function(a){return!!a.replace(/[^a-z0-9]+/ig,"").length};if(-1!==a.indexOf("--\x3e"))return!1;d=a.split(/(<\/?[^>]+>)/ig).filter(function(a){return!!a.replace(/\s*/ig,"")});g=c;for(e in d)if(d.hasOwnProperty(e))if(f=
d[e],"<"===f.substr(0,1))if("/"===f.substr(1,1)){if(a=f.substr(2).split(/[\s>]+/g)[0],0<k.length){f=0;for(g=k.length-1;0<=g;g--){var n=k[g][k[g].length-1];f=g;if(n.token===a)break}g=k[f];k=k.slice(0,f)}}else{if(f.substr(1).match(m)||f.match(/^<v\s+[^>]+>/i)||f.match(/^<c[a-z0-9\-\_\.]+>/)||f.match(/^<(b|i|u|ruby|rt)>/)||!1!==b.sanitiseCueHTML){a={token:f.replace(/[<\/>]+/ig,"").split(/[\s\.]+/)[0],rawToken:f,children:[]};if("v"===a.token)a.voice=f.match(/^<v\s*([^>]+)>/i)[1];else if("c"===a.token)a.classes=
f.replace(/[<\/>\s]+/ig,"").split(/[\.]+/ig).slice(1).filter(h);else if(f=a.rawToken.match(m))c.isTimeDependent=!0,f=f.slice(1),a.timeIn=parseInt(3600*(f[0]||0),10)+parseInt(60*(f[1]||0),10)+parseInt(f[2]||0,10)+parseFloat("0."+(f[3]||0));g.push(a);k.push(g);g=a.children}}else!1!==b.sanitiseCueHTML&&(b.ignoreWhitespace||(f=f.replace(/\n+/g,"<br />"))),-1!=f.indexOf("--\x3e")&&(f=null),g.push(f);return c},d=a.replace(/\r\n/g,"\n").replace(/\r/g,"\n");l.exec(a)?(d=d.split(/\n+/g),c="LRC"):d=d.split(/\n\n+/g);
return d=d.filter(function(a){return a.match(/^WEBVTT(\s*FILE)?/ig)?(c="WebVTT",!1):a.replace(/\s*/ig,"").length?!0:!1}).map(function(a,d){var m,l,z,w,q,N="",t;if(m=p.exec(a))return f=m.slice(2).join(""),f=f.split(/\s+/g).filter(function(a){return a&&!!a.length}),null;if(m=r.exec(a))return e+=m[m.length-1],null;if(m=x.exec(a))return null;for(m="LRC"===c?[a.substr(0,a.indexOf("]")),a.substr(a.indexOf("]")+1)]:a.split(/\n/g);!m[0].replace(/\s+/ig,"").length&&0<m.length;)m.shift();for(m[0].match(/^\s*[a-z0-9]+\s*$/ig)&&
(t=String(m.shift().replace(/\s*/ig,"")));0<m.length;){var A=m[0];if((q=h.exec(A))||(q=g.exec(A))||(q=k.exec(A)))q=q.slice(1),l=parseInt(3600*(q[0]||0),10)+parseInt(60*(q[1]||0),10)+parseInt(q[2]||0,10)+parseFloat("0."+(q[3]||0)),z=parseInt(3600*(q[4]||0),10)+parseInt(60*(q[5]||0),10)+parseInt(q[6]||0,10)+parseFloat("0."+(q[7]||0)),q[8]&&(N=q[8]);else if(q=n.exec(A))q=q.slice(1),l=parseFloat(q[0]),z=l+parseFloat(q[1]),q[2]&&(N=q[2]);m=m.slice(0,0).concat(m.slice(1));break}if(!l&&!z&&isNaN(l)&&isNaN(z)&&
l>z)return null;q=f.reduce(function(a,b,c,d){a[b.split(":")[0]]=b.split(":")[1];return a},{});q=N.split(/\s+/g).filter(function(a){return a&&!!a.length}).reduce(function(a,b,c,d){a[b.split(":")[0]]=b.split(":")[1];return a},q);N="";for(w in q)q.hasOwnProperty(w)&&(N+=N.length?" ":"",N+=w+":"+q[w]);w=!1===b.processCueHTML?m.join("\n"):u(m.join("\n"));m=null;w&&(m=new y.TextTrackCue(t,l,z,w,N,!1,null),m.styleData=e);return m}).filter(function(a){return null!==a?!0:!1})}throw Error("Required parameter captionData not supplied.");
}};return{system:void 0,setup:function(){y.base=this},captionify:y.captionify,deleteInvalidCues:y.deleteInvalidCues,getLocalTime:A,setHasCaptions:y.setHasCaptions,enableCaptions:y.enableCaptions,disableCaptions:y.disableCaptions,setModel:y.setModel,switchTrack:y.switchTrack,setStyling:y.setStyling,setCaptionCheck:y.setCaptionCheck,reset:y.reset,metricsModel:void 0,timeline:void 0,streamController:void 0,metricsExt:void 0}};captionator.prototype={constructor:captionator};Primetime.dependencies.CCDecoder=function(){var a,b,c,d,e,f,g,h,l,n,k,m,p=null,u,q,t,r,w,z,G=function(a){a=a.rows;for(var b=0;15>b;b++)for(var c=a[b].row,d=0;32>d;d++)if(" "!==c[d].character)return a=!1;return!0},E=function(a){var b=a.rows;a.currentRowIndex=14;for(a=0;15>a;a++)for(var c=b[a].row,d=b[a].cursor=0;32>d;d++)c[d].character=" ",c[d].style.foreground="WHITE",c[d].style.underline=!1,c[d].style.italics=!1,c[d].style.background="BLACK",c[d].style.flash=!1},I=function(a){a.rows=[];a.currentRowIndex=
14;a=a.rows;for(var b=0;15>b;b++){a[b]={row:[],cursor:0};for(var c=a[b].row,d=0;32>d;d++)c[d]={character:" ",style:{foreground:"WHITE",underline:!1,italics:!1,background:"BLACK",flash:!1}}}},N=function(b){if(b.getField()==Z()){r=q=!1;switch(a){case 4:x(b);break;case 1:case 3:case 2:var c;2==Z()&&b.oneIsOddParity()&&b.twoIsOddParity()?1<=b.getOne()&&15>=b.getOne()?(L(4,0,0),x(b),c=!0):c=!1:c=!1;c||(c=A(b))||(c=H(b)&&p&&p.getOneWithParity()==b.getOneWithParity()&&p.getTwoWithParity()==b.getTwoWithParity()&&
!t?q=!0:!1,c=c||y.call(this,b));c||(0<=b.getOne()&&15>=b.getOne()?X.call(this,b.getTwo())||(r=!0):(X.call(this,b.getOne()),X.call(this,b.getTwo())))}r||(t=q,p=b)}},L=function(b,c,d){var e=a,f=h,g=m;a=b;switch(b){case -1:a=l;h=n;m=k;k=n=l=0;break;case 4:case 2:switch(e){case 1:case 3:l=e,n=f,k=g}break;case 3:a:if(c&&(1!=c||d)){if(4==a||2==a){if(!l)break a;a=l;h=n;m=k;k=n=l=0}h=c;m=d}}},x=function(a){if(!a.oneIsOddParity()||!a.twoIsOddParity())return!0;16<=a.getOne()&&31>=a.getOne()&&(L(-1,0,0),N(a));
return!0},A=function(a){if(!a.twoIsOddParity())return!0;if(!a.oneIsOddParity()){if(p&&p.getTwoWithParity()==a.getTwoWithParity())return!0;N(new Primetime.dependencies.BytePair(a.getField(),127,a.getTwoWithParity()));return!0}return!1},H=function(a){return 16<=a.getOne()&&31>=a.getOne()&&32<=a.getTwo()&&127>=a.getTwo()},y=function(c){if(!H(c))return!1;var g;b:{var k=c.getOne();g=c.getTwo();var n,l={};switch(k){case 17:k=1;break;case 25:k=2;break;default:g=!1;break b}l.channel=k;if(48<=g&&63>=g){switch(g){case 48:n=
174;break;case 49:n=176;break;case 50:n=189;break;case 51:n=191;break;case 52:n=8482;break;case 53:n=162;break;case 54:n=163;break;case 55:n=9834;break;case 56:n=224;break;case 57:n=32;break;case 58:n=232;break;case 59:n=226;break;case 60:n=234;break;case 61:n=238;break;case 62:n=244;break;case 63:n=251}l.character=String.fromCharCode(n);g=l}else g=!1}g?(v.call(this,g.character),g=!0):g=!1;if(g)return!0;var p;b:{l=c.getOne();g=c.getTwo();n={};switch(l){case 18:case 19:k=1;break;case 26:case 27:k=
2;break;default:p=!1;break b}n.channel=k;l=18==l||26==l;if(32<=g&&63>=g){if(l)switch(g){case 32:p=193;break;case 33:p=201;break;case 34:p=211;break;case 35:p=218;break;case 36:p=220;break;case 37:p=252;break;case 38:p=8216;break;case 39:p=161;break;case 40:p=42;break;case 41:p=39;break;case 42:p=9473;break;case 43:p=169;break;case 44:p=8480;break;case 45:p=8226;break;case 46:p=8220;break;case 47:p=8221;break;case 48:p=192;break;case 49:p=194;break;case 50:p=199;break;case 51:p=200;break;case 52:p=
202;break;case 53:p=203;break;case 54:p=235;break;case 55:p=206;break;case 56:p=207;break;case 57:p=239;break;case 58:p=212;break;case 59:p=217;break;case 60:p=249;break;case 61:p=219;break;case 62:p=171;break;case 63:p=187}else switch(g){case 32:p=195;break;case 33:p=227;break;case 34:p=205;break;case 35:p=204;break;case 36:p=236;break;case 37:p=210;break;case 38:p=242;break;case 39:p=213;break;case 40:p=245;break;case 41:p=123;break;case 42:p=125;break;case 43:p=92;break;case 44:p=652;break;case 45:p=
95;break;case 46:p=124;break;case 47:p=126;break;case 48:p=196;break;case 49:p=228;break;case 50:p=214;break;case 51:p=246;break;case 52:p=223;break;case 53:p=165;break;case 54:p=164;break;case 55:p=9475;break;case 56:p=197;break;case 57:p=229;break;case 58:p=216;break;case 59:p=248;break;case 60:p=9487;break;case 61:p=9491;break;case 62:p=9495;break;case 63:p=9499}n.character=String.fromCharCode(p);p=n}else p=!1}p?(v.call(this,p.character),p=!0):p=!1;if(p)return!0;(p=(new Primetime.dependencies.PreambleAddressCode).fromCode(c))?
(u=p.channel,u==M()&&(b.currentRowIndex=p.row-1,b.rows[b.currentRowIndex].cursor=p.indent,p.color&&(f.foreground=p.color),p.underline&&(f.underline=p.underline),p.italic&&(f.italics=p.italic)),p=!0):p=!1;if(p)return!0;var r;if(p=(new Primetime.dependencies.MidRowTextAttribute).fromCode(c)){u=p.channel;if(u==M()){p=p.style;var q,x;-1!=p.indexOf("ITALIC")&&(x=!0);-1!=p.indexOf("UNDERLINED")&&(q=!0);-1!=p.indexOf("RED")&&(r="RED");-1!=p.indexOf("YELLOW")&&(r="YELLOW");-1!=p.indexOf("GREEN")&&(r="GREEN");
-1!=p.indexOf("BLUE")&&(r="BLUE");-1!=p.indexOf("CYAN")&&(r="CYAN");-1!=p.indexOf("MAGENTA")&&(r="MAGENTA");-1!=p.indexOf("BLACK")&&(r="BLACK");r&&(f.foreground=r);q&&(f.underline=q);x&&(f.italics=x)}r=!0}else r=!1;if(r)return!0;r=(new Primetime.dependencies.BackgroundAttributeCode).fromCode(c)?!0:!1;if(r)return!0;if(c=(new Primetime.dependencies.MiscCommandCode).fromCode(c))if(u=c.channel,u==M())switch(c.mode){case "ResumeCaptionLoading":2!==h&&(L(3,2,0),b=e);break;case "RollUp2":D.call(this,2);
break;case "RollUp3":D.call(this,3);break;case "RollUp4":D.call(this,4);break;case "TextRestart":L(2,0,0);break;case "ResumeTextDisplay":L(2,0,0);break;case "ResumeDirectCaptioning":J();break;case "EndOfCaption":2===h&&(c=d,d=e,b=e=c);O.call(this);break;case "BackSpace":3!=a||0>b.currentRowIndex||15<=b.currentRowIndex||(c=b.rows[b.currentRowIndex].row,r=b.rows[b.currentRowIndex].cursor,0>r||32<=r||(c[r].character=" ",c[r].style.foreground="WHITE",c[r].style.underline=!1,c[r].style.italics=!1,c[r].style.background=
"BLACK",c[r].style.flash=!1,r--,b.rows[b.currentRowIndex].cursor=r,O.call(this)));break;case "DeleteToEndOfRow":if(!(0>b.currentRowIndex||15<=b.currentRowIndex||(c=b.rows[b.currentRowIndex].row,r=b.rows[b.currentRowIndex].cursor,0>r||32<=r))){for(q=r;32>q;q++)c[r].character=" ",c[r].style.foreground="WHITE",c[r].style.underline=!1,c[r].style.italics=!1,c[r].style.background="BLACK",c[r].style.flash=!1;O.call(this)}break;case "EraseDisplayedMemory":E.call(this,d);O.call(this);break;case "CarraigeReturn":if(3==
a||1==h){if(!(0>b.currentRowIndex||15<=b.currentRowIndex)){c=b.currentRowIndex-m+1;r=b.rows;q={row:[],cursor:0};x=q.row;for(p=0;32>p;p++)x[p]={character:" ",style:{foreground:"WHITE",underline:!1,italics:!1,background:"BLACK",flash:!1}};r.splice(c,1);r.splice(b.currentRowIndex,0,q)}O.call(this)}break;case "EraseNondisplayedMemory":P();break;case "TabOffset1Col":F(1);break;case "TabOffset2Col":F(2);break;case "TabOffset3Col":F(3)}return!0},F=function(a){if(!(0>b.currentRowIndex||15<=b.currentRowIndex)){var c=
b.rows[b.currentRowIndex].cursor;0>c||32<=c||(b.rows[b.currentRowIndex].cursor=c+a)}},D=function(a){1!==h&&(L(3,1,a),b=d,E.call(this,b))},J=function(){3==a&&3!==h&&(L(3,3,0),b=d,E.call(this,b))},S=function(a){var b=0,c=0,d=0,e;a=Math.round(a);e=a%1E3;a=Math.floor(a/1E3);3600<=a&&(b=Math.floor(a/3600),a-=3600*b);60<=a&&(c=Math.floor(a/60),a-=60*c);0<a&&(d=Math.floor(a));10>b&&(b="0"+b);10>c&&(c="0"+c);10>d&&(d="0"+d);10>e?e="00"+e:100>e&&(e="0"+e);return b+":"+c+":"+d+"."+e},O=function(){if(3==a){if(z!==
w)if(z||G(d)){var b;a:{b=!0;for(var e=d.rows,f=c.rows,g=0;15>g;g++)for(var k=e[g].row,h=f[g].row,m=0;32>m;m++){if(k[m].character!==h[m].character){b=!1;break a}if(k[m].style.foreground!==h[m].style.foreground||k[m].style.underline!==h[m].style.underline||k[m].style.italics!==h[m].style.italics||k[m].style.background!==h[m].style.background||k[m].style.flash!==h[m].style.flash){b=!1;break a}}}if(!b){b=z;e=w;f=c.rows;for(g=g=0;15>g;g++){for(var n=!0,k=0,l="",p="",h=void 0,r=f[g].row,q=0;32>q;q++)" "===
r[q].character&&n?k++:(n=!1,m=r[q].style,!h||m.foreground===h.foreground&&m.underline===h.underline&&m.italics===h.italics&&m.background===h.background&&m.flash===h.flash||(p=p.trim(),l+=B.call(this,p,h),p=""),h=m,p+=r[q].character);p=p.trim();if(l+=B.call(this,p,h))h=l,p={row:g+1,indent:k},k=b,m=e,h&&(l=n="",p&&(n=K(p.row),l="position:"+p.indent),k=1E3*this.captionator.getLocalTime(k/1E3),m=1E3*this.captionator.getLocalTime(m/1E3),p="",p+=S(k),p+=" --\x3e ",p+=S(m),p+=" ",p+=n,p+=" ",p+=l,p+="\n",
p+=h,p+="\n",this.captionator.captionify(p,{lang:"",label:"",mimeType:"text/608",is608:!0}))}z=G(d)?void 0:w}}else z=w;b=c.rows;e=d.rows;for(f=0;15>f;f++)for(g=b[f].row,k=e[f].row,h=0;32>h;h++)g[h].character=k[h].character,g[h].style.foreground=k[h].style.foreground,g[h].style.underline=k[h].style.underline,g[h].style.italics=k[h].style.italics,g[h].style.background=k[h].style.background,g[h].style.flash=k[h].style.flash}},B=function(a,b){if(a)switch(b.italics&&(a="<i>"+a+"</i>"),b.underline&&(a=
"<u>"+a+"</u>"),b.foreground){case "WHITE":a="<c.white>"+a+"</c>";break;case "RED":a="<c.red>"+a+"</c>";break;case "GREEN":a="<c.green>"+a+"</c>";break;case "BLUE":a="<c.blue>"+a+"</c>";break;case "YELLOW":a="<c.yellow>"+a+"</c>";break;case "CYAN":a="<c.cyan>"+a+"</c>";break;case "MAGENTA":a="<c.magenta>"+a+"</c>"}return a},K=function(a){switch(a){case 1:return"line:10%";case 2:return"line:15.33%";case 3:return"line:20.66%";case 4:return"line:26%";case 5:return"line:31.33%";case 6:return"line:36.66%";
case 7:return"line:42%";case 8:return"line:47.33%";case 9:return"line:52.66%";case 10:return"line:58%";case 11:return"line:63.33%";case 12:return"line:68.66%";case 13:return"line:74%";case 14:return"line:79.33%";case 15:return"line:84.66%";default:return""}},P=function(){3==a&&E.call(this,e)},X=function(a){if(u!=M())return!0;if(32<=a&&127>=a){switch(a){case 42:a=225;break;case 92:a=233;break;case 94:a=237;break;case 95:a=243;break;case 96:a=250;break;case 123:a=231;break;case 124:a=247;break;case 125:a=
209;break;case 126:a=241;break;case 127:a=9608}a=String.fromCharCode(a)}else a=null;if(!a)return!1;a.trim();v.call(this,a);return!0},v=function(a){if(0>b.currentRowIndex||15<=b.currentRowIndex)console.log("can't insert character "+a+" at row = "+b.currentRowIndex);else{var c=b.rows[b.currentRowIndex].row,d=b.rows[b.currentRowIndex].cursor;0>d||32<=d?console.log("can't insert character "+a+" at position row = "+b.currentRowIndex+" col = "+d):(c=c[d],f&&(c.style.foreground=f.foreground,c.style.underline=
f.underline,c.style.italics=f.italics,c.style.background=f.background,c.style.flash=f.flash),c.character=a,d++,b.rows[b.currentRowIndex].cursor=d)}3!==h&&1!==h||O.call(this)},M=function(){switch(g){case 1:case 3:return 1;case 2:case 4:return 2;default:return 0}},Z=function(){switch(g){case 1:case 2:return 1;case 3:case 4:return 2;default:return 0}};return{decode608over708:function(a,b,c){a=new Uint8Array(a);var d,e,f,g,k;do if(w>c&&this.captionator.deleteInvalidCues(1E3*this.captionator.getLocalTime(c/
1E3)),w=c,d=0!=(a[b]&64)){d=a[b]&31;b+=2;for(var h=0;h<d;h++)if(e=0!=(a[b]&4)){f=a[b++]&3;k=b;e=a[b++];g=a[b++];if(0==f)f=1;else if(1==f)f=2;else continue;e=new Primetime.dependencies.BytePair(f,e,g,k);N.call(this,e)}else b+=3}while(0)},setChannel:function(a){switch(a){case "CC1":g=1;break;case "CC2":g=2;break;case "CC3":g=3;break;case "CC4":g=4;break;default:return 0}},captionator:void 0,debug:void 0,videoModel:void 0,system:void 0,reset:function(){this.setup()},setup:function(){a=1;t=q=r=!1;p=null;
n=k=l=h=0;g=1;u=-1;c={};d={};e={};I.call(this,c);I.call(this,d);I.call(this,e);b=d;f={foreground:"WHITE",underline:!1,italics:!1,background:"BLACK",flash:!1}}}};Primetime.dependencies.BackgroundAttributeCode=function(){return{fromCode:function(a){var b=a.getOne();a=a.getTwo();var c,d={};switch(b){case 16:case 23:c=1;break;case 24:case 31:c=2;break;default:return null}d.channel=c;if(16==b||24==b)switch(a){case 32:return d;case 33:return d;case 34:return d;case 35:return d;case 36:return d;case 37:return d;case 38:return d;case 39:return d;case 40:return d;case 41:return d;case 42:return d;case 43:return d;case 44:return d;case 45:return d;case 46:return d;
case 47:return d}else if(45==a)return d;return null}}};Primetime.dependencies.MidRowTextAttribute=function(){return{fromCode:function(a){var b=a.getOne();a=a.getTwo();var c,d={};switch(b){case 17:case 23:c=1;break;case 25:case 31:c=2;break;default:return null}d.channel=c;if(17==b||25==b)switch(a){case 32:return d.style="WHITE",d;case 33:return d.style="WHITE_UNDERLINED",d;case 34:return d.style="GREEN",d;case 35:return d.style="GREEN_UNDERLINED",d;case 36:return d.style="BLUE",d;case 37:return d.style="BLUE_UNDERLINED",d;case 38:return d.style="CYAN",
d;case 39:return d.style="CYAN_UNDERLINED",d;case 40:return d.style="RED",d;case 41:return d.style="RED_UNDERLINED",d;case 42:return d.style="YELLOW",d;case 43:return d.style="YELLOW_UNDERLINED",d;case 44:return d.style="MAGENTA",d;case 45:return d.style="MAGENTA_UNDERLINED",d;case 46:return d.style="ITALIC",d;case 47:return d.style="ITALIC_UNDERLINED",d;default:return null}else switch(a){case 46:return d.style="BLACK",d;case 47:return d.style="BLACK_UNDERLINED",d;default:return null}}}};Primetime.dependencies.MiscCommandCode=function(){return{fromCode:function(a){var b=a.getOne(),c=a.getTwo(),d=a.getField();a={};var e=1==d?20:21,f=1==d?28:29;switch(b){case e:case 23:d=1;break;case f:case 31:d=2;break;default:return null}a.channel=d;switch(b){case e:case f:switch(c){case 32:return a.mode="ResumeCaptionLoading",a;case 33:return a.mode="BackSpace",a;case 34:return a.mode="Reserved (formerly Alarm Off)",a;case 35:return a.mode="Reserved (formerly Alarm On)",a;case 36:return a.mode="DeleteToEndOfRow",
a;case 37:return a.mode="RollUp2",a;case 38:return a.mode="RollUp3",a;case 39:return a.mode="RollUp4",a;case 40:return a.mode="FlashOn",a;case 41:return a.mode="ResumeDirectCaptioning",a;case 42:return a.mode="TextRestart",a;case 43:return a.mode="ResumeTextDisplay",a;case 44:return a.mode="EraseDisplayedMemory",a;case 45:return a.mode="CarraigeReturn",a;case 46:return a.mode="EraseNondisplayedMemory",a;case 47:return a.mode="EndOfCaption",a}break;case 23:case 31:switch(c){case 33:return a.mode="TabOffset1Col",
a;case 34:return a.mode="TabOffset2Col",a;case 35:return a.mode="TabOffset3Col",a}}return null}}};Primetime.dependencies.PreambleAddressCode=function(){return{fromCode:function(a){var b=a.getOne(),c=a.getTwo();if(16<=b&&23>=b)a=1;else if(24<=b&&31>=b)a=2;else return null;var d=-1,e=!1,f=!1,g=0;switch(c){case 64:case 96:case 80:case 112:d="WHITE";break;case 65:case 97:case 81:case 113:d="WHITE";e=!0;break;case 66:case 98:d="GREEN";break;case 67:case 99:d="GREEN";e=!0;break;case 68:case 100:d="BLUE";break;case 69:case 101:d="BLUE";e=!0;break;case 70:case 102:d="CYAN";break;case 71:case 103:d="CYAN";
e=!0;break;case 72:case 104:d="RED";break;case 73:case 105:d="RED";e=!0;break;case 74:case 106:d="YELLOW";break;case 75:case 107:d="YELLOW";e=!0;break;case 76:case 108:d="MAGENTA";break;case 77:case 109:d="MAGENTA";e=!0;break;case 78:case 110:d="WHITE";f=!0;break;case 79:case 111:d="WHITE";e=f=!0;break;case 82:case 114:d="WHITE";g=4;break;case 83:case 115:d="WHITE";g=4;e=!0;break;case 84:case 116:d="WHITE";g=8;break;case 85:case 117:d="WHITE";g=8;e=!0;break;case 86:case 118:d="WHITE";g=12;break;case 87:case 119:d=
"WHITE";g=12;e=!0;break;case 88:case 120:d="WHITE";g=16;break;case 89:case 121:d="WHITE";g=16;e=!0;break;case 90:case 122:d="WHITE";g=20;break;case 91:case 123:d="WHITE";g=20;e=!0;break;case 92:case 124:d="WHITE";g=24;break;case 93:case 125:d="WHITE";g=24;e=!0;break;case 94:case 126:d="WHITE";g=28;break;case 95:case 127:d="WHITE",g=28,e=!0}if(-1!=d){var h=96>c,c=-1;switch(b){case 17:case 25:c=h?1:2;break;case 18:case 26:c=h?3:4;break;case 21:case 29:c=h?5:6;break;case 22:case 30:c=h?7:8;break;case 23:case 31:c=
h?9:10;break;case 16:case 24:c=11;break;case 19:case 27:c=h?12:13;break;case 20:case 28:c=h?14:15}b={};b.channel=a;b.row=c;b.indent=g;b.underline=e;b.italic=f;b.color=d;return b}return null}}};Primetime.dependencies.BytePair=function(a,b,c,d){this._field=a;this._oneWithParity=b;this._twoWithParity=c;this._internalOffset=d};
Primetime.dependencies.BytePair.prototype={constructor:Primetime.dependencies.BytePair,getField:function(){return this._field},getOffset:function(){return this._internalOffset},getOneWithParity:function(){return this._oneWithParity},getTwoWithParity:function(){return this._twoWithParity},getOne:function(){return 127&this._oneWithParity},getTwo:function(){return 127&this._twoWithParity},oneIsOddParity:function(){return this.byteIsOddParity(this._oneWithParity)},twoIsOddParity:function(){return this.byteIsOddParity(this._twoWithParity)},
byteIsOddParity:function(a){for(var b=0;a;)a&1&&b++,a>>=1;return 1==b%2}};Primetime.dependencies.SEIParser=function(){var a,b,c=function(a){if(b){for(var c=b[a],d=1;2>d;d++)c<<=8,c|=b[d+a];return c}},d=function(a){if(b){for(var c=b[a],d=1;4>d;d++)c<<=8,c|=b[d+a];return c}};return{system:void 0,parse:function(e,f,g,h,l,n){var k=!1,m=[],p=0,u=g;b=new Uint8Array(e);for(f||(g=0);u<=h;){f?a=l:(a=d(u)/90,a+=n,u+=4);g=d(u);u+=4;g=u+g;u+=3;if(181===b[u]&&49===c(u+1)&&1195456820===d(u+3)&&(u+=7,3==b[u])){var k=!0,u=u+1,q=this.system.getObject("ccDecoder");m[p]={index:u,pts:a};p++}u=
g}m.sort(function(a,b){return a.pts-b.pts});for(f=0;f<m.length;f++)q.decode608over708(e,m[f].index,m[f].pts);return k}}};Primetime.rules.BufferLevelRule=function(){var a=new MediaPlayer.rules.BufferLevelRule;return Primetime.helper.extend(a,{system:void 0,execute:function(b,c){a.execute.call(this,b,c)}})};Primetime.dependencies.ABRRulesCollection=function(){var a=[],b=[];return{bufferLengthBasedRule:void 0,abandonRequestRule:void 0,getRules:function(c){switch(c){case MediaPlayer.rules.ABRRulesCollection.prototype.QUALITY_SWITCH_RULES:return a;case MediaPlayer.rules.ABRRulesCollection.prototype.ABANDON_FRAGMENT_RULES:return b;default:return null}},setup:function(){a.push(this.bufferLengthBasedRule);b.push(this.abandonRequestRule)}}};
Primetime.dependencies.ABRRulesCollection.prototype={constructor:Primetime.dependencies.ABRRulesCollection,QUALITY_SWITCH_RULES:"qualitySwitchRules",ABANDON_FRAGMENT_RULES:"abandonFragmentRules"};Primetime.dependencies.BufferLengthBasedRule=function(){var a={},b={},c={},d={},e={},f={},g={},h={},l={},n={},k=3E4,m=MediaPlayer.rules.SwitchRequest.prototype.DEFAULT,p=function(a){if("undefined"===typeof a||a.trace===[]||0>=a.trace.length)return 0;for(var b=a.trace.length-1;0<=b;b--)if(0<a.trace[b].b[0])return a.trace[b].b[0]},u=function(r){var q=r.getStreamInfo().id,u=r.getMediaInfo(),t=u.type,I=r.getCurrentValue(),N=r.getStreamProcessor().getAllRepresentations(),L=this.metricsModel.getReadOnlyMetricsFor(t),
x=this.metricsExt.getHttpRequests(L),A=this.metricsExt.getCurrentBufferLevel(L)?1E3*this.metricsExt.getCurrentBufferLevel(L).level:0,H=L&&L.RequestsQueue&&L.RequestsQueue.loadingRequests&&0<L.RequestsQueue.loadingRequests.length?!0:!1,y=H?L.RequestsQueue.loadingRequests[0]:this.metricsExt.getCurrentHttpRequest(L);if(H){if(y.type==MediaPlayer.vo.metrics.HTTPRequest.INIT_SEGMENT_TYPE)return I;h[q]=h[q]||{};h[q].hasOwnProperty(y.index)||(h[q][y.index]={});if(h[q][y.index].hasOwnProperty(y.quality)){var F=
h[q][y.index][y.quality];h[q][y.index][y.quality]=A;if(A>F)return I}else h[q][y.index][y.quality]=A;if(null==y.firstByteDate)return I}if(!L||null===y||x===[]||0>=x.length)return I;var F=this.system.getObject("abrController"),D=H?y.duration:y.mediaduration;if(null===D||void 0===D||0>=D||isNaN(D)){var J=I,I=F.enforceAbrParams(I,N,t);I!==J&&this.log("BufferLengthBasedRule : modified by enforceAbrParams. final value=["+I+"]","INFO");return I}if(1===u.representationCount||!N.length)return I;var S=N[I].bandwidth,
O,B=this.system.getObject("mediaPlayer");B&&(k=B.getBufferControlParameters().playBufferTime,O=B.getABRControlParameters());if(O&&O.abrPolicy===AdobePSDK.ABRControlParameters.AUTO_OFF_POLICY)return I;d[q]=d[q]||{};d[q].hasOwnProperty(t)||(d[q][t]=0);c[q]=c[q]||{};c[q].hasOwnProperty(t)||(c[q][t]=0);a[q]=a[q]||{};a[q].hasOwnProperty(t)||(a[q][t]=0);b[q]=b[q]||{};b[q].hasOwnProperty(t)||(b[q][t]=[0,0,0]);e[q]=e[q]||{};e[q].hasOwnProperty(t)||(e[q][t]=!1);g[q]=g[q]||{};g[q].hasOwnProperty(t)||(g[q][t]=
!1);f[q]=f[q]||{};f[q].hasOwnProperty(t)||(f[q][t]=!0);H&&(l[q]=l[q]||{},l[q].hasOwnProperty(y.index)||(l[q][y.index]={}),l[q][y.index].hasOwnProperty(y.quality)||(l[q][y.index][y.quality]=-1),n[q]=n[q]||{},n[q].hasOwnProperty(y.index)||(n[q][y.index]={}),n[q][y.index].hasOwnProperty(y.quality)||(n[q][y.index][y.quality]=-1));(L=0<L.BufferState.length?L.BufferState[L.BufferState.length-1]:null)&&L.target&&(k=1E3*L.target);var K=L=0,J=x.length-1,P=0,X=4;if(H){--X;var P=y.firstByteDate.getTime()-y.requestStartDate.getTime(),
v=(new Date).getTime()-y.firstByteDate.getTime(),L=L+(v+(0===P?v:P)),K=K+y.bytesLoaded,P=y.bytesLoaded/v*8E3}else P=p(y)/(y.tfinish.getTime()-y.tresponse.getTime())*8E3;for(;0<J;){v=x[J];if(200<=v.responsecode&&299>=v.responsecode&&0<p(v)&&0<v.mediaduration){var M=v.tfinish.getTime()-v.tresponse.getTime(),Z=v.tresponse.getTime()-v.trequest.getTime();0===Z&&(Z=M);L+=M+Z;K+=p(v);if(0>=--X)break}--J}x=K/L*8E3;L=P;0===P&&(J=I,I=F.enforceAbrParams(I,N,t),I!==J?(d[q][t]=0,this.log("BufferLengthBasedRule : modified by enforceAbrParams. final value=["+
I+"]","INFO")):this.log("BufferLengthBasedRule : Don't have a bandwidth measurement yet. don't make any change.","INFO"));K=-1;H&&(0<l[q][y.index][y.quality]&&0<n[q][y.index][y.quality]&&(K=y.bytesLoaded-l[q][y.index][y.quality],J=(new Date).getTime()-n[q][y.index][y.quality],K=K/J*8E3),l[q][y.index][y.quality]=y.bytesLoaded,n[q][y.index][y.quality]=(new Date).getTime());J=(X=B.isTrickPlayMode())?O.minTrickPlayBitRate:O.minBitRate;P=1;X&&(P=Math.abs(B.getRate()),k*=P);v=c[q][t];M=D*P;B=X=1;X=(A-k)/
1E3*.1;X=2*(Math.exp(X)/(1+Math.exp(X)));M*=1E3;M-(A-v)&&(B=1*M/(M-(A-v)));M=c[q][t];O.abrPolicy===AdobePSDK.ABRControlParameters.AGGRESSIVE_POLICY?v=1:(v=O.abrPolicy===AdobePSDK.ABRControlParameters.CONSERVATIVE_POLICY?.4:.2,A>k?v=1:A<M?v=20:(M=A-M,v=M>(O.abrPolicy===AdobePSDK.ABRControlParameters.CONSERVATIVE_POLICY?.8:.4)*D?1:M>v*D?5:15));M=a[q][t];H||(b[q][t][M%3]=v,a[q][t]++,c[q][t]=A);v=3;for(Z=M=0;3>Z;Z++){var T=b[q][t][Z];0<T?M+=T:v--}v=v?M/v:0;X=X*B*x;B=I;M=Math.min(k/2,3E4);O.abrPolicy===
AdobePSDK.ABRControlParameters.CONSERVATIVE_POLICY&&(M=Math.max(k/2,2*D*P));P=Math.max(1E3*D*P,.2*M);if(f[q][t])e[q][t]=!1,B=F.getQualityForBitrate(r,L),f[q][t]=!1;else if(A<P&&(e[q][t]||H))for(B=0,m=MediaPlayer.rules.SwitchRequest.prototype.STRONG;B<u.representationCount-1&&N[B].bandwidth<J;)B++;else H&&A<M?(1==g[q][t]&&(g[q][t]=!1,m=MediaPlayer.rules.SwitchRequest.prototype.STRONG),B=0<K?F.getQualityForBitrate(r,K):I,B>I&&(B=I),g[q][t]=!0,J=B,B=F.enforceAbrParams(B,N,t),B!==J&&this.log("BufferLengthBasedRule : modified by enforceAbrParams. final value=["+
B+"]","INFO"),r=D*N[B].bandwidth/K,y=(y.bytesTotal-y.bytesLoaded)/K*8,0<K&&y<r?m=MediaPlayer.rules.SwitchRequest.prototype.DEFAULT:d[q][t]=0):X<S?(e[q][t]=!0,d[q][t]=H?d[q][t]:0):A<M?(B=F.getQualityForBitrate(r,L),B>I&&O.abrPolicy!==AdobePSDK.ABRControlParameters.AGGRESSIVE_POLICY&&(B=I)):X>S&&!H&&(e[q][t]=!0,d[q][t]=H?d[q][t]:d[q][t]+1,0<v&&d[q][t]>v&&(B=Math.max(F.getQualityForBitrate(r,x),I)));J=B;B=F.enforceAbrParams(B,N,t);B!==J&&(d[q][t]=0,this.log("BufferLengthBasedRule : modified by enforceAbrParams. final value=["+
B+"]","INFO"));return B},q=function(a){a=a.sender.getStreamId();f[a]=f[a]||{};f[a].video=!0;f[a].audio=!0;h={};l={};n={}},t=function(a){var b=a.data.newMediaInfo.streamInfo.id;f[b]=f[b]||{};f[b][a.sender.getType()]=!0},r=function(a){};return{log:void 0,metricsExt:void 0,metricsModel:void 0,system:void 0,setup:function(){this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING]=q;this[Primetime.dependencies.StreamProcessor.eventList.ENAME_MEDIAINFO_CHANGED]=t;this[Primetime.dependencies.StreamProcessor.eventList.ENAME_PLAYBACK_RATE_CHANGING]=
r},getInitialQuality:function(a,b,c){var d,e=0;b+=1;var f=this.system.getObject("mediaPlayer");f&&(d=f.getABRControlParameters());if(d&&d.abrPolicy===Primetime.dependencies.AbrController.ABRPolicy.ABR_POLICY_AUTO_OFF)a=e;else if(1===b)a=0;else{if(d.initialBitRate&&("audio"!==c||f.timeline.isHLS())){for(e=b-1;e&&a[e].bandwidth>d.initialBitRate;)e--;e+1<b&&d.initialBitRate>a[e].bandwidth&&d.initialBitRate-a[e].bandwidth>a[e+1].bandwidth-d.initialBitRate&&e++}else switch(d.abrPolicy){case Primetime.dependencies.AbrController.ABRPolicy.ABR_POLICY_AGGRESSIVE:e=
b-1;break;case Primetime.dependencies.AbrController.ABRPolicy.ABR_POLICY_MODERATE:e=Math.floor(b/2);break;case Primetime.dependencies.AbrController.ABRPolicy.ABR_POLICY_CONSERVATIVE:e=0;break;default:e=0}a=e=this.system.getObject("abrController").enforceAbrParams(e,a,c)}return a},execute:function(a,b){var c=a.getStreamProcessor().getABRController(),d=a.getMediaInfo().type;m=MediaPlayer.rules.SwitchRequest.prototype.DEFAULT;c.getAbandonmentStateFor(d)===MediaPlayer.dependencies.AbrController.ABANDON_LOAD?
b(new MediaPlayer.rules.SwitchRequest(MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,MediaPlayer.rules.SwitchRequest.prototype.WEAK)):(c=u.call(this,a),b(new MediaPlayer.rules.SwitchRequest(c,m)))},reset:function(){c={};d={};b={};a={};e={};g={};h={};l={};n={}}}};Primetime.dependencies.BufferLengthBasedRule.prototype={constructor:Primetime.dependencies.BufferLengthBasedRule};Primetime.vo.MediaTypeTrackInfo=function(){this.lang=null;this.isDefault=!1;this.contentDescriptors=[];this.presentationDescriptors=[];this.mediaInfo=null};Primetime.vo.MediaTypeTrackInfo.prototype={constructor:Primetime.vo.MediaTypeTrackInfo};Primetime.vo.MediaInfo=function(){this.mediaTypeTrackInfos=null;this.baseConstructor()};Primetime.vo.MediaInfo.prototype={constructor:Primetime.vo.MediaInfo,baseConstructor:MediaPlayer.vo.MediaInfo.prototype.constructor};Primetime.vo.TrackInfo=function(){this.height=this.width=null;this.baseConstructor()};Primetime.vo.TrackInfo.prototype={constructor:Primetime.vo.MediaInfo,baseConstructor:MediaPlayer.vo.TrackInfo.prototype.constructor};Primetime.di.CommonContext=function(){return{system:void 0,setup:function(){this.system.mapSingleton("errHandler",Primetime.dependencies.ErrorHandler);this.system.mapClass("bufferController",Primetime.dependencies.BufferController);this.system.mapSingleton("sourceBufferExt",Primetime.dependencies.SourceBufferExtensions);this.system.mapSingleton("streamController",Primetime.dependencies.StreamController);this.system.mapClass("stream",Primetime.dependencies.Stream);this.system.mapClass("streamProcessor",
Primetime.dependencies.StreamProcessor);this.system.mapClass("singleSourceStream",Primetime.dependencies.SingleSourceStream);this.system.mapClass("scheduleController",Primetime.dependencies.ScheduleController);this.system.mapSingleton("playbackController",Primetime.dependencies.PlaybackController);this.system.mapClass("segmentExt",Primetime.dependencies.SegmentExtensions);this.system.mapClass("isobmffParser",Primetime.dependencies.ISOBMFFParser);this.system.mapSingleton("manifestModel",Primetime.dependencies.ManifestModel);
this.system.mapClass("bufferLengthBasedRule",Primetime.dependencies.BufferLengthBasedRule);this.system.mapSingleton("abrRulesCollection",Primetime.dependencies.ABRRulesCollection);this.system.mapClass("fragmentController",Primetime.dependencies.FragmentController);this.system.mapClass("fragmentModel",Primetime.dependencies.FragmentModel);this.system.mapClass("timeline",Primetime.dependencies.Timeline);this.system.mapSingleton("capabilities",Primetime.utils.Capabilities);this.system.mapSingleton("videoExt",
Primetime.dependencies.VideoModelExtensions);this.system.mapSingleton("textSourceBuffer",Primetime.dependencies.CustomTextSourceBuffer);this.system.mapClass("bufferLevelRule",Primetime.rules.BufferLevelRule);this.system.mapClass("mediaPlayerItemImpl",Primetime.dependencies.MediaPlayerItemImpl);this.system.mapClass("drmManagerImpl",Primetime.dependencies.DRMManagerImpl);this.system.mapSingleton("timelineImpl",Primetime.dependencies.TimelineImpl);this.system.mapSingleton("textTrackExtensions",Primetime.dependencies.TextTrackExtensions);
this.system.mapClass("protectionController",Primetime.dependencies.ProtectionController);this.system.mapSingleton("protectionExt",Primetime.dependencies.ProtectionExtensions);this.system.mapSingleton("ksAccess",Primetime.dependencies.protection.KeySystem_Access);this.system.mapSingleton("serverAccess",Primetime.dependencies.protection.servers.Access);this.system.mapSingleton("ccDecoder",Primetime.dependencies.CCDecoder);this.system.mapSingleton("virtualTimeline",Primetime.VirtualTimeline);this.system.mapSingleton("timelineMonitor",
Primetime.TimelineMonitor);this.system.mapSingleton("seiParser",Primetime.dependencies.SEIParser);this.system.mapSingleton("ssaiController",Primetime.dependencies.SSAIController);this.system.mapSingleton("id3Controller",Primetime.dependencies.ID3MetadataController);this.system.mapSingleton("captionator",captionator);this.system.mapClass("mediaPlayerClient",Primetime.mse.MediaPlayerClient);this.system.mapClass("videoEngineTimeline",Primetime.VideoEngineTimeline);this.system.mapSingleton("mediaController",
Primetime.dependencies.MediaController);this.system.mapSingleton("urlUtils",Primetime.dependencies.UrlUtils)}}};Primetime.di.CommonContext.getContextInstance=function(a){var b=null;a===AdobePSDK.MediaResourceType.DASH?b=new Primetime.di.DashContext:a===AdobePSDK.MediaResourceType.HLS&&(b=new Primetime.di.HlsContext);return b};(function(){Primetime.dependencies.ISOBMFF=Primetime.dependencies.ISOBMFF||{};Primetime.dependencies.ISOBMFF.Box=function(a,b){this.size=0;this.type=null;this.lastParsePos=this.pos=0;this.children=[];this.jsonData=null;var c=b,d,e,f="";if("undefined"!==typeof a&&null!==a&&"undefined"!==typeof c&&!(a.byteLength<c+8)){this.pos=c;this.size=a.getUint32(c);c+=4;for(d=0;4>d;d+=1)e=a.getInt8(c),f+=String.fromCharCode(e),c+=1;this.type=f;1===this.size?(this.size=utils.Math.to64BitNumber(a.getUint32(c+4),
a.getUint32(c)),c+=8):0===this.size&&(this.size=a.byteLength-this.pos);this.lastParsePos=c}};Primetime.dependencies.ISOBMFF.Box.prototype={constructor:Primetime.dependencies.ISOBMFF.Box,debug:void 0,getType:function(){return this.type},getSize:function(){return this.size},getStartPos:function(){return this.pos},getEndPos:function(){return this.pos+this.size},getLastParsePos:function(){return this.lastParsePos},addChild:function(a){"undefined"!==typeof a&&null!==a&&this.children.push(a)},setJSONData:function(a){this.jsonData=
a},getJSONData:function(){return this.jsonData},parse:function(a,b){var c=this.getLastParsePos(),d=this.getEndPos();if("undefined"!==typeof a&&null!==a&&"undefined"!==typeof c&&!(d>a.byteLength)){for(;c<d;)c=new Primetime.dependencies.ISOBMFF.FullBox(a,c),this.addChild(c),"undefined"!==typeof b&&b(a,c),c=c.getEndPos();this.lastParsePos=c}}}})();(function(){Primetime.dependencies.ISOBMFF=Primetime.dependencies.ISOBMFF||{};var a=["pdin","mvhd","tkhd","mdhd","hdlr"];Primetime.dependencies.ISOBMFF.FullBox=function(b,c){this.version=0;this.flags=[];this.baseConstructor(b,c);if(-1<a.indexOf(this.type)){var d=this.lastParsePos,e;if("undefined"!==typeof b&&null!==b&&"undefined"!==typeof d&&!(b.byteLength<d+4)){this.version=b.getUint8(d);d+=1;for(e=0;3>e;e+=1)this.flags.push(b.getUint8(d)),d+=1;this.lastParsePos=d}}};Primetime.dependencies.ISOBMFF.FullBox.prototype=
Primetime.helper.extend(Primetime.dependencies.ISOBMFF.Box.prototype,{constructor:Primetime.dependencies.ISOBMFF.FullBox,baseConstructor:Primetime.dependencies.ISOBMFF.Box.prototype.constructor,getVersion:function(){return this.version},toJSON:function(){var a={size:this.size,type:this.type,version:this.version,flags:this.flags};this.jsonData&&(a=Primetime.helper.extend(a,this.jsonData));a.children=[];for(var c=0;c<this.children.length;c++)a.children.push(this.children[c].toJSON());return a}})})();(function(){Primetime.dependencies.ISOBMFF=Primetime.dependencies.ISOBMFF||{};var a=function(b,c){if("trak"===c.getType())c.parse(b,a);else if("tkhd"===c.getType()){var d=c.getLastParsePos(),e,f,g,h;1===c.getVersion()&&"undefined"!=typeof utils?(e=utils.Math.to64BitNumber(b.getUint32(d+4),b.getUint32(d)),d+=8,f=utils.Math.to64BitNumber(b.getUint32(d+4),b.getUint32(d)),d+=8,g=b.getUint32(d),d+=8,h=utils.Math.to64BitNumber(b.getUint32(d+4),b.getUint32(d)),d+=8):(e=b.getUint32(d),d+=4,f=b.getUint32(d),
d+=4,g=b.getUint32(d),d+=8,h=b.getUint32(d),d+=4);c.setJSONData({creationTime:e,modificationTime:f,trackId:g,duration:h});c.lastParsePos=d}else if("mdia"===c.getType())c.parse(b,a);else if("mdhd"===c.getType()){d=c.getLastParsePos();1===c.getVersion()&&"undefined"!=typeof utils?(e=utils.Math.to64BitNumber(b.getUint32(d+4),b.getUint32(d)),d+=8,f=utils.Math.to64BitNumber(b.getUint32(d+4),b.getUint32(d)),d+=8,g=b.getUint32(d),d+=4,h=utils.Math.to64BitNumber(b.getUint32(d+4),b.getUint32(d)),d+=8):(e=
b.getUint32(d),d+=4,f=b.getUint32(d),d+=4,g=b.getUint32(d),d+=4,h=b.getUint32(d),d+=4);for(var l="",n=b.getUint16(d),d=d+2,k=0;3>k;k++)var m=n>>10-5*k,m=m&31,m=m+96,l=l+String.fromCharCode(m);c.setJSONData({creationTime:e,modificationTime:f,timescale:g,duration:h,language:l});c.lastParsePos=d}else if("hdlr"===c.getType()){e=c.getLastParsePos();g=b.getUint32(e);e+=4;h="";for(d=0;4>d;d+=1)f=b.getUint8(e),h+=String.fromCharCode(f),e+=1;c.setJSONData({predefined:g,handlerType:h});c.lastParsePos=e}};Primetime.dependencies.ISOBMFF.moov=
function(a){this.box=a};Primetime.dependencies.ISOBMFF.moov.prototype={constructor:Primetime.dependencies.ISOBMFF.moov,parse:function(b){this.box.parse(b,a)},getTracks:function(){var a,c=[];for(a=0;a<this.box.children.length;a++)if("trak"===this.box.children[a].type){for(var d=this.box.children[a],e=0,f=0,g=null,h={},e=0;e<d.children.length;e++)if("tkhd"===d.children[e].type)(g=d.children[e].getJSONData())&&(h=Primetime.helper.extend(h,g));else if("mdia"===d.children[e].type)for(var l=d.children[e],
f=0;f<l.children.length;f++)("mdhd"===l.children[f].type||"hdlr"===l.children[f].type)&&(g=l.children[f].getJSONData())&&(h=Primetime.helper.extend(h,g));c.push(h)}return c}}})();(function(){var a={vide:"video",soun:"audio",auxv:"video"},b=NaN;Primetime.dependencies.ISOBMFFParser=function(){this.boxes={}};Primetime.dependencies.ISOBMFFParser.prototype={constructor:Primetime.dependencies.ISOBMFFParser,debug:void 0,system:void 0,boxParser:void 0,getTracks:function(){var b,d,e;b=this.boxes.moov;var f=new Primetime.vo.SegmentTracks;if(b){e=(new Primetime.dependencies.ISOBMFF.moov(b)).getTracks();if(!e)return f;for(b=0;b<e.length;b++)d=e[b],d.handlerType&&a[d.handlerType]&&(d=
new Primetime.vo.SegmentTrackInfo(d.trackId,a[d.handlerType],d.name,d.language),"video"===d.kind?f.videoTracks.push(d):"audio"===d.kind&&f.audioTracks.push(d))}return f},parseInitSegment:function(a){for(var d=new DataView(a),e=0;e<d.byteLength;){e=new Primetime.dependencies.ISOBMFF.FullBox(d,e);this.boxes[e.getType()]=e;if("moov"===e.getType()){var f=new Primetime.dependencies.ISOBMFF.moov(e);f.parse(d)}e=e.getEndPos()}if(f)for(d=f.getTracks(),f=0;f<d.length;f++)if(track=d[f],"vide"===track.handlerType){mdhdBox=
this.boxParser.parse(a).getBox("mdhd");b=mdhdBox.timescale;break}},parseVideoSegment:function(a){var d=this.boxParser.parse(a).getBox("mdat"),e=new Primetime.dependencies.ISOBMFF.mdat;a=this.system.getObject("fragmentExt").getSamplesInfo(a);e.parse.call(this,d,a,b)}}})();(function(){Primetime.dependencies.TSParser=function(){};Primetime.dependencies.TSParser.prototype={constructor:Primetime.dependencies.TSParser,debug:void 0,system:void 0,log:void 0,parse:function(a,b,c,d){try{var e=0,f=0,g=0,h=!1,l=0,n=[],k=0,m=[],p=0,u=[],q=0,t=!1,r=!1,w=!1,z=[],G=[],E=!1,I=0,N=!1,L=0,w=!1,x,A,H,y,F,D="",J=!0,S=0,O=[0,0,0,0,0,0,0,0],B=0,K=0,P=[],X=-1,v=-1,M=-1,Z=new Uint8Array(a),T=!0,aa=[],ea=function(){var a=[0,1,3,7,15,31,63,127,255],b=1,c=m.length,d=0,e=0,f=0;readByte=function(){if(b>=
c)throw Error("Insufficient data while parsing SPS");var a=m[b];b++;0===a?(d++,b<c&&2==d&&3==m[b]&&(b++,d=0)):d=0;return a};skipBits=function(a){if(!(a<e))for(a-=e;8<=a;)f=readByte(),a-=8;e-=a};getNextBit=function(){0==e&&(f=readByte(),e=8);e--;return 0<(f>>e&1)};getBits=function(b){var c;if(b>=e){c=f&a[e];for(b-=e;8<=b;)c=c<<8|readByte(),b-=8;0<b?(f=readByte(),e=8-b,c=c<<b|f>>e&a[b]):e=0}else e-=b,c=f>>e&a[b];return c};readUE=function(){for(var a=0;!getNextBit()&&32>a;)a++;return getBits(a)+((1<<
a)-1)};skipScalingList=function(){var a,b=8;a=8;for(var c=0;c<len;c++)0!=a&&(a=readSE(),a=(b+a+256)%256),b=0==a?b:a};readSE=function(){var a=readUE(),b=a+1>>1;return 1==(a&1)?b:-b};S=readByte();O[0]=1==getNextBit()?1:0;O[1]=1==getNextBit()?1:0;O[2]=1==getNextBit()?1:0;getBits(5);B=readByte();readUE();var g=1,g=!1;if(66!=S&&77!=S&&88!=S&&(g=readUE(),3==g&&getNextBit(),readUE(),readUE(),getNextBit(),g=getNextBit()))for(var k=0;8>k;k++)(g=getNextBit())&&(6>k?skipScalingList(16):skipScalingList(64));
if(83!=S&&86!=S){log2MaxFrameNumMinus4=readUE();picOrderCntType=readUE();if(0==picOrderCntType)log2MaxPicOrderCntLsbMinus4=readUE();else if(1==picOrderCntType)for(deltaPicOrderAlwaysZeroFlag=getNextBit(),offsetForNonRefPic=readSE(),offsetForTopToBottomField=readSE(),numRefFramesInPicOrderCntCycle=readUE(),offsetForRefFrame=new Array[numRefFramesInPicOrderCntCycle],k=0;k<numRefFramesInPicOrderCntCycle;k++)offsetForRefFrame[k]=readSE();numRefFrames=readUE();gapsInFrameNumValueAllowedFlag=getNextBit();
picWidthInMbsMinus1=readUE();picHeightInMapUnitsMinus1=readUE();(frameMbsOnlyFlag=getNextBit())||(mbAdaptiveFrameFieldFlag=getNextBit());direct8x8InferenceFlag=getNextBit();width=16*(picWidthInMbsMinus1+1);height=16*(picHeightInMapUnitsMinus1+1);frameMbsOnlyFlag||(height*=2);if(frameCroppingFlag=getNextBit())leftOffset=readUE(),rightOffset=readUE(),topOffset=readUE(),bottomOffset=readUE(),height-=2*(topOffset+bottomOffset),width-=2*(rightOffset+leftOffset)}},ga=function(a){t=!0;a&&(0===x[A+2]&&(A+=
1),A+=3);a=H;7!==(a&31)||r||(z.length||z.push.apply(z,m),ea(),r=!0);8===(a&31)&&(G.length||G.push.apply(G,u));A<x.length&&(H=x[A++])},ia=function(a,b){if(T){var c=a+b,d=aa.length;d&&a===aa[d-1].start?aa[d-1]={start:a,end:c}:aa.push({start:a,end:c})}},ba=function(a){var c=a[0]>>>6&3,d=a[0]>>>2&15;k=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350][d];a=((a[0]&1)<<2)+(a[1]>>6&3);var e;switch(c){case 0:break;case 1:break;case 2:break;default:return}n=[];Primetime.BrowserExtensions.isFirefox()?
6<=d?(c=5,n=Array(4),e=d-3):(c=2,n=Array(2),e=d):Primetime.BrowserExtensions.isAndroid()?(c=2,n=Array(2),e=d):(c=5,6<=d?e=d-3:(1===a&&(c=2,n=Array(2)),e=d));D="mp4a.40.5";b||(D="mp4a.40."+c);n[0]=(c<<3&248)+(d>>1&7);n[1]=(d<<7&128)+(a<<3&120);5===c&&(n[1]|=(e&14)>>1,n[2]=(e&1)<<7,n[2]|=8,n[3]=0)},la=function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},qa=function(a){var b=a.length,c;a:{c=0;var d;do if(d=la(a.subarray(c,c+3)),c+=3,"ID3"===d){c+=3;d=a[c++]&127;var e=a[c++]&
127,f=a[c++]&127,g=a[c++]&127;for(d=c+((d<<21)+(e<<14)+(f<<7)+g);c+8<=d;)switch(e=la(a.subarray(c,c+4)),c+=4,c++,c++,c++,c++,c++,c++,e){case "PRIV":"com.apple.streaming.transportStreamTimestamp"===la(a.subarray(c,c+44))&&(c+=44,c+=4,e=a[c++]&1,F=!0,f=((a[c++]<<23)+(a[c++]<<15)+(a[c++]<<7)+a[c++])/45,e&&(f+=4.772185884E7),y=f=Math.round(f))}c=d}else if("3DI"===d)c+=7,console.log("3DI footer found, end: "+c);else{(d=c-=3)&&(F||console.log("ID3 tag found, but no timestamp"));break a}while(1);c=void 0}if(F){for(;c<
b-1&&(255!==a[c]||240!==(a[c+1]&240));c++);b=90*y;d=a[c+1]&1?7:9;n&&n.length||ba(a.subarray(c+2,c+d));return[D,"",b,""]}},ja=function(a){for(;e<a.length&&(!(z.length&&G.length&&n.length)||T);){var b=a.subarray(e,e+188);g++;var c=e;e+=188;var d=(b[1]&31)<<8|b[2],r=b[1]&64,y=b[3]&32;x=b.subarray(4);var F=0;y&&(F=x[0]);y&&(x=x.subarray(F+1));F=0;if(r&&(fa=0,0===x[0]&&0===x[1]&&1==x[2])){fa=x[3];r=6;r++;var U=(x[r]&192)>>6;r++;y=x[r];r++;U&2&&(F=x[r]&14,F*=128,F+=x[r+1],F*=256,F+=x[r+2]&254,F*=128,F+=
x[r+3],F*=256,F+=x[r+4]&254,F/=2,U&1&&(F=x[r+5]&14,F*=128,F+=x[r+6],F*=256,F+=x[r+7]&254,F*=128,F+=x[r+8],F*=256,F+=x[r+9]&254,F/=2),-1===M||M>F&&(224===fa||192===fa))&&(M=F);r+=y;x=x.subarray(r);224===fa&&(-1===X&&(X=d),f||(f=d))}if(v===d||-1===v&&192===fa&&!n.length)for(-1===v&&(v=d),E||(E=!0),A=0;A<x.length;)if(0<I){for(I;0<I&&A<x.length;I--)A++;0===I?(ia.call(this,c,188-(x.length-A)),T=!1):ia.call(this,c,b.length)}else if(N&&240===(x[A]&240)||A+1<x.length&&255===x[A]&&240===(x[A+1]&240))A+=1,
A>=x.length||(N||(A+=1),J=x[A-1]&1,L=0!=L?L:J?5:7,N=!1,ia.call(this,c,b.length));else if(A+1>=x.length&&x[A]&1){N=!0;ia.call(this,c,b.length);break}else if(0<L){for(L;0<L&&A<x.length;L--)P[K++]=x[A++];0===L&&(K=0,n&&n.length||ba(P),d=(P[1]&3)<<11|P[2]<<3|(P[3]&224)>>>5,d-=J?7:9,P=[],I=d);ia.call(this,c,b.length)}else A++;else if(!(X!==d||z.length&&G.length))for(w=!0,A=0;A<x.length;)if(h){b=!1;switch(l){case 3:1==x[A]&&(b=!0,A++);break;case 2:if(1==x[A]||0==x[A]&&1==x[A+1])b=!0,A=1==x[A]?A+1:A+2;break;
case 1:0===x[A]&&(1===x[A+1]||0===x[A+1]&&1===x[A+2])&&(b=!0,A=1===x[A+1]?A+2:A+3)}if(b)ga(!1);else{if(7===(H&31))for(b=0;b<l;b++)m[p++]=0;if(8===(H&31))for(b=0;b<l;b++)u[q++]=0}h=!1;l=0}else if(0===x[A]&&A+1<x.length&&0===x[A+1]&&(A+2<x.length&&1===x[A+2]||A+3<x.length&&0===x[A+2]&&1===x[A+3]))ga.call(this,!0);else{if(!t&&0==x[A])if(A+2<x.length&&1<x[A+2])h=!1;else if(A+1<x.length&&0!=x[A+1])h=!1;else{l=A+2<x.length?3:A+1<x.length?2:1;h=!0;break}switch(H&31){case 7:t&&(m[p++]=H,t=!1);m[p++]=x[A++];
lastByteToMdat=!1;break;case 8:t&&(u[q++]=H,t=!1);u[q++]=x[A++];lastByteToMdat=!1;break;case 5:hasKeyFrame=!0;default:t&&(t=!1),A++}}}w&&(b="",z.length||(b+="No SPS found, "),G.length||(b+="No PPS found, "),b.length&&console.log(b));c=B.toString(16);1===c.length&&(c="0"+c);d=parseInt(O.join(""),2).toString(16);1===d.length&&(d="0"+d);b="";w&&(b="avc1."+S.toString(16)+d+c);c=new ArrayBuffer(188*aa.length);d=new Uint8Array(c);y=r=0;for(F=aa.length;y<F;y++)for(var U=aa[y],C=U.start;C<U.end;C++)d[r++]=
a[C];return[D,b,M,{sampleRate:k,buffer:c}]},fa=0;if(c===Primetime.MimeTypeUtils.Extension.TS)return ja(Z);if(c===Primetime.MimeTypeUtils.Extension.AAC)return qa(Z);console.log("file format is other than ts or aac")}catch(da){return d("Parsing the TS Segment failed. Error: "+da,"parse",a),["","",""]}}}})();(function(){Primetime.dependencies.ISOBMFF=Primetime.dependencies.ISOBMFF||{};var a,b,c=function(c){for(var e,f=0;f<a.length;f++)if(e=a[f],e.offset+e.size>=c)return a[f].cts/(isNaN(b)?1:b/1E3)};Primetime.dependencies.ISOBMFF.mdat=function(){};Primetime.dependencies.ISOBMFF.mdat.prototype={constructor:Primetime.dependencies.ISOBMFF.mdat,parse:function(d,e,f){var g=d.data,h=g.byteOffset,l=0;d=l+d.size-8;a=e;for(b=f;l<d;)e=g.getUint32(l),l+=4,f=g.getUint8(l)&31,6===f&&this.system.getObject("seiParser").parse(g.buffer,
!0,h+l-4,h+l+e-1,c(h+l)),l+=e},system:void 0}})();Primetime.vo.SegmentTrackInfo=function(a,b,c,d){this.id=a;this.kind=b;this.label=c;this.language=d};Primetime.vo.SegmentTrackInfo.prototype={constructor:Primetime.vo.SegmentTrackInfo};Primetime.vo.SegmentTracks=function(){this.videoTracks=[];this.audioTracks=[];this.textTracks=[]};Primetime.vo.SegmentTracks.prototype={constructor:Primetime.vo.SegmentTracks,getTracks:function(a){if(typeof("undefined"!==a&&null!==a))switch(a){case "video":return this.videoTracks;case "audio":return this.audioTracks;case "text":return this.textTracks}return null}};Primetime.di.DashContext=function(){var a=null;return{system:void 0,setup:function(){Primetime.di.DashContext.prototype.setup.call(this);a=new Primetime.di.CommonContext;this.system.injectInto(a);this.system.mapClass("parser",Primetime.dependencies.DashParser);this.system.mapSingleton("manifestExt",Primetime.dependencies.DashManifestExtensions);this.system.mapSingleton("metricsExt",Primetime.dependencies.DashMetricsExtensions);this.system.mapSingleton("timeline",Primetime.dependencies.DashTimeline);
this.system.mapSingleton("adapter",Primetime.dependencies.DashAdapter);this.system.mapClass("representationController",Primetime.dependencies.RepresentationController);this.system.mapSingleton("abrController",Primetime.dependencies.DashAbrController);this.system.mapClass("textController",Primetime.dependencies.DashTextController);this.system.mapClass("indexHandler",Primetime.dependencies.DashHandler)}}};Primetime.di.DashContext.prototype=new Dash.di.DashContext;
Primetime.di.DashContext.prototype.constructor=Primetime.di.DashContext;(function(){var a=function(a,b,c,d){var e=new Primetime.vo.MediaTypeTrackInfo;e.lang=b;e.mediaInfo=a;if(c&&0<c.length)for(a=0,b=c.length;a<b;a+=1)"main"===c[a]&&(e.isDefault=!0),e.contentDescriptors.push(c[a]);if(d&&0<d.length)for(a=0,b=d.length;a<b;a+=1)e.presentationDescriptors.push(d[a]);return e},b=function(b){if("undefined"===typeof b||null===b)return null;if(b.mediaTypeTrackInfos&&0<b.mediaTypeTrackInfos.length)return b.mediaTypeTrackInfos;var c=this.getDataForMedia(b),d=null,e=null,f=null,
g=null,u=[],q,t;if(c)if(d=c.period.mpd.manifest.Period_asArray[c.period.index].AdaptationSet_asArray[c.index],(g=this.manifestExt.getContentComponentsForAdaptationAndType(d,b.type))&&0<g.length)for(c=0,t=g.length;c<t;c+=1)e=this.manifestExt.getRolesForAdaptation(d,g[c]),f=this.manifestExt.getViewpointsForAdaptation(d,g[c]),q=this.manifestExt.getLanguageForContentComponent(d,g[c]),e=a(b,q,e,f),u.push(e);else e=this.manifestExt.getRolesForAdaptation(d,null),f=this.manifestExt.getViewpointsForAdaptation(d,
null),q=this.manifestExt.getLanguageForAdaptation(d),e=a(b,q,e,f),u.push(e);return b.mediaTypeTrackInfos=u},c=function(a){if((a=this.getStreamsInfo(a))&&0<a.length)return 0},d=function(a,b){if("undefined"===typeof a||null===a||"undefined"===typeof b||null===b)return null;var c=this.getStreamsInfo(a);if(c&&c.length>b)return c[b]},e=function(a,b){var c=new Primetime.vo.TrackInfo,d=this.manifestExt.getRepresentationFor(b.index,b.adaptation.period.mpd.manifest.Period_asArray[b.adaptation.period.index].AdaptationSet_asArray[b.adaptation.index]);
c.id=b.id;c.quality=b.index;c.bandwidth=this.manifestExt.getBandwidth(d);c.DVRWindow=b.segmentAvailabilityRange;c.fragmentDuration=b.segmentDuration||(b.segments&&0<b.segments.length?b.segments[0].duration:NaN);c.MSETimeOffset=b.MSETimeOffset;c.useCalculatedLiveEdgeTime=b.useCalculatedLiveEdgeTime;c.mediaInfo=this.convertDataToMedia(a,b.adaptation);c.width=this.manifestExt.getWidth(d);c.height=this.manifestExt.getHeight(d);c.blackListed=b.blackListed;return c},f=function(a,b){var c=b.getCurrentRepresentation();
return c?this.convertDataToTrack(a,c):null},g=function(a,b,c){return(b=b.getRepresentationForQuality(c))?this.convertDataToTrack(a,b):null};Primetime.dependencies.DashAdapter=function(){var a=new Dash.dependencies.DashAdapter;return Primetime.helper.extend(a,{_streamInfos:[],_adaptations:{},constructor:Primetime.dependencies.DashAdapter,getStreamsInfo:function(b){this._streamInfos&&0!==this._streamInfos.length||(this._streamInfos=a.getStreamsInfo.call(this,b),this._adaptations={});return this._streamInfos},
getMediaTypeTrackInfo:b,getLastMainStreamIndex:c,getStreamInfo:d,getMediaInfoForType:function(b,c,d,e){var f=null,g=this.getDataForStream(c),q=g.id;this._adaptations[q]||(f=a.getMediaInfoForType.call(this,b,c,d))&&(this._adaptations[q]=this.manifestExt.getAdaptationsForPeriod(b,g));return"undefined"===typeof e||null===e?(f||(f=a.getMediaInfoForType.call(this,b,c,d)),f):(c=this._adaptations[q])&&c.length>e?this.convertDataToMedia(b,c[e]):null},getTrackInfosforMediaInfo:function(a,b){if("undefined"!==
typeof a&&null!==a&&"undefined"!==typeof b&&null!==b){var c,d,e=null;c=this.getDataForMedia(b);var f=[],g=null;c&&(e=this.manifestExt.getRepresentationsForAdaptation(a,c));if(e&&0<e.length)for(c=0,d=e.length;c<d;c++)g=this.convertDataToTrack(a,e[c]),f.push(g);return f}},convertDataToTrack:e,getCurrentTrackInfo:f,getTrackInfoForQuality:g,convertDataToMedia:function(b,c){var d=c.period.mpd.manifest.Period_asArray[c.period.index].AdaptationSet_asArray[c.index],e=a.convertDataToMedia.call(this,b,c);e&&
(e.trickPlayAdaptationIds=this.manifestExt.getIsTrickPlayAdaptation(b,d,c),e.trickPlayAdaptationIds&&(e.isTrickPlayTrack=!0));return e},reset:function(){a.reset.call(this);this._streamInfos=[];this._adaptations={}}})}})();Primetime.dependencies.RepresentationController=function(){var a=new Dash.dependencies.RepresentationController;return Primetime.helper.extend(a,{updateData:function(b,c,d){a.updateData.call(this,b,c,d);if("video"===d){b=this.manifestModel.getValue();d=this.manifestExt.getAdaptationsForPeriod(b,c.period);for(var e=c.id,f=0;f<d.length;f+=1)if("video"===d[f].type){var g=b.Period_asArray[c.period.index].AdaptationSet_asArray[d[f].index];if(g.EssentialProperty&&"http://dashif.org/guidelines/trickmode"===
g.EssentialProperty.schemeIdUri&&g.EssentialProperty.value===e||g.SupplementalProperty&&"http://dashif.org/guidelines/trickmode"===g.SupplementalProperty.schemeIdUri&&g.SupplementalProperty.value===e){c=this.manifestExt.getRepresentationsForAdaptation(b,d[f]);for(b=0;b<c.length;b++)if(!isNaN(c[b].maxPlayoutRate)){this._maxPlayoutRep=c[b];break}break}}}},initialize:function(b){a.initialize.call(this,b);b.setTrackController(this)},getTrickPlayTrack:function(){return this._maxPlayoutRep}})};(function(){Primetime.dependencies.SegmentExtensions=function(){this.segmentParser=null};Primetime.dependencies.SegmentExtensions.prototype={constructor:Primetime.dependencies.SegmentExtensions,debug:void 0,system:void 0,parseInitSegment:function(a,b){"undefined"!==typeof a&&null!==a&&"undefined"!==typeof b&&null!==b&&-1<(a.mimeType||"").indexOf("/mp4")&&(this.segmentParser=this.system.getObject("isobmffParser"),this.segmentParser.parseInitSegment(b))},getTracks:function(){if(this.segmentParser)return this.segmentParser.getTracks()}}})();Primetime.dependencies.DashManifestExtensions=function(){Primetime.dependencies.DashManifestExtensions.prototype.baseConstructor.call(this);this.getViewpointsForAdaptation=function(a,b){if("undefined"===typeof a||null===a)return null;var c,d,e,f=[];if("undefined"!==typeof b&&null!==b&&b.hasOwnProperty("Viewpoint_asArray")&&0<b.Viewpoint_asArray.length)for(c=0,d=b.Viewpoint_asArray.length;c<d;c++)e=b.Viewpoint_asArray[c],e.hasOwnProperty("value")&&f.push(e.value);if(a.hasOwnProperty("Viewpoint_asArray")&&
0<a.Viewpoint_asArray.length)for(c=0,d=a.Viewpoint_asArray.length;c<d;c++)e=a.Viewpoint_asArray[c],e.hasOwnProperty("value")&&f.push(e.value);return f};this.getContentComponentsForAdaptationAndType=function(a,b){if("undefined"===typeof a||null===a||"undefined"===typeof b||null===b||!a.hasOwnProperty("ContentComponent_asArray")||0===a.ContentComponent_asArray.length)return null;var c,d,e=[];c=0;for(d=a.ContentComponent_asArray.length;c<d;c++)a.ContentComponent_asArray[c].contentType&&a.ContentComponent_asArray[c].contentType===
b&&e.push(a.ContentComponent_asArray[c]);0===e.length&&this.getIsTypeOf(a,b)&&(e=a.ContentComponent_asArray);return e};this.getLanguageForContentComponent=function(a,b){return"undefined"===typeof a||null===a||"undefined"===typeof b||null===b?null:b.hasOwnProperty("lang")?b.lang:this.getLanguageForAdaptation(a)};this.getAdaptationForType=function(a,b,c){this.getIsTextTrack(c)&&(c="text");return Primetime.dependencies.DashManifestExtensions.prototype.getAdaptationForType.call(this,a,b,c)};this.getWidth=
function(a){return a.width};this.getHeight=function(a){return a.height};this.getDuration=function(a){var b;b=Primetime.dependencies.DashManifestExtensions.prototype.getDuration.call(this,a);a.hasOwnProperty("mediaPresentationDuration")||(b=9099999999999);return b};this.getIsTrickPlayAdaptation=function(a,b,c){if("undefined"===typeof b||null===b)return null;var d=null;if(b.EssentialProperty&&"http://dashif.org/guidelines/trickmode"===b.EssentialProperty.schemeIdUri||b.SupplementalProperty&&"http://dashif.org/guidelines/trickmode"===
b.SupplementalProperty.schemeIdUri){a=this.getRepresentationsForAdaptation(a,c);for(c=0;c<a.length;c++)if(isNaN(a[c].maxPlayoutRate))return null;d=b.EssentialProperty?b.EssentialProperty.value:b.SupplementalProperty.value}d&&(d=isNaN(d)?d.trim().split(" "):[d]);return d}};Primetime.dependencies.DashManifestExtensions.prototype=new Dash.dependencies.DashManifestExtensions;Primetime.dependencies.DashManifestExtensions.prototype.baseConstructor=Primetime.dependencies.DashManifestExtensions.prototype.constructor;
Primetime.dependencies.DashManifestExtensions.prototype.constructor=Primetime.dependencies.DashManifestExtensions;Primetime.dependencies.DashMetricsExtensions=function(){Primetime.dependencies.DashMetricsExtensions.prototype.baseConstructor.call(this);this.getCurrentDVRInfo=function(a){if(null===a)return null;a=a.DVRInfo;var b,c,d=new MediaPlayer.vo.metrics.DVRInfo,e,f,g;if(null===a||0>=a.length)return null;b=a.length-1;c=a[b];d.time=c.time;d.manifestInfo=c.manifestInfo;d.streamInfo=c.streamInfo;f=c.range.start;g=c.range.end;if(c.manifestInfo.isDynamic)c.manifestInfo.DVRWindowSize&&c.manifestInfo.DVRWindowSize>
g-f&&(f-=c.manifestInfo.DVRWindowSize-(g-f));else{for(e=0;e<=b;e++)a[e].range.start<f&&(f=a[e].range.start),a[e].range.end>g&&(g=a[e].range.end);g-f<c.manifestInfo.duration&&(g+=c.manifestInfo.duration-(g-f))}d.range={start:f,end:g};return d}};Primetime.dependencies.DashMetricsExtensions.prototype=new Dash.dependencies.DashMetricsExtensions;Primetime.dependencies.DashMetricsExtensions.prototype.baseConstructor=Primetime.dependencies.DashMetricsExtensions.prototype.constructor;
Primetime.dependencies.DashMetricsExtensions.prototype.constructor=Primetime.dependencies.DashMetricsExtensions;Primetime.dependencies.DashTimeline=function(){Primetime.dependencies.HlsTimeline.prototype.baseConstructor.call(this);this.setup=function(){this[Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED]=this.onDataUpdateCompleted};this.updateStartTimes=function(a){if("undefined"!==typeof a&&null!==a)for(var b=null,c=null,d=0;d<a.Period_asArray.length;d++)b=a.Period_asArray[d],b.hasOwnProperty("start")||(0!==d||this.isDynamic(a)||(b.start=0),null!==c&&(b.start=c.start+c.duration)),
b.hasOwnProperty("segmentOffset")||(b.segmentOffset=b.start),c=b};this.getDuration=function(a){return a.hasOwnProperty("mediaPresentationDuration")?a.mediaPresentationDuration:Number.MAX_VALUE};this.updatePeriodDuration=function(a){if("undefined"!==typeof a&&null!==a)if(1===a.Period_asArray.length){var b=a.Period_asArray[0];!b.hasOwnProperty("duration")&&a.mediaPresentationDuration&&(b.duration=a.mediaPresentationDuration)}else{for(var c=0;c<a.Period_asArray.length-1;c++){var b=a.Period_asArray[c],
d=a.Period_asArray[c+1];!b.hasOwnProperty("duration")&&b.hasOwnProperty("start")&&d.hasOwnProperty("start")&&(b.duration=d.start-b.start)}b=a.Period_asArray[a.Period_asArray.length-1];b.hasOwnProperty("duration")||(b.duration=a.mediaPresentationDuration-b.start)}};this.clonePeriod=function(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b};this.splitPeriod=function(a,b){var c=this.clonePeriod(a);c.totalSegmentDuration=c.duration;c.duration=c.localStartTime+c.duration-b;c.localStartTime=
b;a.duration=b-a.localStartTime;c.start=a.start+a.duration;c.replaceDuration=a.replaceDuration;a.replaceDuration=0;a.isLast=!1;return c};this.addPeriods=function(a){this.updatePeriod(a)};this.updateLocalStartTimes=function(a){for(var b=null,c=this.isDynamic(a),d=0;d<a.Period_asArray.length;d++)b=a.Period_asArray[d],b.hasOwnProperty("localStartTime")||this.isDynamic(a)&&!b.isAd||(b.localStartTime=0),c&&!b.isAd&&(b.localStartTime=b.start)};this.updatePeriodStartTimes=function(a){if("undefined"!==typeof a&&
null!==a)for(var b=null,c=null,d=0;d<a.Period_asArray.length;d++)b=a.Period_asArray[d],b.hasOwnProperty("start")||0!==d||(b.start=0),null!==c&&(b.start=c.start+c.duration),b.hasOwnProperty("begin")||(b.begin=b.start),b.hasOwnProperty("segmentOffset")||(b.segmentOffset=b.start),c=b};this.updatePeriod=function(a){if("undefined"!==typeof a&&null!==a){for(var b=0;b<a.Period_asArray.length;b++){var c=a.Period_asArray[b];!c.hasOwnProperty("localStartTime")&&c.hasOwnProperty("start")&&(c.localStartTime=
c.start);c.hasOwnProperty("index")||(c.index=b);c.hasOwnProperty("id")||(c.id=0)}this.updatePeriodDuration(a)}};this.mergeManifest=function(a){void 0===this.timelineView?(this.timelineView=a,a.Period_asArray[a.Period_asArray.length-1].hasOwnProperty("id")?this.lastPeriodId=a.Period_asArray[a.Period_asArray.length-1].id:this.lastPeriodId=0,this.updateStartTimes(this.timelineView),this.updatePeriod(this.timelineView)):this.timelineView!==a&&(this.timelineView=a,null!==this.timelineView&&void 0!==this.timelineView&&
(this.updateStartTimes(a),this.updatePeriod(a)))};this.isHLS=function(){return!1};this.update=function(a){this.mergeManifest(a)}};Primetime.dependencies.DashTimeline.prototype={constructor:Primetime.dependencies.DashTimeline};Primetime.dependencies.DashTimeline.prototype=new Primetime.dependencies.Timeline;Primetime.dependencies.DashTimeline.prototype.baseConstructor=Primetime.dependencies.Timeline.prototype.constructor;Primetime.dependencies.DashTimeline.prototype.constructor=Primetime.dependencies.DashTimeline;Primetime.dependencies.DashAbrController=function(){Primetime.dependencies.DashAbrController.prototype.baseConstructor.call(this);var a={},b={},c={},d={},e,f=function(a,c){var d=this.streamProcessorDict[a];if(void 0===d||!d)return null;b[c]=b[c]||{};if(!b[c].hasOwnProperty(a))if(this.abrRulesCollection&&this.abrRulesCollection.bufferLengthBasedRule){var e=h(a,c),f=d.getAllRepresentations(),e=b[c][a]=this.abrRulesCollection.bufferLengthBasedRule.getInitialQuality(f,e,a);this.abrRulesCollection.bufferLengthBasedRule.reset();
d&&d.bufferController&&"function"===typeof d.bufferController.setInitialRequiredQuality&&d.bufferController.setInitialRequiredQuality(e)}else b[c][a]=0;return b[c][a]},g=function(a,b){c[b]=c[b]||{};c[b].hasOwnProperty(a)||(c[b][a]=0);return c[b][a]},h=function(b,c){a[c]=a[c]||{};a[c].hasOwnProperty(b)||(a[c][b]=0);return a[c][b]};this.onFragmentLoadProgress=function(a){if(0===MediaPlayer.dependencies.ScheduleController.LOADING_REQUEST_THRESHOLD){var b=this,c=a.data.request.mediaType,d=b.abrRulesCollection.getRules(MediaPlayer.rules.ABRRulesCollection.prototype.ABANDON_FRAGMENT_RULES),
f=this.streamProcessorDict[c].getScheduleController(),g=f.getFragmentModel();b.rulesController.applyRules(d,this.streamProcessorDict[c],function(a){function d(a){e=setTimeout(function(){b.setAbandonmentStateFor(a,MediaPlayer.dependencies.AbrController.ALLOW_LOAD)},MediaPlayer.dependencies.AbrController.ABANDON_TIMEOUT)}if(a.confidence===MediaPlayer.rules.SwitchRequest.prototype.STRONG){var h=g.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.LOADING});a=a.value;var m=b.getQualityFor(c,
b.streamController.getActiveStreamInfo());a<m&&(g.abortRequests(),b.setAbandonmentStateFor(c,MediaPlayer.dependencies.AbrController.ABANDON_LOAD),b.setPlaybackQuality(c,b.streamController.getActiveStreamInfo(),a),f.replaceCanceledRequests(h),d(c))}},a,function(a,b){return b})}};this.setup=function(){this[MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_PROGRESS]=this.onFragmentLoadProgress};this.initialize=function(a,b){this.streamProcessorDict[a]=b;this.processorCount++;d[a]=d[a]||
{};d[a].state=MediaPlayer.dependencies.AbrController.ALLOW_LOAD};this.getPlaybackQuality=function(a,d){var e=this,m=a.getType(),p=a.getStreamInfo().id,u,q,t,r,w=function(g){var t=h(m,p);u=g.value;r=g.confidence;0>u&&(u=0);u>t&&(u=t);q=f.call(this,m,p);u!==q&&(g=u,b[p]=b[p]||{},b[p][m]=g,g=r,c[p]=c[p]||{},c[p][m]=g,e.notify(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,{mediaType:m,streamInfo:a.getStreamInfo(),oldQuality:q,newQuality:u}));void 0!==d&&d()};u=f.call(this,m,p);
r=g(m,p);e.autoSwitchBitrate?(t=e.abrRulesCollection.getRules(MediaPlayer.rules.ABRRulesCollection.prototype.QUALITY_SWITCH_RULES),e.rulesController.applyRules(t,a,w.bind(e),u,function(a,b){a=a===MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE?0:a;return Math.max(a,b)})):void 0!==d&&d()};this.setPlaybackQuality=function(c,d,e){var g=d.id,h=f.call(this,c,g);if(null===e||isNaN(e)||0!==e%1)throw"argument is not an integer";e!==h&&0<=e&&a[g].hasOwnProperty(c)&&e<=a[g][c]&&(g=d.id,b[g]=b[g]||{},b[g][c]=
e,this.notify(Primetime.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,{mediaType:c,streamInfo:d,oldQuality:h,newQuality:e,confidence:MediaPlayer.rules.SwitchRequest.prototype.DEFAULT}))};this.setAbandonmentStateFor=function(a,b){d[a].state=b};this.getAbandonmentStateFor=function(a){return d[a].state};this.getQualityFor=function(a,b){return f.call(this,a,b.id)};this.getConfidenceFor=function(a,b){return g(a,b.id)};this.isPlayingAtTopQuality=function(a){var b=a.id,c=this.getQualityFor("audio",
a);a=this.getQualityFor("video",a);return c===h("audio",b)&&a===h("video",b)};this.updateTopQualityIndex=function(b){var c=b.type,d=b.streamInfo.id;b=b.representationCount-1;if(h(c,d)===b)return b;a[d]=a[d]||{};return a[d][c]=b};this.setMaxPlaybackQuality=function(b,c,d){a[c]=a[c]||{};a[c][b]=d};this.getTopQualityIndexFor=h;this.reset=function(){a={};b={};c={};d={};clearTimeout(e);e=null;Primetime.dependencies.DashAbrController.prototype.reset.call(this)};this.resetForType=function(){}};
Primetime.dependencies.DashAbrController.prototype={constructor:Primetime.dependencies.DashAbrController};Primetime.dependencies.DashAbrController.prototype=new Primetime.dependencies.AbrController;Primetime.dependencies.DashAbrController.prototype.baseConstructor=Primetime.dependencies.AbrController.prototype.constructor;Primetime.dependencies.DashAbrController.prototype.constructor=Primetime.dependencies.DashAbrController;Primetime.dependencies.DashParser=function(){Primetime.dependencies.DashParser.prototype.baseConstructor.call(this);this.unsubscribe=this.subscribe=this.notify=this.system=void 0;this.parse=function(a,b,c,d){a=Primetime.dependencies.DashParser.prototype.parse.call(this,a,c,d);this.notify(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_PARSING_COMPLETE,{url:b,manifest:a})};this.reset=function(){}};Primetime.dependencies.DashParser.prototype=new Dash.dependencies.DashParser;
Primetime.dependencies.DashParser.prototype.baseConstructor=Primetime.dependencies.DashParser.prototype.constructor;Primetime.dependencies.DashParser.prototype.constructor=Primetime.dependencies.DashParser;Primetime.dependencies.DashHandler=function(){var a=new Dash.dependencies.DashHandler;return Primetime.helper.extend(a,{constructor:Primetime.dependencies.DashHandler,getInitRequest:function(b){return b&&b.initialization?a.getInitRequest.call(this,b):null}})};Primetime.dependencies.DashHandler.prototype=new Dash.dependencies.DashHandler;Primetime.dependencies.DashHandler.prototype.baseConstructor=Primetime.dependencies.DashHandler.prototype.constructor;
Primetime.dependencies.DashHandler.prototype.constructor=Primetime.dependencies.DashHandler;Primetime.dependencies.DashTextController=function(){var a=new MediaPlayer.dependencies.TextController;return Primetime.helper.extend(a,{setup:function(){a.setup.call(this);this[Primetime.dependencies.StreamProcessor.eventList.ENAME_MEDIAINFO_CHANGED]=this.onMediaInfoChanged},initialize:function(b,c,d,e){a.initialize.call(this,b,c,d,e)},onMediaInfoChanged:function(a){this.getBuffer()&&this.getBuffer().mediaInfoChanged(a)},reset:function(b){b||this.streamProcessor&&this.streamProcessor.unsubscribe(Primetime.dependencies.StreamProcessor.eventList.ENAME_MEDIAINFO_CHANGED,
this.getBuffer());a.reset.call(this)}})};Hls=function(){return{vo:{},defaults:{VIDEO_CODEC:"avc1.640030"}}}();Primetime.di.HlsContext=function(){var a=null;return{system:void 0,setup:function(){Primetime.di.HlsContext.prototype.setup.call(this);a=new Primetime.di.CommonContext;this.system.injectInto(a);this.system.mapClass("parser",Primetime.dependencies.HlsParser);this.system.mapClass("hlsRepresentationInfo",Primetime.dependencies.RepresentationInfo);this.system.mapClass("hlsM3u8Info",Primetime.dependencies.M3U8Info);this.system.mapClass("groupRenditionInfo",Primetime.dependencies.GroupRenditionInfo);this.system.mapSingleton("manifestExt",
Primetime.dependencies.HlsManifestExtensions);this.system.mapSingleton("timeline",Primetime.dependencies.HlsTimeline);this.system.mapSingleton("adapter",Primetime.dependencies.HlsAdapter);this.system.mapClass("representationController",Primetime.dependencies.HlsRepresentationController);this.system.mapClass("indexHandler",Primetime.dependencies.HlsHandler);this.system.mapClass("initGenerator",HlsInitGenerator);this.system.mapClass("fragmentModel",Primetime.dependencies.HlsFragmentModel);this.system.mapSingleton("timelineConverter",
Primetime.dependencies.HlsTimelineConverter);this.system.mapSingleton("abrController",Primetime.dependencies.HlsAbrController);this.system.mapClass("textController",Primetime.dependencies.HlsTextController);this.system.mapSingleton("tsParser",Primetime.dependencies.TSParser);this.system.mapSingleton("segmentDecryption",Primetime.dependencies.HlsDecryption);this.system.mapSingleton("metricsExt",Primetime.dependencies.HlsMetricsExtensions)}}};Primetime.di.HlsContext.prototype=new Dash.di.DashContext;
Primetime.di.HlsContext.prototype.constructor=Primetime.di.HlsContext;Hls.vo.Representation=function(){this.uri=this.subtitles=this.video=this.audio=this.programID=this.bandwidth=null;this.backupURLs=[];this.endSequenceNum=this.startSequenceNum=this.fragmentDuration=this.index=null};Hls.vo.Representation.prototype={constructor:Hls.vo.Representation};Hls.vo.Rendition=function(){this.isDefaultPlay=this.autoSelect=this.uri=this.name=this.groupID=this.type=null};Hls.vo.Rendition.prototype={constructor:Hls.vo.Rendition};Hls.vo.Segment=function(){this.media=this.mediaRange=null;this.mediaStartTime=this.duration=NaN;this.isEncrypted=!1;this.encryptionMethod="NONE";this.keyUri=null;this.IV=NaN;this.programDateTime=void 0};Hls.vo.Segment.prototype={constructor:Hls.vo.Segment};Primetime.dependencies.HlsParser=function(){var a=[],b=[],c=[],d=[],e=!0,f=0,g=0,h=[],l=0,n={},k="",m="",p=!1,u=/^(?:(?:[a-z]+:)?\/)?\//i,q=function(a){a.extract608&&(e=!0);b.push(a)},t=function(a){c.push(a)},r=function(b){var c=b.groupID,d=b.type,e;a:{for(e=0;e<a.length;e++)if(a[e].groupID===c&&a[e].type===d){e=!0;break a}e=!1}if(e)for(e=0;e<a.length;e++)a[e].groupID===c&&a[e].type===d&&a[e].groupRenditions.push(b);else e={},e.groupID=c,e.type=d,e.groupRenditions=[],e.groupRenditions.push(b),a.push(e)},
w=function(a,b){var c={renditions:[],representations:[],trickPlayRepresentations:[]},d=function(a,b){return a.bandwidth-b.bandwidth};a=a.split(/\r?\n/);for(var e=a.length,f=null,g=null,k="",k=1;k<e;k++){var h=a[k],h=h.trim();if(0<h.length)if(0===h.indexOf("#")){if(0===h.indexOf("#EXT-X-STREAM-INF")&&null!=f)throw k="Detected #EXT-X-STREAM-INF tag with no associated variant Playlist URI line: ",Error(k+f);0!==h.indexOf("#EXT-X-STREAM-INF")||f?"#EXT-X-MEDIA"===h.substring(0,h.indexOf(":")).trim()?(g=
h,h=this.system.getObject("groupRenditionInfo").parse(g,h,b),c.renditions.push(h)):0===h.indexOf("#EXT-X-I-FRAME-STREAM-INF")&&(g=this.system.getObject("hlsRepresentationInfo"),h=g.parse(h,null,b),c.trickPlayRepresentations.push(h)):f=h}else{if(null===f)throw k="Detected variant Playlist file URI with no preceding #EXT-X-STREAM-INF tag",Error(k+": "+h);g=this.system.getObject("hlsRepresentationInfo");h=g.parse(f,h,b);f=!1;for(g=0;g<c.representations.length;g++){var m=c.representations[g];if(h.bandwidth===
m.bandwidth){m.backupRepresentations.push(h);f=!0;break}}f||c.representations.push(h);f=null}}c.representations.sort(d);c.trickPlayRepresentations.sort(d);return c},z=function(e){e.representations=b;e.trickPlayRepresentations=c;e.renditions=a;e.audioSampleInfo=d;e.isHls=!0;e.type=m;this.notify(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_PARSING_COMPLETE,{url:k,manifest:e})},G=function(a,c,d,e){f--;m=a.type;a.mediaType=e.mediaType;h.push(a);g=1;if(!f){d=b[l];d.loaded=!0;for(e=0;e<h.length;e++){a=
h[e];var k=a.mediaType;void 0===d[k]&&(d.isMuxed="muxed"===k?!0:!1,d[k]={},d[k].uri=d.uri);d[k].m3u8Info=a;d[k].startSequenceNumber=a.startSequenceNumber;d[k].endSequenceNumber=a.endSequenceNumber;d[k].m3u8Info.targetDuration=a.targetDuration;if(void 0===n.hasDiscontinuity||!n.hasDiscontinuity&&1==a.hasDiscontinuity)n.hasDiscontinuity=a.hasDiscontinuity}d.numOfPeriods=g;if(d.audio&&d.video&&"static"===d.video.m3u8Info.type)for(d.audCodec="",d.vidCodec="",a=0;a<b.length;a++)b[a].audCodec="",b[a].vidCodec=
"";n.updatedRepIndex=l;if(a=this.system.getObject("mediaPlayer"))d={},d.type=AdobePSDK.LoadInformationType.MANIFEST,k=b[l][k].uri,c=k===c?k:u.test(k)?k:c+k,d.url=c,d.periodIndex=0,a.notifyLoadInfo(d);z.call(this,n)}},E=function(a){for(var c=this,d=c.system.getObject("urlUtils"),e={onComplete:G.bind(c),onError:function(a,f,g,k,h){if(0<k.rep.backupRepresentations.length&&(void 0==k.rep.currBackupIndex||k.rep.currBackupIndex<k.rep.backupRepresentations.length-1)){void 0==k.rep.currBackupIndex?k.rep.currBackupIndex=
0:k.rep.currBackupIndex++;var m=k.rep.backupRepresentations[k.rep.currBackupIndex][k.mediaType].uri;c.log("[HLS Failover] Trying backup url: "+m,"INFO");d.fetchAndParse({url:m,baseUrl:k.baseUrl,type:"manifest"},{mediaType:k.mediaType,parser:c.system.getObject("hlsM3u8Info")},c.system.getObject("mediaPlayer")._config.networkConfiguration,e,k)}else k.rep.blackListed=!0,l=c.abrRulesCollection.bufferLengthBasedRule.getInitialQuality(b,b.length-1),m=b[l],m.blackListed?(c.log("[HLS Failover] No backup URL and profile available",
"INFO"),"contentMismatch"===h?c.errHandler.contentTypeError(null,"manifest"):("content"===f?c.errHandler.downloadError(f,a,g):c.errHandler.manifestError(a,f,g),c.log(a,"INFO"))):(c.log("[HLS Failover] Trying alternate profile: "+l,"INFO"),m.index=l,a={url:m[k.mediaType].uri,baseUrl:k.baseUrl,mediaType:k.mediaType,periodId:null,rep:m},d.fetchAndParse({url:m[k.mediaType].uri,baseUrl:k.baseUrl,type:"manifest"},{mediaType:k.mediaType,parser:c.system.getObject("hlsM3u8Info")},c.system.getObject("mediaPlayer")._config.networkConfiguration,
e,a))}},f=this.system.getObject("mediaPlayer")._config.networkConfiguration,g=0;g<a.length;g++)d.fetchAndParse({url:a[g].url,baseUrl:a[g].baseUrl,type:"manifest"},{mediaType:a[g].mediaType,parser:c.system.getObject("hlsM3u8Info")},f,e,a[g])};return{system:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,manifestExt:void 0,abrRulesCollection:void 0,timeline:void 0,log:void 0,errHandler:void 0,segmentDecryption:void 0,parse:function(g,u,G,x,A){n={};a=[];b=[];c=[];p=!1;k=u;n.isHls=!0;n.baseUrl=
G;n.Period_asArray=[];x=null;try{G&&-1===G.indexOf("/",G.length-1)&&(G+="/");var H;a:{var y=g,y=y.split(/\r?\n/),F=y.length,D=y[0];if(null===D||"#EXTM3U"!==D)throw Error("#EXTM3U is missing at the start of m3u8.");for(D=1;D<F;D++){var J=y[D],S,J=J.trim();if(0!==J.length&&0===J.indexOf("#EXT")){var O=J.indexOf(":");S=J.substring(0,O).trim();if("#EXT-X-STREAM-INF"===S||"#EXT-X-I-FRAME-STREAM-INF"===S||"#EXT-X-MEDIA"===S){H=!0;break a}}}H=!1}if(H){n.isVariant=!0;var B=w.call(this,g,G);B.renditions.forEach(r);
B.representations.forEach(q);B.trickPlayRepresentations.forEach(t);this.manifestExt.addIndexes.call(this,b);u=c;H=b;for(var F="video",J=0,K=H.length;J<K;J++)if(H[J].isMuxed){for(var F="muxed",P=0,X=u.length;P<X;P++){var v=u[P];v.isMuxed=!0;v[F]={};v.audio=void 0;v.video=void 0;v[F].uri=v.uri}break}J=X=0;for(K=u.length;J<K;J++){var M=u[J];M.representationIds=[];P=0;for(X=H.length;P<X;P++){var Z=H[P];Z[F]&&Z[F].group?this.manifestExt.findRendition(a,Z[F].group,F,M[F].name)&&M.representationIds.push(Z.index):
M.representationIds.push(Z.index)}}K=b;P=a;for(M=0;M<K.length;M++){if(K[M].isMuxed||K[M].video&&K[M].audio)p=!0;if(K[M].extract608)if(K[M].cc&&K[M].cc.group&&""!==K[M].cc.group){var T=this.manifestExt.findRendition(P,K[M].cc.group,"CLOSED-CAPTIONS");K[M].ccChannel=T&&T.instreamId?T.instreamId:"CC1"}else K[M].ccChannel="CC1";if(!K[M].isMuxed&&void 0!==K[M].audio)if(void 0!==K[M].audio.group&&""!==K[M].audio.group){var aa=this.system.getObject("mediaController").getDOMSettings("audio"),ea=null!==aa&&
void 0!==aa?aa.name:"";(T=this.manifestExt.findRendition(P,K[M].audio.group,"audio",ea))&&void 0!==T.uri&&null!==T.uri?(K[M].audio.uri=T.uri,K[M].audio.lang=T.lang,K[M].audio.name=T.name):K[M].audio.uri=K[M].uri}else K[M].audio.uri=K[M].uri;K[M].isMuxed||void 0===K[M].video||(void 0!==K[M].video.group&&""!==K[M].video.group?(T=this.manifestExt.findRendition(P,K[M].video.group,"video",ea))&&void 0!==T.uri&&null!==T.uri?(K[M].video.uri=T.uri,K[M].video.lang=T.lang,K[M].video.name=T.name):K[M].video.uri=
K[M].uri:K[M].video.uri=K[M].uri)}}else x={backupRepresentations:[],muxed:{},isMuxed:!0,audCodec:"",vidCodec:"",extract608:!0},x.uri=u,x.muxed.uri=x.uri,x.isTrickPlayRepresentation=!1,q(x);if(b&&b.length){n.extract608=e;T=b;aa=[];for(ea=0;ea<T.length;ea++)!p||T[ea].isMuxed||T[ea].video&&T[ea].audio?1E5>T[ea].bandwidth&&(this.log("Ignoring Stream: "+T[ea].muxed.uri+" as it seems to be an audio only stream and cannot be played with other muxed streams","INFO"),T.splice(ea,1)):(this.log("Ignoring Stream: "+
T[ea].uri+" as it cannot be played with other muxed streams","INFO"),aa.unshift(ea));for(var ea=0,ga=aa.length;ea<ga;ea++)T.splice(aa[ea],1);this.manifestExt.addIndexes.call(this,T);if(A){h=[];d=[];var ia=this.system.getObject("abrController");-1!=ia.getQualityIndexForInit()?(l=ia.getQualityIndexForInit(),ia.setQualityIndexForInit(-1)):l=this.abrRulesCollection.bufferLengthBasedRule.getInitialQuality(b,b.length-1);x=b[l];x.index=l;A=x;var ba,ga=[];A.isMuxed?(f++,ga.push({url:A.muxed.uri,baseUrl:G,
mediaType:"muxed",periodId:null,rep:A})):(void 0!==A.audio&&(f++,ba="audio",ga.push({url:A.audio.uri,baseUrl:G,mediaType:ba,periodId:null,rep:A})),void 0!==A.video&&(f++,ba="video",ga.push({url:A.video.uri,baseUrl:G,mediaType:ba,periodId:null,rep:A})),void 0===A.audio&&void 0===A.video&&(f++,ga.push({url:A.uri,baseUrl:G,mediaType:ba,periodId:null,rep:A})));E.call(this,ga)}else n.type=m,z.call(this,n.Period_asArray)}else this.errHandler.manifestError("No media streams found in the manifest.","parse",
g),this.notify(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_PARSING_COMPLETE,{url:k,manifest:null})}catch(la){this.errHandler.manifestError("Parsing the manifest failed. Error: "+la.message,"parse",g),this.notify(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_PARSING_COMPLETE,{url:k,manifest:null})}},parseVariant:w,reset:function(){a=[];b=[];c=[];d=[];e=!1;g=f=0;n={};h=[];l=0;m=k=""}}};Primetime.dependencies.HlsParser.prototype={constructor:Primetime.dependencies.HlsParser};(function(){var a=/^(?:(?:[a-z]+:)?\/)?\//i,b=function(b,c){return b===c?b:a.test(b)?b:c+b},c=function(a){var b=null;-1!==a.indexOf("/")&&(-1!==a.indexOf("?")&&(a=a.substring(0,a.indexOf("?"))),b=a.substring(0,a.lastIndexOf("/")+1));return b},d=function(a,b,c){c=b.url;a.open("GET",c,!0);void 0!==b.respType&&"arraybuffer"===b.respType&&(a.responseType="arraybuffer");b.enableCORS&&"withCredentials"in a&&(a.withCredentials=!0);b.range&&a.setRequestHeader("Range","bytes="+b.range);var d=this.system.getObject("mediaPlayer");
b=d.getNetworkConfig();var l=d.getCORSConfig();d&&b&&l&&l.enableEncryptionRequest&&b.useCookieHeaderForAllRequests&&(a.withCredentials=!0);if(b&&(c=this.getHostNameWithProtocol(c),c=b.getCustomHeaders(c)))for(var n in c)a.setRequestHeader(n,c[n]);a.send(null)};Primetime.dependencies.UrlUtils=function(){};Primetime.dependencies.UrlUtils.prototype={constructor:Primetime.dependencies.UrlUtils,system:void 0,log:void 0,errHandler:void 0,fetchUrl:function(e,f,g,h,l,n){var k=e.type,m=b(e.url,e.baseUrl),
p=new XMLHttpRequest,u=this,q=!0,t=!0,r={url:m,bytesLoaded:0,request:p,respType:f,enableCORS:g,range:n},w=h?h.useRedirectedUrl:null;p.onload=function(){if(!(200>p.status||299<p.status)){var a=p.responseURL?p.responseURL:m,b,d;if(b="manifest"===k?u.system.getObject("mediaPlayer")._resourceType===AdobePSDK.MediaResourceType.HLS?[Primetime.MimeTypeUtils.Extension.M3U8]:[Primetime.MimeTypeUtils.Extension.MPD]:e.expectedExtensions){d=Primetime.MimeTypeUtils.validateResponse(a,p.getResponseHeader("Content-Type"),
b);if(-1===d){t=!1;z=0;return}d=b[d]}t=!0;q=!1;if(void 0!==l.onComplete&&null!==l.onComplete)if(w&&p.responseURL&&p.responseURL!==m)b=c(p.responseURL),"manifest"===k&&u.flattenUrl(m)!==p.responseURL&&u.log("[302 redirect optimisation]: Mapped baseURL "+c(m)+" to "+b),l.onComplete(p.response,d,p.responseURL,b);else l.onComplete(p.response,d)}};p.onloadend=p.onerror=function(){if(q){--z;var b;b=a.test(e.url)?e.url:e.baseUrl+e.url;if(0<z)u.log("Failed loading: "+b+", retry in 500ms attempts: "+z,"INFO"),
setTimeout(function(){d.call(u,p,r,h)}.bind(u),500);else if(q=!1,t)l.onError("Failed loading: "+b+", no retry attempts left","content",m,p);else l.onError("Incorrect content type received for "+k+": "+m,"content",m,p,"contentMismatch")}};var z=3;d.call(u,p,r,h)},fetchAndParse:function(a,d,g,h,l){var n=this,k=a.url,m=a.baseUrl,p=d.respType,u=b(k,m),u={onComplete:function(a,b,e,g,p){try{e=m;var n=b;null!==b&&(e=p?p:c(a),k=g?g:k,n=d.parser?d.parser.parse(b,e,d,h):b)}catch(l){h.onError("Parsing failed. Error: "+
l,"parse",n)}if(void 0!==h.onComplete&&null!==h.onComplete)h.onComplete(n,e,k,d)}.bind(n,u),onError:function(a,b,c,d,e){n.log(a,"INFO");h.onError(c,b,d,l,e)}};this.fetchUrl.call(this,a,p,null,g,u)},flattenUrl:function(a){var b,c,d;a=a.trim().replace(/\\/g,"/");for(b=d=this.getHostNameWithProtocol(a).length;-1<(b=a.indexOf("/../",b));){for(c=b-1;c>=d&&"/"!==a[c];)c--;c<d&&(c=d);a=a.substring(0,c)+a.substring(b+3);b=c}return a},getHostNameWithProtocol:function(a){var b=a.indexOf("//"),c=a.slice(0,b+
2);a=a.slice(b+2);b=-1===a.indexOf("/")?a.length:a.indexOf("/");a=a.slice(0,b);return c+a},getFullUrl:b}})();Primetime.dependencies.RepresentationInfo=function(){var a=/,(?=(?:(?:[^"]*"){2})*[^"]*$)/,b=function(a){var b=a.indexOf("//"),e=a.slice(0,b+2);a=a.slice(b+2);b=-1===a.indexOf("/")?a.length:a.indexOf("/");a=a.slice(0,b);return e+a};return{debug:void 0,errHandler:void 0,log:void 0,parse:function(c,d,e){var f={},g=[],h="#EXT-X-STREAM-INF";f.backupRepresentations=[];f.isMuxed=!1;f.extract608=!0;f.isTrickPlayRepresentation=!1;0===c.indexOf("#EXT-X-I-FRAME-STREAM-INF")&&(h="#EXT-X-I-FRAME-STREAM-INF",
f.isTrickPlayRepresentation=!0,f.video={});e&&d&&0!==d.indexOf("http://")&&0===d.indexOf("/")&&(d=b(e)+d);c=c.replace(h+":","");c=c.split(a);for(var h=[],l=0;l<c.length;++l)-1!==c[l].indexOf("=")?h.push(c[l]):this.log("Manifest Parsing Error. Received a parameter '"+c[l]+"'. Ignoring it.","INFO");c=h;for(var n,h=0;h<c.length;h++)if(l=c[h],l=l.replace(/['"]+/g,""),n=l.split("="),l=n[0].trim(),n=n[1].trim(),"BANDWIDTH"===l)f.bandwidth=parseInt(n);else if("PROGRAM-ID"===l)f.programID=parseInt(n);else if("CODECS"===
l)for(l=n.split(","),n=0;n<l.length;n++)g.push(l[n].trim());else"RESOLUTION"===l?(l=f,"undefined"!==typeof n&&null!==n&&0!==n.length&&(n=n.split("x"))&&2===n.length&&(l.width=n[0],l.height=n[1])):"AUDIO"===l?(f.audio={},f.audio.group=n):"VIDEO"===l?(f.video={},f.video.group=n):"SUBTITLES"===l?(f.text={},f.text.group=n):"CLOSED-CAPTIONS"===l?(f.extract608=!0,f.cc={},f.cc.group=n):"URI"===l&&f.isTrickPlayRepresentation?(n=0===n.indexOf("/")?b(e)+n:n,f.uri=n,d=f.video.uri=n):"GROUP-ID"===l&&f.isTrickPlayRepresentation?
f.video.group=n:"NAME"===l&&f.isTrickPlayRepresentation&&(f.video.name=n);f.vidCodec="";f.audCodec="";if(g.length)for(f.uri=d,2===g.length&&void 0===f.video&&void 0===f.audio&&(f.isMuxed=!0,f.muxed={},f.muxed.uri=d),d=0;d<g.length;d++)e=g[d],0===e.indexOf("avc1")&&(f.isMuxed||void 0!==f.video||(f.video={}),f.vidCodec=Hls.defaults.VIDEO_CODEC),0===e.indexOf("mp4a")&&(f.isMuxed||void 0!==f.audio||(f.audio={}),f.audCodec=e);else void 0===f.video&&void 0===f.audio&&(f.isMuxed=!0),f.isMuxed?(void 0===
f.muxed&&(f.muxed={}),f.muxed.uri=d):(f.isMuxed||void 0!==f.video||(f.video={}),f.isMuxed||void 0!==f.audio||(f.audio={}),f.uri=d);return f}}};Primetime.dependencies.RepresentationInfo.prototype={constructor:Primetime.dependencies.RepresentationInfo};Primetime.dependencies.M3U8Info=function(){var a=/(?:\r\n|\r|\n)/gm,b=0,c,d=null,e=NaN,f=!1,g=!1,h,l=0,n=-1,k=-1,m=null,p=null,u=null,q=!1,t=0,r=[],w,z=function(a){var b=a.indexOf("//"),c=a.slice(0,b+2);a=a.slice(b+2);b=-1===a.indexOf("/")?a.length:a.indexOf("/");a=a.slice(0,b);return c+a};return{system:void 0,debug:void 0,errHandler:void 0,parse:function(G,E){var I=this.system.getObject("manifestExt");(w=I.subscribedTags)||(w=[]);(I=I.adTags)&&Array.prototype.push.apply(w,I);w.push("#EXT-X-CUE");
I={type:"dynamic"};I.segmentRuns=r;I.hasDiscontinuity=!1;E&&-1===E.indexOf("/",E.length-1)&&(E+="/");try{G=G.split(a);var N=G.length,L=G[0].trim();if(null===L||"#EXTM3U"!==L)throw Error("#EXTM3U is missing at the start of m3u8.");for(var L=!0,x=1;x<N&&L;x++){var A=G[x],A=A.trim();if(0<A.length)if(0===A.indexOf("#")){var H=I,y=A,F=!0;if(0===y.indexOf("#EXT")){var D=y,J=null,S=null,O=y.indexOf(":");-1!==O&&(D=y.substring(0,O).trim(),J=y.substring(O+1).trim(),S=J.split(",")[0].trim());if("#EXTINF"===
D)b=parseFloat(S);else if("#EXT-X-KEY"===D){var B=J.match("METHOD=([^,]*)");B&&(c=B[1]);var K=J.match('URI="([^"]*)');K&&(d=K[1])&&(d=d.trim());var P=J.match("IV=([^,]*)");P&&(e=P[1]);if("AES-128"===c||"SAMPLE-AES"===c){if(f=!0,!e){var X=H.startSequenceNumber;void 0===X?X=0:X;e=X+t;e=e.toString(16);e=Array(Math.max(32-e.length,0)).join("0")+e}}else"NONE"===c&&(f=!1,d=null,e=NaN)}else if("#EXT-X-DISCONTINUITY"===D)g=H.hasDiscontinuity=!0;else if("#EXT-X-TARGETDURATION"===D)H.targetDuration=parseFloat(S);
else if("#EXT-X-MEDIA-SEQUENCE"===D)H.startSequenceNumber=parseInt(S);else if("#EXT-X-PROGRAM-DATE-TIME"===D)h=Date.parse(S);else if("#EXT-X-PLAYLIST-TYPE"===D)null!==J&&"VOD"===J&&(H.type="static",l=0);else if("#EXT-X-ENDLIST"===D)H.type="static",H.streamEnded=!0,F=!1;else if("#EXT-X-BYTERANGE"===D){var v=J.split("@");n=Number(v[0].trim());1<v.length&&(k=Number(v[1].trim()))}else"#EXT-X-VERSION"===D?null!==J&&J&&(H.version=parseInt(J)):"#EXT-X-MARKER"===D?(p||(p=[]),p.push(y)):"#EXT-X-I-FRAMES-ONLY"===
D||"#EXT-X-ALLOW-CACHE"===D?(H.customTagvalues=[],S=D,J&&(S+=":"+J),H.customTagvalues.push(S)):"#EXT-X-MEDIA-TIME"!==D&&(null===m&&(m=[]),m.push(y));var M;a:{if(D&&w)for(J=0;J<w.length;J++)if(w[J]===D){M=!0;break a}M=!1}M&&(u||(u=[]),u.push(y))}L=F}else{y=E;D=A;!y||0===D.indexOf("http://")||0===D.indexOf("https://")||(D=0===D.indexOf("/")?z(y)+D:y+D);y&&d&&0!==d.indexOf("http://")&&0!==d.indexOf("https://")&&(d=0===d.indexOf("/")?z(y)+d:y+d);y=b;F={};F.duration=y;F.currTime=l;F.line=D;-1!==n&&(F.currByteRange=
n);-1!==k&&(F.currByteOffset=k);F.metadata=p;F.timedMetadata=u;F.isEncrypted=f;F.encryptionMethod=c;F.keyUri=d;F.IV=e;if(void 0===h){var Z=r.length?r[r.length-1]:void 0,T=Z&&Z.length?Z[Z.length-1]:void 0;F.programDateTime=T?T.programDateTime+1E3*T.duration:void 0}else if(F.programDateTime=h,!1===q&&(q=!0,0<t))for(D=r,J=0;J<D.length;J++)for(H=0;H<D[J].length;H++)D[J][H].programDateTime=h-1E3*(l-D[J][H].currTime);h=void 0;g&&(F.discontinuityEncountered=g);g=!1;null!==m&&0<m.length&&(void 0===F.segmentTags||
null===F.segmentTags?F.segmentTags=m:F.segmentTags.push.apply(F.segmentTags,m));r.length||r.push([]);u=p=m=null;k=n=-1;r[r.length-1].push(F);l+=y;t++}}}catch(aa){this.errHandler.manifestError("Parsing the manifest failed. Error: "+aa,"parse",G)}void 0===I.startSequenceNumber&&(I.startSequenceNumber=0);I.endSequenceNumber=I.startSequenceNumber+t-1;return I}}};Primetime.dependencies.M3U8Info.prototype={constructor:Primetime.dependencies.M3U8Info};Primetime.dependencies.GroupRenditionInfo=function(){return{debug:void 0,errHandler:void 0,parse:function(a,b,c){b={isForced:!1,autoSelect:!1,isDefault:!1};a=a.replace("#EXT-X-MEDIA:","");for(var d=[],e=0;e<a.length;++e){for(var f=e;f<a.length&&"="!==a[f];)++f;for(++f;f<a.length&&" "===a[f]||"\r"===a[f]||"\n"===a[f];)++f;if('"'===a[f]||"'"===a[f])for(var g=a[f++];f<a.length&&a[f]!==g;)++f;for(;f<a.length&&","!==a[f];)++f;d.push(a.substring(e,f));e=f}for(a=0;a<d.length;a++){e=d[a];e=e.replace(/['"]+/g,
"");g=e.indexOf("=");if(-1===g)throw Error("Detected variant Playlist file with invalid EXT-X-MEDIA attribute: "+e);f=e.substring(0,g).trim();e=e.substring(g+1).trim();if("TYPE"===f)b.type="SUBTITLES"===e?"text":e;else if("INSTREAM-ID"===f)b.instreamId=e;else if("GROUP-ID"===f)b.groupID=e;else if("NAME"===f)b.name=e;else if("URI"===f){if(b.uri=e,c&&0!==e.indexOf("http://"))if(0===e.indexOf("/")){var g=c,h=g.indexOf("//"),f=g.slice(0,h+2),g=g.slice(h+2),h=-1===g.indexOf("/")?g.length:g.indexOf("/"),
g=g.slice(0,h);b.uri=f+g+e}else b.uri=c+e}else"AUTOSELECT"===f?b.autoSelect="YES"===e:"DEFAULT"===f?b.isDefault="YES"===e:"FORCED"===f?b.isForced="YES"===e:"LANGUAGE"===f&&(b.lang=e)}return b}}};Primetime.dependencies.GroupRenditionInfo.prototype={constructor:Primetime.dependencies.GroupRenditionInfo};Primetime.dependencies.HlsAdapter=function(){var a=[],b={},c={},d=function(a,b,c,d){var e=new MediaPlayer.vo.TrackInfo;e.id=b.index;e.quality=b.index;e.bandwidth=b.bandwidth;var g=c;!b.isMuxed||"audio"!==c&&"video"!==c||(g="muxed");if(void 0!=c&&void 0!=b[g]){var h=null,h=b.period.manifest?this.manifestExt.getIsDynamic(b.period.manifest):this.manifestExt.getIsDynamic(a);"text/vtt"===c&&(c="text");var l=b[g].start;e.DVRWindow={start:l,end:l+b.period.duration};e.fragmentDuration=b[g].targetDuration||
(b[g].segments&&0<b[g].segments.length?b[g].segments[0].duration:NaN);e.MSETimeOffset=h?b[c].MSETimeOffset:b.period.start-b.period.localStartTime}else l=b.period.start,e.DVRWindow={start:l,end:l+b.period.duration};e.useCalculatedLiveEdgeTime=!0;e.mediaInfo=f.call(this,a,b,c,d);e.width=b.width;e.height=b.height;e.blackListed=b.blackListed;return e},e=function(a,b,c){var d=null,e="",f=[],g=[];if(void 0!=c&&null!=c){"text/vtt"===c&&(c="text");if("608"===c&&a.has608){var l=new MediaPlayer.vo.MediaInfo;
l.id=b.index;l.index=b.index;l.type=c;g=b.period.manifest;l.streamInfo=h.call(this,a,b.period,g);l.representationCount=this.manifestExt.getRepresentationCount(b.period,b.isTrickPlayRepresentation);l.mimeType="text/608";l.codec=e+';codecs="'+z+'"';l.codecStr=z;l.lang="";l.name="";l.isText=this.manifestExt.getIsTextTrack(l.mimeType);var w=[];w.push(b.bandwidth);l.bitrateList=w;l.isTrickPlayTrack=b.isTrickPlayRepresentation;l.trickPlayAdaptationIds=b.representationIds;f.push(l);return f}d=b[c];if(void 0===
d)return null;d.lang="";if(void 0!=c&&null!=c){var z="";"muxed"===c?(e="video/mp4",b.audCodec&&(z=Hls.defaults.VIDEO_CODEC+","+b.audCodec)):"video"===c?(e="video/mp4",z=b.vidCodec):"audio"===c?(e="audio/mp4",z=b.audCodec):"text"===c&&(e="text/vtt")}if(void 0!=d.group&&null!=d.group)for(var g=this.manifestExt.getAllRenditionsInPeriod(b.period,d.group,c),G=0;G<g.length;G++){var E=g[G],l=new MediaPlayer.vo.MediaInfo;l.id=b.index;l.index=b.index;l.type=c;l.streamInfo=h.call(this,a,b.period,b.period.manifest);
l.streamInfo.manifestInfo.maxFragmentDuration=d.targetDuration;b.isTrickPlayRepresentation?(w=this.manifestExt.getRepresentationsForPeriod(a,b.period.index,c,b[c].name,b.isTrickPlayRepresentation),l.representationCount=w.length):l.representationCount=this.manifestExt.getRepresentationCount(b.period,b.isTrickPlayRepresentation);l.mimeType=e;l.codec=e+';codecs="'+z+'"';l.codecStr=z;l.lang=d.lang;l.isText=this.manifestExt.getIsTextTrack(l.mimeType);l.isDefault=E.isDefault;l.isAutoSelect=E.autoSelect;
w=[];w.push(b.bandwidth);l.bitrateList=w;l.isTrickPlayTrack=b.isTrickPlayRepresentation;l.trickPlayAdaptationIds=b.representationIds;if(void 0==E.uri||null===E.uri)if("audio"===c.toLowerCase()||"video"===c.toLowerCase())b.isMuxed=!1;void 0!=E.lang&&null!=E.lang&&(l.lang=E.lang);void 0!=E.name&&null!=E.name&&(l.name=E.name);f.push(l)}else l=new MediaPlayer.vo.MediaInfo,l.id=b.index,l.index=b.index,l.type=c,g=b.period.manifest,l.streamInfo=h.call(this,a,b.period,g),l.streamInfo.manifestInfo.maxFragmentDuration=
d.targetDuration,l.representationCount=this.manifestExt.getRepresentationCount(b.period,b.isTrickPlayRepresentation),l.mimeType=e,l.codec=e+';codecs="'+z+'"',l.codecStr=z,l.lang=d.lang,l.isText=this.manifestExt.getIsTextTrack(l.mimeType),w=[],w.push(b.bandwidth),l.bitrateList=w,l.isTrickPlayTrack=b.isTrickPlayRepresentation,l.trickPlayAdaptationIds=b.representationIds,a="Main Media","audio"===c&&(a="Main Audio"),"video"===c&&(a="Main Video"),l.name=a,l.lang="default",f.push(l)}return f},f=function(a,
b,c,d){var e=new MediaPlayer.vo.MediaInfo,f=null,g="";if(void 0!=c&&null!=c){"text/vtt"===c&&(c="text");f=b[c];if(void 0===f)return null;f.lang="";if(void 0!=f.group&&null!=f.group){var l=this.manifestExt.findRenditionInPeriod(b.period,f.group,c,d);if(void 0==l.uri||null===l.uri)if("audio"===c.toLowerCase()||"video"===c.toLowerCase())b.isMuxed=!1;void 0!=l.lang&&null!=l.lang&&(f.lang=l.lang);void 0!=l.name&&null!=l.name&&(f.name=l.name)}else d="Main Media","audio"===c&&(d="Main Audio"),"video"===
c&&(d="Main Video"),f.name=d,f.lang="default"}e.id=b.index;e.index=b.index;e.type=c;e.streamInfo=h.call(this,a,b.period,b.period.manifest);null!=f&&void 0!=f&&(e.streamInfo.manifestInfo.maxFragmentDuration=f.targetDuration);b.isTrickPlayRepresentation?(a=this.manifestExt.getRepresentationsForPeriod(a,b.period.index,c,d,b.isTrickPlayRepresentation),e.representationCount=a.length):e.representationCount=this.manifestExt.getRepresentationCount(b.period,b.isTrickPlayRepresentation);void 0!=c&&null!=c&&
(a="","muxed"===c?(g="video/mp4",b.audCodec&&(a=Hls.defaults.VIDEO_CODEC+","+b.audCodec)):"video"===c?(g="video/mp4",a=Hls.defaults.VIDEO_CODEC):"audio"===c?(g="audio/mp4",a=b.audCodec):"text"===c&&(g="text/vtt"),e.mimeType=g,e.codecStr=a,e.codec=g+';codecs="'+a+'"',e.lang=f.lang,e.name=f.name,e.isText=this.manifestExt.getIsTextTrack(e.mimeType),c=[],c.push(b.bandwidth),e.bitrateList=c);return e},g=function(a,b){var c=new MediaPlayer.vo.ManifestInfo;c.loadedTime=a.loadedTime;c.availableFrom=a.loadedTime;
c.minBufferTime=this.manifestExt.getMinBufferTime(a);c.maxFragmentDuration=b.maxSegmentDuration;c.isHls=!0;c.hasDiscontinuity=a.hasDiscontinuity;for(var d=a.Period_asArray,e=0,f=0;f<d.length;f++)e=isNaN(b.duration)?Number.POSITIVE_INFINITY:e+d[f].duration;c.DVRWindowSize=e;this.manifestExt.getIsDynamic(a)&&(e=9099999999999);c.duration=e;c.isDynamic=this.manifestExt.getIsDynamic(a);return c},h=function(a,b,c){var d=new MediaPlayer.vo.StreamInfo;d.id=b.id;d.index=b.index;d.start=0;d.localStartTime=
b.localStartTime;b.hasOwnProperty("isAd")&&!0===b.isAd&&(d.isAd=!0);b.hasOwnProperty("isInlineAd")&&!0===b.isInlineAd&&(d.isInlineAd=!0);d.start=b.start;d.duration=b.duration;d.stopUpdates=b.stopUpdates;isNaN(b.duration)&&(d.duration=Number.POSITIVE_INFINITY);d.manifestInfo=g.call(this,a,b);"undefined"!==typeof c&&null!==c&&(d.periodManifestInfo=g.call(this,c,b));d.isLast=!0===b.isLast||1===a.Period_asArray.length||d.index===a.Period_asArray.length-1&&1>Math.abs(d.start+d.duration-d.manifestInfo.duration);
return d},l=function(b){var c,d=a.length,e=0;for(e;e<d;e+=1)if(c=a[e],b.id===c.id)return c;return null};return{system:void 0,manifestExt:void 0,manifestModel:void 0,timelineConverter:void 0,metricsList:{TCP_CONNECTION:"TcpConnection",HTTP_REQUEST:"HttpRequest",HTTP_REQUEST_TRACE:"HttpRequestTrace",TRACK_SWITCH:"RepresentationSwitch",BUFFER_LEVEL:"BufferLevel",DVR_INFO:"DVRInfo",DROPPED_FRAMES:"DroppedFrames",SCHEDULING_INFO:"SchedulingInfo",MANIFEST_UPDATE:"ManifestUpdate",MANIFEST_UPDATE_STREAM_INFO:"ManifestUpdatePeriodInfo",
MANIFEST_UPDATE_TRACK_INFO:"ManifestUpdateRepresentationInfo",PLAY_LIST:"PlayList",PLAY_LIST_TRACE:"PlayListTrace"},convertDataToTrack:d,convertDataToMedia:f,convertDataToStream:h,getDataForMedia:function(a){return b[a.streamInfo.id][a.index]},getDataForStream:l,getStreamsInfo:function(c){var d=[],e,f;if(!c)return null;a=this.manifestExt.getRegularPeriods(c);e=a.length;b={};for(f=0;f<e;f+=1)d.push(h.call(this,c,a[f],a[f].manifest));return d},getCurrentRepresentationInfo:function(a,b,c){b=b.getCurrentRepresentation();
"text/vtt"===c&&(c="text");return b?d.call(this,a,b,c,b[c].name):null},getRepresentationInfoForQuality:function(a,b,c,e){b=b.getRepresentationForQuality(c);"text/vtt"===e&&(e="text");return b?d.call(this,a,b,e,b[e].name):null},updateData:function(a,b){var d=l.call(this,b.getStreamInfo()),e=b.getMediaInfo(),f=b.getType(),g;g=e.id;"text/vtt"===f&&(f="text");var h=c[f]?c[f].name:void 0,h=void 0!=h&&h!=e.name,r=!1;e&&c[f]&&e.isTrickPlayTrack!==c[f].isTrickPlayTrack&&(r=!0);c[f]=e;d=g?this.manifestExt.getRepresentationForId(g,
a,d.index,f,e.name,e.isTrickPlayTrack):this.manifestExt.getRepresentationForIndex(e.index,a,d.index,f,e.name,e.isTrickPlayTrack);b.representationController.updateData(d,f,e.name,h,r)},getInitRequest:function(a,b,c){b=a.representationController.getRepresentationForQuality(b);var d=a.getType();"text/vtt"===d&&(d="text");return a.indexHandler.getInitRequest(b,d,c)},getNextFragmentRequest:function(a,b){var c=a.representationController.getRepresentationForQuality(b.quality);return a.indexHandler.getNextSegmentRequest(c)},
getFragmentRequestForTime:function(a,b,c,d){b=a.representationController.getRepresentationForQuality(b.quality);return a.indexHandler.getSegmentRequestForTime(b,c,d)},generateFragmentRequestForTime:function(a,b,c){b=a.representationController.getRepresentationForQuality(b.quality);return a.indexHandler.generateSegmentRequestForTime(b,c)},getIndexHandlerTime:function(a){return a.indexHandler.getCurrentTime()},setIndexHandlerTime:function(a,b){return a.indexHandler.setCurrentTime(b)},getEventsFor:function(a,
b,c){return[]},getEvent:function(a,b,c){return null},getLastMainStreamIndex:function(a){if((a=this.getStreamsInfo(a))&&0<a.length)return 0},getStreamInfo:function(a,b){if("undefined"===typeof a||null===a||"undefined"===typeof b||null===b)return null;var c=this.getStreamsInfo(a);if(c&&c.length>b)return c[b]},getTrackInfosforMediaInfo:function(b,c){if("undefined"!==typeof b&&null!==b&&"undefined"!==typeof c&&null!==c){null!==a&&a.length||(a=this.manifestExt.getRegularPeriods(b));var e,f,g=[],h=c.type;
e=l.call(this,c.streamInfo);if(null!=e&&void 0!=e){var t=this.manifestExt.getRepresentationsForPeriod(b,e.index,h,c.name,c.isTrickPlayTrack);if(t&&0<t.length)for(e=0,f=t.length;e<f;e++)g.push(d.call(this,b,t[e],h,c.name))}return g}},getMediaTypeTrackInfo:function(a){if("undefined"===typeof a||null===a)return null;if(a.mediaTypeTrackInfos&&0<a.mediaTypeTrackInfos.length)return a.mediaTypeTrackInfos;var b=a.type,c=l.call(this,a.streamInfo),d=c.m3u8.Period_asArray[c.id].representations[a.index],c=[],
c=null,e=[],f=d.period.renditions;if(void 0!=d[b])if(c=d[b],void 0!=c.group&&null!=c.group)for(d=0;d<f.length;d++){var g=f[d];if(g.groupID===c.group&&g.type.toLowerCase()===b.toLowerCase())for(var h=0;h<g.groupRenditions.length;h++){var w=g.groupRenditions[h],z=new Primetime.vo.MediaTypeTrackInfo;z.lang=w.lang;z.mediaInfo=a;z.contentDescriptors.push(w.name);z.isDefault=w.isDefault;e.push(z)}}else z=new Primetime.vo.MediaTypeTrackInfo,z.lang="unknown",z.mediaInfo=a,z.contentDescriptors.push("Main Audio"),
z.isDefault=!0,e.push(z);c=e;return a.mediaTypeTrackInfos=c},getMediaInfoForType:function(a,c,d,e,g){c=l.call(this,c);var h=c.index;b[h]=b[h]||c.m3u8.Period_asArray[h].representations;if("undefined"===typeof e||null===e)e=this.system.getObject("abrRulesCollection").bufferLengthBasedRule.getInitialQuality(b[h],b[h].length-1,d);e=c.m3u8.Period_asArray[h].representations[e];e[d]&&!g&&(g=e[d].name);return f.call(this,a,e,d,g)},getAllMediaInfoForType:function(a,b,c,d){b=l.call(this,b);var f=b.m3u8.Period_asArray[b.index].representations;
if("undefined"===typeof d||null===d)d=this.system.getObject("abrRulesCollection").bufferLengthBasedRule.getInitialQuality(f,f.length-1,c);f=b.m3u8.Period_asArray[b.index].representations[d];(d=e.call(this,a,f,c))&&d.length&&"608"!==c&&(b=b.m3u8.Period_asArray[b.index].trickPlayRepresentations)&&b.length&&(b=this.manifestExt.findTrickPlayRep(f,c))&&(a=e.call(this,a,b,c),d=d.concat(a));return d},reset:function(){a=[];b={};c={}}}};Primetime.dependencies.HlsAdapter.prototype={constructor:Primetime.dependencies.HlsAdapter};Primetime.dependencies.HlsHandler=function(){var a=-1,b,c=!1,d,e=0,f=/^(?:(?:[a-z]+:)?\/)?\//i,g=!1,h=-1,l=!0,n=!1,k=function(a,b){var c=b.baseUrl;return a===c?a:f.test(a)?a:c+a},m=function(a,b,c,d){for(var e=[],f=0,g=0,h=a.length;g<h;g+=1){var k=new Hls.vo.Segment,f=f+a[g].duration;k.duration=a[g].duration;k.media=a[g].line;k.metadata=a[g].metadata;k.startTime=a[g].currTime;k.isEncrypted=a[g].isEncrypted;k.encryptionMethod=a[g].encryptionMethod;k.keyUri=a[g].keyUri;k.IV=a[g].IV;k.programDateTime=
a[g].programDateTime;k.discontinuityEncountered=a[g].discontinuityEncountered;k.timeOffset="muxed"===b||"video"===b?c.vidTimeOffset:c.audTimeOffset;a[g].timedMetadata&&0<a[g].timedMetadata.length&&(k.timedMetadata=a[g].timedMetadata);k.representation=c;void 0!==a[g].currByteOffset&&void 0!==a[g].currByteRange&&(k.mediaRange=a[g].currByteOffset+"-"+(a[g].currByteOffset+a[g].currByteRange-1));k.index=d+g;e.push(k)}return[f,e]},p=function(a,b,e,f,g,h,k){var l=this,r=f.period.index,q,w=!1,t=-1,u=this.streamProcessor.getCurrentRepresentationInfo().quality,
z=function(a,b,c,d,e){c.isEnc=!1;G.call(this,a,b,c,e,d)},G=function(d,e,g,m,r){n&&(g.isEnc?this.segmentDecryption.decrypt(m,e,q[t].keyUri,q[t].IV,q[t].encryptionMethod,z.bind(this,d,e,g,r)):(e=this.system.getObject("tsParser").parse(m,f.isSbr,r,function(a,b,c){l.errHandler.manifestError(a,b,c);l.log(a,"INFO")})[2]/9E4,f[a].start=0,c&&!f.period.isAd&&(g=q[t].currTime,console.log("onTsData: newStartTime: "+g+" newTsTime: "+e+" newStartTime: "+g+" currSegmentStartTime: "+I+" currRepStart: "+T+" currentTsTime : "+
aa/9E4),f[a].start=T+-(g-I)+(e-aa/9E4),isNaN(f[a].start)&&(f[a].start=T),this.log("onTsData. Rep Start: "+f[a].start+" for rep: "+f.index)),p.call(this,a,b,d,f,!1,h,k)))},w=0;b.segmentRuns&&(1<b.segmentRuns.length&&(w=r),q=b.segmentRuns[w]);k&&(g=!1);var v=this.streamProcessor.representationController.getRepresentationForQuality(u);f.audTimeOffset=v.audTimeOffset;f.vidTimeOffset=v.vidTimeOffset;if(q&&0<q.length)if(g){g=l.system.getObject("urlUtils");var r={onError:function(a,b,c,d,e){"contentMismatch"===
e?l.errHandler.contentTypeError(a,"segment"):(l.errHandler.downloadError(b,c,d),l.log(a))}},w=void 0!==q[0].programDateTime,E=this.system.getObject("mediaPlayer");E&&(w=w&&E.getQualitySwitchBasedOnPDT());for(E=-1;v&&(!v[a].segments||v.index===f.index||v[a].lastSeqNum<v[d].startSequenceNumber||w&&v[a].segments[v[a].lastSeqNum-v[a].startSequenceNumber].programDateTime<q[0].programDateTime);)v=this.streamProcessor.representationController.getRepresentationForQuality(++E);v||(v=this.streamProcessor.representationController.getRepresentationForQuality(u));
console.log("onTsData: lastSeqNum "+v[a].lastSeqNum+" currRep[type].startSequenceNumber: "+v[d].startSequenceNumber);var I,T,aa=-1;if(v)if(u=v[a].lastSeqNum-v[d].startSequenceNumber,I=(E=0<=u?v[d].segments[u]:void 0)?E.startTime:void 0,T=v[a].start,aa=v[a].currentTsTime,w)for(w=0<=u?E.programDateTime:void 0,u=0;u<q.length;u++){if(w>=q[u].programDateTime&&w<q[u].programDateTime+1E3*q[u].duration){t=u;break}}else t=v[a].lastSeqNum-b.startSequenceNumber;if(isNaN(t)||0>t||t>=q.length||-1===aa)t=0;w=q[t].line;
u=q[t].isEncrypted;void 0!==q[t].currByteOffset&&void 0!==q[t].currByteRange?(v=q[t].currByteOffset,E=v+q[t].currByteRange-1,v=v+"-"+E):v=null;r.onComplete=u?G.bind(this,e,w,{isEnc:!0}):G.bind(this,e,w,{isEnc:!1});g.fetchUrl({url:w,baseUrl:e,type:"segment",expectedExtensions:[Primetime.MimeTypeUtils.Extension.AAC,Primetime.MimeTypeUtils.Extension.TS]},"arraybuffer",null,null,r,v)}else if(b.segmentRuns&&0<b.segmentRuns.length){e=[];for(r=g=0;r<b.segmentRuns.length;r++)w=m(b.segmentRuns[r],a,f,g),e[r]=
{},e[r].segments=w[1],e[r].duration=w[0],g+=w[1].length;h.call(l,e)}},u=function(a,b,c,d,e,f){var g=this,h=k(a[b].uri,a),l=h.lastIndexOf("/"),l=h.substr(0,l+1),m=g.system.getObject("urlUtils"),p={onComplete:function(a,e,h,k){if(n){a.period.manifest.loadedTime=new Date;h=this.streamProcessor.getCurrentRepresentationInfo().quality;h=this.streamProcessor.representationController.getRepresentationForQuality(h);a[b].MSETimeOffset=h[b].MSETimeOffset;this.getIsDynamic()&&!c&&(a[b].startSequenceNumber=NaN);
if(h=this.system.getObject("mediaPlayer")){var l={};l.type=AdobePSDK.LoadInformationType.MANIFEST;l.url=k;l.periodIndex=a.period.index;h.notifyLoadInfo(l)}k=a.period.manifest;if(void 0===k.hasDiscontinuity||!k.hasDiscontinuity&&1==e.hasDiscontinuity)k.hasDiscontinuity=e.hasDiscontinuity;k.streamEnded=e.streamEnded;q.call(g,a,e,b,!c,d,f)}}.bind(g,a),onError:function(a,c,d,f){a=f.rep;void 0!=a.isBackup&&a.isBackup&&(a=a.period.representations[a.index]);0<a.backupRepresentations.length&&(void 0==a.currBackupIndex||
a.currBackupIndex<a.backupRepresentations.length-1)?(void 0==a.currBackupIndex?a.currBackupIndex=0:a.currBackupIndex++,a=a.backupRepresentations[a.currBackupIndex][f.mediaType].uri,g.log("[HLS Failover] Trying backup url: "+a,"INFO"),c=g.system.getObject("mediaPlayer")._config.networkConfiguration,m.fetchAndParse({url:a,baseUrl:f.baseUrl,type:"manifest"},{mediaType:f.mediaType,parser:g.system.getObject("hlsM3u8Info")},c,p,f)):(g.log("[HLS Failover] No backup url left, blacklisting","INFO"),a.blackListed=
!0,g.notify(Primetime.dependencies.HlsHandler.eventList.ENAME_REPRESENTATION_UPDATED,{representation:a,completedCallback:e,type:b,error:new MediaPlayer.vo.Error(null,"could not process",null)}))}};a={rep:a,baseUrl:a.baseUrl,mediaType:b};m.fetchAndParse({url:h,baseUrl:l,type:"manifest"},{parser:g.system.getObject("hlsM3u8Info")},this.system.getObject("mediaPlayer")._config.networkConfiguration,p,a)},q=function(a,b,e,f,g,h){var l=this,m=k(a[e].uri,a),n=m.lastIndexOf("/"),m=m.substr(0,n+1);b.startSequenceNumber>
a[e].endSequenceNumber&&(f=!0);p.call(l,e,b,m,a,f,function(h){if(c){a[e].slideDuration=!f&&a[e].segments&&a[e].segments[0].programDateTime&&h[0].segments[0].programDateTime?(h[0].segments[0].programDateTime-a[e].segments[0].programDateTime)/1E3:void 0;a[e].slideDuration=void 0;var k=a[e].startSequenceNumber,m=a[e].start;if(void 0!==m&&!isNaN(m)){var m=b.startSequenceNumber,p=m-k;!f&&p?(l.log("DVR: newStartSeq: "+m+" prevStartSeq: "+k+" first segment : "+h[0].segments[0].media,"INFO"),a[e].slideLen=
p):(l.log("DVR: No slide","INFO"),a[e].slideLen=0)}}a[e].targetDuration=b.targetDuration;a[e].startSequenceNumber=b.startSequenceNumber;a[e].endSequenceNumber=b.endSequenceNumber;g.call(l,h,a,d,e)},h)},t=function(a,b,c,d,e){b?I.call(this,a,b,c,d,e):I.call(this,a,null,c,d,e,new MediaPlayer.vo.Error(null,"error loading segments",null))},r=function(a,b,e,f,g,h,k){e={};if(void 0!==b&&null!==b){var l=d=b;!a.isMuxed||"audio"!==d&&"video"!==d?e=a[d]:(e=a.muxed,l="muxed");e.type=d;var m=h!==e.name;if(void 0!==
e.group&&null!==e.group&&!a.isTrickPlayRepresentation){var p=this.manifestExt.findRenditionInPeriod(a.period,e.group,d,h);if(void 0===p.uri||null===p.uri){if("audio"===d.toLowerCase()||"video"===d.toLowerCase())a.isMuxed=!1;e.uri=a.uri}else e.uri=p.uri;m&&(e.m3u8Info=void 0,e.segments=[],e.name=h,f=!1)}h=this.streamProcessor.getCurrentRepresentationInfo().quality;h=this.streamProcessor.representationController.getRepresentationForQuality(h);a.audTimeOffset=h.audTimeOffset;a.vidTimeOffset=h.vidTimeOffset;
"audio"===d.toLowerCase()||"video"===d.toLowerCase()||"muxed"===d.toLowerCase()?c||void 0===e.m3u8Info?!f||c?void 0!==a[l].segments&&a[l].segments.length||void 0===e.m3u8Info?u.call(this,a,l,f,t.bind(this,g),g,k):q.call(this,a,e.m3u8Info,l,!1,t.bind(this,g),k):(f=a[l].segmentRuns,this.notify(Primetime.dependencies.HlsHandler.eventList.ENAME_REPRESENTATION_UPDATED,{representation:a,segmentRuns:f,type:d,completedCallback:g})):(q.call(this,a,e.m3u8Info,l,!1,t.bind(this,g),k),a.isFirstLoad=!1):(f=a[l].segmentRuns,
this.notify(Primetime.dependencies.HlsHandler.eventList.ENAME_REPRESENTATION_UPDATED,{representation:a,segmentRuns:f,type:b,completedCallback:g}))}},w=function(b){var e=b.period,f=!1,g;g=a-b[d].startSequenceNumber;var h=d;if(!c||b.period.isAd||b.period.stopUpdates)if(0>g)f=!1;else if(g<b[h].segments.length){if(g=G(a,b))f=g.startTime,c&&!b.period.isAd&&(f=b[h].start+g.startTime,f-=e.start),b=b.period.localStartTime+b.period.duration,f=f>=b}else f=!0;else f=!1;return f},z=function(a,b,c){var e=d,f=
b[e].segments,h=f?f.length:null,k=-1,l,m,p,n;if(f&&0<h){var r=f[0].representation[d].startSequenceNumber,q=function(d){m=b[e].start+d.startTime;p=d.duration;l=void 0===c||null===c?p/2:c;a+l>=m&&a-l<m+p&&(k=r+n);return k};if(g)for(n=h-1;0<=n&&!(-1<q(f[n]));--n);else for(n=0;n<h&&!(-1<q(f[n]));n+=1);}return k},G=function(a,b){var c=d;if(!b||!b[c].segments)return null;var e=a-b[c].startSequenceNumber;if(0>e||e>=b[c].segments.length)return null;c=b[c].segments[e];c.representation=b;return c},E=function(a,
b){var e=d;if(null===a||void 0===a)return null;var f=new MediaPlayer.vo.FragmentRequest,g=a.representation,m;m=k(a.media,g);f.mediaType=d;f.mediaInfo=this.streamProcessor.getMediaInfo();f.type=MediaPlayer.vo.metrics.HTTPRequest.MEDIA_SEGMENT_TYPE;f.url=m;f.range=a.mediaRange;f.startTime=g.period.start-g.period.localStartTime+a.startTime+g[e].start;f.mediaTime=a.startTime;m=a.timeOffset;m="muxed"===e||"video"===e?g.vidTimeOffset:g.audTimeOffset;f.timeOffset=m;f.duration=a.duration;f.availabilityStartTime=
new Date(0);f.quality=g.index;f.isRepresentationMuxed=g.isMuxed;f.extract608=g.extract608&&!g.period.isAd;g.extract608&&(f.ccChannel=g.ccChannel);f.index=g[e].startSequenceNumber+a.index;f.sequenceNumber=f.index;f.isEncrypted=a.isEncrypted;f.encryptionMethod=a.encryptionMethod;f.keyUri=a.keyUri;f.isSbr=g.isSbr;f.insertAudio=!(!g.isMuxed||!g.isTrickPlayRepresentation);f.audioSampleInfo=g.audioSampleInfo;f.IV=a.IV;f.discontinuityEncountered=a.discontinuityEncountered;(m=g.period.manifest.hasDiscontinuity)&&
l&&(f.timeOffset=NaN,h=-1,f.discontinuityEncountered=!0);c?f.MSETimeOffset=g[e].MSETimeOffset:(f.MSETimeOffset=g.period.start-g.period.localStartTime,m&&(f.MSETimeOffset=g[e].MSETimeOffset||f.MSETimeOffset));if(!b&&f.discontinuityEncountered){m=this.streamProcessor.bufferController.getBuffer();if(!l&&m&&m.buffered&&m.buffered.length&&h!==Math.round(g.period.start+a.startTime)){m=m.buffered;var p=this.streamProcessor.bufferController.getBufferRange(this.streamProcessor.playbackController.getTime());
f.MSETimeOffset=p?p.end:m.end(m.length-1)}else f.MSETimeOffset=g.period.start+a.startTime;g[e].MSETimeOffset=f.MSETimeOffset;h=Math.round(g.period.start+a.startTime);f.timeOffset=NaN}return f},I=function(a,b,c,d){this.notify(Primetime.dependencies.HlsHandler.eventList.ENAME_REPRESENTATION_UPDATED,{representation:c,segmentRuns:b,type:d,completedCallback:a})};return{log:void 0,system:void 0,baseURLExt:void 0,timelineConverter:void 0,metricsModel:void 0,metricsExt:void 0,manifestExt:void 0,notify:void 0,
subscribe:void 0,unsubscribe:void 0,requestModifierExt:void 0,segmentDecryption:void 0,errHandler:void 0,setup:function(){this[Primetime.dependencies.HlsHandler.eventList.ENAME_SEGMENTS_LOADED]=I},initialize:function(a){this.subscribe(Primetime.dependencies.HlsHandler.eventList.ENAME_REPRESENTATION_UPDATED,a.representationController);d=a.getType();c=a.isDynamic();this.streamProcessor=a;n=!0},getType:function(){return d},setType:function(a){d=a},getIsDynamic:function(){return c},setIsDynamic:function(a){c=
a},setCurrentTime:function(a){this.log("Setting current index handler time to: "+a,"INFO");e=a},getCurrentTime:function(){return e},reset:function(){e=0;b=void 0;a=-1;c=void 0;l=!0;h=-1;this.unsubscribe(Primetime.dependencies.HlsHandler.eventList.ENAME_REPRESENTATION_UPDATED,this.streamProcessor.representationController);n=!1},setReverseTrickPlay:function(a){g=a},invalidateRepresentation:function(){},generateSegmentRequestForTime:function(){},getEarliestTime:function(){return 0},getInitRequest:function(a,
b,e){if(!a)return null;var f,g=new MediaPlayer.vo.FragmentRequest;!a.isMuxed||"audio"!==b&&"video"!==b||(b="muxed");f=a.period;g.mediaType="text"===d?"text/vtt":d;g.mediaInfo=this.streamProcessor.getMediaInfo();g.type=MediaPlayer.vo.metrics.HTTPRequest.INIT_SEGMENT_TYPE;g.availabilityStartTime=new Date;g.availabilityEndTime=g.availabilityStartTime+f.duration;g.quality=a.index;g.isRepresentationMuxed=a.isMuxed;g.isSbr=a.isSbr;g.insertAudio=a.isMuxed&&a.isTrickPlayRepresentation?!0:!1;g.audioSampleInfo=
a.audioSampleInfo;"text"===b?g.url=a[b].uri:a[b].segments&&a[b].segments.length?(f=0,c&&(f=a.period.manifest.hasDiscontinuity?0:a[b].segments.length-1),g.sequenceNumber=a[b].segments[f].sequenceNumber,g.url=a[b].segments[f].media,g.isEncrypted=a[b].segments[f].isEncrypted,g.encryptionMethod=a[b].segments[f].encryptionMethod,g.keyUri=a[b].segments[f].keyUri,g.IV=a[b].segments[f].IV,g.range=a[b].segments[f].mediaRange):g=null;a=g;e&&(a.sequenceNumber=e.index,a.url=e.baseUrl,a.isEncrypted=e.isEncrypted,
a.encryptionMethod=e.encryptionMethod,a.keyUri=e.keyUri,a.IV=e.IV,a.range=e.mediaRange,a.discontinuityEncountered=e.discontinuityEncountered,e.discontinuityEncountered=!1);return a},getSegmentRequestForTime:function(c,e,f){var g=a,h=f?f.keepIdx:!1,k=f?f.hasSeekTarget:!1;f=f?f.timeThreshold:null;if(!c||void 0===c.period.start||isNaN(c.period.start)||null===c[d].segments||void 0===c[d].segments)return r.call(this,c,d,!0,!1),null;b=e;b=e-(c.period.start-c.period.localStartTime);0>b&&(b=0);this.log(d+
" Getting the request for time: "+b+" rep.start: "+c[d].start,"INFO");k&&(l=!0);a=z.call(this,b,c,f);0>a&&this.log("SeqNum is negative for time: "+b,"INFO");w.call(this,c)?(c=new MediaPlayer.vo.FragmentRequest,c.action=c.ACTION_COMPLETE,c.index=a,c.mediaType=d,c.mediaInfo=this.streamProcessor.getMediaInfo(),this.log("Signal complete.","INFO")):(c=G(a,c),c=E.call(this,c,h));c&&this.log(d+" Returning the request for time: "+e+" url: "+c.url+" at index: "+a,"INFO");h&&0<=g&&(a=g);return c},getNextSegmentRequest:function(e){var f,
h;h=e[d].startSequenceNumber;if(!e)return null;if(-1===a)return this.log("You must call getSegmentRequestForTime first."),null;b=null;h=a-h;return!c||e.period.isAd||e.period.stopUpdates||h+1<e[d].segments.length?(h=a+=g?-1:1,(f=w.call(this,e))?(e=new MediaPlayer.vo.FragmentRequest,e.action=e.ACTION_COMPLETE,e.index=h,e.mediaInfo=this.streamProcessor.getMediaInfo(),e.mediaType=d,this.log("Signal complete.","INFO")):(e=G(a,e),e=E.call(this,e)),e&&this.log(d+" Returning the next request: "+e.url+" at index: "+
a,"INFO"),e):null},updateRepresentation:r,setFirstMedia:function(a){l=a}}};Primetime.dependencies.HlsHandler.prototype={constructor:Primetime.dependencies.HlsHandler};Primetime.dependencies.HlsHandler.eventList={ENAME_REPRESENTATION_UPDATED:"representationUpdated",ENAME_SEGMENTS_LOADED:"segmentsLoaded",ENAME_INITIALIZATION_LOADED:"initializationLoaded"};Primetime.dependencies.HlsManifestExtensions=function(){};
Primetime.dependencies.HlsManifestExtensions.prototype={constructor:Primetime.dependencies.HlsManifestExtensions,subscribedTags:[],adTags:[],refreshDelay:0,getUTCTimingSources:function(a){return[]},getIsDynamic:function(a){var b=!1;a.hasOwnProperty("type")&&(b="dynamic"===a.type);return b},getRegularPeriods:function(a){var b=[],c=this.getIsDynamic(a),d,e,f=null,g=null,h=null,l=null;d=0;for(e=a.Period_asArray.length;d<e;d+=1)g=a.Period_asArray[d],g.hasOwnProperty("start")?(l=new Dash.vo.Period,l.start=
g.start):null!==f&&g.hasOwnProperty("duration")?(l=new Dash.vo.Period,l.start=h.start+h.duration,l.duration=g.duration):0!==d||c||(l=new Dash.vo.Period,l.start=0),null!==h&&isNaN(h.duration)&&(h.duration=l.start-h.start),null!==l&&g.hasOwnProperty("id")&&(l.id=g.id),null!==l&&g.hasOwnProperty("duration")&&(l.duration=g.duration),null!==l&&g.hasOwnProperty("localStartTime")&&(l.localStartTime=g.localStartTime),null!==l&&g.hasOwnProperty("isLast")&&(l.isLast=g.isLast),null!==l&&g.hasOwnProperty("stopUpdates")&&
(l.stopUpdates=g.stopUpdates),null!==l&&(l.index=d,l.m3u8=a,g.hasOwnProperty("manifest")&&(l.manifest=g.manifest),l.isAd=g.isAd,l.isInlineAd=g.isInlineAd,b.push(l)),f=g,h=l,l=null;return b},getMinBufferTime:function(){return Primetime.defaults.DEFAULT_MIN_BUFFER_TIME/1E3},getRepresentationCount:function(a,b){return(b?a.trickPlayRepresentations:a.representations).length},getIsTextTrack:function(a){return"text/vtt"===a||"application/ttml+xml"===a},getRepresentationForId:function(a,b,c,d,e,f){c=b.Period_asArray[c];
var g=f?c.trickPlayRepresentations:c.representations,h,l;b=null;h=0;for(l=g.length;h<l;h+=1)if(g[h].hasOwnProperty("index")&&g[h].index===a){b=g[h];break}b.period=c;void 0==b[d].group||f||((a=this.findRenditionInPeriod(c,b[d].group,d,e))&&void 0!==a.uri&&null!==a.uri?(b[d].uri=a.uri,b[d].lang=a.lang,b[d].name=a.name):(b[d].uri=b.uri,a&&(b[d].lang=a.lang,b[d].name=a.name)));return b},getRepresentationForIndex:function(a,b,c,d,e,f){var g=b.Period_asArray[c];a=f?b.Period_asArray[c].trickPlayRepresentations[a]:
b.Period_asArray[c].representations[a];a.period=g;void 0==a[d].group||f||((e=this.findRenditionInPeriod(g,a[d].group,d,e))&&void 0!==e.uri&&null!==e.uri?(a[d].uri=e.uri,a[d].lang=e.lang,a[d].name=e.name):(a[d].uri=a.uri,e&&(a[d].lang=e.lang,a[d].name=e.name)));return a},getRepresentationsForPeriod:function(a,b,c,d,e){a=a.Period_asArray[b];b=null;if(!a)return b;e?(b="video"===c&&"Main Video"===d||"muxed"===c&&"Main Media"===d?a.trickPlayRepresentations:a.trickPlayRepresentations.filter(function(a){return a[c]?
a[c].name===d:!1}),this.addIndexes.call(this,b)):b=a.representations;if(void 0!=c&&!e)for(e=0;e<b.length;e++){var f=this.findRendition(a.renditions,b[e][c].group,c,d);f&&void 0!==f.uri&&null!==f.uri?(b[e][c].uri=f.uri,b[e][c].name=f.name,b[e][c].lang=f.lang):(b[e][c].uri=b[e][c].uri,f&&(b[e][c].name=f.name,b[e][c].lang=f.lang))}for(e=0;e<b.length;e++)b[e].period=a;return b},getAllRenditionForGroup:function(a,b,c){if(void 0==a||null===a)return null;for(var d=0;d<a.length;d++){var e=a[d];if(e.groupID===
b&&e.type.toLowerCase()===c.toLowerCase())return e.groupRenditions}return[]},findRendition:function(a,b,c,d){if(void 0==a||null===a)return null;for(var e=null,f=null,g=0;g<a.length;g++){var h=a[g];if(h.groupID===b&&h.type.toLowerCase()===c.toLowerCase())for(var l=0;l<h.groupRenditions.length;l++){var n=h.groupRenditions[l];null==f&&(f=n);if("audio"==c&&void 0!=d&&n.name==d||"video"==c&&void 0!=d&&n.name==d||"text"==c&&void 0!=d&&n.name==d){e=n;break}n.isDefault&&(f=n)}}f&&!e&&(e=f);return e},findRenditionInPeriod:function(a,
b,c,d){return void 0==a||null===a?null:this.findRendition(a.renditions,b,c,d)},getAllRenditionsInPeriod:function(a,b,c){return void 0==a||null===a?null:this.getAllRenditionForGroup(a.renditions,b,c)},updateRefreshDelay:function(a){this.refreshDelay=a},getRefreshDelay:function(a){return this.getIsDynamic(a)?Math.max(this.refreshDelay,2):NaN},findTrickPlayRep:function(a,b){var c=this.getRepresentationsForPeriod(a.period.manifest,a.period.index,b,a[b].name,!0);return c&&c.length?c[a.index]?c[a.index]:
c[0]:null},addIndexes:function(a){for(var b=0;b<a.length;b++)a[b].index=b}};Primetime.dependencies.HlsRepresentationController=function(){var a=null,b=!0,c=[],d,e=[],f=[],g=function(){var a=new Date,b=this.getCurrentRepresentation(),c=this.streamProcessor.playbackController.getTime();this.metricsModel.addRepresentationSwitch(this.streamProcessor.getType(),a,c,b.index)},h=function(h){var k=h.data.representation,l=h.data.error,m=this.metricsModel.getMetricsFor("stream"),p=this.metricsModel.getMetricsFor(h.data.type),n=this.metricsExt.getCurrentManifestUpdate(m),m=h.data.type;
if(k.period.id===this.streamProcessor.getStreamInfo().id)if(null!==l&&void 0!==l)this.notify(Dash.dependencies.RepresentationController.eventList.ENAME_QUALITY_PROCESSED,{mediaType:m,newQuality:f[m],streamInfo:this.streamProcessor.getStreamInfo(),completedCallback:h.data.completedCallback,error:l});else{if(n)for(var t=0;t<n.trackInfo.length&&(l=n.trackInfo[t],l.index!==k.index||l.mediaType!==this.streamProcessor.getType());t+=1);l=m;!k.isMuxed||"audio"!==m&&"video"!==m||(l="muxed");t=h.data.segmentRuns;
if("text"!==l){for(var u=l,x=0,A=0;A<t.length;A++)x+=t[A].duration;k[u].duration=x;k[u].totalDuration=x}u=k.index;x=k.period.manifest.Period_asArray;this.streamProcessor.isDynamic()&&!k.period.isAd&&(this.abrController.getQualityFor(m,this.streamProcessor.getStreamInfo())===k.index||k.index===f[m]?q.call(this,k,l,t,!1):q.call(this,k,l,t,!0));if("text"!==l){A=l;if(t.length){for(var H=k.period.manifest.Period_asArray,y=[],F=0;F<t.length;F++)y=y.concat(t[F].segments);k.isTrickPlayRepresentation?(H[0].trickPlayRepresentations[k.index][A].segments=
y,H[0].trickPlayRepresentations[k.index][A].segmentRuns=t):(k.period.representations[k.index][A].segments=y,k.period.representations[k.index][A].segmentRuns=t)}k[A].segments=y;k[A].segmentRuns=t;this.ssaiController.updateRepresentation(k,k[A].segments,A)}for(y=0;y<x.length;y++)A=x[y],A.isAd||(A=k.isTrickPlayRepresentation?A.trickPlayRepresentations[u]:A.representations[u],A[l].segments=k[l].segments,A[l].segmentRuns=t);c[k.index]=k;c[k.index][l].loaded=!0;d=c[d.index];b=!1;this.metricsModel.updateManifestUpdateInfo(n,
{latency:0});this.addDVRMetric.call(this);p=this.metricsExt.getCurrentRepresentationSwitch(p);"text"!==l&&this.manifestExt.updateRefreshDelay(k[l].targetDuration);p||g.call(this);e[m]&&k.index===f[m]&&(this.notify(Dash.dependencies.RepresentationController.eventList.ENAME_QUALITY_PROCESSED,{mediaType:m,newQuality:f[m],streamInfo:this.streamProcessor.getStreamInfo(),completedCallback:h.data.completedCallback}),e[m]=!1);this.notify(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,
{data:a,currentRepresentation:d,type:m});g.call(this)}},l=function(a){if((a=c[a])&&void 0!==a.currBackupIndex){var b=a.backupRepresentations[a.currBackupIndex];b.period=a.period;b.baseUrl=a.baseUrl;b.index=a.index;b.isBackup=!0;a=b}return a},n=function(a){if(a.data.mediaType===this.streamProcessor.getType()&&this.streamProcessor.getStreamInfo().id===a.data.streamInfo.id){var b=a.data.mediaType;e[b]=!0;f[b]=a.data.newQuality;this.log("onProcessQualityChange for type: "+b+" new quality: "+f[b],"INFO");
var c=this.getRepresentationForQuality(f[b]);c[b].loaded?this.indexHandler.updateRepresentation(c,b,!0,!0,a.data.completedCallback,c[b].name):this.indexHandler.updateRepresentation(c,b,!0,!1,a.data.completedCallback,c[b].name)}},k=function(a){if(a.data.mediaType===this.streamProcessor.getType()&&this.streamProcessor.getStreamInfo().id===a.data.streamInfo.id){d=this.getRepresentationForQuality(a.data.newQuality);a=a.data.mediaType;var b=d.bandwidth;!this.DOMStorage.isSupported(MediaPlayer.utils.DOMStorage.STORAGE_TYPE_LOCAL)||
"video"!==a&&"audio"!==a||localStorage.setItem(MediaPlayer.utils.DOMStorage["LOCAL_STORAGE_"+a.toUpperCase()+"_BITRATE_KEY"],JSON.stringify({bitrate:b/1E3,timestamp:(new Date).getTime()}));g.call(this)}},m=function(){},p=function(){this.addDVRMetric.call(this)},u=function(){},q=function(a,b,d,e){if(this.streamProcessor.isDynamic()){var f=0;if(void 0!==a[b].slideDuration)f=a[b].slideDuration;else{var g=c[a.index][b].segments,h=c[a.index][b].start,k=a[b].slideLen;if(g&&void 0!==h&&!isNaN(h)&&k&&k<=
g.length)for(h=0;h<k;h++)f+=g[h].duration}if(void 0===f||isNaN(f))f=0;g=a.period.manifest.Period_asArray;if(e)for(a[b].start+=f,d=a[b].start,e=a.index,f=0;f<g.length;f++)k=g[f],k.isAd||(k.representations[e][b].start=d);else this.timeline.handleDvrWindowSlide(k,f,a,b,d);a[b].slideLen=0;a[b].slideDuration=void 0}},t=function(a){var b=l(a.data.chunk.quality),c=a.data.chunk.mediaInfo.type,d=a.data.chunk.discontinuityEncountered;a=a.data.chunk.start;"text"!=c&&this.manifestModel.getValue().hasDiscontinuity&&
d?b.isMuxed||"video"===c?b.vidTimeOffset=a:"audio"===c&&(b.audTimeOffset=a):b.audio&&b.video&&!this.streamProcessor.isDynamic()&&("video"===c?b.vidTimeOffset=a:"audio"===c&&(b.audTimeOffset=a),isNaN(b.audTimeOffset)||isNaN(b.vidTimeOffset)||(b.vidTimeOffset=b.audTimeOffset=Math.min(b.vidTimeOffset,b.audTimeOffset)))};return{system:void 0,log:void 0,manifestExt:void 0,manifestModel:void 0,metricsModel:void 0,metricsExt:void 0,abrController:void 0,timelineConverter:void 0,notify:void 0,subscribe:void 0,
unsubscribe:void 0,DOMStorage:void 0,ssaiController:void 0,timeline:void 0,errHandler:void 0,eventList:{ENAME_DATA_UPDATE_COMPLETED:"dataUpdateCompleted",ENAME_DATA_UPDATE_STARTED:"dataUpdateStarted",ENAME_QUALITY_PROCESSED:"qualityProcessed"},addDVRMetric:function(){var a=this.streamProcessor,b=this.timelineConverter.calcSegmentAvailabilityRange(d,a.isDynamic());this.metricsModel.addDVRInfo(a.getType(),a.playbackController.getTime(),a.getStreamInfo().manifestInfo,b,a.getStreamInfo())},setup:function(){this.processQualityChange=
n;this.qualityChanged=k;this.representationUpdated=h;this.wallclockTimeUpdated=u;this.liveEdgeFound=m;this.bufferLevelUpdated=p;this.initFragmentLoaded=t},initialize:function(a){this.streamProcessor=a;this.indexHandler=a.indexHandler},getData:function(){return a},getDataIndex:function(){return-1},isUpdating:function(){return b},updateData:function(e,f,g,h,k){b=!0;this.notify(this.eventList.ENAME_DATA_UPDATE_STARTED);var m=this.abrController.getQualityFor(f,this.streamProcessor.getStreamInfo()),p=
!1;(p=m!==e.index)&&e[f].offset&&(e[f].offset=0);var p=e.period,n=e.isTrickPlayRepresentation,q=this.manifestModel.getValue();c=this.manifestExt.getRepresentationsForPeriod(q,p.index,f,g,n);d=l.call(this,m);!d&&k&&(m=e.index,d=l.call(this,m));a=e;"text"===f&&(d=l.call(this,0));if(d){e=d[f].loaded?!0:!1;if(h||k)d[f].m3u8Info=void 0,d[f].segments=[],d[f].name=g,e=!1;this.indexHandler.updateRepresentation(d,f,!0,e,null,g,h)}},getRepresentationForQuality:l,onSegmentFailed:function(a){var b=a.data.request,
c=a.data.xhrRequest,d=this.getRepresentationForQuality(b.quality);0<d.backupRepresentations.length&&(void 0==d.currBackupIndex||d.currBackupIndex<d.backupRepresentations.length-1)?(this.log("[HLS Failover] Trying backup representation","INFO"),void 0==d.currBackupIndex?d.currBackupIndex=0:d.currBackupIndex++,c=d.backupRepresentations[d.currBackupIndex],c.period=d.period,c.baseUrl=d.baseUrl,c.index=d.index,c.isBackup=!0,this.indexHandler.updateRepresentation(c,b.mediaType,!0,!1,a.data.completedCallback)):
d.blackListed?(this.log("[HLS Failover] No backup representation left, throwing error","INFO"),a.error&&"contentMismatch"===a.error.message?this.errHandler.contentTypeError(null,"segment"):this.errHandler.downloadError("content",b.url,c)):(d.blackListed=!0,this.indexHandler.setCurrentTime(b.startTime))},updateTimeOffsets:function(a){var b=a.mediaType,c=d;a.discontinuityEncountered&&(c.isMuxed?(c[b].MSETimeOffset-=(a.vidBaseDecodeTime-a.audBaseDecodeTime)/9E4,c.vidTimeOffset=c.audTimeOffset=a.timeOffset):
"audio"===b?c.audTimeOffset=a.timeOffset:"video"===b&&(c.vidTimeOffset=a.timeOffset));c.isMuxed?c[b].currentTsTime=Math.min(a.audBaseDecodeTime,a.vidBaseDecodeTime):"audio"===b?c[b].currentTsTime=a.audBaseDecodeTime:"video"===b&&(c[b].currentTsTime=a.vidBaseDecodeTime);c[b].lastSeqNum=a.sequenceNumber;if(void 0===c.audTimeOffset||void 0===c.vidTimeOffset)c.isMuxed?c.vidTimeOffset=c.audTimeOffset=a.timeOffset:"audio"===b?c.audTimeOffset=a.timeOffset:"video"===b&&(c.vidTimeOffset=a.timeOffset),c.audio&&
c.video&&this.streamProcessor.isDynamic()&&void 0!==c.audTimeOffset&&void 0!==c.vidTimeOffset&&(a="audio"===b?Math.max(0,a.audBaseDecodeTime-Math.round(9E4*a.mediaTime)):Math.max(0,a.vidBaseDecodeTime-Math.round(9E4*a.mediaTime)),a=(c.vidTimeOffset-a)/9E4,0!==a&&(0<a?c[b].start-=a:(c[b].start+=Math.abs(a),c.period.localStartTime+=Math.abs(a),c.period.start+=Math.abs(a))));this.indexHandler.setFirstMedia(!1)},updateRepInfo:function(a,b,c){var d=l(b),e=a.type;b=d.period.manifest.Period_asArray;for(var f=
0;f<b.length;f++){var g=b[f];if(!g.isAd)for(var h=0;h<g.representations.length;h++){var d=g.representations[h],k=a.codecStr;"audio"===e&&""===d.audCodec&&(d.audCodec=k,d.audio=d.isMuxed?d.muxed:d.audio,d.muxed=void 0,d.isMuxed=!1);"video"===e&&(d.vidCodec=k,d.video=d.isMuxed?d.muxed:d.video,d.isMuxed=!1,d.muxed=void 0);"muxed"===e&&(k=k.split(","),2===k.length&&(d.audCodec=k[1]))}}for(a=0;a<b.length;a++)if(d=b[a],!d.isAd)for(e=0;e<g.trickPlayRepresentations.length;e++)d.trickPlayRepresentations[e].isMuxed&&
(d.trickPlayRepresentations[e].audioSampleInfo=c)},clearMetricsForType:function(a){this.metricsModel.clearCurrentMetricsForType(a)},getCurrentRepresentation:function(){return d}}};Primetime.dependencies.HlsRepresentationController.prototype={constructor:Primetime.dependencies.HlsRepresentationController};(function(){var a=createPerformanceMonitor(),b=function(b,d,e,f,g,h,l,n,k,m,p,u){var q=b.keyData,t=b.IV,r=b.timeOffset,w=b.extract608,z=b.ccChannel,G,E=Math.round(9E4*b.mediaTime);e&&f?G="muxed":e?G="audio":f&&(G="video");a.startCounter("totalTimeByDoWork");var I=!0,N=0,L=0,x=0,A=0,H=[],y=0,F=0,D=!1,J=0,S=[],O=[],B,K,P,X,v,M=0;(new Date).getTime();var Z=[],T=0,aa=[],ea=0,ga=0,ia=8,ba,la,qa=0,ja=!1,fa=!1,da=0,ca=!1,ma=!1,sa=!1,W=[],ta=[],oa=-1,Q=0,U=!1,C=-1,R=0,Ca=!1,Ba=0,Ja=!1,va=0,La=0,ya=[],Da=
-1,za=-1,Ea=-1,Aa=-1,Ha=-1,na=-1,xa=!1,Oa,Ia=0,Pa=0,ka=-1,ha=-1,Qa=[],Wa=-1,Ra=new Uint8Array(d),Ma=!0,Sa=!1,ua=Math.round(2.5*Ra.length),ua=256E3<=ua?ua:256E3;0!=ua%4&&(ua+=4-ua%4);var Fa=Math.floor(ua/25),wa=Fa+8,Ta=!1;"undefined"!==typeof module&&module.exports&&(Ta=!0);if(Ta)var Ga=new Buffer(ua),Y=Ga;else{Ga=new ArrayBuffer(ua);Y=new Uint8Array(Ga);new Uint32Array(Ga);var Xa=new ArrayBuffer(ua/2),ra=new Uint8Array(Xa)}var V=function(a,b){Y[b++]=a>>24&255;Y[b++]=a>>16&255;Y[b++]=a>>8&255;Y[b++]=
a>>0&255;return b},pa=function(a,b){Y[b++]=a.charCodeAt(0);Y[b++]=a.charCodeAt(1);Y[b++]=a.charCodeAt(2);Y[b++]=a.charCodeAt(3);return b},eb=function(){var a=[0,1,3,7,15,31,63,127,255],b=1,c=Z.length,d=0,e=0,f=0;readByte=function(){if(b>=c)throw Error("Insufficient data while parsing SPS");var a=Z[b];b++;0===a?(d++,b<c&&2==d&&3==Z[b]&&(b++,d=0)):d=0;return a};skipBits=function(a){if(!(a<e))for(a-=e;8<=a;)f=readByte(),a-=8;e-=a};getNextBit=function(){0==e&&(f=readByte(),e=8);e--;return 0<(f>>e&1)};
getBits=function(b){var c;if(b>=e){c=f&a[e];for(b-=e;8<=b;)c=c<<8|readByte(),b-=8;0<b?(f=readByte(),e=8-b,c=c<<b|f>>e&a[b]):e=0}else e-=b,c=f>>e&a[b];return c};readUE=function(){for(var a=0;!getNextBit()&&32>a;)a++;return getBits(a)+((1<<a)-1)};skipScalingList=function(a){var b,c=8;b=8;for(var d=0;d<a;d++)0!=b&&(b=readSE(),b=(c+b+256)%256),c=0==b?c:b};readSE=function(){var a=readUE(),b=a+1>>1;return 1==(a&1)?b:-b};va=readByte();getNextBit();getNextBit();getNextBit();getBits(5);readByte();readUE();
var g=1,g=!1;if(66!=va&&77!=va&&88!=va&&(g=readUE(),3==g&&getNextBit(),readUE(),readUE(),getNextBit(),g=getNextBit()))for(var h=0;8>h;h++)(g=getNextBit())&&(6>h?skipScalingList(16):skipScalingList(64));if(83!=va&&86!=va){log2MaxFrameNumMinus4=readUE();picOrderCntType=readUE();if(0==picOrderCntType)log2MaxPicOrderCntLsbMinus4=readUE();else if(1==picOrderCntType)for(deltaPicOrderAlwaysZeroFlag=getNextBit(),offsetForNonRefPic=readSE(),offsetForTopToBottomField=readSE(),numRefFramesInPicOrderCntCycle=
readUE(),offsetForRefFrame=new Array[numRefFramesInPicOrderCntCycle],h=0;h<numRefFramesInPicOrderCntCycle;h++)offsetForRefFrame[h]=readSE();numRefFrames=readUE();gapsInFrameNumValueAllowedFlag=getNextBit();picWidthInMbsMinus1=readUE();picHeightInMapUnitsMinus1=readUE();(frameMbsOnlyFlag=getNextBit())||(mbAdaptiveFrameFieldFlag=getNextBit());direct8x8InferenceFlag=getNextBit();width=16*(picWidthInMbsMinus1+1);height=16*(picHeightInMapUnitsMinus1+1);frameMbsOnlyFlag||(height*=2);if(frameCroppingFlag=
getNextBit())leftOffset=readUE(),rightOffset=readUE(),topOffset=readUE(),bottomOffset=readUE(),height-=2*(topOffset+bottomOffset),width-=2*(rightOffset+leftOffset)}},Ya=function(a){var b=a.indexOf("0x"),b=-1===b?a.indexOf("0X"):b;0===b&&(a=a.slice(2));a=a.match(/.{1,2}/g);a.forEach(function(a,b,c){c[b]=parseInt("0x"+a)});return a},Ua=function(a){!q||1!=(K&31)&&5!=(K&31)||(0===a?da++:(2<=da&&3==a&&x--,da=0))},Za=function(a,b,c){var d=0,d=a[b];if((1==(d&31)||5==(d&31))&&48<c)for(d=b+32,b=d+c-32,c=Ya(t),
c=new Uint8Array(c);16<b-d;){for(var e=a.subarray(d,d+16),f=asmCrypto.AES_CBC.decrypt(e,q,0,c),g=0;g<f.length;g++)c[g]=e[g],e[g]=f[g];d+=160}},$a=function(a,b,c){b+=16;if(q&&32<=c){c=b+c-16;for(var d=Ya(t),d=new Uint8Array(d);16<=c-b;){for(var e=a.subarray(b,b+16),f=asmCrypto.AES_CBC.decrypt(e,q,0,d),g=0;g<f.length;g++)d[g]=e[g],e[g]=f[g];b+=16}}},ab=function(a){if(Sa&&Ma){Oa={offset:0,pts:Ia,dts:Pa};H.push(Oa);var b=x-8;1===H.length&&(b-=4);H[H.length-1].offset=b;Ma=Sa=!1}fa=!0;if(ja){var b=x,c=
x-(wa+4);x=wa;Y[x++]=c>>24&255;Y[x++]=c>>16&255;Y[x++]=c>>8&255;Y[x++]=c>>0&255;q&&Za(Y,x,c);wa=b;x=wa+4}a&&(0===B[v+2]&&(v+=1),v+=3);lastNaluType=K;7!==(lastNaluType&31)||ca||(W.length||W.push.apply(W,Z),eb(),ca=!0);8===(lastNaluType&31)&&(ta.length||ta.push.apply(ta,aa));6===(lastNaluType&31)&&w&&(ba=ia-ga-8,la=H[H.length-1].pts,a=void 0===r?oa-E:r,a=Math.max(0,a),la-=a,ra[ga++]=la>>24&255,ra[ga++]=la>>16&255,ra[ga++]=la>>8&255,ra[ga++]=la>>0&255,ra[ga++]=ba>>24&255,ra[ga++]=ba>>16&255,ra[ga++]=
ba>>8&255,ra[ga++]=ba>>0&255,ga=ia,ia+=8);if(v<B.length){if(K=B[v++],v>=B.length){if(7===(K&31))Z[T++]=K,ja=!1;else if(8===(K&31))aa[ea++]=K,ja=!1;else{if(1===(K&31)||5===(K&31))Ma=!0;ja=!0;Y[x++]=K;da=0}fa=!1}}else xa=!0},fb=function(a,b,c,d){d=b[c++];c+=d;d=b[c++];if(0==d&&0==a){a=(b[c++]&15)<<8;a+=b[c++];if(1021<a)return!1;a=c+a;c+=2;d=b[c++]&1;if(0==d)return!1;c++;c++;for(a-=4;c<a;)d=b[c++]<<8,d+=b[c++],0==d?c+=2:(d=(b[c++]&31)<<8,Wa=d+=b[c++])}else if(2==d&&a==Wa){a=(b[c++]&15)<<8;a+=b[c++];
if(1021<a)return!1;a=c+a;c++;c++;d=b[c++]&1;if(0==d)return!1;c=c+2+2;d=(b[c++]&15)<<8;d+=b[c++];c+=d;for(a-=4;c<a;){d=b[c++];var e=(b[c++]&31)<<8,e=e+b[c++],f=(b[c++]&15)<<8,f=f+b[c++];c+=f;15===d&&(-1===Ea||Ea>e)?Ea=e:27===d&&(-1===Aa||Aa>e)?Aa=e:21===d&&(-1===Ha||Ha>e)&&(Ha=e)}}return!0},bb=function(a){var b=a[0]>>>6&3,c=a[0]>>>2&15;M=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350][c];a=((a[0]&1)<<2)+(a[1]>>6&3);switch(b){case 0:b=1;break;case 1:b=2;break;case 2:b=3;break;
default:return}O=[];O[0]=(b<<3&248)+(c>>1&7);O[1]=(c<<7&128)+(a<<3&120)},Va=function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},gb=function(a){var b=a.length,c;a:{c=0;var d;do if(d=Va(a.subarray(c,c+3)),c+=3,"ID3"===d){c+=3;d=a[c++]&127;var e=a[c++]&127,f=a[c++]&127,g=a[c++]&127;for(d=c+((d<<21)+(e<<14)+(f<<7)+g);c+8<=d;)switch(e=Va(a.subarray(c,c+4)),c+=4,c++,c++,c++,c++,c++,c++,e){case "PRIV":"com.apple.streaming.transportStreamTimestamp"===Va(a.subarray(c,c+44))&&
(c+=44,c+=4,e=a[c++]&1,X=!0,f=((a[c++]<<23)+(a[c++]<<15)+(a[c++]<<7)+a[c++])/45,e&&(f+=4.772185884E7),P=f=Math.round(f))}c=d}else if("3DI"===d)c+=7,console.log("3DI footer found, end: "+c);else{if(d=c-=3)X||console.log("ID3 tag found, but no timestamp"),d=a.subarray(0,d),Qa.push({start:0,data:d,time:P});break a}while(1);c=void 0}if(X){for(;c<b-1&&(255!==a[c]||240!==(a[c+1]&240));c++);Q=90*P;d=a[c+1]&1?7:9;for(O&&O.length||bb(a.subarray(c+2,c+d));c+5<b;)if(d=a[c+1]&1?7:9,e=(a[c+3]&3)<<11|a[c+4]<<3|
(a[c+5]&224)>>>5,e-=d,0<e&&c+d+e<=b){ma=!0;S.push(e);for(f=0;f<e;f++)Y[A++]=a[c+d+f];for(c+=e+d;c<b-1&&(255!==a[c]||240!==(a[c+1]&240));c++);}else break}},hb=function(a){for(;N<a.length;){var d=a.subarray(N,N+188);F++;N+=188;var g=(d[1]&31)<<8|d[2],k=d[1]&64,l=d[3]&32;B=d.subarray(4);d=0;l&&(d=B[0]);l&&(B=B.subarray(d+1));fb(g,B,0,B.length);if(k&&(Ka=0,0===B[0]&&0===B[1]&&1==B[2])){Ka=B[3];l=6;ha=ka=-1;l++;d=(B[l]&192)>>6;l++;var m=B[l];l++;d&2&&(ka=B[l]&14,ka*=128,ka+=B[l+1],ka*=256,ka+=B[l+2]&254,
ka*=128,ka+=B[l+3],ka*=256,ka+=B[l+4]&254,ka/=2,d&1?(ha=B[l+5]&14,ha*=128,ha+=B[l+6],ha*=256,ha+=B[l+7]&254,ha*=128,ha+=B[l+8],ha*=256,ha+=B[l+9]&254,ha/=2):ha=ka);l+=m;B=B.subarray(l);if(Aa===g||224===Ka&&-1===Aa){-1===Da&&(Da=g);-1===oa&&(oa=ha);Sa=!0;if(-1==C||C>Ia)C=ka-ha;L||(L=g)}}if(za===g||Ea===g||-1===za&&-1===Ea&&192===Ka){if(-1===za&&(za=g),e)for(-1===na&&k&&(na=ha),ma=!0,!U&&k&&(Q=ha,U=!0),v=0;v<B.length;)if(0<R){for(R;0<R&&v<B.length;R--)Y[A++]=B[v++];0==R&&$a(Y,A-p,p)}else if(0<Ba){for(Ba;0<
Ba&&v<B.length;Ba--)ya[La++]=B[v++];if(0===Ba){La=0;O&&O.length||bb(ya);var p=(ya[1]&3)<<11|ya[2]<<3|(ya[3]&224)>>>5,p=p-(I?7:9);ya=[];S.push(p);for(R=p;0<R&&v<B.length;R--)Y[A++]=B[v++];0==R&&$a(Y,A-p,p)}}else if(Ca&&240===(B[v]&240)||v+1<B.length&&255===B[v]&&240===(B[v+1]&240))v+=1,Ca||(v+=1),Ba=(I=B[v-1]&1)?5:7,Ca=!1;else if(v+1>=B.length&&B[v]&1){Ca=!0;break}else Ca=!1,v++}else if(Da===g&&f)for(k&&(Pa=ha,Ia=ka),-1===na&&k&&(na=Pa),sa=!0,v=0;v<B.length;)if(D){k=!1;switch(J){case 3:1==B[v]&&(k=
!0,v++);break;case 2:if(1==B[v]||0==B[v]&&1==B[v+1])k=!0,v=1==B[v]?v+1:v+2;break;case 1:0===B[v]&&(1===B[v+1]||0===B[v+1]&&1===B[v+2])&&(k=!0,v=1===B[v+1]?v+2:v+3)}if(k)ab(!1);else{if(ja){for(k=0;k<J;k++)Y[x++]=0;Ua(0)}else if(7===(K&31))for(k=0;k<J;k++)Z[T++]=0;if(8===(K&31))for(k=0;k<J;k++)aa[ea++]=0}D=!1;J=0}else if(0===B[v]&&v+1<B.length&&0===B[v+1]&&(v+2<B.length&&1===B[v+2]||v+3<B.length&&0===B[v+2]&&1===B[v+3]))fa&&(Y[x++]=K,fa=!1),ab(!0);else{if(!fa&&0==B[v])if(v+2<B.length&&1<B[v+2])D=!1;
else if(v+1<B.length&&0!=B[v+1])D=!1;else{J=v+2<B.length?3:v+1<B.length?2:1;D=!0;break}xa&&(K=B[v++],xa=!1);switch(K&31){case 7:fa&&(Z[T++]=K,fa=!1);Y[x++]=B[v];Z[T++]=B[v++];ja=!0;break;case 8:fa&&(aa[ea++]=K,fa=!1);Y[x++]=B[v];aa[ea++]=B[v++];ja=!0;break;case 6:fa&&(Y[x++]=K,w&&(ra[ia++]=K),fa=!1);y++;ja=!0;Y[x++]=B[v];w?1==qa&&3==B[v]?qa=0:2==qa&&0==B[v]&&3==B[v+1]?(ra[ia++]=B[v++],Y[x++]=B[v++],qa=0):v+3<B.length?0==B[v]&&0==B[v+1]&&3==B[v+2]?(ra[ia++]=B[v++],Y[x++]=B[v],ra[ia++]=B[v++],Y[x++]=
B[v],3<B[v]&&(w=!1,console.log("Invalid 608 data. Skipping ts")),v++):0==B[v]&&0==B[v+1]&&3>B[v+2]?(w=!1,console.log("Invalid 608 data. Skipping ts")):ra[ia++]=B[v++]:v>=B.length-3&&v<B.length&&(v==B.length-3&&0==B[v]&&0==B[v+1]&&3==B[v+2]?(ra[ia++]=B[v++],Y[x++]=B[v],ra[ia++]=B[v++],Y[x++]=B[v++]):v==B.length-3&&0==B[v]&&0==B[v+1]&&3>B[v+2]?(w=!1,console.log("Invalid 608 data. Skipping ts")):(v==B.length-2&&0==B[v]&&0==B[v+1]?(qa=1,ra[ia++]=B[v++],Y[x++]=B[v]):v==B.length-1&&0==B[v]&&(qa=2),ra[ia++]=
B[v++])):v++;break;case 5:Ja=!0,Oa.isIDR=!0;default:if(fa){if(1===(K&31)||5===(K&31))Ma=!0;Y[x++]=K;fa=!1;da=0}y++;ja=!0;Y[x++]=B[v++];Ua(B[v-1]);if(!Ta&&0==x%4)for(k=Math.floor((B.length-v)/4)-1,g=!1,l=0;l<k;l++){for(d=0;4>d;d++)if(0===B[v+d]&&0===B[v+1+d]&&1===B[v+2+d]||0===B[v+2+d]&&1===B[v+3+d])g=!0;if(1==g)break;for(d=0;4>d;d++)Y[x++]=B[v++],Ua(B[v-1])}}}else if(Ha===g||189===Ka&&-1===Ha)isNaN(r)?0<=oa||0<=Q?(g=Math.max(oa,Q),g=(Ia-g)/90+1E3*h):g=1E3*b.startTime:g=(Ia-r)/90+1E3*h,Qa.push({start:k,
data:B,time:g})}ja&&(a=x-(wa+4),Y[wa++]=a>>24&255,Y[wa++]=a>>16&255,Y[wa++]=a>>8&255,Y[wa++]=a>>0&255,q&&Za(Y,wa,a));f&&H.push({offset:x-8})},cb=Fa,Fa=V(0,Fa),Fa=pa("mdat",Fa),db=Fa-8,x=wa+4,A=x+Math.floor(.5*(ua-x)),Na=A-x+4,Ka=0;if(g===Primetime.MimeTypeUtils.Extension.TS)hb(Ra);else if(g===Primetime.MimeTypeUtils.Extension.AAC)gb(Ra);else{console.log("file format is other than ts or aac");return}return function(){var b=0,c=x;ma&&(c=A);b=c-cb;V(b,cb);var d=ua-c,c=V(d,c);pa("free",c);for(var e=[],
f=[],g=[],xa=[],q=H[0],t=H[0],v={sum:0,count:0},c=0,d=[],C=[],B=0,na=H.length-1;B<na;B++){var D=H[B+1];e.push(D.offset-q.offset);var F=D.dts-q.dts;F?(f.push({sample_count:1,sample_delta:F}),c+=F,v.sum+=F,v.count++):f.length++;q.isIDR&&g.push(B+1);xa.push({first_chunk:xa.length+1,sample_count:1,sample_offset:q.dtsFix=q.pts-q.dts});if(F){var t=D.offset-t.offset,I;I=65536;q.isIDR&&(I=33554432);d.push({duration:F,size:t,compTimeOffset:q.dtsFix,sampleFlags:I});t=D}q=D}na=0;2<=H.length&&(na=H[H.length-
1].offset-H[H.length-2].offset,B=H[H.length-1].pts-H[H.length-1].dts,1<d.length?d.push({duration:d[1].duration,size:na,compTimeOffset:B,sampleFlags:65536}):0<d.length?d.push({duration:d[0].duration,size:na,compTimeOffset:B,sampleFlags:65536}):0==d.length&&d.push({duration:Math.round(9E4*p),size:na,compTimeOffset:B?B:0,sampleFlags:H[H.length-2].isIDR?33554432:65536}));v=v.sum/v.count;B=0;for(na=f.length;B<na;B++)void 0===f[B]&&(f[B]={first_chunk:B+1,sample_count:1,sample_delta:v},c+=v);c||(c=Math.round(9E4*
p));B=1;for(na=f.length;B<na&&f[B].sample_delta===f[0].sample_delta;B++);f=1024/M*9E4;if(ma)for(B=0,na=S.length;B<na;B++)C.push({duration:f,size:S[B]});sa&&(f="",W.length||(f+="No SPS found, "),ta.length||(f+="No PPS found, "),Ja||(f+="No keyframe found, "),f.length&&console.log(f));if("audio"===G&&!ma||"video"===G&&!sa||"muxed"===G&&!ma&&!sa)return Ga=null,{buff:Ga,dur:c,codecStr:"",vidBaseDecodeTime:void 0,audBaseDecodeTime:void 0,baseOffset:void 0};Q=u?oa:Q;void 0===r?("muxed"===G?r=Math.min(Q,
oa)-E:"audio"===G?r=Q-E:"video"===G&&(r=oa-E),r=Math.max(0,r)):isNaN(r)&&("muxed"===G?r=Math.min(Q,oa):"audio"===G?r=Q:"video"===G&&(r=oa));B=oa-r;na=Q-r;console.log("SSAI vid: "+B+" aud: "+na+" baseOffset: "+r+" Time : "+na/9E4+"  "+B/9E4);e=0;0<y&&(e=20+16*d.length);g=0;ma&&(g=20+8*C.length);xa=0;0<y&&(xa=40+e);q=0;ma&&(q=40+g+4);D=24+xa+q;f=D+8;Na+=D+8;v=V(28,0);v=pa("styp",v);v=pa("msdh",v);v=V(0,v);v=pa("msdh",v);v=pa("msix",v);v=pa("lmsg",v);v=V(44,v);v=pa("sidx",v);v=V(0,v);v=V(1,v);v=V(9E4,
v);v=V(0,v);v=V(0,v);v=V(1,v);v=V(D+b&-2147483649,v);v=V(c,v);b=-1879048192;v=V(b,v);F=db-D;t=F-v;if(0<t)for(v=V(t,v),v=pa("free",v),b=0;b<t-8;b++)Y[v++]=0;v=V(D,F);v=pa("moof",v);v=V(16,v);v=pa("mfhd",v);v=V(0,v);v=V(1,v);if(sa)for(var v=V(xa,v),v=pa("traf",v),v=V(16,v),v=pa("tfhd",v),v=V(0,v),v=V(1,v),v=V(16,v),v=pa("tfdt",v),v=V(0,v),v=V(B,v),v=V(e,v),v=pa("trun",v),v=V(3841,v),Aa=v=V(d.length,v),v=V(f,v),b=0;b<d.length;b++)v=V(d[b].duration,v),v=V(d[b].size,v),v=V(d[b].sampleFlags,v),v=V(d[b].compTimeOffset,
v);if(ma)for(var v=V(q,v),v=pa("traf",v),v=V(20,v),v=pa("tfhd",v),v=V(32,v),v=V(2,v),v=V(33554432,v),v=V(16,v),v=pa("tfdt",v),v=V(0,v),v=V(na,v),v=V(g,v),v=pa("trun",v),v=V(769,v),J=v=V(C.length,v),v=V(Na,v),b=0;b<C.length;b++)v=V(C[b].duration,v),v=V(C[b].size,v);d=db-v;sa&&V(f+d,Aa);ma&&V(Na+d,J);if(0<d)for(v=V(d,v),v=pa("free",v),b=0;b<d-8;b++)Y[v++]=0;1<ga&&w&&(k.setChannel(z),(Aa=n.parse(Xa,!1,0,ga-1,null,1E3*h))&&l&&l.setHasCaptions&&l.setHasCaptions(Aa));m&&m.addMetadata(Qa);a.endCounter("totalTimeByDoWork");
a.printCounters();return{buff:Ga,dur:c,codecStr:"",vidBaseDecodeTime:oa,audBaseDecodeTime:Q,baseOffset:r}}()};Primetime.dependencies.HlsConverter=function(){return{doWork:b}};Primetime.dependencies.HlsConverter.prototype={constructor:Primetime.dependencies.HlsConverter}})();HlsInitGenerator=function(){return{system:void 0,doWork:function(a,b,c,d,e){try{var f=a.isSbr,g=0,h=0,l=0,n=[],k=0,m=!1,p=0,u="",q="",t=[],r=-1,w=-1,z=-1,G=-1,E,I,N,L,x,A=!0,H=0;(new Date).getTime();var y=[],F=0,D=[],J=0,S=!1,O=!1,B=!1,K=!1,P=[],X=[],v=!1,M=0,Z=!1,T=0,aa=0,ea=[0,0,0,0,0,0,0,0],ga=0,ia=0,ba=[],la=-1,qa=-1,ja=-1,fa=0,da=-1,ca=-1,ma=!0,sa=[],W=new Uint8Array(b),ta=W.length/10,ta=10240<=ta?ta:10240;a=!1;"undefined"!==typeof module&&module.exports&&(a=!0);if(a)var oa=new Buffer(ta),Q=
oa;else oa=new ArrayBuffer(ta),Q=new Uint8Array(oa);var U=function(a,b){Q[b++]=a>>8&255;Q[b++]=a>>0&255;return b},C=function(a,b){Q[b++]=a>>24&255;Q[b++]=a>>16&255;Q[b++]=a>>8&255;Q[b++]=a>>0&255;return b},R=function(a,b){Q[b++]=a.charCodeAt(0);Q[b++]=a.charCodeAt(1);Q[b++]=a.charCodeAt(2);Q[b++]=a.charCodeAt(3);return b},Ca=function(a,b){for(var c=0;c<a.length;c++)Q[b++]=a.charCodeAt(c);return b},Ba=function(){var a=[0,1,3,7,15,31,63,127,255],b=1,c=y.length,d=0,e=0,f=0;readByte=function(){if(b>=
c)throw Error("Insufficient data while parsing SPS");var a=y[b];b++;0===a?(d++,b<c&&2==d&&3==y[b]&&(b++,d=0)):d=0;return a};skipBits=function(a){if(!(a<e))for(a-=e;8<=a;)f=readByte(),a-=8;e-=a};getNextBit=function(){0==e&&(f=readByte(),e=8);e--;return 0<(f>>e&1)};getBits=function(b){var c;if(b>=e){c=f&a[e];for(b-=e;8<=b;)c=c<<8|readByte(),b-=8;0<b?(f=readByte(),e=8-b,c=c<<b|f>>e&a[b]):e=0}else e-=b,c=f>>e&a[b];return c};readUE=function(){for(var a=0;!getNextBit()&&32>a;)a++;return getBits(a)+((1<<
a)-1)};skipScalingList=function(){var a,b=8;a=8;for(var c=0;c<len;c++)0!=a&&(a=readSE(),a=(b+a+256)%256),b=0==a?b:a};readSE=function(){var a=readUE(),b=a+1>>1;return 1==(a&1)?b:-b};aa=readByte();ea[0]=1==getNextBit()?1:0;ea[1]=1==getNextBit()?1:0;ea[2]=1==getNextBit()?1:0;getBits(5);ga=readByte();readUE();var g=1,g=!1;if(66!=aa&&77!=aa&&88!=aa&&(g=readUE(),3==g&&getNextBit(),readUE(),readUE(),getNextBit(),g=getNextBit()))for(var h=0;8>h;h++)(g=getNextBit())&&(6>h?skipScalingList(16):skipScalingList(64));
if(83!=aa&&86!=aa){log2MaxFrameNumMinus4=readUE();picOrderCntType=readUE();if(0==picOrderCntType)log2MaxPicOrderCntLsbMinus4=readUE();else if(1==picOrderCntType)for(deltaPicOrderAlwaysZeroFlag=getNextBit(),offsetForNonRefPic=readSE(),offsetForTopToBottomField=readSE(),numRefFramesInPicOrderCntCycle=readUE(),offsetForRefFrame=new Array[numRefFramesInPicOrderCntCycle],h=0;h<numRefFramesInPicOrderCntCycle;h++)offsetForRefFrame[h]=readSE();numRefFrames=readUE();gapsInFrameNumValueAllowedFlag=getNextBit();
picWidthInMbsMinus1=readUE();picHeightInMapUnitsMinus1=readUE();(frameMbsOnlyFlag=getNextBit())||(mbAdaptiveFrameFieldFlag=getNextBit());direct8x8InferenceFlag=getNextBit();width=16*(picWidthInMbsMinus1+1);height=16*(picHeightInMapUnitsMinus1+1);frameMbsOnlyFlag||(height*=2);if(frameCroppingFlag=getNextBit())leftOffset=readUE(),rightOffset=readUE(),topOffset=readUE(),bottomOffset=readUE(),height-=2*(topOffset+bottomOffset),width-=2*(rightOffset+leftOffset)}},Ja=function(a){S=!0;a&&(0===E[x+2]&&(x+=
1),x+=3);a=I;7!==(a&31)||O||(P.length||P.push.apply(P,y),Ba(),O=!0);8===(a&31)&&(X.length||X.push.apply(X,D));x<E.length&&(I=E[x++])},va=function(a,b){if(ma){var c=a+b,d=sa.length;d&&a===sa[d-1].start?sa[d-1]={start:a,end:c}:sa.push({start:a,end:c})}},La=function(a,b,c,d){d=b[c++];c+=d;d=b[c++];if(0==d&&0==a){a=(b[c++]&15)<<8;a+=b[c++];if(1021<a)return!1;a=c+a;c+=2;d=b[c++]&1;if(0==d)return!1;c++;c++;for(a-=4;c<a;)d=b[c++]<<8,d+=b[c++],0==d?c+=2:(d=(b[c++]&31)<<8,G=d+=b[c++])}else if(2==d&&a==G){a=
(b[c++]&15)<<8;a+=b[c++];if(1021<a)return!1;a=c+a;c++;c++;d=b[c++]&1;if(0==d)return!1;c=c+2+2;d=(b[c++]&15)<<8;d+=b[c++];c+=d;for(a-=4;c<a;){d=b[c++];var e=(b[c++]&31)<<8,e=e+b[c++],f=(b[c++]&15)<<8,f=f+b[c++];c+=f;15===d&&(-1===r||r>e)?r=e:27===d&&(-1===w||w>e)?w=e:21===d&&(-1===z||z>e)&&(z=e)}}return!0},ya=function(a){var b=a[0]>>>6&3,c=a[0]>>>2&15;H=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350][c];a=((a[0]&1)<<2)+(a[1]>>6&3);var d;switch(b){case 0:break;case 1:break;case 2:break;
default:return}t=[];Primetime.BrowserExtensions.isFirefox()?6<=c?(b=5,t=Array(4),d=c-3):(b=2,t=Array(2),d=c):Primetime.BrowserExtensions.isAndroid()?(b=2,t=Array(2),d=c):(b=5,6<=c?d=c-3:(1===a&&(b=2,t=Array(2)),d=c));q="mp4a.40.5";f||(q="mp4a.40."+b);t[0]=(b<<3&248)+(c>>1&7);t[1]=(c<<7&128)+(a<<3&120);5===b&&(t[1]|=(d&14)>>1,t[2]=(d&1)<<7,t[2]|=8,t[3]=0)},Da=function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b};a=function(a){var b=a.length,c;a:{c=0;var d;do if(d=Da(a.subarray(c,
c+3)),c+=3,"ID3"===d){c+=3;d=a[c++]&127;var e=a[c++]&127,f=a[c++]&127,g=a[c++]&127;for(d=c+((d<<21)+(e<<14)+(f<<7)+g);c+8<=d;)switch(e=Da(a.subarray(c,c+4)),c+=4,c++,c++,c++,c++,c++,c++,e){case "PRIV":"com.apple.streaming.transportStreamTimestamp"===Da(a.subarray(c,c+44))&&(c+=44,c+=4,e=a[c++]&1,L=!0,f=((a[c++]<<23)+(a[c++]<<15)+(a[c++]<<7)+a[c++])/45,e&&(f+=4.772185884E7),N=f=Math.round(f))}c=d}else if("3DI"===d)c+=7,console.log("3DI footer found, end: "+c);else{(d=c-=3)&&(L||console.log("ID3 tag found, but no timestamp"));
break a}while(1);c=void 0}if(L){for(;c<b-1&&(255!==a[c]||240!==(a[c+1]&240));c++);ja=90*N;B=!0;b=a[c+1]&1?7:9;t&&t.length||ya(a.subarray(c+2,c+b))}};b=function(a){for(;g<a.length;){if(d){if(P.length&&X.length)if(c){if(t.length&&!ma)break}else break}else if(c&&t.length&&!ma)break;var b=a.subarray(g,g+188);k++;h=g;g+=188;var e=(b[1]&31)<<8|b[2],f=b[1]&64,n=b[3]&32;E=b.subarray(4);var q=0;n&&(q=E[0]);n&&(E=E.subarray(q+1));La(e,E,0,E.length);if(f&&(za=0,0===E[0]&&0===E[1]&&1==E[2])){za=E[3];n=6;ca=da=
-1;n++;q=(E[n]&192)>>6;n++;var u=E[n];n++;q&2&&(da=E[n]&14,da*=128,da+=E[n+1],da*=256,da+=E[n+2]&254,da*=128,da+=E[n+3],da*=256,da+=E[n+4]&254,da/=2,q&1?(ca=E[n+5]&14,ca*=128,ca+=E[n+6],ca*=256,ca+=E[n+7]&254,ca*=128,ca+=E[n+8],ca*=256,ca+=E[n+9]&254,ca/=2):ca=da);n+=u;E=E.subarray(n);if(w===e||224===za&&-1===w)-1===la&&(la=e),l||(l=e)}if((qa===e||r===e||-1===qa&&-1===r&&192===za)&&!t.length){if(-1===qa&&(qa=e),c){if(-1===ja&&f||ja>ca)ja=ca;B=!0;!v&&f&&(v=!0);for(x=0;x<E.length;)if(0<M){for(M;0<M&&
x<E.length;M--)x++;0===M?(va.call(this,h,188-(E.length-x)),ma=!1):va.call(this,h,b.length)}else if(Z&&240===(E[x]&240)||x+1<E.length&&255===E[x]&&240===(E[x+1]&240))x+=1,x>=E.length||(Z||(x+=1),A=E[x-1]&1,T=0!=T?T:A?5:7,Z=!1,va.call(this,h,b.length));else if(x+1>=E.length&&255===E[x]){Z=!0;va.call(this,h,b.length);break}else if(0<T){for(T;0<T&&x<E.length;T--)ba[ia++]=E[x++];0===T&&(ia=0,t&&t.length||ya(ba),e=(ba[1]&3)<<11|ba[2]<<3|(ba[3]&224)>>>5,M=e-=A?7:9);va.call(this,h,b.length)}else x++}}else if(la===
e&&d&&(!P.length||!X.length)){f&&(fa=ca);if(-1===ja&&f||ja>ca)ja=fa;K=!0;for(x=0;x<E.length;)if(m){b=!1;switch(p){case 3:1==E[x]&&(b=!0,x++);break;case 2:if(1==E[x]||0==E[x]&&1==E[x+1])b=!0,x=1==E[x]?x+1:x+2;break;case 1:0===E[x]&&(1===E[x+1]||0===E[x+1]&&1===E[x+2])&&(b=!0,x=1===E[x+1]?x+2:x+3)}if(b)Ja(!1);else{if(7===(I&31))for(b=0;b<p;b++)y[F++]=0;if(8===(I&31))for(b=0;b<p;b++)D[J++]=0}m=!1;p=0}else if(0===E[x]&&x+1<E.length&&0===E[x+1]&&(x+2<E.length&&1===E[x+2]||x+3<E.length&&0===E[x+2]&&1===
E[x+3]))Ja(!0);else{if(!S&&0==E[x])if(x+2<E.length&&1<E[x+2])m=!1;else if(x+1<E.length&&0!=E[x+1])m=!1;else{p=x+2<E.length?3:x+1<E.length?2:1;m=!0;break}switch(I&31){case 7:S&&(y[F++]=I,S=!1);y[F++]=E[x++];break;case 8:S&&(D[J++]=I,S=!1);D[J++]=E[x++];break;default:S&&(S=!1),x++}}}}};var za=0;if(e===Primetime.MimeTypeUtils.Extension.TS)b(W);else if(e===Primetime.MimeTypeUtils.Extension.AAC)a(W);else{console.log("file format is other than ts or aac");return}return function(){for(var a=n[0],b=0,c=0,
d=n.length-1;c<d;c++){var e=n[c+1];(a=e.dts-a.dts)&&(b+=a);a=e}var f=1024/H*9E4;if(K&&(c="",P.length||(c+="No SPS found, "),X.length||(c+="No PPS found, "),c.length))throw c;var g=1;g++;d=C(36,0);d=R("ftyp",d);d=R("isom",d);d=C(512,d);d=R("isom",d);d=R("iso2",d);d=R("avc1",d);d=R("mp41",d);e=d=R("dash",d);d=C(0,d);d=R("moov",d);d=C(108,d);d=R("mvhd",d);d=C(0,d);d=C(0,d);d=C(0,d);d=C(1E3,d);d=C(0,d);d=C(65536,d);d=U(256,d);d=U(0,d);d=C(0,d);d=C(0,d);a=[65536,0,0,0,65536,0,0,0,1073741824];for(c=0;9>
c;c++)d=C(a[c],d);for(c=0;6>c;c++)d=C(0,d);c=d=C(g,d);d=C(0,d);d=R("mvex",d);K&&(d=C(32,d),d=R("trex",d),d=C(0,d),d=C(1,d),d=C(1,d),d=C(0,d),d=C(0,d),d=C(65536,d));B&&(d=C(32,d),d=R("trex",d),d=C(0,d),d=C(2,d),d=C(1,d),d=C(f,d),d=C(0,d),d=C(33554432,d));C(d-c,c);if(K){for(var h=d,d=C(0,d),f=d=R("trak",d),d=C(0,d),d=R("tkhd",d),d=C(15,d),d=C(0,d),d=C(0,d),d=C(1,d),d=C(0,d),d=C(0,d),d=C(0,d),d=C(0,d),d=U(0,d),d=U(0,d),d=U(256,d),d=U(0,d),a=[65536,0,0,0,65536,0,0,0,1073741824],c=0;9>c;c++)d=C(a[c],d);
d=U(width,d);d=U(0,d);d=U(height,d);d=U(0,d);C(d-f,f);a=d;d=C(0,d);d=R("mdia",d);d=C(32,d);d=R("mdhd",d);d=C(0,d);d=C(0,d);d=C(0,d);d=C(9E4,d);d=C(0,d);Q[d++]=85;Q[d++]=196;d=U(0,d);d=C(45,d);d=R("hdlr",d);d=C(0,d);d=C(0,d);d=R("vide",d);d=C(0,d);d=C(0,d);d=C(0,d);d=Ca("VideoHandler",d);Q[d++]=0;f=d;d=C(0,d);d=R("minf",d);d=C(20,d);d=R("vmhd",d);d=C(1,d);d=U(0,d);for(c=0;3>c;c++)d=U(0,d);for(var d=C(36,d),d=R("dinf",d),d=C(28,d),d=R("dref",d),d=C(0,d),d=C(1,d),d=C(12,d),d=R("url ",d),g=d=C(1,d),d=
C(0,d),k=d=R("stbl",d),d=C(0,d),d=R("stsd",d),d=C(0,d),l=d=C(1,d),d=C(0,d),d=R("avc1",d),d=U(0,d),d=C(0,d),d=U(1,d),c=0;4>c;c++)d=C(0,d);d=U(width,d);d=U(height,d);d=C(4718592,d);d=C(4718592,d);d=C(0,d);d=U(1,d);c=0;for(Q[d++]=c;31>c;)c++,Q[d++]=0;d=U(24,d);c=d=U(-1,d);d=C(0,d);d=R("avcC",d);Q[d++]=1;Q[d++]=aa;Q[d++]=parseInt(ea.join(""),2);Q[d++]=ga;Q[d++]=255;u="avc1."+aa.toString(16)+parseInt(ea.join(""),2).toString(16)+ga.toString(16);Q[d++]=225;Q[d++]=0;Q[d++]=P.length;for(var m=0;m<P.length;m++)Q[d++]=
P[m];Q[d++]=1;Q[d++]=0;Q[d++]=X.length;for(m=0;m<X.length;m++)Q[d++]=X[m];C(d-l,l);C(d-c,c);C(d-k,k);d=C(16,d);d=R("stts",d);d=C(0,d);d=C(0,d);d=C(16,d);d=R("stsc",d);d=C(0,d);d=C(0,d);d=C(20,d);d=R("stsz",d);d=C(0,d);d=C(0,d);d=C(0,d);d=C(16,d);d=R("stco",d);d=C(0,d);d=C(0,d);C(d-g,g);C(d-f,f);C(d-a,a);C(d-h,h)}if(B){l=d;d=C(0,d);f=d=R("trak",d);d=C(0,d);d=R("tkhd",d);d=C(15,d);d=C(0,d);d=C(0,d);d=C(2,d);d=C(0,d);d=C(0,d);d=C(0,d);d=C(0,d);d=U(0,d);d=U(0,d);d=U(256,d);d=U(0,d);a=[65536,0,0,0,65536,
0,0,0,1073741824];for(c=0;9>c;c++)d=C(a[c],d);d=C(0,d);d=C(0,d);C(d-f,f);a=d;d=C(0,d);d=R("mdia",d);d=C(32,d);d=R("mdhd",d);d=C(0,d);d=C(0,d);d=C(0,d);d=C(9E4,d);d=C(0,d);Q[d++]=85;Q[d++]=196;d=U(0,d);d=C(45,d);d=R("hdlr",d);d=C(0,d);d=C(0,d);d=R("soun",d);d=C(0,d);d=C(0,d);d=C(0,d);d=Ca("SoundHandler",d);Q[d++]=0;f=d;d=C(0,d);d=R("minf",d);d=C(16,d);d=R("smhd",d);d=C(0,d);d=U(0,d);d=U(0,d);d=C(36,d);d=R("dinf",d);d=C(28,d);d=R("dref",d);d=C(0,d);d=C(1,d);d=C(12,d);d=R("url ",d);g=d=C(1,d);d=C(0,
d);k=d=R("stbl",d);d=C(0,d);d=R("stsd",d);d=C(0,d);m=d=C(1,d);d=C(0,d);d=R("mp4a",d);d=U(0,d);d=C(0,d);d=U(1,d);for(c=0;2>c;c++)d=C(0,d);d=U(2,d);d=U(16,d);d=C(0,d);d=U(H,d);c=d=U(0,d);d=C(0,d);d=R("esds",d);d=C(0,d);Q[d++]=3;Q[d++]=23+t.length;d=U(2,d);Q[d++]=0;Q[d++]=4;Q[d++]=15+t.length;Q[d++]=64;Q[d++]=21;Q[d++]=0;Q[d++]=0;Q[d++]=0;d=C(64068,d);d=C(64068,d);Q[d++]=5;Q[d++]=t.length;for(h=0;h<t.length;h++)Q[d++]=t[h];Q[d++]=6;Q[d++]=1;Q[d++]=2;C(d-m,m);C(d-c,c);C(d-k,k);d=C(16,d);d=R("stts",d);
d=C(0,d);d=C(0,d);d=C(16,d);d=R("stsc",d);d=C(0,d);d=C(0,d);d=C(20,d);d=R("stsz",d);d=C(0,d);d=C(0,d);d=C(0,d);d=C(16,d);d=R("stco",d);d=C(0,d);d=C(0,d);C(d-g,g);C(d-f,f);C(d-a,a);C(d-l,l)}C(d-e,e);c=ta-d;0<c&&(d=C(c,d),R("free",d));d=new ArrayBuffer(188*sa.length);e=new Uint8Array(d);c=a=0;for(h=sa.length;c<h;c++)for(f=sa[c],g=f.start;g<f.end;g++)e[a++]=W[g];return{buff:oa,dur:b,audCodec:q,vidCodec:u,firstDts:ja,audioSampleInfo:{sampleRate:H,buffer:d}}}()}catch(Ea){console.log(Ea+" in generating init segment.")}}}};
HlsInitGenerator.prototype={constructor:HlsInitGenerator};Primetime.dependencies.HlsTimelineConverter=function(){var a=0,b=!1,c=NaN,d=function(d){b||d.error||(a=d.data.liveEdge-(c+d.data.searchTime),b=!0)},e=function(c){b||c.error||(a=c.data.offset/1E3,b=!0)};return{setup:function(){this[MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED]=d;this[MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED]=e},calcSegmentAvailabilityRange:function(a){var b=a.period.start;return{start:b,end:b+a.period.duration}},
reset:function(){a=0;b=!1;c=NaN},isTimeSyncCompleted:function(){return b},getClientTimeOffset:function(){return a},getExpectedLiveEdge:function(){return c},setTimeSyncCompleted:function(a){b=a},setExpectedLiveEdge:function(a){c=a}}};Primetime.dependencies.HlsTimelineConverter.prototype={constructor:Primetime.dependencies.HlsTimelineConverter};Primetime.dependencies.HlsAbrController=function(){Primetime.dependencies.HlsAbrController.prototype.baseConstructor.call(this);var a={},b={},c={},d={},e,f=[],g={},h=function(a,c){var d=this.streamProcessorDict[a];if(void 0===d||null===d)return 0;b[c]=b[c]||{};if(!b[c].hasOwnProperty(a))if(this.abrRulesCollection&&this.abrRulesCollection.bufferLengthBasedRule){var e=n.call(this,a,c),f=d.getAllRepresentations();b[c][a]=this.abrRulesCollection.bufferLengthBasedRule.getInitialQuality(f,e);this.abrRulesCollection.bufferLengthBasedRule.reset();
d&&"function"===typeof d.bufferController.setInitialRequiredQuality&&d.bufferController.setInitialRequiredQuality(b[c][a])}else b[c][a]=0;return b[c][a]},l=function(a,b){c[b]=c[b]||{};c[b].hasOwnProperty(a)||(c[b][a]=0);return c[b][a]},n=function(b,c){a[c]=a[c]||{};a[c].hasOwnProperty(b)||(a[c][b]=0);return a[c][b]};this.onFragmentLoadProgress=function(a){if(0===MediaPlayer.dependencies.ScheduleController.LOADING_REQUEST_THRESHOLD){var b=this,c=a.data.request.mediaType,d=b.abrRulesCollection.getRules(MediaPlayer.rules.ABRRulesCollection.prototype.ABANDON_FRAGMENT_RULES),
h=this.streamProcessorDict[c];if(!(null==h||void 0==h||("audio"===c||"video"===c)&&a.data.request.mediaInfo&&a.data.request.mediaInfo.streamInfo&&a.data.request.mediaInfo.streamInfo.manifestInfo&&a.data.request.mediaInfo.streamInfo.manifestInfo.isDynamic)){var h=this.streamProcessorDict[c].getScheduleController(),l=this.streamProcessorDict[c].getStreamInfo().id,n=h.getFragmentModel(),h=function(a){function d(a){e=setTimeout(function(){b.setAbandonmentStateFor(a,MediaPlayer.dependencies.AbrController.ALLOW_LOAD)},
MediaPlayer.dependencies.AbrController.ABANDON_TIMEOUT)}if(a.confidence===MediaPlayer.rules.SwitchRequest.prototype.STRONG){var h=n.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.LOADING}),k=a.value,q=b.getQualityFor(c,b.streamController.getActiveStreamInfo());if(k<q){n.abortRequests();b.setAbandonmentStateFor(c,MediaPlayer.dependencies.AbrController.ABANDON_LOAD);d(c);g[c]=g[c]||[];g[c]=h;f[l]=f[l]||{};f[l][c]=!0;b.notify(Primetime.dependencies.AbrController.eventList.ENAME_PROCESS_QUALITY_CHANGE,
{mediaType:c,streamInfo:b.streamProcessorDict[c].getStreamInfo(),oldQuality:q,newQuality:k,confidence:a.confidence,completedCallback:void 0});h="audio";"audio"===c&&(h="video");f[l][h]=!0;var u=b.streamProcessorDict[h];if(u){var L=b.streamProcessorDict[h].getScheduleController(),x=L.getFragmentModel().getRequests({state:MediaPlayer.dependencies.FragmentModel.states.LOADING});L.getFragmentModel().abortRequests();b.setAbandonmentStateFor(h,MediaPlayer.dependencies.AbrController.ABANDON_LOAD);d(h);g[h]=
g[h]||[];g[h]=x;b.notify(Primetime.dependencies.AbrController.eventList.ENAME_PROCESS_QUALITY_CHANGE,{mediaType:h,streamInfo:u.getStreamInfo(),oldQuality:q,newQuality:k,confidence:a.confidence,completedCallback:void 0})}}}};void 0!==f&&void 0!==f[l]&&f[l][c]||b.rulesController.applyRules(d,this.streamProcessorDict[c],h,a,function(a,b){return b})}}};this.onQualityProcessed=function(a){var c=a.data.mediaType,d=a.data.error,e=a.data.completedCallback,l=this.streamProcessorDict[c],n=l.getStreamInfo().id,
r=a.data.newQuality,w=h.call(this,c,n);n==a.data.streamInfo.id&&(null!==d&&void 0!==d?(f[n]=f[n]||{},f[n][c]=!1):(b[n]=b[n]||{},b[n][c]=r,f[n]=f[n]||{},f[n][c]=!1,this.log("ABRController : type["+c+"] quality changed ["+w+"] >>> ["+r+"]","INFO"),this.notify(Primetime.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,{mediaType:a.data.mediaType,streamInfo:l.getStreamInfo(),oldQuality:w,newQuality:r}),void 0!=g[c]&&g[c].length&&(l.getScheduleController().replaceCanceledRequests(g[c]),g[c]=
[])),e&&e())};this.initialize=function(a,b){"text/vtt"!==a&&(this.streamProcessorDict[a]=b,this.processorCount++,d[a]=d[a]||{},d[a].state=MediaPlayer.dependencies.AbrController.ALLOW_LOAD)};this.resetForType=function(a,b){"text/vtt"!==a&&("undefined"!==typeof b&&null!==b?this.streamProcessorDict[a]===b&&(this.streamProcessorDict[a]=null,0<this.processorCount&&this.processorCount--):this.streamProcessorDict[a]&&(0<this.processorCount&&this.processorCount--,this.streamProcessorDict[a]=null))};this.setup=
function(){this[MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_PROGRESS]=this.onFragmentLoadProgress;this[Dash.dependencies.RepresentationController.eventList.ENAME_QUALITY_PROCESSED]=this.onQualityProcessed};this.getPlaybackQuality=function(a,b){var c=this,d=a.getType(),e=a.getStreamInfo().id,g,r,w,z,G=0;["audio","video","muxed"].forEach(function(a){(a=this.streamProcessorDict[a])&&a.getStreamInfo().id===e&&G++},this);var E={},I=function(l){var w=n.call(c,d,e);g=l.value;z=l.confidence;
0>g&&(g=0);g>w&&(g=w);l.value!==MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE&&(E[z]=Math.min(E[z],g));if(!--G)if(r=h.call(this,d,e),E[MediaPlayer.rules.SwitchRequest.prototype.WEAK]!==MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE&&(g=E[MediaPlayer.rules.SwitchRequest.prototype.WEAK]),E[MediaPlayer.rules.SwitchRequest.prototype.DEFAULT]!==MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE&&(g=E[MediaPlayer.rules.SwitchRequest.prototype.DEFAULT]),E[MediaPlayer.rules.SwitchRequest.prototype.STRONG]!==
MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE&&(g=E[MediaPlayer.rules.SwitchRequest.prototype.STRONG]),g===r&&void 0!==b)b();else if(f[e]=f[e]||{},f[e][d]=!0,c.notify(Primetime.dependencies.AbrController.eventList.ENAME_PROCESS_QUALITY_CHANGE,{mediaType:d,streamInfo:a.getStreamInfo(),oldQuality:r,newQuality:g,confidence:z,completedCallback:b}),N&&(l=c.streamProcessorDict[N]))f[e]=f[e]||{},f[e][N]=!0,c.notify(Primetime.dependencies.AbrController.eventList.ENAME_PROCESS_QUALITY_CHANGE,{mediaType:N,
streamInfo:l.getStreamInfo(),oldQuality:r,newQuality:g,confidence:z,completedCallback:b})};if(void 0!==c.streamProcessorDict.video&&"audio"===d)void 0!==b&&b();else if(E[MediaPlayer.rules.SwitchRequest.prototype.STRONG]=MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,E[MediaPlayer.rules.SwitchRequest.prototype.WEAK]=MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,E[MediaPlayer.rules.SwitchRequest.prototype.DEFAULT]=MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,g=h.call(this,d,e),z=l.call(this,
d,e),!c.autoSwitchBitrate||f[e]&&f[e][d])void 0!==b&&b();else{w=c.abrRulesCollection.getRules(MediaPlayer.rules.ABRRulesCollection.prototype.QUALITY_SWITCH_RULES);c.rulesController.applyRules(w,a,I.bind(c),g,function(a,b){return Math.min(a,b)});var N=null;"video"===d&&(N="audio");if(N){var L=c.streamProcessorDict[N];L&&c.rulesController.applyRules(w,L,I.bind(c),g,function(a,b){return Math.min(a,b)})}}};this.setPlaybackQuality=function(c,d,e){var f=d.id,g=h.call(this,c,f);if(null===e||isNaN(e)||0!==
e%1)throw Error("argument is not an integer");e!==g&&0<=e&&a[f].hasOwnProperty(c)&&e<=a[f][c]&&(f=d.id,b[e]=b[e]||{},b[e][f]=void 0,this.notify(Primetime.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,{mediaType:c,streamInfo:d,oldQuality:g,newQuality:e,confidence:MediaPlayer.rules.SwitchRequest.prototype.DEFAULT}),f="video","video"===c&&(f="audio"),void 0!==this.streamProcessorDict[c]&&this.notify(Primetime.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,{mediaType:f,streamInfo:d,
oldQuality:g,newQuality:e,confidence:MediaPlayer.rules.SwitchRequest.prototype.DEFAULT}))};this.setAbandonmentStateFor=function(a,b){d[a].state=b};this.getAbandonmentStateFor=function(a){return d[a].state};this.getQualityFor=function(a,b){return h.call(this,a,b.id)};this.getConfidenceFor=function(a,b){return l.call(this,a,b.id)};this.isPlayingAtTopQuality=function(a){var b=a.id,c=this.getQualityFor("audio",a),d=this.getQualityFor("video",a);a=this.getQualityFor("video",a);return c===n.call(this,"audio",
b)&&d===n.call(this,"video",b)||a===n.call(this,"muxed",b)};this.updateTopQualityIndex=function(c){var d=c.type,e=c.streamInfo.id;c=c.representationCount-1;if(n(d,e)===c)return c;a[e]=a[e]||{};a[e][d]=c;b[e]=b[e]||{};b[e].hasOwnProperty(d)&&b[e][d]>c&&(b[e][d]=c);return c};this.setMaxPlaybackQuality=function(b,c,d){a[c]=a[c]||{};a[c][b]=d};this.reset=function(){a={};b={};c={};d={};clearTimeout(e);e=null;f=[];Primetime.dependencies.DashAbrController.prototype.reset.call(this)};this.getTopQualityIndexFor=
n};Primetime.dependencies.HlsAbrController.prototype={constructor:Primetime.dependencies.HlsAbrController,log:void 0};Primetime.dependencies.HlsAbrController.prototype=new Primetime.dependencies.AbrController;Primetime.dependencies.HlsAbrController.prototype.baseConstructor=Primetime.dependencies.AbrController.prototype.constructor;Primetime.dependencies.HlsAbrController.prototype.constructor=Primetime.dependencies.HlsAbrController;Primetime.dependencies.HlsMetricsExtensions=function(){var a=function(a){if(null===a)return null;a=a.HttpList;var b,c=null;if(null===a||0>=a.length)return null;for(b=a.length-1;0<=b;){if(a[b].responsecode){c=a[b];break}--b}return c},b=function(a){return null===a?[]:a.HttpList?a.HttpList:[]},c=function(a){var b={};if(!a)return b;a=a.split("\r\n");for(var c=0,g=a.length;c<g;c++){var h=a[c],l=h.indexOf(": ");0<l&&(b[h.substring(0,l)]=h.substring(l+2))}return b};return{manifestModel:void 0,manifestExt:void 0,
getBandwidthForRepresentation:function(a,b){var c;c=this.manifestModel.getValue().Period_asArray[b];a:{if(null!==c&&void 0!==c){var g,h;g=c.representations;for(h=0;h<g.length;h+=1)if(c=g[h],a===c.index)break a}c=null}return null===c?null:c.bandwidth},getIndexForRepresentation:function(a,b){var c=this.manifestModel.getValue().Period_asArray[b];a:if(null===c||void 0===c)c=null;else{var g,h;g=c.representations;for(h=0;h<g.length;h+=1)if(c=g[h],a===c.index){c=h;break a}c=-1}return c},getMaxIndexForBufferType:function(a,
b){var c;c=this.manifestModel.getValue().Period_asArray[b];c&&a?(c=c.representations,c=c.length):c=-1;return c},getCurrentRepresentationSwitch:function(a){if(null===a)return null;a=a.RepSwitchList;return null===a||0>=a.length?null:a[a.length-1]},getCurrentBufferLevel:function(a){if(null===a)return null;a=a.BufferLevel;return null===a||0>=a.length?null:a[a.length-1]},getCurrentPlaybackRate:function(a){if(null===a)return null;a=a.PlayList;if(null===a||0>=a.length)return null;a=a[a.length-1].trace;return null===
a||0>=a.length?null:a[a.length-1].playbackspeed},getCurrentHttpRequest:a,getHttpRequests:b,getCurrentDroppedFrames:function(a){if(null===a)return null;a=a.DroppedFrames;return null===a||0>=a.length?null:a[a.length-1]},getCurrentSchedulingInfo:function(a){if(null===a)return null;a=a.SchedulingInfo;return null===a||0>=a.length?null:a[a.length-1]},getCurrentDVRInfo:function(a){if(null===a)return null;var b=a.DVRInfo,c,g=new MediaPlayer.vo.metrics.DVRInfo,h,l,n;if(null===b||0>=b.length)return null;c=
b.length-1;a=b[c];g.time=a.time;g.manifestInfo=a.manifestInfo;g.streamInfo=a.streamInfo;l=a.range.start;n=a.range.end;if(a.manifestInfo.isDynamic){if(b=this.manifestModel.getValue().Period_asArray)for(h=0;h<b.length;h++)if(!(0>=b[h].duration)){if(0===l||b[h].start<l)l=b[h].start;b[h].start+b[h].duration>n&&(n=b[h].start+b[h].duration)}a.manifestInfo.DVRWindowSize&&a.manifestInfo.DVRWindowSize>n-l&&(l-=a.manifestInfo.DVRWindowSize-(n-l))}else{for(h=0;h<=c;h++)b[h].range.start<l&&(l=b[h].range.start),
b[h].range.end>n&&(n=b[h].range.end);n-l<a.manifestInfo.duration&&(n+=a.manifestInfo.duration-(n-l))}g.range={start:l,end:n};return g},getCurrentManifestUpdate:function(a){if(null===a)return null;a=a.ManifestUpdate;return null===a||0>=a.length?null:a[a.length-1]},getLatestFragmentRequestHeaderValueByID:function(b,e){if(null===b)return null;var f=a(b);if(null===f||null===f.responseHeaders)return null;f=c(f.responseHeaders);return void 0===f[e]?null:f[e]},getLatestMPDRequestHeaderValueByID:function(a,
e){if(null===a)return null;var f=b(a),f=f[f.length-1],g;"MPD"===f.type&&(g=c(f.responseHeaders));return void 0===g[e]?null:g[e]}}};Primetime.dependencies.HlsMetricsExtensions.prototype={constructor:Primetime.dependencies.HlsMetricsExtensions};Primetime.dependencies.HlsTextController=function(){var a=new MediaPlayer.dependencies.TextController,b=[],c=function(){var a=this.streamProcessor.getFragmentModel();b.length&&(a.executeRequest(b[0]),b.splice(0,1))},d=function(a,b){a.data.chunk.isEncrypted=!1;a.data.chunk.bytes=b;this.onMediaLoaded.call(this,a)};return Primetime.helper.extend(a,{segmentDecryption:void 0,initialize:function(b,c,d,h){a.initialize.call(this,b,c,d,h)},onInitFragmentLoaded:function(a){var d,g;if(a.data.fragmentModel===
this.streamProcessor.getFragmentModel()&&null!==a.data.bytes){d=new Uint8Array(a.data.chunk.bytes);d=UTF8.decode(new Uint16Array(d));g=this.system.getObject("hlsM3u8Info");var h=a.data.chunk.baseUrl,l=h.lastIndexOf("/"),h=h.substring(0,l);d=g.parse(d,h);d=d.segmentRuns[0];for(h=0;h<d.length;h++)g=new MediaPlayer.vo.FragmentRequest,g.mediaType="text",g.mediaInfo=a.data.chunk.mediaInfo,g.type="Text Segment",g.url=d[h].line,g.isEncrypted=d[h].isEncrypted,g.encryptionMethod=d[h].encryptionMethod,g.keyUri=
d[h].keyUri,g.IV=d[h].IV,b.push(g);this.getBuffer()&&c.call(this)}},createBuffer:function(b){return a.createBuffer.call(this,b)},enableBuffering:function(){a.enableBuffering.call(this);c.call(this)},onMediaLoaded:function(a){a.data.fragmentModel===this.streamProcessor.getFragmentModel()&&(a.data.chunk.isEncrypted?this.segmentDecryption.decrypt(a.data.chunk.bytes,a.data.chunk.baseUrl,a.data.chunk.keyUri,a.data.chunk.IV,d.bind(this,a)):(void 0!==a.data.chunk.bytes&&null!==a.data.chunk.bytes&&this.sourceBufferExt.append(this.getBuffer(),
a.data.chunk),c.call(this)))},onMediaInfoChanged:function(a){this.getBuffer()&&this.getBuffer().mediaInfoChanged(a)},setup:function(){a.setup.call(this);this[Primetime.dependencies.StreamProcessor.eventList.ENAME_MEDIAINFO_CHANGED]=this.onMediaInfoChanged;this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_INIT_FRAGMENT_LOADED]=this.onInitFragmentLoaded;this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADED]=this.onMediaLoaded},reset:function(b){b||this.streamProcessor&&
this.getBuffer()&&this.streamProcessor.unsubscribe(Primetime.dependencies.StreamProcessor.eventList.ENAME_MEDIAINFO_CHANGED,this.getBuffer());a.reset.call(this)}})};Primetime.dependencies.HlsTimeline=function(){Primetime.dependencies.HlsTimeline.prototype.baseConstructor.call(this);this.updateRepStartTimes=function(a){for(var b=0;b<a.representations.length;b++);for(b=0;b<a.trickPlayRepresentations.length;b++);};this.updatePeriodStartTimes=function(a){if("undefined"!==typeof a&&null!==a)for(var b=null,c=null,d=0;d<a.Period_asArray.length;d++)b=a.Period_asArray[d],b.hasOwnProperty("start")||0!==d||(b.start=0),null!==c&&(b.start=c.start+c.duration),this.updateRepStartTimes(b),
c=b};this.checkNewRepresentations=function(a){};this.getDuration=function(a){for(var b=0,c=0,d=a.length;c<d;c+=1)b+=a[c].duration;return b};this.addPeriods=function(a){var b=a.updatedRepIndex,c=a.representations[b],d=c.numOfPeriods,e=a.Period_asArray=[];c.isFirstLoad=!0;for(var f=0;f<d;f++){var g={},h=f;g.id=h;g.index=h;g.renditions=a.renditions;g.representations=[];g.trickPlayRepresentations=[];g.manifest=a;h<d-1&&(g.stopUpdates=!0);for(var l=0;l<a.representations.length;l++)g.representations[l]=
this.cloneRepresentation(a.representations[l]),g.representations[l].baseUrl=a.baseUrl,c.isMuxed?(g.representations[l].muxed.currentTsTime=-1,g.representations[l].muxed.lastSeqNum=-1):(void 0!==c.audio&&(g.representations[l].audio.currentTsTime=-1,g.representations[l].audio.lastSeqNum=-1),void 0!==c.video&&(g.representations[l].video.currentTsTime=-1,g.representations[l].video.lastSeqNum=-1));g.representations[b].loaded=!0;g.representations[b].audCodec=g.representations[b].audCodec;if(g.representations[b].audCodec)for(l=
0;l<a.representations.length;l++)g.representations[l].audCodec=g.representations[b].audCodec;g.representations[b].vidCodec=g.representations[b].vidCodec;for(l=0;l<a.trickPlayRepresentations.length;l++)g.trickPlayRepresentations[l]=this.cloneRepresentation(a.trickPlayRepresentations[l]),g.trickPlayRepresentations[l].baseUrl=a.baseUrl,g.trickPlayRepresentations[l].isMuxed&&(g.trickPlayRepresentations[l].audioSampleInfo=a.audioSampleInfo[h]),void 0!==g.representations[b].audio&&(g.trickPlayRepresentations[l].audCodec=
g.representations[b].audCodec);var n;if(c.isMuxed){n=c.muxed.m3u8Info;for(var k=0,l=0;l<n.segmentRuns.length;l++)k+=this.getDuration(n.segmentRuns[l]);g.duration=k;g.representations[b].muxed.duration=k;g.representations[b].muxed.start=0;this.isDynamic(a)&&(g.localStartTime=120,g.start=120,g.representations[b].muxed.start=120,g.representations[b].muxed.MSETimeOffset=120)}else{if(void 0!==c.audio){n=c.audio.m3u8Info;for(l=k=0;l<n.segmentRuns.length;l++)k+=this.getDuration(n.segmentRuns[l]);g.duration=
k;g.representations[b].audio.duration=k;g.representations[b].audio.start=0;this.isDynamic(a)&&(g.localStartTime=120,g.start=120,g.representations[b].audio.start=120,g.representations[b].audio.MSETimeOffset=120)}if(void 0!==c.video){n=c.video.m3u8Info;for(l=k=0;l<n.segmentRuns.length;l++)k+=this.getDuration(n.segmentRuns[l]);g.duration=k;g.representations[b].video.duration=k;g.representations[b].video.start=0;this.isDynamic(a)&&(g.representations[b].video.start=120,g.representations[b].video.MSETimeOffset=
120,g.localStartTime=g.representations[b].video.start,g.start=g.representations[b].video.start)}}n&&n.segmentRuns[h]&&0<n.segmentRuns[h].length&&n.segmentRuns[h][0].metadata&&0<n.segmentRuns[h][0].metadata.length&&(g.isInlineAd=!0);this.isDynamic(a)?g.localStartTime=g.start:g.localStartTime=0;h=g;for(l=0;l<h.representations.length;l++)h.representations[l].period=h;for(l=0;l<h.trickPlayRepresentations.length;l++)h.trickPlayRepresentations[l].period=h;e.push(g)}};this.cloneRepresentation=function(a){if(null===
a||"object"!==typeof a)return a;var b=a.constructor()||{},c;for(c in a)if("period"!==c&&"representation"!==c)if("segmentRuns"===c){b.segmentRuns=[];for(var d=a[c],e=0;d&&e<d.length;e++){b.segmentRuns.push([]);for(var f=d[e],g=0;g<f.length;g++)b.segmentRuns[e].push(f[g])}}else if("segments"===c)for(b.segments=[],f=a[c],e=0;f&&e<f.length;e++)b.segments[e]=f[e];else if(a.hasOwnProperty(c))if("[object Array]"===Object.prototype.toString.call(a[c])){d=[];e=0;for(f=a[c].length;e<f;e++)d[e]=this.cloneRepresentation(a[c][e]);
b[c]=d}else b[c]=this.cloneRepresentation(a[c]);return b};this.clonePeriod=function(a){var b={},c;for(c in a)if("representations"===c){b.representations=[];for(var d=0;d<a.representations.length;d++)b.representations[d]=this.cloneRepresentation(a.representations[d]),b.representations[d].muxed=a.representations[d].muxed,b.representations[d].audio=a.representations[d].audio,b.representations[d].video=a.representations[d].video}else if("renditions"===c)for(b.renditions=[],d=0;d<a.renditions.length;d++)b.renditions[d]=
this.cloneRepresentation(a.renditions[d]);else a.hasOwnProperty(c)&&(b[c]=a[c]);return b};this.splitPeriod=function(a,b){var c=this.clonePeriod(a);c.totalSegmentDuration=c.duration;c.duration=c.localStartTime+c.duration-b;c.localStartTime=b;a.duration=b-a.localStartTime;c.start=a.start+a.duration;c.replaceDuration=a.replaceDuration;a.replaceDuration=0;c.dummyDuration=a.dummyDuration;a.dummyDuration=null;a.stopUpdates=!0;a.isLast=!1;for(var d=0;d<c.representations.length;d++)c.representations[d].period=
c;return c};this.calculateDuration=function(a){a=a.muxed.m3u8Info.segmentRuns[0];for(var b=0,c=0,d=a.length;c<d;c+=1)b+=a[c].duration;return b};this.setup=function(){this[Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED]=this.onDataUpdateCompleted};this.isHLS=function(){return!0};this.update=function(a){this.updateManifest(a)};this.onDataUpdateCompleted=function(a){if(!a.error){var b=a.data.currentRepresentation,c=a.data.currentRepresentation.index;a=a.data.type;var d=
this.timelineView.Period_asArray[b.period.index],e=b.isTrickPlayRepresentation?d.trickPlayRepresentations:d.representations;null!==d&&void 0!==d&&(b.loaded=!0,e[c].loaded=!0,d.duration=b.period.duration);this.isDynamic(this.timelineView)&&isNaN(this.timelineConverter.getExpectedLiveEdge())&&"text"!==a&&(c=b[a].segments,this.timelineConverter.setExpectedLiveEdge(b[a].start+c[c.length-1].startTime))}};this.handleDvrWindowSlide=function(a,b,c,d,e){if("text"!==d&&this.isDynamic(this.timelineView)){a=
c.period.manifest.Period_asArray;a=c[d].totalDuration;(e="muxed"===d?void 0:"video"===d?"audio":"video")&&c[e]?c[d].start<=c[e].start?(c[d].start+=b,c[d].start>=c[e].start?(b=c[d].start-c[e].start,e=c[d].start):(b=0,e=c[e].start)):(c[d].start+=b,e=c[d].start):(c[d].start+=b,e=c[d].start);var f=a,g=!1,h=!1;this.log("DVR: slide duration: "+b,"INFO");a=c.period.manifest.Period_asArray;for(var l=0;l<a.length;l++){var n=a[l];if(e>n.start+n.duration&&n.stopUpdates)b-=n.duration,a.splice(l,1),l--;else if(n.isAd)g||
h||(h=!0,n.start+=b,n.localStartTime+=b,n.duration-=b),f-=n.duration;else{g=!0;if(e>=n.start&&e<=n.start+n.duration){var k=e-n.start;n.start+=k;n.localStartTime+=k;n.stopUpdates&&(n.duration-=k)}l+1===a.length?(n.replaceDuration&&!isNaN(n.replaceDuration)&&0<=n.replaceDuration&&(k=Math.min(f,n.replaceDuration),f-=k,n.replaceDuration-=k),n.duration=Math.max(f,0),!0===c.period.manifest.streamEnded&&(n.stopUpdates=!0)):f-=n.duration;c[d].slideDuration=0}}b=c[d].start;c=c.index;for(e=0;e<a.length;e++)n.isAd||
(n.representations[c][d].start=b);for(e=0;e<a.length;e++)a[e].index=e,this.addIndexes(a[e])}}};Primetime.dependencies.HlsTimeline.prototype={constructor:Primetime.dependencies.HlsTimeline,log:void 0};Primetime.dependencies.HlsTimeline.prototype=new Primetime.dependencies.Timeline;Primetime.dependencies.HlsTimeline.prototype.baseConstructor=Primetime.dependencies.Timeline.prototype.constructor;Primetime.dependencies.HlsTimeline.prototype.constructor=Primetime.dependencies.HlsTimeline;(function(){var a=function(a){var b=null;-1!==a.indexOf("/")&&(-1!==a.indexOf("?")&&(a=a.substring(0,a.indexOf("?"))),b=a.substring(0,a.lastIndexOf("/")+1));return b},b=function(a){var b=a.indexOf("0x"),b=-1===b?a.indexOf("0X"):b;0===b&&(a=a.slice(2));a=a.match(/.{1,2}/g);a.forEach(function(a,b,c){c[b]=parseInt("0x"+a)});return a},c=function(c,e,f,g,h,l){var n=this,k=n.system.getObject("mediaPlayer");e=a.call(n,e);var m=k.getCORSConfig(),k=!1;m&&m.enableEncryptionRequest&&(k=!0);m=n.system.getObject("urlUtils");
c={onComplete:function(a,c){var d=this,e;c&&(e=new Uint8Array(c));var f=b.call(d,g),k=new Uint8Array(f);if(k&&e)if("SAMPLE-AES"===h)l(a,e);else if(d._useASMCrypt)f=asmCrypto.AES_CBC.decrypt(a,e,0,k),l(f);else{var m={name:"AES-CBC",iv:k},f=["decrypt"],n,E=window.crypto||window.msCrypto;Primetime.BrowserExtensions.isIE()?(f=E.subtle.importKey("raw",e,m,!1,f),f.onerror=function(b){if(DOMException.NOT_SUPPORTED_ERR==b.code)d._useASMCrypt=!0,b=asmCrypto.AES_CBC.decrypt(a,e,0,k),l(b);else throw b;},f.oncomplete=
function(b){b=E.subtle.decrypt(m,b.target.result,a);b.onerror=function(){d.log("decryptOp.onerror event handler fired.")};b.oncomplete=function(a){a=new Uint8Array(a.target.result);l(a)}}):E.subtle.importKey("raw",e,m,!1,f).then(function(b){n=b;E.subtle.decrypt(m,n,a).then(function(a){a=new Uint8Array(a);l(a)})}).catch(function(b){if(DOMException.NOT_SUPPORTED_ERR==b.code)d._useASMCrypt=!0,b=asmCrypto.AES_CBC.decrypt(a,e,0,k),l(b);else throw b;})}}.bind(n,c),onError:function(a,b,c,d,e){"contentMismatch"===
e?n.errHandler.contentTypeError(a,"segment"):(n.errHandler.downloadError(b,c,d),n.log(a))}};m.fetchUrl({url:f,baseUrl:e},"arraybuffer",k,null,c)};Primetime.dependencies.HlsDecryption=function(){};Primetime.dependencies.HlsDecryption.prototype={constructor:Primetime.dependencies.HlsDecryption,system:void 0,log:void 0,errHandler:void 0,decrypt:function(a,b,f,g,h,l){c.call(this,a,b,f,g,h,l)}}})();(function(){Primetime.flash.MediaPlayerImplDelegate=function(a,b,c){this._nativePlayer=b;this._delegate=a;this._viewDelegate=null;this._resourceType=c;this._drmManager=null};Primetime.flash.MediaPlayerImplDelegate.prototype={constructor:Primetime.flash.MediaPlayerImplDelegate,setNativePlayer:function(a){this._nativePlayer=a;this.setDRMManager(this._drmManager)},getNativePlayer:function(){return this._nativePlayer},getTextFormatDelegate:function(a){if(this._nativePlayer){if("undefined"===typeof a||
null===a)return;a.setupDelegate();return a.getDelegate()}return null},getMediaResourceDelegate:function(a){return this._nativePlayer?(a.setupDelegate(),a.getDelegate()):null},getConfigDelegate:function(a){if("undefined"!==typeof a&&null!==a){var b=a.getDelegate();!b&&this._nativePlayer&&(a.setupDelegate(),b=a.getDelegate());if(b)return b}},getViewDelegate:function(a){if("undefined"!==typeof a&&null!==a){for(var b=a._div.getElementsByTagName("video"),c=0;c<b.length;c++)b[c].style.visibility="hidden";
b=a.getDelegate();b||(this._viewDelegate||(this._viewDelegate=new Primetime.flash.MediaPlayerViewDelegate),a.setDelegate(this._viewDelegate),b=this._viewDelegate);return b.getDelegate()}},getABRControlParametersDelegate:function(a){if(this._nativePlayer){if("undefined"===typeof a||null===a)return;a.setupDelegate();return a.getDelegate()}return null},getBufferControlParametersDelegate:function(a){if(this._nativePlayer){if("undefined"===typeof a||null===a)return;a.setupDelegate();return a.getDelegate()}return null},
prepareToPlay:function(a){if(this._nativePlayer)return this._nativePlayer.prepareToPlay(a)},dispatchEvent:function(a){this._nativePlayer&&(a.setupDelegate(),this._nativePlayer.dispatchEvent(a.getDelegate()))},prepareBuffer:function(){this._nativePlayer&&this._nativePlayer.prepareBuffer()},registerCurrentItemInBackground:function(a){this._nativePlayer&&(a.setupDelegate(),this._nativePlayer.registerCurrentItemInBackground(a.getDelegate()))},unregisterCurrentBackgroundItem:function(){this._nativePlayer&&
this._nativePlayer.unregisterCurrentBackgroundItem()},play:function(){return this._nativePlayer?this._nativePlayer.play():AdobePSDK.PSDKErrorCode.kECIllegalState},pause:function(){return this._nativePlayer?this._nativePlayer.pause():AdobePSDK.PSDKErrorCode.kECIllegalState},seek:function(a){if(this._nativePlayer){var b=this.getStatus();if(b===AdobePSDK.MediaPlayerStatus.PLAYING||b===AdobePSDK.MediaPlayerStatus.PREPARED||b===AdobePSDK.MediaPlayerStatus.PAUSED||b===AdobePSDK.MediaPlayerStatus.COMPLETE)return this._nativePlayer.seek(a)}return AdobePSDK.PSDKErrorCode.kECIllegalState},
seekToLocal:function(a){return this._nativePlayer?this._nativePlayer.seekToLocal(a):AdobePSDK.PSDKErrorCode.kECIllegalState},reset:function(){return this._nativePlayer?this._nativePlayer.reset():AdobePSDK.PSDKErrorCode.kECSuccess},release:function(){return this._nativePlayer?this._nativePlayer.release():AdobePSDK.PSDKErrorCode.kECSuccess},suspend:function(){if(this._nativePlayer)return this._nativePlayer.suspend()},restore:function(){if(this._nativePlayer)return this._nativePlayer.restore()},replaceCurrentResource:function(a,
b){if(this._nativePlayer)return this._nativePlayer.replaceCurrentResource(a,b)},replaceCurrentItem:function(){if(this._nativePlayer)return this._nativePlayer.replaceCurrentItem()},getCurrentTime:function(){return this._nativePlayer?this._nativePlayer.currentTime:AdobePSDK.PSDKErrorCode.kECIllegalState},getLocalTime:function(){return this._nativePlayer?this._nativePlayer.localTime:AdobePSDK.PSDKErrorCode.kECIllegalState},getPlaybackRange:function(){if(this._nativePlayer){var a=this._nativePlayer.playbackRange;
if(a)return new AdobePSDK.TimeRange(a.begin,a.duration)}return AdobePSDK.PSDKErrorCode.kECIllegalState},getSeekableRange:function(){if(this._nativePlayer){var a=this._nativePlayer.seekableRange;if(a)return new AdobePSDK.TimeRange(a.begin,a.duration)}return AdobePSDK.PSDKErrorCode.kECIllegalState},getBufferedRange:function(){return this._nativePlayer?this._nativePlayer.bufferedRange:AdobePSDK.PSDKErrorCode.kECIllegalState},getPlaybackMetrics:function(){return this._nativePlayer?this._nativePlayer.playbackMetrics:
AdobePSDK.PSDKErrorCode.kECIllegalState},getTimeline:function(){return this._nativePlayer?this._nativePlayer.timeline:AdobePSDK.PSDKErrorCode.kECIllegalState},getCurrentItem:function(){return this._nativePlayer?this._nativePlayer.currentItem:AdobePSDK.PSDKErrorCode.kECIllegalState},getStatus:function(){return this._nativePlayer?this._nativePlayer.status:this._delegate._status},setDRMManager:function(a){this._drmManager=a;this._nativePlayer&&this._drmManager&&(this._nativePlayer.drmManager&&this._nativePlayer.drmManager.delegate?
this._drmManager._setNativeDRMManager(this._nativePlayer.drmManager.delegate):this._drmManager._setNativeDRMManager(this._nativePlayer.drmManager))},getDRMManager:function(){this._drmManager||!this._nativePlayer||this._drmManager||(this._drmManager=new AdobePSDK.DRMManager(this._delegate,this._nativePlayer.drmManager));return this._drmManager},getView:function(){},setMediaPlayerView:function(a){if(this._nativePlayer)return this._nativePlayer.view=a},getVolume:function(){return this._nativePlayer?
this._nativePlayer.volume:this._delegate._volume},setVolume:function(a){this._nativePlayer&&(this._nativePlayer.volume=a)},getRate:function(){return this._nativePlayer?this._nativePlayer.rate:AdobePSDK.PSDKErrorCode.kECIllegalState},setRate:function(a){return this._nativePlayer?this._nativePlayer.rate=a:AdobePSDK.PSDKErrorCode.kECIllegalState},getContext:function(){return this._nativePlayer?this._nativePlayer.context:AdobePSDK.PSDKErrorCode.kECIllegalState},setContext:function(a){return this._nativePlayer?
(a.setupDelegate(),this._nativePlayer.context=a.getDelegate()):AdobePSDK.PSDKErrorCode.kECIllegalState},getBufferControlParameters:function(){return this._delegate._bufferControlParameters},setBufferControlParameters:function(a){if(this._nativePlayer)try{this._nativePlayer.bufferControlParameters=a}catch(b){return AdobePSDK.PSDKErrorCode.kECInvalidArgument}return AdobePSDK.PSDKErrorCode.kECSuccess},getABRControlParameters:function(){return this._delegate._abrControlParameters},setABRControlParameters:function(a){if(this._nativePlayer)try{this._nativePlayer.abrControlParameters=
a}catch(b){return AdobePSDK.PSDKErrorCode.kECInvalidArgument}return AdobePSDK.PSDKErrorCode.kECSuccess},getCCVisibility:function(){return this._nativePlayer?this._nativePlayer.ccVisibility:this.getStatus()!==this.PLAYER_STATUS_RELEASED&&this.getStatus()!==this.PLAYER_STATUS_ERROR?this._delegate._ccvisibility:AdobePSDK.PSDKErrorCode.kECIllegalState},setCCVisibility:function(a){this._nativePlayer&&(this._nativePlayer.ccVisibility=a)},getPreBuffering:function(){return!1},setPreBuffering:function(a){},
getQualitySwitchBasedOnPDT:function(){return!1},setQualitySwitchBasedOnPDT:function(a){},getCCStyle:function(){return this._nativePlayer?this._nativePlayer.ccStyle:this.getStatus()!==this.PLAYER_STATUS_RELEASED&&this.getStatus()!==this.PLAYER_STATUS_ERROR?this._delegate._textFormat:AdobePSDK.PSDKErrorCode.kECIllegalState},setCCStyle:function(a){if(this._nativePlayer)return this._nativePlayer.ccStyle=a},getCurrentTimeUpdateInterval:function(){if(this._nativePlayer)return this._nativePlayer.currentTimeUpdateInterval},
setCurrentTimeUpdateInterval:function(a){if(this._nativePlayer)return this._nativePlayer.currentTimeUpdateInterval=a},getNotificationHistory:function(){if(this._nativePlayer)return this._nativePlayer.getNotificationHistory()},addEventListener:function(a,b){if(this._nativePlayer)return this._nativePlayer.addEventListener(a,b)},removeEventListener:function(a,b){if(this._nativePlayer)return this._nativePlayer.removeEventListener(a,b)},notifyClick:function(){if(this._nativePlayer)return this._nativePlayer.notifyClick()},
getResourceType:function(){return this._resourceType},getEventDispatcher:function(){if(this._nativePlayer)return this._nativePlayer.eventDispatcher}}})();(function(){Primetime.flash.MediaPlayerViewDelegate=function(){var a=this,b=null,c=null,d=null,e=Primetime.bindings.flash.swfId,f=function(){a.setPos(b.offsetLeft,b.offsetTop);a.setSize(b.offsetWidth,b.offsetHeight)};this._delegate=null;this._useDefaultResizeHandler=!0;this.useDefaultResizeHandler=function(a){(this._useDefaultResizeHandler=a)?Primetime.DOMHelper.addResizeHandler(f):Primetime.DOMHelper.removeResizeHandler(f)};this.reset=function(){Primetime.DOMHelper.removeResizeHandler(f)};this.setTarget=
function(a,h){var l=document.getElementById(e);b=a;d=c=h;if(!l){l=document.getElementById("psdk-swf-div");l||(l=document.createElement("DIV"),d?d.appendChild(l):b.appendChild(l),l.id="psdk-swf-div");l.style.position="absolute";l.style.left="0px";l.style.top="0px";l.style.zIndex=100;var l={},n={},k={},m=Primetime.defaults.getSWFPath(),p=m+Primetime.bindings.flash.swfId+".swf",u=Primetime.defaults.getAuthorizationTokenPath(),m=m+"playerProductInstall.swf",q=Primetime.defaults.getAuthorizationTokenFilename(),
t="100%";l.token_url=u+q;l.token_type=Primetime.defaults.getAuthorizationTokenType();n.quality="high";n.bgcolor="#000000";n.allowscriptaccess="always";n.allowfullscreen="true";n.wmode="opaque";u=!window.ActiveXObject&&"ActiveXObject"in window;q=17==swfobject.getFlashPlayerVersion().major;u&&q&&(n.wmode="direct",t="85%");Primetime.BrowserExtensions.isChrome()&&(n.wmode="direct");k.id=e;k.name=e;k.style="width: 100%; height: 100%; position: absolute; left: 0px; top: 0px;";swfobject.embedSWF(p,"psdk-swf-div",
"100%",t,"17",m,l,n,k)}Primetime.DOMHelper.addFullscreenChangeHandler(f);this.hideBackgroundImage();this.ensureDelegate()};this.hideNativeView=function(){var a=document.getElementById(e);a&&(a.style.visibility="hidden")};this.showNativeView=function(){var a=document.getElementById(e);a&&(a.style.visibility="visible")};this.hideBackgroundImage=function(){b.classList.remove("background-style");b.style.background="url()";b.style.backgroundColor="transparent"};this.makeFullScreen=function(){c?Primetime.DOMHelper.makeFullscreen(c):
Primetime.DOMHelper.makeFullscreen(b)};return this};Primetime.flash.MediaPlayerViewDelegate.prototype={constructor:Primetime.flash.MediaPlayerViewDelegate,attachVideoControls:function(){},removeVideoControls:function(){},exitFullScreen:function(){Primetime.DOMHelper.exitFullscreen()},isFullScreen:function(){return Primetime.DOMHelper.isFullscreen()},getX:function(){if(this._delegate)return this._delegate.x},getY:function(){if(this._delegate)return this._delegate.y},getHeight:function(){if(this._delegate)return this._delegate.height},
getWidth:function(){if(this._delegate)return this._delegate.width},getDepth:function(){if(this._delegate)return this._delegate.getDepth()},setSize:function(a,b){if(this._delegate){var c=window.devicePixelRatio;Primetime.BrowserExtensions.isFirefox()&&Primetime.BrowserExtensions.isWindows()&&c&&(a*=c,b*=c);this._delegate.setSize(a,b)}},setPos:function(a,b){},setDepth:function(a){this._delegate&&this._delegate.setDepth(a)},getDelegate:function(){return this._delegate},ensureDelegate:function(){!this._delegate&&
Primetime.bindings.flash.isASInitialized()&&(this._delegate=new AdobePSDKEI.MediaPlayerView)}}})();(function(){Primetime.flash.MediaPlayerItemConfigDelegate=function(a){this.itemConfig=a;this.eiDelegate=new AdobePSDKEI.MediaPlayerItemConfig};Primetime.flash.MediaPlayerItemConfigDelegate.prototype={constructor:Primetime.flash.MediaPlayerItemConfigDelegate,eiDelegate:null,getDelegate:function(){return this.eiDelegate},getAdvertisingMetadata:function(){if(this.getDelegate())return this.getDelegate().advertisingMetadata},setAdvertisingMetadata:function(a){(a=Primetime.bindings.flash.createMetadataDelegate(a))&&
this.getDelegate()&&(a.getDelegate()?this.getDelegate().advertisingMetadata=a.getDelegate():this.getDelegate().advertisingMetadata=a)},getAdvertisingFactory:function(){if(this.getDelegate())return this.getDelegate().advertisingFactory},setAdvertisingFactory:function(a){Primetime.bindings.flash.createAdFactoryDelegate(a)&&this.getDelegate()&&(this.getDelegate().advertisingFactory=a)},getTimedMetadataFilter:function(){if(this.getDelegate()&&this.getDelegate().getTimedMetadataFilter)return this.getDelegate().getTimedMetadataFilter()},
setTimedMetadataFilter:function(a){this.getDelegate()&&this.getDelegate().setTimedMetadataFilter&&this.getDelegate().setTimedMetadataFilter(a)},getMediaResourceFilter:function(){if(this.getDelegate()&&this.getDelegate().getMediaResourceFilter)return this.getDelegate().getMediaResourceFilter()},setMediaResourceFilter:function(a){this.getDelegate()&&this.getDelegate().setMediaResourceFilter&&this.getDelegate().setMediaResourceFilter(a)},getAdSignalingMode:function(){if(this.getDelegate())return this.getDelegate().adSignalingMode},
setAdSignalingMode:function(a){this.getDelegate()&&(this.getDelegate().adSignalingMode=a)},getCustomRangeMetadata:function(){if(this.getDelegate())return this.getDelegate().customRangeMetadata},setCustomRangeMetadata:function(a){if(this.getDelegate()){var b;a&&(a.setupDelegate(),b=a.getDelegate());this.getDelegate().customRangeMetadata=b}},getNetworkConfiguration:function(){if(this.getDelegate())return this.getDelegate().networkConfiguration},setNetworkConfiguration:function(a){(a=Primetime.bindings.flash.createNetworkConfigurationDelegate(a))&&
this.getDelegate()&&(this.getDelegate().networkConfiguration=a)},getUseHardwareDecoder:function(){if(this.getDelegate())return this.getDelegate().useHardwareDecoder},setUseHardwareDecoder:function(a){if(this.getDelegate())return this.getDelegate().useHardwareDecoder=a},getAdTags:function(){if(this.getDelegate())return this.getDelegate().adTags},setAdTags:function(a){if(this.getDelegate())return this.getDelegate().adTags=a},getSubscribeTags:function(){if(this.getDelegate())return this.getDelegate().subscribeTags},
setSubscribeTags:function(a){if(this.getDelegate())return this.getDelegate().subscribeTags=a}}})();(function(){Primetime.flash.AuditudeSettingsDelegate=function(){this.eiDelegate=new AdobePSDKEI.AuditudeSettings};Primetime.flash.AuditudeSettingsDelegate.prototype={constructor:Primetime.flash.AuditudeSettingsDelegate,eiDelegate:null,getDelegate:function(){return this.eiDelegate},getZoneId:function(){if(this.getDelegate())return this.getDelegate().zoneId},setZoneId:function(a){this.getDelegate()&&(this.getDelegate().zoneId=a)},getMediaId:function(){if(this.getDelegate())return this.getDelegate().mediaId},
setMediaId:function(a){this.getDelegate()&&(this.getDelegate().mediaId=a)},getDefaultMediaId:function(){if(this.getDelegate())return this.getDelegate().defaultMediaId},setDefaultMediaId:function(a){this.getDelegate()&&(this.getDelegate().defaultMediaId=a)},getDomain:function(){if(this.getDelegate())return this.getDelegate().domain},setDomain:function(a){this.getDelegate()&&(this.getDelegate().domain=a)},getTargetingInfo:function(){if(this.getDelegate())return this.getDelegate().targetingInfo},setTargetingInfo:function(a){(a=
Primetime.bindings.flash.createMetadataDelegate(a))&&this.getDelegate()&&(this.getDelegate().targetingInfo=a)},getCustomParameters:function(){if(this.getDelegate())return this.getDelegate().customParameters},setCustomParameters:function(a){(a=Primetime.bindings.flash.createMetadataDelegate(a))&&this.getDelegate()&&(this.getDelegate().customParameters=a)},getCreativeRepackagingEnabled:function(){if(this.getDelegate())return this.getDelegate().creativeRepackagingEnabled},setCreativeRepackagingEnabled:function(a){this.getDelegate()&&
(this.getDelegate().creativeRepackagingEnabled=a)},getCreativeRepackagingFormat:function(){if(this.getDelegate())return this.getDelegate().creativeRepackagingFormat},setCreativeRepackagingFormat:function(a){this.getDelegate()&&(this.getDelegate().creativeRepackagingFormat=a)},getValidMimeTypes:function(){if(this.getDelegate())return this.getDelegate().validMimeTypes},setValidMimeTypes:function(a){this.getDelegate()&&(this.getDelegate().validMimeTypes=a)},getCrsZoneId:function(){if(this.getDelegate())return this.getDelegate().getCrsZoneId()},
setCrsZoneId:function(a){this.getDelegate()&&this.getDelegate().setCrsZoneId(a)},getShowStaticBanners:function(){if(this.getDelegate())return this.getDelegate().showStaticBanners},setShowStaticBanners:function(a){this.getDelegate()&&(this.getDelegate().showStaticBanners=a)}}})();var EI=EI||{};(function(){EI.Mapper={};EI.Mapper.getMetadata=function(a){return(a=Primetime.bindings.flash.createMetadataDelegate(a))&&a.getDelegate&&a.getDelegate()?a.getDelegate():a}})();(function(){Primetime.bindings.vpaid={createMediaPlayer:function(){return new Primetime.vpaid.MediaPlayerImpl}}})();(function(){Primetime.CustomAdPlaybackHandler=function(){this._vpaidView=this._item=this._context=this._client=null;this._totalTime=0;return this};Primetime.CustomAdPlaybackHandler.prototype={constructor:Primetime.CustomAdPlaybackHandler,configure:function(a,b,c){this._item=a;this._client=b;this._context=c;this._totalTime=0;this._vpaidView=new Primetime.LinearVPAIDView(this,c)},getCustomAdView:function(){return this._vpaidView?this._vpaidView.getCustomAdView():null},setCustomAdTimeout:function(a){if(this._vpaidView)return this._vpaidView.setCustomAdTimeout(a)},
initAd:function(a,b){this._vpaidView&&this._client&&this._client._mainMediaPlayer&&this._client._mainMediaPlayer._delegate&&this._client._mainMediaPlayer._delegate._view&&this._client._mainMediaPlayer._delegate._view._vpaidVideo&&this._vpaidView.playCustomAd(a,b,this._client._mainMediaPlayer._delegate._view._vpaidVideo)},startAd:function(){},stopAd:function(){this._vpaidView&&this._vpaidView.stopCustomAd()},pauseAd:function(){this._vpaidView&&this._vpaidView.pauseAd()},resumeAd:function(){this._vpaidView&&
this._vpaidView.resumeAd()},dispose:function(){},onAdPaused:function(){if(this._client)this._client.onAdPaused()},onAdResumed:function(){if(this._client)this._client.onAdResumed()},onAdFinished:function(){console.log("CustomAdPlaybackHandler::Inside onAdFinished");if(this._client){if(0<this._totalTime)this._client.onAdProgress(this._totalTime,this._totalTime);this._client.onAdEnd()}},onAdVideoFirstQuartile:function(){console.log("CustomAdPlaybackHandler::Inside onAdVideoFirstQuartile");if(this._client&&
0<this._totalTime)this._client.onAdProgress(this._totalTime/4,this._totalTime)},onAdVideoMidpoint:function(){console.log("CustomAdPlaybackHandler","Inside onAdVideoMidpoint");if(this._client&&0<this._totalTime)this._client.onAdProgress(this._totalTime/2,this._totalTime)},onAdVideoThirdQuartile:function(){console.log("CustomAdPlaybackHandler","Inside onAdVideoThirdQuartile");if(this._client&&0<this._totalTime)this._client.onAdProgress(3*this._totalTime/4,this._totalTime)},onAdProgress:function(a,b){this._totalTime=
a;var c=a-b;console.log("CustomAdPlaybackHandler::Inside onAdProgress");if(this._client)this._client.onAdProgress(c,a)},onAdBegin:function(){console.log("CustomAdPlaybackHandler::Inside onAdBegin");if(null!=this._client)this._client.onAdBegin()},onAdError:function(){if(null!=this._client)this._client.onAdError()},onAdClickThru:function(a){if(null!=this._client)this._client.onAdClickThru(a)}}})();(function(){Primetime.CustomAdPlaybackManagerClient=function(a,b,c,d){this._mainMediaPlayer=a;this._mainMediaPlayerItem=b;this._veTimeline=c;this._factory=d;this.setup();this._currentAdIndex=0;return this};Primetime.CustomAdPlaybackManagerClient.prototype={constructor:Primetime.CustomAdPlaybackManagerClient,setup:function(){this._adHandlers=this._factory.retrieveCustomAdPlaybackHandlersCallbackFunc(this._mainMediaPlayerItem);this._adHandlers||(this._adHandlers=[],this._adHandlers.push(new Primetime.CustomAdPlaybackHandler));
for(var a=0;a<this._adHandlers.length;a++)this._adHandlers[a].configure(this._mainMediaPlayerItem,this);0<this._adHandlers.length&&(this._adPlaybackHandler=this._adHandlers[0])},pauseAd:function(){!0===this._playing&&this._adPlaybackHandler&&this._adPlaybackHandler.pauseAd()},resumeAd:function(){!1===this._playing&&this._adPlaybackHandler&&this._adPlaybackHandler.resumeAd()},onAdProgress:function(a,b){this._adMediaPlayer.onAdProgress(a,b)},onAdBegin:function(){this._playing=!0;this._adMediaPlayer.onPlaybackStarted()},
onAdPaused:function(){this._playing=!1;this._mainMediaPlayer._delegate&&this._mainMediaPlayer._delegate._nativeNotification("pause");return AdobePSDK.PSDKErrorCode.kECSuccess},onAdResumed:function(){this._playing=!0;this._mainMediaPlayer._delegate&&this._mainMediaPlayer._delegate._nativeNotification("playing");return AdobePSDK.PSDKErrorCode.kECSuccess},onAdError:function(){this.onAdEnd()},onAdEnd:function(){this._mainMediaPlayer.virtualTimelineManager.virtualTimelineItemCompletedPlaying()},onAdClickThru:function(a){var b=
this._adMediaPlayer._vpaidAdTimelineItem;b&&(a=new AdobePSDK.AdClick(b.id,null,a),this._mainMediaPlayer._delegate._nativeNotification("adClicked",{adBreak:b.adBreak,ad:b.ad,adClick:a}))},dispose:function(){this._adMediaPlayer=this._mainMediaPlayerItem=this._mainMediaPlayer=null;this._playing=!1;this._currentTime=0;this._adPlaybackHandler&&this._adPlaybackHandler.dispose();this._adHandlers=null;this._currentAdIndex=0;return AdobePSDK.PSDKErrorCode.kECSuccess},isActive:function(){return AdobePSDK.PSDKErrorCode.kECSuccess},
play:function(){return AdobePSDK.PSDKErrorCode.kECSuccess},getCustomAdView:function(){return this._adPlaybackHandler?this._adPlaybackHandler.getCustomAdView():null},setCustomAdTimeout:function(a){if(this._adPlaybackHandler)return this._adPlaybackHandler.setCustomAdTimeout(a)},playCustomAd:function(a,b,c){this._adMediaPlayer=a;return(a=this._getPlaybackHandlerForAd())?(a.initAd(b,c),AdobePSDK.PSDKErrorCode.kECSuccess):AdobePSDK.PSDKErrorCode.kECGenericError},stopCustomAd:function(){if(void 0===this._alreadyReset){var a=
this._getPlaybackHandlerForAd();a&&a.stopAd();this._alreadyReset=!0}},_getPlaybackHandlerForAd:function(){for(var a=null,b=0;b<this._adHandlers.length;b++)a=this._adHandlers[b];return a}}})();(function(){Primetime=Primetime.helper.extend(Primetime,{vpaid:{}})})();(function(){Primetime.LinearVPAIDView=function(a,b){this._customAdHandler=a;this._context=b;this._url=this._iframe=this._VPAIDCreative=null;this._adStatus=Primetime.LinearVPAIDView.State.AdResourceNotLoaded;this._adLoadTimeOut=1E4;this._adLoadTimer=null;this._adDuration=this._adRemainingTime=0;this._slotDiv=null;this._isPaused=!1;this._logPreFix="VPAID >> ";this._video=null;return this};Primetime.LinearVPAIDView.VPAIDEvents={AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",
AdLinearChange:"AdLinearChange",AdSizeChange:"AdSizeChange",AdExpandedChange:"AdExpandedChange",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",
AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError",AdLog:"AdLog"};Primetime.LinearVPAIDView.State={AdResourceNotLoaded:"AdResourceNotLoaded",AdResourceLoading:"AdResourceLoading",AdResourceLoaded:"AdResourceLoaded",AdLoaded:Primetime.LinearVPAIDView.VPAIDEvents.AdLoaded,AdStarted:Primetime.LinearVPAIDView.VPAIDEvents.AdStarted};Primetime.LinearVPAIDView.createView=function(){var a=document.createElement("iframe"),
b=this;a.style.position="absolute";a.style.top=0;a.style.left=0;a.style.width="100%";a.style.height="100%";this._customAdView.style.visibility="visible";var c=this._customAdView;c?(c.appendChild(b._video),a.onload=function(){var c=a.contentWindow.document.createElement("script");c.type="text/javascript";c.innerHTML="inDapIF = true;";a.contentWindow.document.body.appendChild(c);c=a.contentWindow.document.createElement("div");c.style.position="absolute";c.style.top=0;c.style.left=0;c.style.width="100%";
c.style.height="100%";a.contentWindow.document.body.appendChild(c);b._slotDiv=c;c=a.contentWindow.document.createElement("script");c.type="text/javascript";c.src=b._url;c.onload=function(){try{var c=a.contentWindow.getVPAIDAd;c&&"function"==typeof c&&(b._VPAIDCreative=c(),!1===Primetime.LinearVPAIDView.checkVPAIDInterface.call(b)&&(b._VPAIDCreative=null));b._VPAIDCreative?(b._VPAIDCreative.handshakeVersion("2.0"),b._adStatus=Primetime.LinearVPAIDView.State.AdResourceLoaded,Primetime.LinearVPAIDView.setupVPAIDCreative.call(b),
b._VPAIDCreative.initAd(a.clientWidth,a.clientHeight,"normal",0,{AdParameters:b._parameters},{videoSlot:b._video,slot:b._slotDiv})):(console.log(b._logPreFix+"Couldn't get valid getVPAIDAd function in VPAID ad"),Primetime.LinearVPAIDView.onAdError.call(b))}catch(d){console.log(b._logPreFix+"Error in calling initAd of Ad Unit"),Primetime.LinearVPAIDView.onAdError.call(b)}};a.contentWindow.document.body.appendChild(c)},b._adStatus=Primetime.LinearVPAIDView.State.AdResourceLoading,b._iframe=a,c.appendChild(a),
a.contentWindow?a.contentWindow.onresize=function(){b._VPAIDCreative&&b._VPAIDCreative.resizeAd(b._iframe.clientWidth,b._iframe.clientHeight,"normal")}:console.log(this._logPreFix+"Error in loading iframe")):console.log(this._logPreFix+"Couldn't get top level Div")};Primetime.LinearVPAIDView.setupVPAIDCreative=function(){this._VPAIDCreative&&(this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdStarted.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdStarted,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdStopped.bind(this),
Primetime.LinearVPAIDView.VPAIDEvents.AdStopped,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdSkipped.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdSkipped,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdLoaded.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdLoaded,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdLinearChange.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdLinearChange,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdSizeChange.bind(this),
Primetime.LinearVPAIDView.VPAIDEvents.AdSizeChange,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdExpandedChange.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdExpandedChange,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdSkippableStateChange.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdSkippableStateChange,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdDurationChange.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdDurationChange,
this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdRemainingTimeChange.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdRemainingTimeChange,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdVolumeChange.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdVolumeChange,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdImpression.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdImpression,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdClickThru.bind(this),
Primetime.LinearVPAIDView.VPAIDEvents.AdClickThru,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdInteraction.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdInteraction,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdVideoStart.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdVideoStart,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdVideoFirstQuartile.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdVideoFirstQuartile,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdVideoMidpoint.bind(this),
Primetime.LinearVPAIDView.VPAIDEvents.AdVideoMidpoint,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdVideoThirdQuartile.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdVideoThirdQuartile,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdVideoComplete.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdVideoComplete,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdUserAcceptInvitation.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdUserAcceptInvitation,
this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdUserMinimize.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdUserMinimize,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdUserClose.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdUserClose,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdPaused.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdPaused,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdPlaying.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdPlaying,
this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdError.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdError,this),this._VPAIDCreative.subscribe(Primetime.LinearVPAIDView.onAdLog.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdLog,this))};Primetime.LinearVPAIDView.cleanUpVPAIDCreative=function(){this._VPAIDCreative&&(this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdStarted.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdStarted,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdStopped.bind(this),
Primetime.LinearVPAIDView.VPAIDEvents.AdStopped,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdSkipped.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdSkipped,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdLoaded.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdLoaded,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdLinearChange.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdLinearChange,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdSizeChange.bind(this),
Primetime.LinearVPAIDView.VPAIDEvents.AdSizeChange,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdExpandedChange.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdExpandedChange,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdSkippableStateChange.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdSkippableStateChange,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdDurationChange.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdDurationChange,
this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdRemainingTimeChange.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdRemainingTimeChange,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdVolumeChange.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdVolumeChange,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdImpression.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdImpression,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdClickThru.bind(this),
Primetime.LinearVPAIDView.VPAIDEvents.AdClickThru,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdInteraction.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdInteraction,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdVideoStart.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdVideoStart,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdVideoFirstQuartile.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdVideoFirstQuartile,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdVideoMidpoint.bind(this),
Primetime.LinearVPAIDView.VPAIDEvents.AdVideoMidpoint,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdVideoThirdQuartile.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdVideoThirdQuartile,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdVideoComplete.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdVideoComplete,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdUserAcceptInvitation.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdUserAcceptInvitation,
this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdUserMinimize.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdUserMinimize,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdUserClose.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdUserClose,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdPaused.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdPaused,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdPlaying.bind(this),
Primetime.LinearVPAIDView.VPAIDEvents.AdPlaying,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdError.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdError,this),this._VPAIDCreative.unsubscribe(Primetime.LinearVPAIDView.onAdLog.bind(this),Primetime.LinearVPAIDView.VPAIDEvents.AdLog,this),this._VPAIDCreative=null)};Primetime.LinearVPAIDView.checkVPAIDInterface=function(){var a=this._VPAIDCreative;if(a&&a.handshakeVersion&&"function"==typeof a.handshakeVersion&&a.initAd&&"function"==
typeof a.initAd&&a.startAd&&"function"==typeof a.startAd&&a.stopAd&&"function"==typeof a.stopAd&&a.skipAd&&"function"==typeof a.skipAd&&a.resizeAd&&"function"==typeof a.resizeAd&&a.pauseAd&&"function"==typeof a.pauseAd&&a.resumeAd&&"function"==typeof a.resumeAd&&a.expandAd&&"function"==typeof a.expandAd&&a.collapseAd&&"function"==typeof a.collapseAd&&a.getAdDuration&&"function"==typeof a.getAdDuration&&a.getAdRemainingTime&&"function"==typeof a.getAdRemainingTime&&a.subscribe&&"function"==typeof a.subscribe&&
a.unsubscribe&&"function"==typeof a.unsubscribe)return!0;console.log(this._logPreFix+"Ad Unit doesn't have all required functions");return!1};Primetime.LinearVPAIDView.onAdLoaded=function(){console.log(this._logPreFix+"Ad Unit has been loaded");try{this._adStatus=Primetime.LinearVPAIDView.State.AdLoaded,this._VPAIDCreative&&this._VPAIDCreative.startAd()}catch(a){console.log(this._logPreFix+"Error in calling startAd of Ad Unit"),Primetime.LinearVPAIDView.onAdError.call(this)}};Primetime.LinearVPAIDView.onAdStopped=
function(){console.log(this._logPreFix+"Ad Unit has been Stopped");this.reset();if(this._customAdHandler)this._customAdHandler.onAdFinished()};Primetime.LinearVPAIDView.onAdSkipped=function(){};Primetime.LinearVPAIDView.onAdLinearChange=function(){};Primetime.LinearVPAIDView.onAdSizeChange=function(){};Primetime.LinearVPAIDView.onAdExpandedChange=function(){};Primetime.LinearVPAIDView.onAdSkippableStateChange=function(){};Primetime.LinearVPAIDView.onAdDurationChange=function(){console.log(this._logPreFix+
"Ad Unit duration has been changed");this._adDuration=this._VPAIDCreative.getAdDuration();if(isNaN(this._adDuration)||0>this._adDuration)this._adDuration=0};Primetime.LinearVPAIDView.onAdVolumeChange=function(){};Primetime.LinearVPAIDView.onAdImpression=function(){};Primetime.LinearVPAIDView.onAdClickThru=function(a,b,c){console.log(this._logPreFix+"Ad Unit ClickThru");if(!0===c&&this._customAdHandler&&a&&0<a.length)this._customAdHandler.onAdClickThru(a)};Primetime.LinearVPAIDView.onAdInteraction=
function(){};Primetime.LinearVPAIDView.onAdUserAcceptInvitation=function(){};Primetime.LinearVPAIDView.onAdUserMinimize=function(){};Primetime.LinearVPAIDView.onAdUserClose=function(){};Primetime.LinearVPAIDView.onAdPaused=function(){this._isPaused=!0;if(this._customAdHandler)this._customAdHandler.onAdPaused()};Primetime.LinearVPAIDView.onAdPlaying=function(){this._isPaused=!1;if(this._customAdHandler)this._customAdHandler.onAdResumed()};Primetime.LinearVPAIDView.onAdError=function(){console.log(this._logPreFix+
"Handling Ad unit error");this.reset();if(this._customAdHandler)this._customAdHandler.onAdError()};Primetime.LinearVPAIDView.onAdLog=function(){};Primetime.LinearVPAIDView.onAdStarted=function(){console.log(this._logPreFix+"Ad Unit has been started");this._adStatus=Primetime.LinearVPAIDView.State.AdStarted;this._adLoadTimer&&(clearTimeout(this._adLoadTimer),this._adLoadTimer=null);this._adRemainingTime=this._VPAIDCreative.getAdRemainingTime();if(isNaN(this._adRemainingTime)||0>this._adRemainingTime)this._adRemainingTime=
0;this._adDuration=this._VPAIDCreative.getAdDuration();if(isNaN(this._adDuration)||0>this._adDuration)this._adDuration=0;if(this._customAdHandler)this._customAdHandler.onAdBegin()};Primetime.LinearVPAIDView.onAdVideoStart=function(){};Primetime.LinearVPAIDView.onAdVideoFirstQuartile=function(){console.log(this._logPreFix+"Ad Video First Quartile");if(this._customAdHandler)this._customAdHandler.onAdVideoFirstQuartile()};Primetime.LinearVPAIDView.onAdVideoMidpoint=function(){console.log(this._logPreFix+
"Ad Video Midpoint");if(this._customAdHandler)this._customAdHandler.onAdVideoMidpoint()};Primetime.LinearVPAIDView.onAdVideoThirdQuartile=function(){console.log(this._logPreFix+"Ad Video Third Quartile");if(this._customAdHandler)this._customAdHandler.onAdVideoThirdQuartile()};Primetime.LinearVPAIDView.onAdVideoComplete=function(){console.log(this._logPreFix+"Ad Video Complete")};Primetime.LinearVPAIDView.onAdRemainingTimeChange=function(){try{this._adRemainingTime=this._VPAIDCreative.getAdRemainingTime();
if(isNaN(this._adRemainingTime)||0>this._adRemainingTime)this._adRemainingTime=0;this._adDuration<this._adRemainingTime&&(this._adDuration=this._adRemainingTime);console.log(this._logPreFix+"onAdRemainingTimeChange Total = "+this._adDuration+" Remanining = "+this._adRemainingTime);if(this._customAdHandler&&0<this._adDuration&&0<=this._adRemainingTime)this._customAdHandler.onAdProgress(this._adDuration,this._adRemainingTime)}catch(a){console.log(this._logPreFix+"Error in onAdRemainingTimeChange")}};
Primetime.LinearVPAIDView._adLoadTimerHandler=function(){this._adLoadTimer=null;var a="";this._adStatus==Primetime.LinearVPAIDView.State.AdResourceNotLoaded||this._adStatus==Primetime.LinearVPAIDView.State.AdResourceLoading?a="Ad resource failed to load.":this._adStatus==Primetime.LinearVPAIDView.State.AdResourceLoaded?a="Ad failed to load.":this._adStatus==Primetime.LinearVPAIDView.State.AdLoaded&&(a="Ad failed to start.");console.log(this._logPreFix+"Timeout in loading VPAID ad. Current ad status : "+
this._adStatus+"Message : "+a);Primetime.LinearVPAIDView.onAdError.call(this)};Primetime.LinearVPAIDView._playCustomAd=function(a,b,c){console.log(this._logPreFix+"Play Custom Ad : "+a);this._customAdView?(this._url=a,this._parameters=b,this._video=c,this._adLoadTimer=setTimeout(Primetime.LinearVPAIDView._adLoadTimerHandler.bind(this),this._adLoadTimeOut),Primetime.LinearVPAIDView.createView.call(this)):(console.log("Custom Ad View has not been created"),setTimeout(Primetime.LinearVPAIDView.onAdError.bind(this),
0))};Primetime.LinearVPAIDView._stopCustomAd=function(){try{this._VPAIDCreative&&this._VPAIDCreative.stopAd()}catch(a){}};Primetime.LinearVPAIDView.prototype={constructor:Primetime.LinearVPAIDView,isActive:function(){return this._customAdView&&this._adStatus!=Primetime.LinearVPAIDView.State.AdResourceNotLoaded},reset:function(){Primetime.LinearVPAIDView.cleanUpVPAIDCreative.call(this);this._video&&(this._video.pause(),this._video.src="",this._video.load());this._iframe&&this._iframe.parentNode&&this._iframe.parentNode.removeChild(this._iframe);
this._parameters=this._video=this._url=this._iframe=this._VPAIDCreative=null;this._adStatus=Primetime.LinearVPAIDView.State.AdResourceNotLoaded;this._adLoadTimer&&(clearTimeout(this._adLoadTimer),this._adLoadTimer=null);this._customAdView&&(this._customAdView.style.visibility="hidden");this._adDuration=this._adRemainingTime=0;this._slotDiv=null},playCustomAd:function(a,b,c){this.isActive()?console.log(this._logPreFix+"Already running a VPAID Ad"):Primetime.LinearVPAIDView._playCustomAd.call(this,
a,b,c)},stopCustomAd:function(){this.isActive()?Primetime.LinearVPAIDView._stopCustomAd.call(this):console.log("No VPAID Ad is playing")},getCustomAdView:function(){if(!this._customAdView){var a=document.createElement("div");a.style.position="absolute";a.style.top=0;a.style.left=0;a.style.width="100%";a.style.height="100%";a.style.visibility="hidden";this._customAdView=a}return this._customAdView},setCustomAdTimeout:function(a){this._adLoadTimeOut=a},pauseAd:function(){this._VPAIDCreative&&this._VPAIDCreative.pauseAd()},
resumeAd:function(){this._VPAIDCreative&&this._VPAIDCreative.resumeAd()}}})();(function(){Primetime.vpaid.MediaPlayerImpl=function(){Primetime.vpaid.MediaPlayerImpl.prototype.baseConstructor.call(this);this._callers={}};Primetime.vpaid.MediaPlayerImpl.prototype=Primetime.helper.extend(Primetime.MediaPlayerImpl.prototype,{baseConstructor:Primetime.MediaPlayerImpl.prototype.constructor,constructor:Primetime.vpaid.MediaPlayerImpl,playStream:function(){return this._customAdHandlerClient?(this.hasPlaybackStarted()?this._customAdHandlerClient.resumeAd():this._customAdHandlerClient.playCustomAd(this,
this._mediaResource.url,this._vpaidAd.primaryAsset.parameters),!0):!1},pauseStream:function(){return this._customAdHandlerClient?(this._customAdHandlerClient.pauseAd(),!0):!1},deactivate:function(){this._playbackStarted=!1},addSource:function(a){this._mediaResource=a;this._resourceType=a.type},getStreamAdditionalPlaybackInformationMetrics:function(){return null},subscribe:function(a,b){this._callers[a]=b[a]},unsubscribe:function(a){this._callers&&this._callers.hasOwnProperty(a)&&delete this._callers[a]},
getStreamPlaybackRange:function(){return{start:0,end:0}},hasPlaybackStarted:function(){return this._playbackStarted},onPlaybackStarted:function(){this._playbackStarted=!0;this._currentProgress=0},getCurrentStreamTime:function(){return this._currentProgress},getTotalTime:function(){return this._totalTime},onAdProgress:function(a,b){this._currentProgress=a;this._totalTime=b},haveCurrentStreamTime:function(){return this.hasPlaybackStarted()},getStreamRate:function(){return 1},getVirtualTimeForLocalTime:function(){return 0},
reset:function(){this.hasPlaybackStarted()&&this._customAdHandlerClient.stopCustomAd();if(this._callers[Primetime.MediaPlayerImpl.Events.ENAME_RESET_COMPLETE])this._callers[Primetime.MediaPlayerImpl.Events.ENAME_RESET_COMPLETE]()},notify:function(){}})})();(function(){var a=function(a){return a?(a.setupDelegate(),a.getDelegate()):null};Primetime.DelegateFactory={createAdClickDelegate:function(a){if(a)return new AdobePSDKEI.AdClick(a.id,a.title,a.url)},createAdAssetDelegate:function(b){if(b){var c=a(b.resource),d=a(b.adClick),e=a(b.metadata);return new AdobePSDKEI.AdAsset(b.id,b.duration,c,d,e)}},createAdBannerAssetDelegate:function(b){if(b){var c=a(b.resource),d=a(b.adClick),e=a(b.metadata);return new AdobePSDKEI.AdBannerAsset(b.id,b.duration,c,b.staticUrl,
d,b.width,b.height,b.resourceType,e,b.trackingClickUrls?b.trackingClickUrls:[],b.impressionUrls?b.impressionUrls:[])}},createContentTrackerDelegate:function(a){if(a)return new AdobePSDKEI.ContentTracker(a)},createAdDelegate:function(b){if(b){var c=a(b.primaryAsset),d=[],e;for(e in b.companionAssets){var f=a(b.companionAssets[e]);f&&d.push(f)}return new AdobePSDKEI.Ad(b.id,b.adType,b.duration,b.isCustomAdMarker,c,d,b.tracker,b.adInsertionType,b.isClickable,b.isVPAIDAd)}},createAdBreakDelegate:function(b){if(b){var c=
[],d;for(d in b.ads){var e=a(b.ads[d]);e&&c.push(e)}return new AdobePSDKEI.AdBreak(c)}},createAdBreakPlacementDelegate:function(b){if(b){var c=a(b.adBreak);b=a(b.placement);return new AdobePSDKEI.AdBreakPlacement(c,b)}},createTimeRangeDelegate:function(a){if(a)return new AdobePSDKEI.TimeRange(a.begin,a.duration)},createBufferControlParametersDelegate:function(a){if(a)return new AdobePSDKEI.BufferControlParameters(a.initialBufferTime,a.playBufferTime)},createPlacementDelegate:function(a){if(a)return new AdobePSDKEI.Placement(a.type,
a.time,a.duration,a.mode)},createMediaResourceDelegate:function(b){if(b){var c;c=a(b.metadata);return new AdobePSDKEI.MediaResource(b.url,b.type,c)}},createMetadataDelegate:function(a){if(a){var c;a instanceof AdobePSDK.AuditudeSettings?c=new AdobePSDKEI.AuditudeSettings:a instanceof AdobePSDK.AdvertisingMetadata?c=new AdobePSDKEI.AdvertisingMetadata:a instanceof AdobePSDK.Metadata&&(c=new AdobePSDKEI.Metadata);return c}},createOpportunityDelegate:function(b){if(b){var c=a(b.placement),d=a(b.settings),
e=a(b.customParams);return new AdobePSDKEI.Opportunity(b.id,c,d,e)}},createTimelineItemDelegate:function(a){if(a)return new AdobePSDKEI.TimelineItem},createTimedMetadataDelegate:function(b){if(b){var c=a(b.type),d=a(b.metadata);return new AdobePSDKEI.TimedMetadata(c,b.time,b.id,b.name,b.content,d)}},createTextFormatDelegate:function(a){if(a)return new AdobePSDKEI.TextFormat(a.font,a.fontColor,a.edgeColor,a.fontEdge,a.backgroundColor,a.fillColor,a.size,a.fontOpacity,a.backgroundOpacity,a.fillOpacity)},
createReservationDelegate:function(a){if(a)return new AdobePSDKEI.Reservation},createABRControlParametersDelegate:function(a){if(a)return new AdobePSDKEI.ABRControlParameters(a.initialBitRate,a.minBitRate,a.maxBitRate,a.abrPolicy,a.minTrickPlayBitRate,a.maxTrickPlayBitRate,a.maxTrickPlayBandwidthUsage,a.maxPlayoutRate)},createQOSProviderDelegate:function(a){if(a)return new AdobePSDKEI.QOSProvider},createTimelineDelegate:function(a){if(a)return new AdobePSDKEI.Timeline},createProfileDelegate:function(a){if(a)return new AdobePSDKEI.Profile},
createPlaybackMetricsDelegate:function(a){if(a)return new AdobePSDKEI.PlaybackMetrics},createPlaybackInformationDelegate:function(a){if(a)return new AdobePSDKEI.PlaybackInformation(a.timeToFirstByte,a.timeToLoad,a.timeToPrepare,a.timeToStart,a.timeToFail,a.totalSecondsPlayed,a.totalSecondsSpent,a.frameRate,a.droppedFrameCount,a.perceivedBandwidth,a.bitRate,a.bufferTime,a.bufferLength,a.emptyBufferCount,a.bufferingTime)},createNotificationDelegate:function(b){if(b){var c=a(b.metadata);return new AdobePSDKEI.Notification(b.type,
b.errorCode,c,null)}},createNetworkConfigurationDelegate:function(a){if(a)return new AdobePSDKEI.NetworkConfiguration},createMediaPlayerViewDelegate:function(a){if(a)return new AdobePSDKEI.MediaPlayerView},createMediaPlayerItemConfigDelegate:function(a){if(a)return new AdobePSDKEI.MediaPlayerItemConfig},createMediaPlayerItemDelegate:function(a){if(a)return new AdobePSDKEI.MediaPlayerItem},createLoadInformationDelegate:function(a){if(a)return new AdobePSDKEI.LoadInformation},createClosedCaptionsTrackDelegate:function(a){if(a)return new AdobePSDKEI.ClosedCaptionsTrack(a.name,
a.language,a.isDefault,a.isAutoSelect,a.serviceType,a.isForced)},createAudioTrackDelegate:function(a){if(a)return new AdobePSDKEI.AudioTrack(a.name,a.language,a.isDefault,a.autoSelect)},createAdTimelineItemDelegate:function(b){if(b){var c=a(b.virtualRange),d=a(b.localRangeDelegate),e=a(b.adBreak),f=a(b.adDelegate);return new AdobePSDKEI.AdTimelineItem(b.id,c,d,e,f)}},createAdPolicyInfoDelegate:function(a){if(a)return new AdobePSDKEI.AdPolicyInfo},createAdBreakTimelineItemDelegate:function(a){if(a)return new AdobePSDKEI.AdBreakTimelineItem},
createAdvertisingMetadataDelegate:function(a){if(a){var c;a instanceof AdobePSDK.AuditudeSettings?c=new AdobePSDKEI.AuditudeSettings:a instanceof AdobePSDK.AdvertisingMetadata&&(c=new AdobePSDKEI.AdvertisingMetadata);return c}},createAuditudeSettingsDelegate:function(a){if(a)return new AdobePSDKEI.AuditudeSettings},createVideoAnalyticsMetadataDelegate:function(a){if(a)return new AdobePSDKEI.VideoAnalyticsMetadata},CreateVideoAnalyticsChapterDataDelegate:function(a){if(a)return new AdobePSDKEI.VideoAnalyticsChapterData(a.startTime)},
createReplaceTimeRangeDelegate:function(a){return new AdobePSDKEI.ReplaceTimeRange(a.begin,a.duration,a.replaceDuration)},createCustomRangeMetadataDelegate:function(a){if(a)return new AdobePSDKEI.CustomRangeMetadata},createTagDecoderDelegate:function(a){if(a)return new AdobePSDKEI.TagDecoder(a)},createTrackDelegate:function(a){if(a)return new AdobePSDKEI.Track(a.name,a.language,a.isDefault,a.isAutoSelect)},createDRMMetadataInfoDelegate:function(a){if(a)return new AdobePSDKEI.DRMMetadataInfo},createDeleteRangeTimelineOperationDelegate:function(b){if(b)return b=
a(b.placement),new AdobePSDKEI.DeleteRangeTimelineOperation(b)},createMediaPlayerItemLoaderDelegate:function(a){if(a)return new AdobePSDKEI.MediaPlayerItemLoader},createDeviceInformationDelegate:function(a){if(a)return new AdobePSDKEI.DeviceInformation},createBillingMetricsConfigurationDelegate:function(a){if(a)return new AdobePSDKEI.BillingMetricsConfiguration}}})();
